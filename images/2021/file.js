parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"ss9M":[function(require,module,exports) {
module.exports=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)};
},{}],"hG0x":[function(require,module,exports) {
function r(){return(r=Object.assign||function(r){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r}).apply(this,arguments)}var t=require("./hasProperty");module.exports=function(){function n(r){var t=this;this.locale={strings:{},pluralize:function(r){return 1===r?0:1}},Array.isArray(r)?r.forEach(function(r){return t._apply(r)}):this._apply(r)}var i=n.prototype;return i._apply=function(t){if(t&&t.strings){var n=this.locale;this.locale=r({},n,{strings:r({},n.strings,t.strings)}),this.locale.pluralize=t.pluralize||n.pluralize}},i.interpolate=function(r,n){var i=String.prototype,e=i.split,a=i.replace,o=/\$/g,s=[r];for(var l in n)if("_"!==l&&t(n,l)){var u=n[l];"string"==typeof u&&(u=a.call(n[l],o,"$$$$")),s=p(s,new RegExp("%\\{"+l+"\\}","g"),u)}return s;function p(r,t,n){var i=[];return r.forEach(function(r){if("string"!=typeof r)return i.push(r);e.call(r,t).forEach(function(r,t,e){""!==r&&i.push(r),t<e.length-1&&i.push(n)})}),i}},i.translate=function(r,t){return this.translateArray(r,t).join("")},i.translateArray=function(r,n){if(!t(this.locale.strings,r))throw new Error("missing string: "+r);var i=this.locale.strings[r];if("object"==typeof i){if(n&&void 0!==n.smart_count){var e=this.locale.pluralize(n.smart_count);return this.interpolate(i[e],n)}throw new Error("Attempted to use a string with plural forms, but no value was given for %{smart_count}")}return this.interpolate(i,n)},n}();
},{"./hasProperty":"ss9M"}],"X4LQ":[function(require,module,exports) {
module.exports=function(){var n={},t=n._fns={};return n.emit=function(n,f,e,o,i,r,s){var u=function(n){var f=t[n]?t[n]:[],e=n.indexOf(":"),o=-1===e?[n]:[n.substring(0,e),n.substring(e+1)],i=Object.keys(t),r=0,s=i.length;for(;r<s;r++){var u=i[r];if("*"===u&&(f=f.concat(t[u])),2===o.length&&o[0]===u){f=f.concat(t[u]);break}}return f}(n);u.length&&function(n,t,f){var e=0,o=t.length;for(;e<o&&t[e];e++)t[e].event=n,t[e].apply(t[e],f)}(n,u,[f,e,o,i,r,s])},n.on=function(n,f){t[n]||(t[n]=[]),t[n].push(f)},n.once=function(t,f){this.on(t,function e(){f.apply(this,arguments),n.off(t,e)})},n.off=function(n,t){var f=[];if(n&&t)for(var e=this._fns[n],o=0,i=e?e.length:0;o<i;o++)e[o]!==t&&f.push(e[o]);f.length?this._fns[n]=f:delete this._fns[n]},n};
},{}],"iQW2":[function(require,module,exports) {
module.exports=function(r,t){var e="000000000"+r;return e.substr(e.length-t)};
},{}],"pKcM":[function(require,module,exports) {
var e=require("./pad.js"),t="object"==typeof window?window:self,n=Object.keys(t).length,o=navigator.mimeTypes?navigator.mimeTypes.length:0,r=e((o+navigator.userAgent.length).toString(36)+n.toString(36),4);module.exports=function(){return r};
},{"./pad.js":"iQW2"}],"dB3a":[function(require,module,exports) {
var e,n="undefined"!=typeof window&&(window.crypto||window.msCrypto)||"undefined"!=typeof self&&self.crypto;if(n){var o=Math.pow(2,32)-1;e=function(){return Math.abs(n.getRandomValues(new Uint32Array(1))[0]/o)}}else e=Math.random;module.exports=e;
},{}],"EdMi":[function(require,module,exports) {
var t=require("./lib/fingerprint.js"),r=require("./lib/pad.js"),e=require("./lib/getRandomValue.js"),i=0,n=4,u=36,o=Math.pow(u,n);function s(){return r((e()*o<<0).toString(u),n)}function g(){return i=i<o?i:0,++i-1}function c(){return"c"+(new Date).getTime().toString(u)+r(g().toString(u),n)+t()+(s()+s())}c.slug=function(){var r=(new Date).getTime().toString(36),e=g().toString(36).slice(-4),i=t().slice(0,1)+t().slice(-1),n=s().slice(-2);return r.slice(-2)+e+i+n},c.isCuid=function(t){return"string"==typeof t&&!!t.startsWith("c")},c.isSlug=function(t){if("string"!=typeof t)return!1;var r=t.length;return r>=7&&r<=10},c.fingerprint=t,module.exports=c;
},{"./lib/fingerprint.js":"pKcM","./lib/pad.js":"iQW2","./lib/getRandomValue.js":"dB3a"}],"Ai1e":[function(require,module,exports) {
var global = arguments[3];
var t=arguments[3],n="Expected a function",e=NaN,i="[object Symbol]",r=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,f=/^0o[0-7]+$/i,a=parseInt,c="object"==typeof t&&t&&t.Object===Object&&t,l="object"==typeof self&&self&&self.Object===Object&&self,s=c||l||Function("return this")(),v=Object.prototype,p=v.toString,y=Math.max,d=Math.min,m=function(){return s.Date.now()};function b(t,e,i){var r,o,u,f,a,c,l=0,s=!1,v=!1,p=!0;if("function"!=typeof t)throw new TypeError(n);function b(n){var e=r,i=o;return r=o=void 0,l=n,f=t.apply(i,e)}function g(t){var n=t-c;return void 0===c||n>=e||n<0||v&&t-l>=u}function h(){var t=m();if(g(t))return x(t);a=setTimeout(h,function(t){var n=e-(t-c);return v?d(n,u-(t-l)):n}(t))}function x(t){return a=void 0,p&&r?b(t):(r=o=void 0,f)}function T(){var t=m(),n=g(t);if(r=arguments,o=this,c=t,n){if(void 0===a)return function(t){return l=t,a=setTimeout(h,e),s?b(t):f}(c);if(v)return a=setTimeout(h,e),b(c)}return void 0===a&&(a=setTimeout(h,e)),f}return e=O(e)||0,j(i)&&(s=!!i.leading,u=(v="maxWait"in i)?y(O(i.maxWait)||0,e):u,p="trailing"in i?!!i.trailing:p),T.cancel=function(){void 0!==a&&clearTimeout(a),l=0,r=c=o=a=void 0},T.flush=function(){return void 0===a?f:x(m())},T}function g(t,e,i){var r=!0,o=!0;if("function"!=typeof t)throw new TypeError(n);return j(i)&&(r="leading"in i?!!i.leading:r,o="trailing"in i?!!i.trailing:o),b(t,e,{leading:r,maxWait:e,trailing:o})}function j(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}function h(t){return!!t&&"object"==typeof t}function x(t){return"symbol"==typeof t||h(t)&&p.call(t)==i}function O(t){if("number"==typeof t)return t;if(x(t))return e;if(j(t)){var n="function"==typeof t.valueOf?t.valueOf():t;t=j(n)?n+"":n}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(r,"");var i=u.test(t);return i||f.test(t)?a(t.slice(2),i?2:8):o.test(t)?e:+t}module.exports=g;
},{}],"n6LF":[function(require,module,exports) {
module.exports=function(t){if("number"!=typeof t||isNaN(t))throw new TypeError("Expected a number, got "+typeof t);var e=t<0,r=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];if(e&&(t=-t),t<1)return(e?"-":"")+t+" B";var o=Math.min(Math.floor(Math.log(t)/Math.log(1024)),r.length-1);t=Number(t/Math.pow(1024,o));var a=r[o];return t>=10||t%1==0?(e?"-":"")+t.toFixed(0)+" "+a:(e?"-":"")+t.toFixed(1)+" "+a};
},{}],"WZ63":[function(require,module,exports) {
"use strict";function t(t,i){this.text=t=t||"",this.hasWild=~t.indexOf("*"),this.separator=i,this.parts=t.split(i)}t.prototype.match=function(t){var i,e,s=!0,n=this.parts,r=n.length;if("string"==typeof t||t instanceof String)if(this.hasWild||this.text==t){for(e=(t||"").split(this.separator),i=0;s&&i<r;i++)"*"!==n[i]&&(s=i<e.length&&n[i]===e[i]);s=s&&e}else s=!1;else if("function"==typeof t.splice)for(s=[],i=t.length;i--;)this.match(t[i])&&(s[s.length]=t[i]);else if("object"==typeof t)for(var h in s={},t)this.match(h)&&(s[h]=t[h]);return s},module.exports=function(i,e,s){var n=new t(i,s||/[\/\.]/);return void 0!==e?n.match(e):n};
},{}],"VXmW":[function(require,module,exports) {
var r=require("wildcard"),e=/[\/\+\.]/;module.exports=function(n,t){function u(t){var u=r(t,n,e);return u&&u.length>=2}return t?u(t.split(";")[0]):u};
},{"wildcard":"WZ63"}],"S67I":[function(require,module,exports) {
function t(){return(t=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t}).apply(this,arguments)}var n=function(){function n(){this.state={},this.callbacks=[]}var a=n.prototype;return a.getState=function(){return this.state},a.setState=function(n){var a=t({},this.state),r=t({},this.state,n);this.state=r,this._publish(a,r,n)},a.subscribe=function(t){var n=this;return this.callbacks.push(t),function(){n.callbacks.splice(n.callbacks.indexOf(t),1)}},a._publish=function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];this.callbacks.forEach(function(t){t.apply(void 0,n)})},n}();n.VERSION="1.2.6",module.exports=function(){return new n};
},{}],"a2Nq":[function(require,module,exports) {
module.exports=function(e){var n=e.lastIndexOf(".");return-1===n||n===e.length-1?{name:e,extension:void 0}:{name:e.slice(0,n),extension:e.slice(n+1)}};
},{}],"R0tD":[function(require,module,exports) {
module.exports={md:"text/markdown",markdown:"text/markdown",mp4:"video/mp4",mp3:"audio/mp3",svg:"image/svg+xml",jpg:"image/jpeg",png:"image/png",gif:"image/gif",heic:"image/heic",heif:"image/heif",yaml:"text/yaml",yml:"text/yaml",csv:"text/csv",tsv:"text/tab-separated-values",tab:"text/tab-separated-values",avi:"video/x-msvideo",mks:"video/x-matroska",mkv:"video/x-matroska",mov:"video/quicktime",doc:"application/msword",docm:"application/vnd.ms-word.document.macroenabled.12",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",dot:"application/msword",dotm:"application/vnd.ms-word.template.macroenabled.12",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",xla:"application/vnd.ms-excel",xlam:"application/vnd.ms-excel.addin.macroenabled.12",xlc:"application/vnd.ms-excel",xlf:"application/x-xliff+xml",xlm:"application/vnd.ms-excel",xls:"application/vnd.ms-excel",xlsb:"application/vnd.ms-excel.sheet.binary.macroenabled.12",xlsm:"application/vnd.ms-excel.sheet.macroenabled.12",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xlt:"application/vnd.ms-excel",xltm:"application/vnd.ms-excel.template.macroenabled.12",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",xlw:"application/vnd.ms-excel",txt:"text/plain",text:"text/plain",conf:"text/plain",log:"text/plain",pdf:"application/pdf",zip:"application/zip","7z":"application/x-7z-compressed",rar:"application/x-rar-compressed",tar:"application/x-tar",gz:"application/gzip",dmg:"application/x-apple-diskimage"};
},{}],"Vbpm":[function(require,module,exports) {
var e=require("./getFileNameAndExtension"),n=require("./mimeTypes");module.exports=function(t){var r=t.name?e(t.name).extension:null;return r=r?r.toLowerCase():null,t.type?t.type:r&&n[r]?n[r]:"application/octet-stream"};
},{"./getFileNameAndExtension":"a2Nq","./mimeTypes":"R0tD"}],"nk61":[function(require,module,exports) {
function t(t){var a="";return t.replace(/[^A-Z0-9]/gi,function(t){return a+="-"+e(t),"/"})+a}function e(t){return t.charCodeAt(0).toString(32)}module.exports=function(e){var a="uppy";return"string"==typeof e.name&&(a+="-"+t(e.name.toLowerCase())),void 0!==e.type&&(a+="-"+e.type),e.meta&&"string"==typeof e.meta.relativePath&&(a+="-"+t(e.meta.relativePath.toLowerCase())),void 0!==e.data.size&&(a+="-"+e.data.size),void 0!==e.data.lastModified&&(a+="-"+e.data.lastModified),a};
},{}],"ADhK":[function(require,module,exports) {
module.exports=function(r,e){for(var n=0;n<r.length;n++)if(e(r[n]))return n;return-1};
},{}],"A5ga":[function(require,module,exports) {
module.exports=function(e){if(null==e&&(e="undefined"!=typeof navigator?navigator.userAgent:null),!e)return!0;var n=/Edge\/(\d+\.\d+)/.exec(e);if(!n)return!0;var r=n[1].split("."),t=r[0],u=r[1];return t=parseInt(t,10),u=parseInt(u,10),t<15||15===t&&u<15063||(t>18||18===t&&u>=18218)};
},{}],"xju1":[function(require,module,exports) {
function t(t){return 2!==t.length?0+t:t}module.exports=function(){var n=new Date;return t(n.getHours().toString())+":"+t(n.getMinutes().toString())+":"+t(n.getSeconds().toString())};
},{}],"i2Hz":[function(require,module,exports) {
var r=require("@uppy/utils/lib/getTimeStamp"),n={debug:function(){},warn:function(){},error:function(){for(var n,o=arguments.length,e=new Array(o),a=0;a<o;a++)e[a]=arguments[a];return(n=console).error.apply(n,["[Uppy] ["+r()+"]"].concat(e))}},o={debug:function(){for(var n=console.debug||console.log,o=arguments.length,e=new Array(o),a=0;a<o;a++)e[a]=arguments[a];n.call.apply(n,[console,"[Uppy] ["+r()+"]"].concat(e))},warn:function(){for(var n,o=arguments.length,e=new Array(o),a=0;a<o;a++)e[a]=arguments[a];return(n=console).warn.apply(n,["[Uppy] ["+r()+"]"].concat(e))},error:function(){for(var n,o=arguments.length,e=new Array(o),a=0;a<o;a++)e[a]=arguments[a];return(n=console).error.apply(n,["[Uppy] ["+r()+"]"].concat(e))}};module.exports={justErrorsLogger:n,debugLogger:o};
},{"@uppy/utils/lib/getTimeStamp":"xju1"}],"sSEx":[function(require,module,exports) {
"use strict";function e(){}Object.defineProperty(exports,"__esModule",{value:!0}),exports.createElement=exports.h=r,exports.cloneElement=a,exports.Component=j,exports.render=z,exports.rerender=u,exports.options=exports.default=void 0;var t={};exports.options=t;var n=[],o=[];function r(r,i){var l,a,p,s,c=o;for(s=arguments.length;s-- >2;)n.push(arguments[s]);for(i&&null!=i.children&&(n.length||n.push(i.children),delete i.children);n.length;)if((a=n.pop())&&void 0!==a.pop)for(s=a.length;s--;)n.push(a[s]);else"boolean"==typeof a&&(a=null),(p="function"!=typeof r)&&(null==a?a="":"number"==typeof a?a=String(a):"string"!=typeof a&&(p=!1)),p&&l?c[c.length-1]+=a:c===o?c=[a]:c.push(a),l=p;var u=new e;return u.nodeName=r,u.children=c,u.attributes=null==i?void 0:i,u.key=null==i?void 0:i.key,void 0!==t.vnode&&t.vnode(u),u}function i(e,t){for(var n in t)e[n]=t[n];return e}var l="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout;function a(e,t){return r(e.nodeName,i(i({},e.attributes),t),arguments.length>2?[].slice.call(arguments,2):e.children)}var p=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,s=[];function c(e){!e._dirty&&(e._dirty=!0)&&1==s.push(e)&&(t.debounceRendering||l)(u)}function u(){var e,t=s;for(s=[];e=t.pop();)e._dirty&&A(e)}function f(e,t,n){return"string"==typeof t||"number"==typeof t?void 0!==e.splitText:"string"==typeof t.nodeName?!e._componentConstructor&&d(e,t.nodeName):n||e._componentConstructor===t.nodeName}function d(e,t){return e.normalizedNodeName===t||e.nodeName.toLowerCase()===t.toLowerCase()}function v(e){var t=i({},e.attributes);t.children=e.children;var n=e.nodeName.defaultProps;if(void 0!==n)for(var o in n)void 0===t[o]&&(t[o]=n[o]);return t}function _(e,t){var n=t?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return n.normalizedNodeName=e,n}function m(e){var t=e.parentNode;t&&t.removeChild(e)}function h(e,t,n,o,r){if("className"===t&&(t="class"),"key"===t);else if("ref"===t)n&&n(null),o&&o(e);else if("class"!==t||r)if("style"===t){if(o&&"string"!=typeof o&&"string"!=typeof n||(e.style.cssText=o||""),o&&"object"==typeof o){if("string"!=typeof n)for(var i in n)i in o||(e.style[i]="");for(var i in o)e.style[i]="number"==typeof o[i]&&!1===p.test(i)?o[i]+"px":o[i]}}else if("dangerouslySetInnerHTML"===t)o&&(e.innerHTML=o.__html||"");else if("o"==t[0]&&"n"==t[1]){var l=t!==(t=t.replace(/Capture$/,""));t=t.toLowerCase().substring(2),o?n||e.addEventListener(t,y,l):e.removeEventListener(t,y,l),(e._listeners||(e._listeners={}))[t]=o}else if("list"!==t&&"type"!==t&&!r&&t in e)b(e,t,null==o?"":o),null!=o&&!1!==o||e.removeAttribute(t);else{var a=r&&t!==(t=t.replace(/^xlink:?/,""));null==o||!1===o?a?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.removeAttribute(t):"function"!=typeof o&&(a?e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),o):e.setAttribute(t,o))}else e.className=o||""}function b(e,t,n){try{e[t]=n}catch(o){}}function y(e){return this._listeners[e.type](t.event&&t.event(e)||e)}var x=[],C=0,g=!1,N=!1;function k(){for(var e;e=x.pop();)t.afterMount&&t.afterMount(e),e.componentDidMount&&e.componentDidMount()}function w(e,t,n,o,r,i){C++||(g=null!=r&&void 0!==r.ownerSVGElement,N=null!=e&&!("__preactattr_"in e));var l=S(e,t,n,o,i);return r&&l.parentNode!==r&&r.appendChild(l),--C||(N=!1,i||k()),l}function S(e,t,n,o,r){var i=e,l=g;if(null!=t&&"boolean"!=typeof t||(t=""),"string"==typeof t||"number"==typeof t)return e&&void 0!==e.splitText&&e.parentNode&&(!e._component||r)?e.nodeValue!=t&&(e.nodeValue=t):(i=document.createTextNode(t),e&&(e.parentNode&&e.parentNode.replaceChild(i,e),L(e,!0))),i.__preactattr_=!0,i;var a=t.nodeName;if("function"==typeof a)return D(e,t,n,o);if(g="svg"===a||"foreignObject"!==a&&g,a=String(a),(!e||!d(e,a))&&(i=_(a,g),e)){for(;e.firstChild;)i.appendChild(e.firstChild);e.parentNode&&e.parentNode.replaceChild(i,e),L(e,!0)}var p=i.firstChild,s=i.__preactattr_,c=t.children;if(null==s){s=i.__preactattr_={};for(var u=i.attributes,f=u.length;f--;)s[u[f].name]=u[f].value}return!N&&c&&1===c.length&&"string"==typeof c[0]&&null!=p&&void 0!==p.splitText&&null==p.nextSibling?p.nodeValue!=c[0]&&(p.nodeValue=c[0]):(c&&c.length||null!=p)&&U(i,c,n,o,N||null!=s.dangerouslySetInnerHTML),P(i,t.attributes,s),g=l,i}function U(e,t,n,o,r){var i,l,a,p,s,c=e.childNodes,u=[],d={},v=0,_=0,h=c.length,b=0,y=t?t.length:0;if(0!==h)for(var x=0;x<h;x++){var C=c[x],g=C.__preactattr_;null!=(N=y&&g?C._component?C._component.__key:g.key:null)?(v++,d[N]=C):(g||(void 0!==C.splitText?!r||C.nodeValue.trim():r))&&(u[b++]=C)}if(0!==y)for(x=0;x<y;x++){var N;if(s=null,null!=(N=(p=t[x]).key))v&&void 0!==d[N]&&(s=d[N],d[N]=void 0,v--);else if(!s&&_<b)for(i=_;i<b;i++)if(void 0!==u[i]&&f(l=u[i],p,r)){s=l,u[i]=void 0,i===b-1&&b--,i===_&&_++;break}s=S(s,p,n,o),a=c[x],s&&s!==e&&s!==a&&(null==a?e.appendChild(s):s===a.nextSibling?m(a):e.insertBefore(s,a))}if(v)for(var x in d)void 0!==d[x]&&L(d[x],!1);for(;_<=b;)void 0!==(s=u[b--])&&L(s,!1)}function L(e,t){var n=e._component;n?H(n):(null!=e.__preactattr_&&e.__preactattr_.ref&&e.__preactattr_.ref(null),!1!==t&&null!=e.__preactattr_||m(e),M(e))}function M(e){for(e=e.lastChild;e;){var t=e.previousSibling;L(e,!0),e=t}}function P(e,t,n){var o;for(o in n)t&&null!=t[o]||null==n[o]||h(e,o,n[o],n[o]=void 0,g);for(o in t)"children"===o||"innerHTML"===o||o in n&&t[o]===("value"===o||"checked"===o?e[o]:n[o])||h(e,o,n[o],n[o]=t[o],g)}var T={};function B(e){var t=e.constructor.name;(T[t]||(T[t]=[])).push(e)}function E(e,t,n){var o,r=T[e.name];if(e.prototype&&e.prototype.render?(o=new e(t,n),j.call(o,t,n)):((o=new j(t,n)).constructor=e,o.render=W),r)for(var i=r.length;i--;)if(r[i].constructor===e){o.nextBase=r[i].nextBase,r.splice(i,1);break}return o}function W(e,t,n){return this.constructor(e,n)}function V(e,n,o,r,i){e._disable||(e._disable=!0,(e.__ref=n.ref)&&delete n.ref,(e.__key=n.key)&&delete n.key,!e.base||i?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(n,r),r&&r!==e.context&&(e.prevContext||(e.prevContext=e.context),e.context=r),e.prevProps||(e.prevProps=e.props),e.props=n,e._disable=!1,0!==o&&(1!==o&&!1===t.syncComponentUpdates&&e.base?c(e):A(e,1,i)),e.__ref&&e.__ref(e))}function A(e,n,o,r){if(!e._disable){var l,a,p,s=e.props,c=e.state,u=e.context,f=e.prevProps||s,d=e.prevState||c,_=e.prevContext||u,m=e.base,h=e.nextBase,b=m||h,y=e._component,g=!1;if(m&&(e.props=f,e.state=d,e.context=_,2!==n&&e.shouldComponentUpdate&&!1===e.shouldComponentUpdate(s,c,u)?g=!0:e.componentWillUpdate&&e.componentWillUpdate(s,c,u),e.props=s,e.state=c,e.context=u),e.prevProps=e.prevState=e.prevContext=e.nextBase=null,e._dirty=!1,!g){l=e.render(s,c,u),e.getChildContext&&(u=i(i({},u),e.getChildContext()));var N,S,U=l&&l.nodeName;if("function"==typeof U){var M=v(l);(a=y)&&a.constructor===U&&M.key==a.__key?V(a,M,1,u,!1):(N=a,e._component=a=E(U,M,u),a.nextBase=a.nextBase||h,a._parentComponent=e,V(a,M,0,u,!1),A(a,1,o,!0)),S=a.base}else p=b,(N=y)&&(p=e._component=null),(b||1===n)&&(p&&(p._component=null),S=w(p,l,u,o||!m,b&&b.parentNode,!0));if(b&&S!==b&&a!==y){var P=b.parentNode;P&&S!==P&&(P.replaceChild(S,b),N||(b._component=null,L(b,!1)))}if(N&&H(N),e.base=S,S&&!r){for(var T=e,B=e;B=B._parentComponent;)(T=B).base=S;S._component=T,S._componentConstructor=T.constructor}}if(!m||o?x.unshift(e):g||(e.componentDidUpdate&&e.componentDidUpdate(f,d,_),t.afterUpdate&&t.afterUpdate(e)),null!=e._renderCallbacks)for(;e._renderCallbacks.length;)e._renderCallbacks.pop().call(e);C||r||k()}}function D(e,t,n,o){for(var r=e&&e._component,i=r,l=e,a=r&&e._componentConstructor===t.nodeName,p=a,s=v(t);r&&!p&&(r=r._parentComponent);)p=r.constructor===t.nodeName;return r&&p&&(!o||r._component)?(V(r,s,3,n,o),e=r.base):(i&&!a&&(H(i),e=l=null),r=E(t.nodeName,s,n),e&&!r.nextBase&&(r.nextBase=e,l=null),V(r,s,1,n,o),e=r.base,l&&e!==l&&(l._component=null,L(l,!1))),e}function H(e){t.beforeUnmount&&t.beforeUnmount(e);var n=e.base;e._disable=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var o=e._component;o?H(o):n&&(n.__preactattr_&&n.__preactattr_.ref&&n.__preactattr_.ref(null),e.nextBase=n,m(n),B(e),M(n)),e.__ref&&e.__ref(null)}function j(e,t){this._dirty=!0,this.context=t,this.props=e,this.state=this.state||{}}function z(e,t,n){return w(n,e,{},!1,t,!1)}i(j.prototype,{setState:function(e,t){var n=this.state;this.prevState||(this.prevState=i({},n)),i(n,"function"==typeof e?e(n,this.props):e),t&&(this._renderCallbacks=this._renderCallbacks||[]).push(t),c(this)},forceUpdate:function(e){e&&(this._renderCallbacks=this._renderCallbacks||[]).push(e),A(this,2)},render:function(){}});var R={h:r,createElement:r,cloneElement:a,Component:j,render:z,rerender:u,options:t},I=R;exports.default=I;
},{}],"J4dM":[function(require,module,exports) {
module.exports=function(e){return e&&"object"==typeof e&&e.nodeType===Node.ELEMENT_NODE};
},{}],"m6sE":[function(require,module,exports) {
var e=require("./isDOMElement");module.exports=function(r,o){return void 0===o&&(o=document),"string"==typeof r?o.querySelector(r):e(r)?r:void 0};
},{"./isDOMElement":"J4dM"}],"tmDQ":[function(require,module,exports) {
function t(){return(t=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}var e=require("preact"),n=require("@uppy/utils/lib/findDOMElement");function i(t){var e=null,n=null;return function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return n=r,e||(e=Promise.resolve().then(function(){return e=null,t.apply(void 0,n)})),e}}module.exports=function(){function r(t,e){this.uppy=t,this.opts=e||{},this.update=this.update.bind(this),this.mount=this.mount.bind(this),this.install=this.install.bind(this),this.uninstall=this.uninstall.bind(this)}var o=r.prototype;return o.getPluginState=function(){return this.uppy.getState().plugins[this.id]||{}},o.setPluginState=function(e){var n,i=this.uppy.getState().plugins;this.uppy.setState({plugins:t({},i,(n={},n[this.id]=t({},i[this.id],e),n))})},o.setOptions=function(e){this.opts=t({},this.opts,e),this.setPluginState()},o.update=function(t){void 0!==this.el&&this._updateUI&&this._updateUI(t)},o.afterUpdate=function(){},o.onMount=function(){},o.mount=function(t,o){var s,a=this,u=o.id,l=n(t);if(l)return this.isTargetDOMEl=!0,this.rerender=function(t){a.uppy.getPlugin(a.id)&&(a.el=e.render(a.render(t),l,a.el),a.afterUpdate())},this._updateUI=i(this.rerender),this.uppy.log("Installing "+u+" to a DOM element '"+t+"'"),this.opts.replaceTargetContent&&(l.innerHTML=""),this.el=e.render(this.render(this.uppy.getState()),l),this.onMount(),this.el;if("object"==typeof t&&t instanceof r)s=t;else if("function"==typeof t){var h=t;this.uppy.iteratePlugins(function(t){if(t instanceof h)return s=t,!1})}if(s)return this.uppy.log("Installing "+u+" to "+s.id),this.parent=s,this.el=s.addTarget(o),this.onMount(),this.el;this.uppy.log("Not installing "+u);var p="Invalid target option given to "+u+".";throw p+="function"==typeof t?" The given target is not a Plugin class. Please check that you're not specifying a React Component instead of a plugin. If you are using @uppy/* packages directly, make sure you have only 1 version of @uppy/core installed: run `npm ls @uppy/core` on the command line and verify that all the versions match and are deduped correctly.":"If you meant to target an HTML element, please make sure that the element exists. Check that the <script> tag initializing Uppy is right before the closing </body> tag at the end of the page. (see https://github.com/transloadit/uppy/issues/1042)\n\nIf you meant to target a plugin, please confirm that your `import` statements or `require` calls are correct.",new Error(p)},o.render=function(t){throw new Error("Extend the render method to add your plugin to a DOM element")},o.addTarget=function(t){throw new Error("Extend the addTarget method to add your plugin to another plugin's target")},o.unmount=function(){this.isTargetDOMEl&&this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)},o.install=function(){},o.uninstall=function(){this.unmount()},r}();
},{"preact":"sSEx","@uppy/utils/lib/findDOMElement":"m6sE"}],"PDAA":[function(require,module,exports) {
function e(){return(e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e}).apply(this,arguments)}function t(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function i(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}function s(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,l(e,t)}function r(e){var t="function"==typeof Map?new Map:void 0;return(r=function(e){if(null===e||!a(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,i)}function i(){return o(e,arguments,u(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),l(i,e)})(e)}function o(e,t,i){return(o=n()?Reflect.construct:function(e,t,i){var s=[null];s.push.apply(s,t);var r=new(Function.bind.apply(e,s));return i&&l(r,i.prototype),r}).apply(null,arguments)}function n(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function a(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=require("@uppy/utils/lib/Translator"),c=require("namespace-emitter"),h=require("cuid"),f=require("lodash.throttle"),p=require("@transloadit/prettier-bytes"),g=require("mime-match"),m=require("@uppy/store-default"),v=require("@uppy/utils/lib/getFileType"),y=require("@uppy/utils/lib/getFileNameAndExtension"),b=require("@uppy/utils/lib/generateFileID"),w=require("@uppy/utils/lib/findIndex"),S=require("./supportsUploadProgress"),F=require("./loggers"),U=F.justErrorsLogger,P=F.debugLogger,O=require("./Plugin"),_=function(e){function t(){for(var t,i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))||this).isRestriction=!0,t}return s(t,e),t}(r(Error)),A=function(){function t(t){var i=this;this.defaultLocale={strings:{addBulkFilesFailed:{0:"Failed to add %{smart_count} file due to an internal error",1:"Failed to add %{smart_count} files due to internal errors"},youCanOnlyUploadX:{0:"You can only upload %{smart_count} file",1:"You can only upload %{smart_count} files"},youHaveToAtLeastSelectX:{0:"You have to select at least %{smart_count} file",1:"You have to select at least %{smart_count} files"},exceedsSize2:"%{backwardsCompat} %{size}",exceedsSize:"This file exceeds maximum allowed size of",inferiorSize:"This file is smaller than the allowed size of %{size}",youCanOnlyUploadFileTypes:"You can only upload: %{types}",noNewAlreadyUploading:"Cannot add new files: already uploading",noDuplicates:"Cannot add the duplicate file '%{fileName}', it already exists",companionError:"Connection with Companion failed",companionUnauthorizeHint:"To unauthorize to your %{provider} account, please go to %{url}",failedToUpload:"Failed to upload %{file}",noInternetConnection:"No Internet connection",connectedToInternet:"Connected to the Internet",noFilesFound:"You have no files or folders here",selectX:{0:"Select %{smart_count}",1:"Select %{smart_count}"},selectAllFilesFromFolderNamed:"Select all files from folder %{name}",unselectAllFilesFromFolderNamed:"Unselect all files from folder %{name}",selectFileNamed:"Select file %{name}",unselectFileNamed:"Unselect file %{name}",openFolderNamed:"Open folder %{name}",cancel:"Cancel",logOut:"Log out",filter:"Filter",resetFilter:"Reset filter",loading:"Loading...",authenticateWithTitle:"Please authenticate with %{pluginName} to select files",authenticateWith:"Connect to %{pluginName}",searchImages:"Search for images",enterTextToSearch:"Enter text to search for images",backToSearch:"Back to Search",emptyFolderAdded:"No files were added from empty folder",folderAdded:{0:"Added %{smart_count} file from %{folder}",1:"Added %{smart_count} files from %{folder}"}}};var s={id:"uppy",autoProceed:!1,allowMultipleUploads:!0,debug:!1,restrictions:{maxFileSize:null,minFileSize:null,maxTotalFileSize:null,maxNumberOfFiles:null,minNumberOfFiles:null,allowedFileTypes:null},meta:{},onBeforeFileAdded:function(e,t){return e},onBeforeUpload:function(e){return e},store:m(),logger:U,infoTimeout:5e3};if(this.opts=e({},s,t,{restrictions:e({},s.restrictions,t&&t.restrictions)}),t&&t.logger&&t.debug?this.log("You are using a custom `logger`, but also set `debug: true`, which uses built-in logger to output logs to console. Ignoring `debug: true` and using your custom `logger`.","warning"):t&&t.debug&&(this.opts.logger=P),this.log("Using Core v"+this.constructor.VERSION),this.opts.restrictions.allowedFileTypes&&null!==this.opts.restrictions.allowedFileTypes&&!Array.isArray(this.opts.restrictions.allowedFileTypes))throw new TypeError("`restrictions.allowedFileTypes` must be an array");this.i18nInit(),this.plugins={},this.getState=this.getState.bind(this),this.getPlugin=this.getPlugin.bind(this),this.setFileMeta=this.setFileMeta.bind(this),this.setFileState=this.setFileState.bind(this),this.log=this.log.bind(this),this.info=this.info.bind(this),this.hideInfo=this.hideInfo.bind(this),this.addFile=this.addFile.bind(this),this.removeFile=this.removeFile.bind(this),this.pauseResume=this.pauseResume.bind(this),this.validateRestrictions=this.validateRestrictions.bind(this),this._calculateProgress=f(this._calculateProgress.bind(this),500,{leading:!0,trailing:!0}),this.updateOnlineStatus=this.updateOnlineStatus.bind(this),this.resetProgress=this.resetProgress.bind(this),this.pauseAll=this.pauseAll.bind(this),this.resumeAll=this.resumeAll.bind(this),this.retryAll=this.retryAll.bind(this),this.cancelAll=this.cancelAll.bind(this),this.retryUpload=this.retryUpload.bind(this),this.upload=this.upload.bind(this),this.emitter=c(),this.on=this.on.bind(this),this.off=this.off.bind(this),this.once=this.emitter.once.bind(this.emitter),this.emit=this.emitter.emit.bind(this.emitter),this.preProcessors=[],this.uploaders=[],this.postProcessors=[],this.store=this.opts.store,this.setState({plugins:{},files:{},currentUploads:{},allowNewUpload:!0,capabilities:{uploadProgress:S(),individualCancellation:!0,resumableUploads:!1},totalProgress:0,meta:e({},this.opts.meta),info:{isHidden:!0,type:"info",message:""}}),this._storeUnsubscribe=this.store.subscribe(function(e,t,s){i.emit("state-update",e,t,s),i.updateAll(t)}),this.opts.debug&&"undefined"!=typeof window&&(window[this.opts.id]=this),this._addListeners()}var s=t.prototype;return s.on=function(e,t){return this.emitter.on(e,t),this},s.off=function(e,t){return this.emitter.off(e,t),this},s.updateAll=function(e){this.iteratePlugins(function(t){t.update(e)})},s.setState=function(e){this.store.setState(e)},s.getState=function(){return this.store.getState()},s.setFileState=function(t,i){var s;if(!this.getState().files[t])throw new Error("Can’t set state for "+t+" (the file could have been removed)");this.setState({files:e({},this.getState().files,(s={},s[t]=e({},this.getState().files[t],i),s))})},s.i18nInit=function(){this.translator=new d([this.defaultLocale,this.opts.locale]),this.locale=this.translator.locale,this.i18n=this.translator.translate.bind(this.translator),this.i18nArray=this.translator.translateArray.bind(this.translator)},s.setOptions=function(t){this.opts=e({},this.opts,t,{restrictions:e({},this.opts.restrictions,t&&t.restrictions)}),t.meta&&this.setMeta(t.meta),this.i18nInit(),t.locale&&this.iteratePlugins(function(e){e.setOptions()}),this.setState()},s.resetProgress=function(){var t={percentage:0,bytesUploaded:0,uploadComplete:!1,uploadStarted:null},i=e({},this.getState().files),s={};Object.keys(i).forEach(function(r){var o=e({},i[r]);o.progress=e({},o.progress,t),s[r]=o}),this.setState({files:s,totalProgress:0}),this.emit("reset-progress")},s.addPreProcessor=function(e){this.preProcessors.push(e)},s.removePreProcessor=function(e){var t=this.preProcessors.indexOf(e);-1!==t&&this.preProcessors.splice(t,1)},s.addPostProcessor=function(e){this.postProcessors.push(e)},s.removePostProcessor=function(e){var t=this.postProcessors.indexOf(e);-1!==t&&this.postProcessors.splice(t,1)},s.addUploader=function(e){this.uploaders.push(e)},s.removeUploader=function(e){var t=this.uploaders.indexOf(e);-1!==t&&this.uploaders.splice(t,1)},s.setMeta=function(t){var i=e({},this.getState().meta,t),s=e({},this.getState().files);Object.keys(s).forEach(function(i){s[i]=e({},s[i],{meta:e({},s[i].meta,t)})}),this.log("Adding metadata:"),this.log(t),this.setState({meta:i,files:s})},s.setFileMeta=function(t,i){var s=e({},this.getState().files);if(s[t]){var r=e({},s[t].meta,i);s[t]=e({},s[t],{meta:r}),this.setState({files:s})}else this.log("Was trying to set metadata for a file that has been removed: ",t)},s.getFile=function(e){return this.getState().files[e]},s.getFiles=function(){var e=this.getState().files;return Object.keys(e).map(function(t){return e[t]})},s.validateRestrictions=function(e,t){try{return this._checkRestrictions(e,t),{result:!0}}catch(i){return{result:!1,reason:i.message}}},s._checkRestrictions=function(e,t){void 0===t&&(t=this.getFiles());var i=this.opts.restrictions,s=i.maxFileSize,r=i.minFileSize,o=i.maxTotalFileSize,n=i.maxNumberOfFiles,a=i.allowedFileTypes;if(n&&t.length+1>n)throw new _(""+this.i18n("youCanOnlyUploadX",{smart_count:n}));if(a&&!a.some(function(t){return t.indexOf("/")>-1?!!e.type&&g(e.type.replace(/;.*?$/,""),t):!("."!==t[0]||!e.extension)&&e.extension.toLowerCase()===t.substr(1).toLowerCase()})){var l=a.join(", ");throw new _(this.i18n("youCanOnlyUploadFileTypes",{types:l}))}if(o&&null!=e.size){var u=0;if(u+=e.size,t.forEach(function(e){u+=e.size}),u>o)throw new _(this.i18n("exceedsSize2",{backwardsCompat:this.i18n("exceedsSize"),size:p(o)}))}if(s&&null!=e.size&&e.size>s)throw new _(this.i18n("exceedsSize2",{backwardsCompat:this.i18n("exceedsSize"),size:p(s)}));if(r&&null!=e.size&&e.size<r)throw new _(this.i18n("inferiorSize",{size:p(r)}))},s._checkMinNumberOfFiles=function(e){var t=this.opts.restrictions.minNumberOfFiles;if(Object.keys(e).length<t)throw new _(""+this.i18n("youHaveToAtLeastSelectX",{smart_count:t}))},s._showOrLogErrorAndThrow=function(e,t){var i=void 0===t?{}:t,s=i.showInformer,r=void 0===s||s,o=i.file,n=void 0===o?null:o,a=i.throwErr,l=void 0===a||a,u="object"==typeof e?e.message:e,d="object"==typeof e&&e.details?e.details:"",c=u;if(d&&(c+=" "+d),e.isRestriction?(this.log(c),this.emit("restriction-failed",n,e)):this.log(c,"error"),r&&this.info({message:u,details:d},"error",this.opts.infoTimeout),l)throw"object"==typeof e?e:new Error(e)},s._assertNewUploadAllowed=function(e){!1===this.getState().allowNewUpload&&this._showOrLogErrorAndThrow(new _(this.i18n("noNewAlreadyUploading")),{file:e})},s._checkAndCreateFileStateObject=function(t,i){var s=v(i);i.type=s;var r,o=this.opts.onBeforeFileAdded(i,t);!1===o&&this._showOrLogErrorAndThrow(new _("Cannot add the file because onBeforeFileAdded returned false."),{showInformer:!1,file:i}),"object"==typeof o&&o&&(i=o),r=i.name?i.name:"image"===s.split("/")[0]?s.split("/")[0]+"."+s.split("/")[1]:"noname";var n=y(r).extension,a=i.isRemote||!1,l=b(i);t[l]&&this._showOrLogErrorAndThrow(new _(this.i18n("noDuplicates",{fileName:r})),{file:i});var u=i.meta||{};u.name=r,u.type=s;var d=isFinite(i.data.size)?i.data.size:null,c={source:i.source||"",id:l,name:r,extension:n||"",meta:e({},this.getState().meta,u),type:s,data:i.data,progress:{percentage:0,bytesUploaded:0,bytesTotal:d,uploadComplete:!1,uploadStarted:null},size:d,isRemote:a,remote:i.remote||"",preview:i.preview};try{var h=Object.keys(t).map(function(e){return t[e]});this._checkRestrictions(c,h)}catch(f){this._showOrLogErrorAndThrow(f,{file:c})}return c},s._startIfAutoProceed=function(){var e=this;this.opts.autoProceed&&!this.scheduledAutoProceed&&(this.scheduledAutoProceed=setTimeout(function(){e.scheduledAutoProceed=null,e.upload().catch(function(t){t.isRestriction||e.log(t.stack||t.message||t)})},4))},s.addFile=function(t){var i;this._assertNewUploadAllowed(t);var s=this.getState().files,r=this._checkAndCreateFileStateObject(s,t);return this.setState({files:e({},s,(i={},i[r.id]=r,i))}),this.emit("file-added",r),this.emit("files-added",[r]),this.log("Added file: "+r.name+", "+r.id+", mime type: "+r.type),this._startIfAutoProceed(),r.id},s.addFiles=function(t){var i=this;this._assertNewUploadAllowed();for(var s=e({},this.getState().files),r=[],o=[],n=0;n<t.length;n++)try{var a=this._checkAndCreateFileStateObject(s,t[n]);r.push(a),s[a.id]=a}catch(u){u.isRestriction||o.push(u)}if(this.setState({files:s}),r.forEach(function(e){i.emit("file-added",e)}),this.emit("files-added",r),r.length>5?this.log("Added batch of "+r.length+" files"):Object.keys(r).forEach(function(e){i.log("Added file: "+r[e].name+"\n id: "+r[e].id+"\n type: "+r[e].type)}),r.length>0&&this._startIfAutoProceed(),o.length>0){var l="Multiple errors occurred while adding files:\n";o.forEach(function(e){l+="\n * "+e.message}),this.info({message:this.i18n("addBulkFilesFailed",{smart_count:o.length}),details:l},"error",this.opts.infoTimeout);var u=new Error(l);throw u.errors=o,u}},s.removeFiles=function(t,i){var s=this,r=this.getState(),o=r.files,n=r.currentUploads,a=e({},o),l=e({},n),u=Object.create(null);function d(e){return void 0===u[e]}t.forEach(function(e){o[e]&&(u[e]=o[e],delete a[e])});var c=[];Object.keys(l).forEach(function(t){var i=n[t].fileIDs.filter(d);0!==i.length?l[t]=e({},n[t],{fileIDs:i}):c.push(t)}),c.forEach(function(e){delete l[e]});var h={currentUploads:l,files:a};0===Object.keys(a).length&&(h.allowNewUpload=!0,h.error=null),this.setState(h),this._calculateTotalProgress();var f=Object.keys(u);f.forEach(function(e){s.emit("file-removed",u[e],i)}),f.length>5?this.log("Removed "+f.length+" files"):this.log("Removed files: "+f.join(", "))},s.removeFile=function(e,t){void 0===t&&(t=null),this.removeFiles([e],t)},s.pauseResume=function(e){if(this.getState().capabilities.resumableUploads&&!this.getFile(e).uploadComplete){var t=!(this.getFile(e).isPaused||!1);return this.setFileState(e,{isPaused:t}),this.emit("upload-pause",e,t),t}},s.pauseAll=function(){var t=e({},this.getState().files);Object.keys(t).filter(function(e){return!t[e].progress.uploadComplete&&t[e].progress.uploadStarted}).forEach(function(i){var s=e({},t[i],{isPaused:!0});t[i]=s}),this.setState({files:t}),this.emit("pause-all")},s.resumeAll=function(){var t=e({},this.getState().files);Object.keys(t).filter(function(e){return!t[e].progress.uploadComplete&&t[e].progress.uploadStarted}).forEach(function(i){var s=e({},t[i],{isPaused:!1,error:null});t[i]=s}),this.setState({files:t}),this.emit("resume-all")},s.retryAll=function(){var t=e({},this.getState().files),i=Object.keys(t).filter(function(e){return t[e].error});if(i.forEach(function(i){var s=e({},t[i],{isPaused:!1,error:null});t[i]=s}),this.setState({files:t,error:null}),this.emit("retry-all",i),0===i.length)return Promise.resolve({successful:[],failed:[]});var s=this._createUpload(i,{forceAllowNewUpload:!0});return this._runUpload(s)},s.cancelAll=function(){this.emit("cancel-all");var e=this.getState().files,t=Object.keys(e);t.length&&this.removeFiles(t,"cancel-all"),this.setState({totalProgress:0,error:null})},s.retryUpload=function(e){this.setFileState(e,{error:null,isPaused:!1}),this.emit("upload-retry",e);var t=this._createUpload([e],{forceAllowNewUpload:!0});return this._runUpload(t)},s.reset=function(){this.cancelAll()},s._calculateProgress=function(t,i){if(this.getFile(t.id)){var s=isFinite(i.bytesTotal)&&i.bytesTotal>0;this.setFileState(t.id,{progress:e({},this.getFile(t.id).progress,{bytesUploaded:i.bytesUploaded,bytesTotal:i.bytesTotal,percentage:s?Math.round(i.bytesUploaded/i.bytesTotal*100):0})}),this._calculateTotalProgress()}else this.log("Not setting progress for a file that has been removed: "+t.id)},s._calculateTotalProgress=function(){var e=this.getFiles().filter(function(e){return e.progress.uploadStarted||e.progress.preprocess||e.progress.postprocess});if(0===e.length)return this.emit("progress",0),void this.setState({totalProgress:0});var t=e.filter(function(e){return null!=e.progress.bytesTotal}),i=e.filter(function(e){return null==e.progress.bytesTotal});if(0!==t.length){var s=t.reduce(function(e,t){return e+t.progress.bytesTotal},0),r=s/t.length;s+=r*i.length;var o=0;t.forEach(function(e){o+=e.progress.bytesUploaded}),i.forEach(function(e){o+=r*(e.progress.percentage||0)/100});var n=0===s?0:Math.round(o/s*100);n>100&&(n=100),this.setState({totalProgress:n}),this.emit("progress",n)}else{var a=100*e.length,l=i.reduce(function(e,t){return e+t.progress.percentage},0),u=Math.round(l/a*100);this.setState({totalProgress:u})}},s._addListeners=function(){var t=this;this.on("error",function(e){var i="Unknown error";e.message&&(i=e.message),e.details&&(i+=" "+e.details),t.setState({error:i})}),this.on("upload-error",function(e,i,s){var r="Unknown error";if(i.message&&(r=i.message),i.details&&(r+=" "+i.details),t.setFileState(e.id,{error:r,response:s}),t.setState({error:i.message}),"object"==typeof i&&i.message){var o=new Error(i.message);o.details=i.message,i.details&&(o.details+=" "+i.details),o.message=t.i18n("failedToUpload",{file:e.name}),t._showOrLogErrorAndThrow(o,{throwErr:!1})}else t._showOrLogErrorAndThrow(i,{throwErr:!1})}),this.on("upload",function(){t.setState({error:null})}),this.on("upload-started",function(e,i){t.getFile(e.id)?t.setFileState(e.id,{progress:{uploadStarted:Date.now(),uploadComplete:!1,percentage:0,bytesUploaded:0,bytesTotal:e.size}}):t.log("Not setting progress for a file that has been removed: "+e.id)}),this.on("upload-progress",this._calculateProgress),this.on("upload-success",function(i,s){if(t.getFile(i.id)){var r=t.getFile(i.id).progress;t.setFileState(i.id,{progress:e({},r,{postprocess:t.postProcessors.length>0?{mode:"indeterminate"}:null,uploadComplete:!0,percentage:100,bytesUploaded:r.bytesTotal}),response:s,uploadURL:s.uploadURL,isPaused:!1}),t._calculateTotalProgress()}else t.log("Not setting progress for a file that has been removed: "+i.id)}),this.on("preprocess-progress",function(i,s){t.getFile(i.id)?t.setFileState(i.id,{progress:e({},t.getFile(i.id).progress,{preprocess:s})}):t.log("Not setting progress for a file that has been removed: "+i.id)}),this.on("preprocess-complete",function(i){if(t.getFile(i.id)){var s=e({},t.getState().files);s[i.id]=e({},s[i.id],{progress:e({},s[i.id].progress)}),delete s[i.id].progress.preprocess,t.setState({files:s})}else t.log("Not setting progress for a file that has been removed: "+i.id)}),this.on("postprocess-progress",function(i,s){t.getFile(i.id)?t.setFileState(i.id,{progress:e({},t.getState().files[i.id].progress,{postprocess:s})}):t.log("Not setting progress for a file that has been removed: "+i.id)}),this.on("postprocess-complete",function(i){if(t.getFile(i.id)){var s=e({},t.getState().files);s[i.id]=e({},s[i.id],{progress:e({},s[i.id].progress)}),delete s[i.id].progress.postprocess,t.setState({files:s})}else t.log("Not setting progress for a file that has been removed: "+i.id)}),this.on("restored",function(){t._calculateTotalProgress()}),"undefined"!=typeof window&&window.addEventListener&&(window.addEventListener("online",function(){return t.updateOnlineStatus()}),window.addEventListener("offline",function(){return t.updateOnlineStatus()}),setTimeout(function(){return t.updateOnlineStatus()},3e3))},s.updateOnlineStatus=function(){void 0===window.navigator.onLine||window.navigator.onLine?(this.emit("is-online"),this.wasOffline&&(this.emit("back-online"),this.info(this.i18n("connectedToInternet"),"success",3e3),this.wasOffline=!1)):(this.emit("is-offline"),this.info(this.i18n("noInternetConnection"),"error",0),this.wasOffline=!0)},s.getID=function(){return this.opts.id},s.use=function(e,t){if("function"!=typeof e)throw new TypeError("Expected a plugin class, but got "+(null===e?"null":typeof e)+". Please verify that the plugin was imported and spelled correctly.");var i=new e(this,t),s=i.id;if(this.plugins[i.type]=this.plugins[i.type]||[],!s)throw new Error("Your plugin must have an id");if(!i.type)throw new Error("Your plugin must have a type");var r=this.getPlugin(s);if(r){var o="Already found a plugin named '"+r.id+"'. Tried to use: '"+s+"'.\nUppy plugins must have unique `id` options. See https://uppy.io/docs/plugins/#id.";throw new Error(o)}return e.VERSION&&this.log("Using "+s+" v"+e.VERSION),this.plugins[i.type].push(i),i.install(),this},s.getPlugin=function(e){var t=null;return this.iteratePlugins(function(i){if(i.id===e)return t=i,!1}),t},s.iteratePlugins=function(e){var t=this;Object.keys(this.plugins).forEach(function(i){t.plugins[i].forEach(e)})},s.removePlugin=function(t){var i;this.log("Removing plugin "+t.id),this.emit("plugin-remove",t),t.uninstall&&t.uninstall();var s=this.plugins[t.type].slice(),r=w(s,function(e){return e.id===t.id});-1!==r&&(s.splice(r,1),this.plugins[t.type]=s);var o={plugins:e({},this.getState().plugins,(i={},i[t.id]=void 0,i))};this.setState(o)},s.close=function(){var e=this;this.log("Closing Uppy instance "+this.opts.id+": removing all files and uninstalling plugins"),this.reset(),this._storeUnsubscribe(),this.iteratePlugins(function(t){e.removePlugin(t)})},s.info=function(e,t,i){void 0===t&&(t="info"),void 0===i&&(i=3e3);var s="object"==typeof e;this.setState({info:{isHidden:!1,type:t,message:s?e.message:e,details:s?e.details:null}}),this.emit("info-visible"),clearTimeout(this.infoTimeoutID),this.infoTimeoutID=0!==i?setTimeout(this.hideInfo,i):void 0},s.hideInfo=function(){var t=e({},this.getState().info,{isHidden:!0});this.setState({info:t}),this.emit("info-hidden")},s.log=function(e,t){var i=this.opts.logger;switch(t){case"error":i.error(e);break;case"warning":i.warn(e);break;default:i.debug(e)}},s.run=function(){return this.log("Calling run() is no longer necessary.","warning"),this},s.restore=function(e){return this.log('Core: attempting to restore upload "'+e+'"'),this.getState().currentUploads[e]?this._runUpload(e):(this._removeUpload(e),Promise.reject(new Error("Nonexistent upload")))},s._createUpload=function(t,i){var s;void 0===i&&(i={});var r=i.forceAllowNewUpload,o=void 0!==r&&r,n=this.getState(),a=n.allowNewUpload,l=n.currentUploads;if(!a&&!o)throw new Error("Cannot create a new upload: already uploading.");var u=h();return this.emit("upload",{id:u,fileIDs:t}),this.setState({allowNewUpload:!1!==this.opts.allowMultipleUploads,currentUploads:e({},l,(s={},s[u]={fileIDs:t,step:0,result:{}},s))}),u},s._getUpload=function(e){return this.getState().currentUploads[e]},s.addResultData=function(t,i){var s;if(this._getUpload(t)){var r=this.getState().currentUploads,o=e({},r[t],{result:e({},r[t].result,i)});this.setState({currentUploads:e({},r,(s={},s[t]=o,s))})}else this.log("Not setting result for an upload that has been removed: "+t)},s._removeUpload=function(t){var i=e({},this.getState().currentUploads);delete i[t],this.setState({currentUploads:i})},s._runUpload=function(t){var i=this,s=this.getState().currentUploads[t].step,r=[].concat(this.preProcessors,this.uploaders,this.postProcessors),o=Promise.resolve();return r.forEach(function(r,n){n<s||(o=o.then(function(){var s,o=i.getState().currentUploads,a=o[t];if(a){var l=e({},a,{step:n});return i.setState({currentUploads:e({},o,(s={},s[t]=l,s))}),r(l.fileIDs,t)}}).then(function(e){return null}))}),o.catch(function(e){i.emit("error",e,t),i._removeUpload(t)}),o.then(function(){var e=i.getState().currentUploads[t];if(e){e.fileIDs.forEach(function(e){var t=i.getFile(e);t&&t.progress.postprocess&&i.emit("postprocess-complete",t)});var s=e.fileIDs.map(function(e){return i.getFile(e)}),r=s.filter(function(e){return!e.error}),o=s.filter(function(e){return e.error});i.addResultData(t,{successful:r,failed:o,uploadID:t})}}).then(function(){var e=i.getState().currentUploads;if(e[t]){var s=e[t].result;return i.emit("complete",s),i._removeUpload(t),s}}).then(function(e){return null==e&&i.log("Not setting result for an upload that has been removed: "+t),e})},s.upload=function(){var e=this;this.plugins.uploader||this.log("No uploader type plugins are used","warning");var t=this.getState().files,i=this.opts.onBeforeUpload(t);return!1===i?Promise.reject(new Error("Not starting the upload because onBeforeUpload returned false")):(i&&"object"==typeof i&&(t=i,this.setState({files:t})),Promise.resolve().then(function(){return e._checkMinNumberOfFiles(t)}).catch(function(t){e._showOrLogErrorAndThrow(t)}).then(function(){var i=e.getState().currentUploads,s=Object.keys(i).reduce(function(e,t){return e.concat(i[t].fileIDs)},[]),r=[];Object.keys(t).forEach(function(t){var i=e.getFile(t);i.progress.uploadStarted||-1!==s.indexOf(t)||r.push(i.id)});var o=e._createUpload(r);return e._runUpload(o)}).catch(function(t){e._showOrLogErrorAndThrow(t,{showInformer:!1})}))},i(t,[{key:"state",get:function(){return this.getState()}}]),t}();A.VERSION="1.17.0",module.exports=function(e){return new A(e)},module.exports.Uppy=A,module.exports.Plugin=O,module.exports.debugLogger=P;
},{"@uppy/utils/lib/Translator":"hG0x","namespace-emitter":"X4LQ","cuid":"EdMi","lodash.throttle":"Ai1e","@transloadit/prettier-bytes":"n6LF","mime-match":"VXmW","@uppy/store-default":"S67I","@uppy/utils/lib/getFileType":"Vbpm","@uppy/utils/lib/getFileNameAndExtension":"a2Nq","@uppy/utils/lib/generateFileID":"nk61","@uppy/utils/lib/findIndex":"ADhK","./supportsUploadProgress":"A5ga","./loggers":"i2Hz","./Plugin":"tmDQ"}],"f7mf":[function(require,module,exports) {
"use strict";function t(t,r){t.prototype=Object.create(r.prototype),t.prototype.constructor=t,u(t,r)}function r(t){var n="function"==typeof Map?new Map:void 0;return(r=function(t){if(null===t||!o(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,r)}function r(){return e(t,arguments,c(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),u(r,t)})(t)}function e(t,r,o){return(e=n()?Reflect.construct:function(t,r,e){var n=[null];n.push.apply(n,r);var o=new(Function.bind.apply(t,n));return e&&u(o,e.prototype),o}).apply(null,arguments)}function n(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function o(t){return-1!==Function.toString.call(t).indexOf("[native code]")}function u(t,r){return(u=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t})(t,r)}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var i=function(r){function e(){var t;return(t=r.call(this,"Authorization required")||this).name="AuthError",t.isAuthError=!0,t}return t(e,r),e}(r(Error));module.exports=i;
},{}],"jqwg":[function(require,module,exports) {
function t(t,r){t.prototype=Object.create(r.prototype),t.prototype.constructor=t,u(t,r)}function r(t){var n="function"==typeof Map?new Map:void 0;return(r=function(t){if(null===t||!o(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,r)}function r(){return e(t,arguments,c(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),u(r,t)})(t)}function e(t,r,o){return(e=n()?Reflect.construct:function(t,r,e){var n=[null];n.push.apply(n,r);var o=new(Function.bind.apply(t,n));return e&&u(o,e.prototype),o}).apply(null,arguments)}function n(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function o(t){return-1!==Function.toString.call(t).indexOf("[native code]")}function u(t,r){return(u=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t})(t,r)}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var i=function(r){function e(t,e){var n;return void 0===e&&(e=null),(n=r.call(this,"This looks like a network error, the endpoint might be blocked by an internet provider or a firewall.\n\nSource error: ["+t+"]")||this).isNetworkError=!0,n.request=e,n}return t(e,r),e}(r(Error));module.exports=i;
},{}],"UEAI":[function(require,module,exports) {
var r=require("./NetworkError");module.exports=function(){return fetch.apply(void 0,arguments).catch(function(o){throw"AbortError"===o.name?o:new r(o)})};
},{"./NetworkError":"jqwg"}],"kPfo":[function(require,module,exports) {
"use strict";var e,t;function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}var s=require("./AuthError"),i=require("@uppy/utils/lib/fetchWithNetworkError");function a(e){return e.replace(/\/$/,"")}module.exports=(t=e=function(){function e(e,t){this.uppy=e,this.opts=t,this.onReceiveResponse=this.onReceiveResponse.bind(this),this.allowedHeaders=["accept","content-type","uppy-auth-token"],this.preflightDone=!1}var t=e.prototype;return t.headers=function(){var e=this.opts.companionHeaders||this.opts.serverHeaders||{};return Promise.resolve(n({},this.defaultHeaders,e))},t._getPostResponseFunc=function(e){var t=this;return function(n){return e?n:t.onReceiveResponse(n)}},t.onReceiveResponse=function(e){var t,r=this.uppy.getState().companion||{},o=this.opts.companionUrl,s=e.headers;s.has("i-am")&&s.get("i-am")!==r[o]&&this.uppy.setState({companion:n({},r,(t={},t[o]=s.get("i-am"),t))});return e},t._getUrl=function(e){return/^(https?:|)\/\//.test(e)?e:this.hostname+"/"+e},t._json=function(e){if(401===e.status)throw new s;if(e.status<200||e.status>300){var t="Failed request with status: "+e.status+". "+e.statusText;return e.json().then(function(e){throw t=e.message?t+" message: "+e.message:t,t=e.requestId?t+" request-Id: "+e.requestId:t,new Error(t)}).catch(function(){throw new Error(t)})}return e.json()},t.preflight=function(e){var t=this;return this.preflightDone?Promise.resolve(this.allowedHeaders.slice()):fetch(this._getUrl(e),{method:"OPTIONS"}).then(function(e){return e.headers.has("access-control-allow-headers")&&(t.allowedHeaders=e.headers.get("access-control-allow-headers").split(",").map(function(e){return e.trim().toLowerCase()})),t.preflightDone=!0,t.allowedHeaders.slice()}).catch(function(e){return t.uppy.log("[CompanionClient] unable to make preflight request "+e,"warning"),t.preflightDone=!0,t.allowedHeaders.slice()})},t.preflightAndHeaders=function(e){var t=this;return Promise.all([this.preflight(e),this.headers()]).then(function(e){var n=e[0],r=e[1];return Object.keys(r).forEach(function(e){-1===n.indexOf(e.toLowerCase())&&(t.uppy.log("[CompanionClient] excluding unallowed header "+e),delete r[e])}),r})},t.get=function(e,t){var n=this;return this.preflightAndHeaders(e).then(function(t){return i(n._getUrl(e),{method:"get",headers:t,credentials:n.opts.companionCookiesRule||"same-origin"})}).then(this._getPostResponseFunc(t)).then(function(e){return n._json(e)}).catch(function(t){return t=t.isAuthError?t:new Error("Could not get "+n._getUrl(e)+". "+t),Promise.reject(t)})},t.post=function(e,t,n){var r=this;return this.preflightAndHeaders(e).then(function(n){return i(r._getUrl(e),{method:"post",headers:n,credentials:r.opts.companionCookiesRule||"same-origin",body:JSON.stringify(t)})}).then(this._getPostResponseFunc(n)).then(function(e){return r._json(e)}).catch(function(t){return t=t.isAuthError?t:new Error("Could not post "+r._getUrl(e)+". "+t),Promise.reject(t)})},t.delete=function(e,t,n){var r=this;return this.preflightAndHeaders(e).then(function(n){return i(r.hostname+"/"+e,{method:"delete",headers:n,credentials:r.opts.companionCookiesRule||"same-origin",body:t?JSON.stringify(t):null})}).then(this._getPostResponseFunc(n)).then(function(e){return r._json(e)}).catch(function(t){return t=t.isAuthError?t:new Error("Could not delete "+r._getUrl(e)+". "+t),Promise.reject(t)})},o(e,[{key:"hostname",get:function(){var e=this.uppy.getState().companion,t=this.opts.companionUrl;return a(e&&e[t]?e[t]:t)}},{key:"defaultHeaders",get:function(){return{Accept:"application/json","Content-Type":"application/json","Uppy-Versions":"@uppy/companion-client="+e.VERSION}}}]),e}(),e.VERSION="1.9.0",t);
},{"./AuthError":"f7mf","@uppy/utils/lib/fetchWithNetworkError":"UEAI"}],"aDV9":[function(require,module,exports) {
var o=Object.prototype.hasOwnProperty;module.exports=function e(n,r){var t=[];for(var p in n)if(o.call(n,p)){var a,c=n[p],f=encodeURIComponent(p);a="object"==typeof c?e(c,r?r+"["+f+"]":f):(r?r+"["+f+"]":f)+"="+encodeURIComponent(c),t.push(a)}return t.join("&")};
},{}],"Poy0":[function(require,module,exports) {
"use strict";module.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e};
},{}],"hgfQ":[function(require,module,exports) {
"use strict";var n,r=Object.prototype.hasOwnProperty;function t(n){try{return decodeURIComponent(n.replace(/\+/g," "))}catch(r){return null}}function e(n){try{return encodeURIComponent(n)}catch(r){return null}}function o(n){for(var r,e=/([^=?#&]+)=?([^&]*)/g,o={};r=e.exec(n);){var u=t(r[1]),l=t(r[2]);null===u||null===l||u in o||(o[u]=l)}return o}function u(t,o){o=o||"";var u,l,c=[];for(l in"string"!=typeof o&&(o="?"),t)if(r.call(t,l)){if((u=t[l])||null!==u&&u!==n&&!isNaN(u)||(u=""),l=e(l),u=e(u),null===l||null===u)continue;c.push(l+"="+u)}return c.length?o+c.join("&"):""}exports.stringify=u,exports.parse=o;
},{}],"t0IB":[function(require,module,exports) {
var global = arguments[3];
var e=arguments[3],t=require("requires-port"),o=require("querystringify"),r=/^[A-Za-z][A-Za-z0-9+-.]*:[\\/]+/,s=/^([a-z][a-z0-9.+-]*:)?([\\/]{1,})?([\S\s]*)/i,a="[\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF]",n=new RegExp("^"+a+"+");function h(e){return(e||"").toString().replace(n,"")}var i=[["#","hash"],["?","query"],function(e){return e.replace("\\","/")},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],p={hash:1,query:1};function l(t){var o,s=("undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{}).location||{},a={},n=typeof(t=t||s);if("blob:"===t.protocol)a=new f(unescape(t.pathname),{});else if("string"===n)for(o in a=new f(t,{}),p)delete a[o];else if("object"===n){for(o in t)o in p||(a[o]=t[o]);void 0===a.slashes&&(a.slashes=r.test(t.href))}return a}function u(e){e=h(e);var t=s.exec(e);return{protocol:t[1]?t[1].toLowerCase():"",slashes:!!(t[2]&&t[2].length>=2),rest:t[2]&&1===t[2].length?"/"+t[3]:t[3]}}function c(e,t){if(""===e)return t;for(var o=(t||"/").split("/").slice(0,-1).concat(e.split("/")),r=o.length,s=o[r-1],a=!1,n=0;r--;)"."===o[r]?o.splice(r,1):".."===o[r]?(o.splice(r,1),n++):n&&(0===r&&(a=!0),o.splice(r,1),n--);return a&&o.unshift(""),"."!==s&&".."!==s||o.push(""),o.join("/")}function f(e,r,s){if(e=h(e),!(this instanceof f))return new f(e,r,s);var a,n,p,m,y,d,g=i.slice(),v=typeof r,w=this,x=0;for("object"!==v&&"string"!==v&&(s=r,r=null),s&&"function"!=typeof s&&(s=o.parse),r=l(r),a=!(n=u(e||"")).protocol&&!n.slashes,w.slashes=n.slashes||a&&r.slashes,w.protocol=n.protocol||r.protocol||"",e=n.rest,n.slashes||(g[3]=[/(.*)/,"pathname"]);x<g.length;x++)"function"!=typeof(m=g[x])?(p=m[0],d=m[1],p!=p?w[d]=e:"string"==typeof p?~(y=e.indexOf(p))&&("number"==typeof m[2]?(w[d]=e.slice(0,y),e=e.slice(y+m[2])):(w[d]=e.slice(y),e=e.slice(0,y))):(y=p.exec(e))&&(w[d]=y[1],e=e.slice(0,y.index)),w[d]=w[d]||a&&m[3]&&r[d]||"",m[4]&&(w[d]=w[d].toLowerCase())):e=m(e);s&&(w.query=s(w.query)),a&&r.slashes&&"/"!==w.pathname.charAt(0)&&(""!==w.pathname||""!==r.pathname)&&(w.pathname=c(w.pathname,r.pathname)),"/"!==w.pathname.charAt(0)&&w.hostname&&(w.pathname="/"+w.pathname),t(w.port,w.protocol)||(w.host=w.hostname,w.port=""),w.username=w.password="",w.auth&&(m=w.auth.split(":"),w.username=m[0]||"",w.password=m[1]||""),w.origin=w.protocol&&w.host&&"file:"!==w.protocol?w.protocol+"//"+w.host:"null",w.href=w.toString()}function m(e,r,s){var a=this;switch(e){case"query":"string"==typeof r&&r.length&&(r=(s||o.parse)(r)),a[e]=r;break;case"port":a[e]=r,t(r,a.protocol)?r&&(a.host=a.hostname+":"+r):(a.host=a.hostname,a[e]="");break;case"hostname":a[e]=r,a.port&&(r+=":"+a.port),a.host=r;break;case"host":a[e]=r,/:\d+$/.test(r)?(r=r.split(":"),a.port=r.pop(),a.hostname=r.join(":")):(a.hostname=r,a.port="");break;case"protocol":a.protocol=r.toLowerCase(),a.slashes=!s;break;case"pathname":case"hash":if(r){var n="pathname"===e?"/":"#";a[e]=r.charAt(0)!==n?n+r:r}else a[e]=r;break;default:a[e]=r}for(var h=0;h<i.length;h++){var p=i[h];p[4]&&(a[p[1]]=a[p[1]].toLowerCase())}return a.origin=a.protocol&&a.host&&"file:"!==a.protocol?a.protocol+"//"+a.host:"null",a.href=a.toString(),a}function y(e){e&&"function"==typeof e||(e=o.stringify);var t,r=this,s=r.protocol;s&&":"!==s.charAt(s.length-1)&&(s+=":");var a=s+(r.slashes?"//":"");return r.username&&(a+=r.username,r.password&&(a+=":"+r.password),a+="@"),a+=r.host+r.pathname,(t="object"==typeof r.query?e(r.query):r.query)&&(a+="?"!==t.charAt(0)?"?"+t:t),r.hash&&(a+=r.hash),a}f.prototype={set:m,toString:y},f.extractProtocol=u,f.location=l,f.trimLeft=h,f.qs=o,module.exports=f;
},{"requires-port":"Poy0","querystringify":"hgfQ"}],"Iw4z":[function(require,module,exports) {
"use strict";module.exports.setItem=function(e,t){return new Promise(function(o){localStorage.setItem(e,t),o()})},module.exports.getItem=function(e){return Promise.resolve(localStorage.getItem(e))},module.exports.removeItem=function(e){return new Promise(function(t){localStorage.removeItem(e),t()})};
},{}],"jsGv":[function(require,module,exports) {
"use strict";function t(){return(t=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t}).apply(this,arguments)}function e(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,n(t,e)}function n(t,e){return(n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var o=require("qs-stringify"),r=require("url-parse"),i=require("./RequestClient"),s=require("./tokenStorage"),a=function(t){return t.split("-").map(function(t){return t.charAt(0).toUpperCase()+t.slice(1)}).join(" ")};module.exports=function(n){function i(t,e){var o;return(o=n.call(this,t,e)||this).provider=e.provider,o.id=o.provider,o.name=o.opts.name||a(o.id),o.pluginId=o.opts.pluginId,o.tokenKey="companion-"+o.pluginId+"-auth-token",o.companionKeysParams=o.opts.companionKeysParams,o.preAuthToken=null,o}e(i,n);var p=i.prototype;return p.headers=function(){var e=this;return Promise.all([n.prototype.headers.call(this),this.getAuthToken()]).then(function(n){var o=n[0],r=n[1],i={};return r&&(i["uppy-auth-token"]=r),e.companionKeysParams&&(i["uppy-credentials-params"]=btoa(JSON.stringify({params:e.companionKeysParams}))),t({},o,i)})},p.onReceiveResponse=function(t){t=n.prototype.onReceiveResponse.call(this,t);var e=this.uppy.getPlugin(this.pluginId),o=e.getPluginState().authenticated?401!==t.status:t.status<400;return e.setPluginState({authenticated:o}),t},p.setAuthToken=function(t){return this.uppy.getPlugin(this.pluginId).storage.setItem(this.tokenKey,t)},p.getAuthToken=function(){return this.uppy.getPlugin(this.pluginId).storage.getItem(this.tokenKey)},p.authUrl=function(t){void 0===t&&(t={}),this.preAuthToken&&(t.uppyPreAuthToken=this.preAuthToken);var e=o(t);return e=e?"?"+e:e,this.hostname+"/"+this.id+"/connect"+e},p.fileUrl=function(t){return this.hostname+"/"+this.id+"/get/"+t},p.fetchPreAuthToken=function(){var t=this;return this.companionKeysParams?this.post(this.id+"/preauth/",{params:this.companionKeysParams}).then(function(e){t.preAuthToken=e.token}).catch(function(e){t.uppy.log("[CompanionClient] unable to fetch preAuthToken "+e,"warning")}):Promise.resolve()},p.list=function(t){return this.get(this.id+"/list/"+(t||""))},p.logout=function(){var t=this;return this.get(this.id+"/logout").then(function(e){return Promise.all([e,t.uppy.getPlugin(t.pluginId).storage.removeItem(t.tokenKey)])}).then(function(t){return t[0]})},i.initPlugin=function(e,n,o){if(e.type="acquirer",e.files=[],o&&(e.opts=t({},o,n)),n.serverUrl||n.serverPattern)throw new Error("`serverUrl` and `serverPattern` have been renamed to `companionUrl` and `companionAllowedHosts` respectively in the 0.30.5 release. Please consult the docs (for example, https://uppy.io/docs/instagram/ for the Instagram plugin) and use the updated options.`");if(n.companionAllowedHosts){var i=n.companionAllowedHosts;if(!("string"==typeof i||Array.isArray(i)||i instanceof RegExp))throw new TypeError(e.id+': the option "companionAllowedHosts" must be one of string, Array, RegExp');e.opts.companionAllowedHosts=i}else/^(?!https?:\/\/).*$/i.test(n.companionUrl)?e.opts.companionAllowedHosts="https://"+n.companionUrl.replace(/^\/\//,""):e.opts.companionAllowedHosts=new r(n.companionUrl).origin;e.storage=e.opts.storage||s},i}(i);
},{"qs-stringify":"aDV9","url-parse":"t0IB","./RequestClient":"kPfo","./tokenStorage":"Iw4z"}],"ArlY":[function(require,module,exports) {
"use strict";function t(t,r){t.prototype=Object.create(r.prototype),t.prototype.constructor=t,e(t,r)}function e(t,r){return(e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,r)}var r=require("./RequestClient"),n=function(t){return t.split("-").map(function(t){return t.charAt(0).toUpperCase()+t.slice(1)}).join(" ")};module.exports=function(e){function r(t,r){var o;return(o=e.call(this,t,r)||this).provider=r.provider,o.id=o.provider,o.name=o.opts.name||n(o.id),o.pluginId=o.opts.pluginId,o}t(r,e);var o=r.prototype;return o.fileUrl=function(t){return this.hostname+"/search/"+this.id+"/get/"+t},o.search=function(t,e){return e=e?"&"+e:"",this.get("search/"+this.id+"/list?q="+encodeURIComponent(t)+e)},r}(r);
},{"./RequestClient":"kPfo"}],"QhcJ":[function(require,module,exports) {
var t=require("namespace-emitter");module.exports=function(){function e(e){this.opts=e,this._queued=[],this.isOpen=!1,this.emitter=t(),this._handleMessage=this._handleMessage.bind(this),this.close=this.close.bind(this),this.emit=this.emit.bind(this),this.on=this.on.bind(this),this.once=this.once.bind(this),this.send=this.send.bind(this),e&&!1===e.autoOpen||this.open()}var s=e.prototype;return s.open=function(){var t=this;this.socket=new WebSocket(this.opts.target),this.socket.onopen=function(e){for(t.isOpen=!0;t._queued.length>0&&t.isOpen;){var s=t._queued[0];t.send(s.action,s.payload),t._queued=t._queued.slice(1)}},this.socket.onclose=function(e){t.isOpen=!1},this.socket.onmessage=this._handleMessage},s.close=function(){this.socket&&this.socket.close()},s.send=function(t,e){this.isOpen?this.socket.send(JSON.stringify({action:t,payload:e})):this._queued.push({action:t,payload:e})},s.on=function(t,e){this.emitter.on(t,e)},s.emit=function(t,e){this.emitter.emit(t,e)},s.once=function(t,e){this.emitter.once(t,e)},s._handleMessage=function(t){try{var e=JSON.parse(t.data);this.emit(e.action,e.payload)}catch(s){console.log(s)}},e}();
},{"namespace-emitter":"X4LQ"}],"MaVI":[function(require,module,exports) {
"use strict";var e=require("./RequestClient"),r=require("./Provider"),i=require("./SearchProvider"),t=require("./Socket");module.exports={RequestClient:e,Provider:r,SearchProvider:i,Socket:t};
},{"./RequestClient":"kPfo","./Provider":"jsGv","./SearchProvider":"ArlY","./Socket":"QhcJ"}],"XyA1":[function(require,module,exports) {
function t(t,r){t.prototype=Object.create(r.prototype),t.prototype.constructor=t,p(t,r)}function p(t,r){return(p=Object.setPrototypeOf||function(t,p){return t.__proto__=p,t})(t,r)}var r=require("preact"),e=r.h,u=r.Component,n=function(p){function r(){return p.apply(this,arguments)||this}return t(r,p),r.prototype.render=function(){var t=e("span",{className:"uppy-Provider-authTitleName"},this.props.pluginName,e("br",null));return e("div",{className:"uppy-Provider-auth"},e("div",{className:"uppy-Provider-authIcon"},this.props.pluginIcon()),e("div",{className:"uppy-Provider-authTitle"},this.props.i18nArray("authenticateWithTitle",{pluginName:t})),e("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Provider-authBtn",onClick:this.props.handleAuth,"data-uppy-super-focusable":!0},this.props.i18nArray("authenticateWith",{pluginName:this.props.pluginName})))},r}(u);module.exports=n;
},{"preact":"sSEx"}],"XGJE":[function(require,module,exports) {
var e=require("preact"),r=e.h;module.exports=function(e){return[r("span",{className:"uppy-ProviderBrowser-user",key:"username"},e.username),r("button",{type:"button",onClick:e.logout,className:"uppy-u-reset uppy-ProviderBrowser-userLogout",key:"logout"},e.i18n("logOut"))]};
},{"preact":"sSEx"}],"FO8H":[function(require,module,exports) {
var e=require("preact"),t=e.h,r=function(e){return t("span",null,t("button",{type:"button",className:"uppy-u-reset",onClick:e.getFolder},e.title),e.isLast?"":" / ")};module.exports=function(e){return t("div",{className:"uppy-Provider-breadcrumbs"},t("div",{className:"uppy-Provider-breadcrumbsIcon"},e.breadcrumbsIcon),e.directories.map(function(i,n){return t(r,{key:i.id,getFolder:function(){return e.getFolder(i.id)},title:0===n?e.title:i.title,isLast:n+1===e.directories.length})}))};
},{"preact":"sSEx"}],"xihU":[function(require,module,exports) {
var e=require("./User"),r=require("../Breadcrumbs");module.exports=function(u){var o=[];return u.showBreadcrumbs&&o.push(r({getFolder:u.getFolder,directories:u.directories,breadcrumbsIcon:u.pluginIcon&&u.pluginIcon(),title:u.title})),o.push(e({logout:u.logout,username:u.username,i18n:u.i18n})),o};
},{"./User":"XGJE","../Breadcrumbs":"FO8H"}],"kpqe":[function(require,module,exports) {
var define;
var e;!function(){"use strict";var t={}.hasOwnProperty;function r(){for(var e=[],n=0;n<arguments.length;n++){var o=arguments[n];if(o){var i=typeof o;if("string"===i||"number"===i)e.push(o);else if(Array.isArray(o)){if(o.length){var s=r.apply(null,o);s&&e.push(s)}}else if("object"===i)if(o.toString===Object.prototype.toString)for(var a in o)t.call(o,a)&&o[a]&&e.push(a);else e.push(o.toString())}}return e.join(" ")}"undefined"!=typeof module&&module.exports?(r.default=r,module.exports=r):"function"==typeof e&&"object"==typeof e.amd&&e.amd?e("classnames",[],function(){return r}):window.classNames=r}();
},{}],"NQ77":[function(require,module,exports) {
function e(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function r(e,r){e.prototype=Object.create(r.prototype),e.prototype.constructor=e,t(e,r)}function t(e,r){return(t=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(e,r)}var n=require("preact"),s=n.h,o=n.Component;module.exports=function(t){function n(r){var n;return(n=t.call(this,r)||this).preventEnterPress=n.preventEnterPress.bind(e(n)),n}r(n,t);var o=n.prototype;return o.preventEnterPress=function(e){13===e.keyCode&&(e.stopPropagation(),e.preventDefault())},o.render=function(){var e=this;return s("div",{className:"uppy-ProviderBrowser-search"},s("input",{className:"uppy-u-reset uppy-ProviderBrowser-searchInput",type:"text",placeholder:this.props.i18n("filter"),"aria-label":this.props.i18n("filter"),onKeyUp:this.preventEnterPress,onKeyDown:this.preventEnterPress,onKeyPress:this.preventEnterPress,onInput:function(r){return e.props.filterQuery(r)},value:this.props.filterInput}),s("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-ProviderBrowser-searchIcon",width:"12",height:"12",viewBox:"0 0 12 12"},s("path",{d:"M8.638 7.99l3.172 3.172a.492.492 0 1 1-.697.697L7.91 8.656a4.977 4.977 0 0 1-2.983.983C2.206 9.639 0 7.481 0 4.819 0 2.158 2.206 0 4.927 0c2.721 0 4.927 2.158 4.927 4.82a4.74 4.74 0 0 1-1.216 3.17zm-3.71.685c2.176 0 3.94-1.726 3.94-3.856 0-2.129-1.764-3.855-3.94-3.855C2.75.964.984 2.69.984 4.819c0 2.13 1.765 3.856 3.942 3.856z"})),this.props.filterInput&&s("button",{className:"uppy-u-reset uppy-ProviderBrowser-searchClose",type:"button","aria-label":this.props.i18n("resetFilter"),title:this.props.i18n("resetFilter"),onClick:this.props.filterQuery},s("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",viewBox:"0 0 19 19"},s("path",{d:"M17.318 17.232L9.94 9.854 9.586 9.5l-.354.354-7.378 7.378h.707l-.62-.62v.706L9.318 9.94l.354-.354-.354-.354L1.94 1.854v.707l.62-.62h-.706l7.378 7.378.354.354.354-.354 7.378-7.378h-.707l.622.62v-.706L9.854 9.232l-.354.354.354.354 7.378 7.378.708-.707-7.38-7.378v.708l7.38-7.38.353-.353-.353-.353-.622-.622-.353-.353-.354.352-7.378 7.38h.708L2.56 1.23 2.208.88l-.353.353-.622.62-.353.355.352.353 7.38 7.38v-.708l-7.38 7.38-.353.353.352.353.622.622.353.353.354-.353 7.38-7.38h-.708l7.38 7.38z"}))))},n}(o);
},{"preact":"sSEx"}],"booJ":[function(require,module,exports) {
function e(){return(e=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}var n=require("./getFileNameAndExtension");module.exports=function(t){return e({},t,{type:t.mimeType,extension:t.name?n(t.name).extension:null})};
},{"./getFileNameAndExtension":"a2Nq"}],"BVMC":[function(require,module,exports) {
var c=require("preact"),e=c.h;function a(){return e("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:11,height:14.5,viewBox:"0 0 44 58"},e("path",{d:"M27.437.517a1 1 0 0 0-.094.03H4.25C2.037.548.217 2.368.217 4.58v48.405c0 2.212 1.82 4.03 4.03 4.03H39.03c2.21 0 4.03-1.818 4.03-4.03V15.61a1 1 0 0 0-.03-.28 1 1 0 0 0 0-.093 1 1 0 0 0-.03-.032 1 1 0 0 0 0-.03 1 1 0 0 0-.032-.063 1 1 0 0 0-.03-.063 1 1 0 0 0-.032 0 1 1 0 0 0-.03-.063 1 1 0 0 0-.032-.03 1 1 0 0 0-.03-.063 1 1 0 0 0-.063-.062l-14.593-14a1 1 0 0 0-.062-.062A1 1 0 0 0 28 .708a1 1 0 0 0-.374-.157 1 1 0 0 0-.156 0 1 1 0 0 0-.03-.03l-.003-.003zM4.25 2.547h22.218v9.97c0 2.21 1.82 4.03 4.03 4.03h10.564v36.438a2.02 2.02 0 0 1-2.032 2.032H4.25c-1.13 0-2.032-.9-2.032-2.032V4.58c0-1.13.902-2.032 2.03-2.032zm24.218 1.345l10.375 9.937.75.718H30.5c-1.13 0-2.032-.9-2.032-2.03V3.89z"}))}function h(){return e("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",style:{minWidth:16,marginRight:3},viewBox:"0 0 276.157 276.157"},e("path",{d:"M273.08 101.378c-3.3-4.65-8.86-7.32-15.254-7.32h-24.34V67.59c0-10.2-8.3-18.5-18.5-18.5h-85.322c-3.63 0-9.295-2.875-11.436-5.805l-6.386-8.735c-4.982-6.814-15.104-11.954-23.546-11.954H58.73c-9.292 0-18.638 6.608-21.737 15.372l-2.033 5.752c-.958 2.71-4.72 5.37-7.596 5.37H18.5C8.3 49.09 0 57.39 0 67.59v167.07c0 .886.16 1.73.443 2.52.152 3.306 1.18 6.424 3.053 9.064 3.3 4.652 8.86 7.32 15.255 7.32h188.487c11.395 0 23.27-8.425 27.035-19.18l40.677-116.188c2.11-6.035 1.43-12.164-1.87-16.816zM18.5 64.088h8.864c9.295 0 18.64-6.607 21.738-15.37l2.032-5.75c.96-2.712 4.722-5.373 7.597-5.373h29.565c3.63 0 9.295 2.876 11.437 5.806l6.386 8.735c4.982 6.815 15.104 11.954 23.546 11.954h85.322c1.898 0 3.5 1.602 3.5 3.5v26.47H69.34c-11.395 0-23.27 8.423-27.035 19.178L15 191.23V67.59c0-1.898 1.603-3.5 3.5-3.5zm242.29 49.15l-40.676 116.188c-1.674 4.78-7.812 9.135-12.877 9.135H18.75c-1.447 0-2.576-.372-3.02-.997-.442-.625-.422-1.814.057-3.18l40.677-116.19c1.674-4.78 7.812-9.134 12.877-9.134h188.487c1.448 0 2.577.372 3.02.997.443.625.423 1.814-.056 3.18z"}))}function i(){return e("svg",{"aria-hidden":"true",focusable:"false",style:{width:16,marginRight:4},viewBox:"0 0 58 58"},e("path",{d:"M36.537 28.156l-11-7a1.005 1.005 0 0 0-1.02-.033C24.2 21.3 24 21.635 24 22v14a1 1 0 0 0 1.537.844l11-7a1.002 1.002 0 0 0 0-1.688zM26 34.18V23.82L34.137 29 26 34.18z"}),e("path",{d:"M57 6H1a1 1 0 0 0-1 1v44a1 1 0 0 0 1 1h56a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1zM10 28H2v-9h8v9zm-8 2h8v9H2v-9zm10 10V8h34v42H12V40zm44-12h-8v-9h8v9zm-8 2h8v9h-8v-9zm8-22v9h-8V8h8zM2 8h8v9H2V8zm0 42v-9h8v9H2zm54 0h-8v-9h8v9z"}))}module.exports=function(c){if(null!==c.itemIconString)switch(c.itemIconString){case"file":return e(a,null);case"folder":return e(h,null);case"video":return e(i,null);default:return e("img",{src:c.itemIconString})}};
},{"preact":"sSEx"}],"eTOn":[function(require,module,exports) {
var e=require("preact"),i=e.h;module.exports=function(e){return i("li",{className:e.className,title:e.isDisabled?e.restrictionReason:null},i("div",{"aria-hidden":!0,className:"uppy-ProviderBrowserItem-fakeCheckbox "+(e.isChecked?"uppy-ProviderBrowserItem-fakeCheckbox--is-checked":"")}),i("button",{type:"button",className:"uppy-u-reset uppy-ProviderBrowserItem-inner",onClick:e.toggleCheckbox,role:"option","aria-label":e.isChecked?e.i18n("unselectFileNamed",{name:e.title}):e.i18n("selectFileNamed",{name:e.title}),"aria-selected":e.isChecked,"aria-disabled":e.isDisabled,disabled:e.isDisabled,"data-uppy-super-focusable":!0},e.itemIconEl,e.showTitles&&e.title))};
},{"preact":"sSEx"}],"o4DN":[function(require,module,exports) {
var e=require("preact"),i=e.h,l=function(e){return"folder"===e.type?e.isChecked?e.i18n("unselectAllFilesFromFolderNamed",{name:e.title}):e.i18n("selectAllFilesFromFolderNamed",{name:e.title}):e.isChecked?e.i18n("unselectFileNamed",{name:e.title}):e.i18n("selectFileNamed",{name:e.title})};module.exports=function(e){return i("li",{className:e.className,title:e.isDisabled?e.restrictionReason:null},e.isCheckboxDisabled?null:i("button",{type:"button",className:"uppy-u-reset uppy-ProviderBrowserItem-fakeCheckbox "+(e.isChecked?"uppy-ProviderBrowserItem-fakeCheckbox--is-checked":""),onClick:e.toggleCheckbox,id:e.id,role:"option","aria-label":l(e),"aria-selected":e.isChecked,"aria-disabled":e.isDisabled,disabled:e.isDisabled,"data-uppy-super-focusable":!0}),"file"===e.type?i("label",{htmlFor:e.id,className:"uppy-u-reset uppy-ProviderBrowserItem-inner"},i("div",{className:"uppy-ProviderBrowserItem-iconWrap"},e.itemIconEl),e.showTitles&&e.title):i("button",{type:"button",className:"uppy-u-reset uppy-ProviderBrowserItem-inner",onClick:e.handleFolderClick,"aria-label":e.i18n("openFolderNamed",{name:e.title})},i("div",{className:"uppy-ProviderBrowserItem-iconWrap"},e.itemIconEl),e.showTitles&&i("span",null,e.title)))};
},{"preact":"sSEx"}],"VFJP":[function(require,module,exports) {
function e(){return(e=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e}).apply(this,arguments)}var r=require("preact"),t=r.h,i=require("classnames"),o=require("./components/ItemIcon"),s=require("./components/GridLi"),n=require("./components/ListLi");module.exports=function(r){var c=r.getItemIcon(),a=i("uppy-ProviderBrowserItem",{"uppy-ProviderBrowserItem--selected":r.isChecked},{"uppy-ProviderBrowserItem--disabled":r.isDisabled},{"uppy-ProviderBrowserItem--noPreview":"video"===c}),p=t(o,{itemIconString:c});switch(r.viewType){case"grid":return t(s,e({},r,{className:a,itemIconEl:p}));case"list":return t(n,e({},r,{className:a,itemIconEl:p}));default:throw new Error("There is no such type "+r.viewType)}};
},{"preact":"sSEx","classnames":"kpqe","./components/ItemIcon":"BVMC","./components/GridLi":"eTOn","./components/ListLi":"o4DN"}],"ssqh":[function(require,module,exports) {
function e(){return(e=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}var r=require("preact"),i=r.h,n=require("@uppy/utils/lib/remoteFileObjToLocal"),t=require("./Item/index"),o="shared-with-me",l=function(e,r){return{id:e.id,title:e.name,getItemIcon:function(){return e.icon},isChecked:r.isChecked(e),toggleCheckbox:function(i){return r.toggleCheckbox(i,e)},columns:r.columns,showTitles:r.showTitles,viewType:r.viewType,i18n:r.i18n}};module.exports=function(r){var s=r.folders,c=r.files,a=r.handleScroll,u=r.isChecked;return s.length||c.length?i("div",{className:"uppy-ProviderBrowser-body"},i("ul",{className:"uppy-ProviderBrowser-list",onScroll:a,role:"listbox",tabIndex:"-1"},s.map(function(i){return t(e({},l(i,r),{type:"folder",isDisabled:!!u(i)&&u(i).loading,isCheckboxDisabled:i.id===o,handleFolderClick:function(){return r.handleFolderClick(i)}}))}),c.map(function(i){var o=r.validateRestrictions(n(i),[].concat(r.uppyFiles,r.currentSelection)),s=l(i,r),c=o.reason;return t(e({},s,{type:"file",isDisabled:!o.result&&!s.isChecked,restrictionReason:c}))}))):i("div",{className:"uppy-Provider-empty"},r.i18n("noFilesFound"))};
},{"preact":"sSEx","@uppy/utils/lib/remoteFileObjToLocal":"booJ","./Item/index":"VFJP"}],"KtmD":[function(require,module,exports) {
var e=require("preact"),t=e.h;module.exports=function(e){return t("div",{className:"uppy-ProviderBrowser-footer"},t("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-primary",onClick:e.done},e.i18n("selectX",{smart_count:e.selected})),t("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-link",onClick:e.cancel},e.i18n("cancel")))};
},{"preact":"sSEx"}],"rAhD":[function(require,module,exports) {
function e(){return(e=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e}).apply(this,arguments)}var r=require("classnames"),t=require("./Filter"),i=require("./ItemList"),o=require("./FooterActions"),s=require("preact"),l=s.h,a=function(s){var a=s.currentSelection,n=s.folders,c=s.files,p=s.uppyFiles,d=s.filterItems,u=n,h=c;""!==s.filterInput&&(u=d(n),h=d(c));var v=a.length;return l("div",{className:r("uppy-ProviderBrowser","uppy-ProviderBrowser-viewType--"+s.viewType)},l("div",{className:"uppy-ProviderBrowser-header"},l("div",{className:r("uppy-ProviderBrowser-headerBar",!s.showBreadcrumbs&&"uppy-ProviderBrowser-headerBar--simple")},s.headerComponent)),s.showFilter&&l(t,s),l(i,{columns:[{name:"Name",key:"title"}],folders:u,files:h,sortByTitle:s.sortByTitle,sortByDate:s.sortByDate,isChecked:s.isChecked,handleFolderClick:s.getNextFolder,toggleCheckbox:s.toggleCheckbox,handleScroll:s.handleScroll,title:s.title,showTitles:s.showTitles,i18n:s.i18n,viewType:s.viewType,validateRestrictions:s.validateRestrictions,uppyFiles:p,currentSelection:a}),v>0&&l(o,e({selected:v},s)))};module.exports=a;
},{"classnames":"kpqe","./Filter":"NQ77","./ItemList":"ssqh","./FooterActions":"KtmD","preact":"sSEx"}],"kL8N":[function(require,module,exports) {
var r=require("preact"),e=r.h;module.exports=function(r){return e("div",{className:"uppy-Provider-loading"},e("span",null,r.i18n("loading")))};
},{"preact":"sSEx"}],"OgXR":[function(require,module,exports) {
module.exports=function(e){if(!e)return!1;var t=e.split("/")[1];return!!/^(jpe?g|gif|png|svg|svg\+xml|bmp|webp|avif)$/.test(t)};
},{}],"BqWS":[function(require,module,exports) {
var t=require("@uppy/utils/lib/remoteFileObjToLocal");module.exports=function(){function e(t){this.plugin=t,this.filterItems=this.filterItems.bind(this),this.toggleCheckbox=this.toggleCheckbox.bind(this),this.isChecked=this.isChecked.bind(this),this.loaderWrapper=this.loaderWrapper.bind(this)}var i=e.prototype;return i.filterItems=function(t){var e=this.plugin.getPluginState();return e.filterInput&&""!==e.filterInput?t.filter(function(t){return-1!==t.name.toLowerCase().indexOf(e.filterInput.toLowerCase())}):t},i.toggleCheckbox=function(e,i){var n=this;e.stopPropagation(),e.preventDefault(),e.currentTarget.focus();var r=this.plugin.getPluginState(),s=r.folders,l=r.files,o=this.filterItems(s.concat(l));if(this.lastCheckbox&&e.shiftKey){var u,c=o.indexOf(this.lastCheckbox),a=o.indexOf(i);return u=(u=c<a?o.slice(c,a+1):o.slice(a,c+1)).reduce(function(e,i){var r=n.plugin.uppy,s=r.validateRestrictions(t(i),[].concat(r.getFiles(),e));return s.result?[].concat(e,[i]):(r.info({message:s.reason},"error",r.opts.infoTimeout),e)}),void this.plugin.setPluginState({currentSelection:u})}this.lastCheckbox=i;var h=this.plugin.getPluginState().currentSelection;this.isChecked(i)?this.plugin.setPluginState({currentSelection:h.filter(function(t){return t.id!==i.id})}):this.plugin.setPluginState({currentSelection:h.concat([i])})},i.isChecked=function(t){return this.plugin.getPluginState().currentSelection.some(function(e){return e.id===t.id})},i.loaderWrapper=function(t,e,i){var n=this;t.then(function(t){n.plugin.setPluginState({loading:!1}),e(t)}).catch(function(t){n.plugin.setPluginState({loading:!1}),i(t)}),this.plugin.setPluginState({loading:!0})},e}();
},{"@uppy/utils/lib/remoteFileObjToLocal":"booJ"}],"hgge":[function(require,module,exports) {
function t(t,n){t.prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n)}function o(t,n){return(o=Object.setPrototypeOf||function(t,o){return t.__proto__=o,t})(t,n)}var n=require("preact"),r=n.Component;module.exports=function(o){function n(){return o.apply(this,arguments)||this}t(n,o);var r=n.prototype;return r.componentWillUnmount=function(){this.props.onUnmount()},r.render=function(){return this.props.children[0]},n}(r);
},{"preact":"sSEx"}],"WWBj":[function(require,module,exports) {
var e,i;function t(){return(t=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var t=arguments[i];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}var n=require("preact"),r=n.h,l=require("./AuthView"),s=require("./Header"),o=require("../Browser"),a=require("../Loader"),u=require("@uppy/utils/lib/generateFileID"),d=require("@uppy/utils/lib/getFileType"),h=require("@uppy/utils/lib/findIndex"),g=require("@uppy/utils/lib/isPreviewSupported"),p=require("../SharedHandler"),c=require("../CloseWrapper");function f(){return"origin"in location?location.origin:location.protocol+"//"+location.hostname+(location.port?":"+location.port:"")}module.exports=(i=e=function(){function e(e,i){this.plugin=e,this.provider=i.provider,this._sharedHandler=new p(e);this.opts=t({},{viewType:"list",showTitles:!0,showFilter:!0,showBreadcrumbs:!0},i),this.addFile=this.addFile.bind(this),this.filterQuery=this.filterQuery.bind(this),this.getFolder=this.getFolder.bind(this),this.getNextFolder=this.getNextFolder.bind(this),this.logout=this.logout.bind(this),this.preFirstRender=this.preFirstRender.bind(this),this.handleAuth=this.handleAuth.bind(this),this.sortByTitle=this.sortByTitle.bind(this),this.sortByDate=this.sortByDate.bind(this),this.handleError=this.handleError.bind(this),this.handleScroll=this.handleScroll.bind(this),this.listAllFiles=this.listAllFiles.bind(this),this.donePicking=this.donePicking.bind(this),this.cancelPicking=this.cancelPicking.bind(this),this.clearSelection=this.clearSelection.bind(this),this.render=this.render.bind(this),this.clearSelection(),this.plugin.setPluginState({authenticated:!1,files:[],folders:[],directories:[],filterInput:"",isSearchVisible:!1})}var i=e.prototype;return i.tearDown=function(){},i._updateFilesAndFolders=function(e,i,t){this.nextPagePath=e.nextPagePath,e.items.forEach(function(e){e.isFolder?t.push(e):i.push(e)}),this.plugin.setPluginState({folders:t,files:i})},i.preFirstRender=function(){this.plugin.setPluginState({didFirstRender:!0}),this.plugin.onFirstRender()},i.getFolder=function(e,i){var t=this;return this._sharedHandler.loaderWrapper(this.provider.list(e),function(n){var r,l=t.plugin.getPluginState(),s=h(l.directories,function(i){return e===i.id});r=-1!==s?l.directories.slice(0,s+1):l.directories.concat([{id:e,title:i}]),t.username=n.username||t.username,t._updateFilesAndFolders(n,[],[]),t.plugin.setPluginState({directories:r})},this.handleError)},i.getNextFolder=function(e){this.getFolder(e.requestPath,e.name),this.lastCheckbox=void 0},i.addFile=function(e){var i={id:this.providerFileToId(e),source:this.plugin.id,data:e,name:e.name||e.id,type:e.mimeType,isRemote:!0,body:{fileId:e.id},remote:{companionUrl:this.plugin.opts.companionUrl,url:""+this.provider.fileUrl(e.requestPath),body:{fileId:e.id},providerOptions:this.provider.opts}},t=d(i);t&&g(t)&&(i.preview=e.thumbnail),this.plugin.uppy.log("Adding remote file");try{return this.plugin.uppy.addFile(i),!0}catch(n){return n.isRestriction||this.plugin.uppy.log(n),!1}},i.logout=function(){var e=this;this.provider.logout().then(function(i){if(i.ok){if(!i.revoked){var t=e.plugin.uppy.i18n("companionUnauthorizeHint",{provider:e.plugin.title,url:i.manual_revoke_url});e.plugin.uppy.info(t,"info",7e3)}e.plugin.setPluginState({authenticated:!1,files:[],folders:[],directories:[]})}}).catch(this.handleError)},i.filterQuery=function(e){var i=this.plugin.getPluginState();this.plugin.setPluginState(t({},i,{filterInput:e?e.target.value:""}))},i.sortByTitle=function(){var e=t({},this.plugin.getPluginState()),i=e.files,n=e.folders,r=e.sorting,l=i.sort(function(e,i){return"titleDescending"===r?i.name.localeCompare(e.name):e.name.localeCompare(i.name)}),s=n.sort(function(e,i){return"titleDescending"===r?i.name.localeCompare(e.name):e.name.localeCompare(i.name)});this.plugin.setPluginState(t({},e,{files:l,folders:s,sorting:"titleDescending"===r?"titleAscending":"titleDescending"}))},i.sortByDate=function(){var e=t({},this.plugin.getPluginState()),i=e.files,n=e.folders,r=e.sorting,l=i.sort(function(e,i){var t=new Date(e.modifiedDate),n=new Date(i.modifiedDate);return"dateDescending"===r?t>n?-1:t<n?1:0:t>n?1:t<n?-1:0}),s=n.sort(function(e,i){var t=new Date(e.modifiedDate),n=new Date(i.modifiedDate);return"dateDescending"===r?t>n?-1:t<n?1:0:t>n?1:t<n?-1:0});this.plugin.setPluginState(t({},e,{files:l,folders:s,sorting:"dateDescending"===r?"dateAscending":"dateDescending"}))},i.sortBySize=function(){var e=t({},this.plugin.getPluginState()),i=e.files,n=e.sorting;if(i.length&&this.plugin.getItemData(i[0]).size){var r=i.sort(function(e,i){var t=e.size,r=i.size;return"sizeDescending"===n?t>r?-1:t<r?1:0:t>r?1:t<r?-1:0});this.plugin.setPluginState(t({},e,{files:r,sorting:"sizeDescending"===n?"sizeAscending":"sizeDescending"}))}},i.addFolder=function(e){var i=this,n=this.providerFileToId(e),r=t({},this.plugin.getPluginState().selectedFolders);if(!(n in r&&r[n].loading))return r[n]={loading:!0,files:[]},this.plugin.setPluginState({selectedFolders:t({},r)}),this.listAllFiles(e.requestPath).then(function(t){var l=0;t.forEach(function(e){i.addFile(e)&&l++});var s,o=t.map(i.providerFileToId);r[n]={loading:!1,files:o},i.plugin.setPluginState({selectedFolders:r}),s=t.length?i.plugin.uppy.i18n("folderAdded",{smart_count:l,folder:e.name}):i.plugin.uppy.i18n("emptyFolderAdded"),i.plugin.uppy.info(s)}).catch(function(e){var r=t({},i.plugin.getPluginState().selectedFolders);delete r[n],i.plugin.setPluginState({selectedFolders:r}),i.handleError(e)})},i.providerFileToId=function(e){return u({data:e,name:e.name||e.id,type:e.mimeType})},i.handleAuth=function(){var i=this,t=btoa(JSON.stringify({origin:f()})),n="@uppy/provider-views="+e.VERSION,r=this.provider.authUrl({state:t,uppyVersions:n}),l=window.open(r,"_blank");window.addEventListener("message",function e(t){if(i._isOriginAllowed(t.origin,i.plugin.opts.companionAllowedHosts)&&t.source===l){var n="string"==typeof t.data?JSON.parse(t.data):t.data;n.token?(l.close(),window.removeEventListener("message",e),i.provider.setAuthToken(n.token),i.preFirstRender()):i.plugin.uppy.log("did not receive token from auth window")}else i.plugin.uppy.log("rejecting event from "+t.origin+" vs allowed pattern "+i.plugin.opts.companionAllowedHosts)})},i._isOriginAllowed=function(e,i){var t=function(e){return"string"==typeof e?new RegExp("^"+e+"$"):e instanceof RegExp?e:void 0};return(Array.isArray(i)?i.map(t):[t(i)]).filter(function(e){return null!=e}).some(function(i){return i.test(e)||i.test(e+"/")})},i.handleError=function(e){var i=this.plugin.uppy;if(i.log(e.toString()),!e.isAuthError){var t=i.i18n("companionError");i.info({message:t,details:e.toString()},"error",5e3)}},i.handleScroll=function(e){var i=this,t=e.target.scrollHeight-(e.target.scrollTop+e.target.offsetHeight),n=this.nextPagePath||null;t<50&&n&&!this._isHandlingScroll&&(this.provider.list(n).then(function(e){var t=i.plugin.getPluginState(),n=t.files,r=t.folders;i._updateFilesAndFolders(e,n,r)}).catch(this.handleError).then(function(){i._isHandlingScroll=!1}),this._isHandlingScroll=!0)},i.listAllFiles=function(e,i){var t=this;return void 0===i&&(i=null),i=i||[],new Promise(function(n,r){t.provider.list(e).then(function(e){e.items.forEach(function(e){e.isFolder?t.addFolder(e):i.push(e)});var l=e.nextPagePath||null;return l?t.listAllFiles(l,i).then(function(e){return n(e)}).catch(function(e){return r(e)}):n(i)}).catch(function(e){return r(e)})})},i.donePicking=function(){var e=this,i=this.plugin.getPluginState().currentSelection.map(function(i){return i.isFolder?e.addFolder(i):e.addFile(i)});this._sharedHandler.loaderWrapper(Promise.all(i),function(){e.clearSelection()},function(){})},i.cancelPicking=function(){this.clearSelection();var e=this.plugin.uppy.getPlugin("Dashboard");e&&e.hideAllPanels()},i.clearSelection=function(){this.plugin.setPluginState({currentSelection:[]})},i.render=function(e,i){void 0===i&&(i={});var n=this.plugin.getPluginState(),u=n.authenticated;if(n.didFirstRender||this.preFirstRender(),this.plugin.getPluginState().loading)return r(c,{onUnmount:this.clearSelection},r(a,{i18n:this.plugin.uppy.i18n}));if(!u)return r(c,{onUnmount:this.clearSelection},r(l,{pluginName:this.plugin.title,pluginIcon:this.plugin.icon,handleAuth:this.handleAuth,i18n:this.plugin.uppy.i18n,i18nArray:this.plugin.uppy.i18nArray}));var d=t({},this.opts,i),h={showBreadcrumbs:d.showBreadcrumbs,getFolder:this.getFolder,directories:this.plugin.getPluginState().directories,pluginIcon:this.plugin.icon,title:this.plugin.title,logout:this.logout,username:this.username,i18n:this.plugin.uppy.i18n},g=t({},this.plugin.getPluginState(),{username:this.username,getNextFolder:this.getNextFolder,getFolder:this.getFolder,filterItems:this._sharedHandler.filterItems,filterQuery:this.filterQuery,sortByTitle:this.sortByTitle,sortByDate:this.sortByDate,logout:this.logout,isChecked:this._sharedHandler.isChecked,toggleCheckbox:this._sharedHandler.toggleCheckbox,handleScroll:this.handleScroll,listAllFiles:this.listAllFiles,done:this.donePicking,cancel:this.cancelPicking,headerComponent:s(h),title:this.plugin.title,viewType:d.viewType,showTitles:d.showTitles,showFilter:d.showFilter,showBreadcrumbs:d.showBreadcrumbs,pluginIcon:this.plugin.icon,i18n:this.plugin.uppy.i18n,uppyFiles:this.plugin.uppy.getFiles(),validateRestrictions:this.plugin.uppy.validateRestrictions});return r(c,{onUnmount:this.clearSelection},r(o,g))},e}(),e.VERSION="1.12.0",i);
},{"preact":"sSEx","./AuthView":"XyA1","./Header":"xihU","../Browser":"rAhD","../Loader":"kL8N","@uppy/utils/lib/generateFileID":"nk61","@uppy/utils/lib/getFileType":"Vbpm","@uppy/utils/lib/findIndex":"ADhK","@uppy/utils/lib/isPreviewSupported":"OgXR","../SharedHandler":"BqWS","../CloseWrapper":"hgge"}],"XpCw":[function(require,module,exports) {
module.exports=require("./ProviderView");
},{"./ProviderView":"WWBj"}],"lFCt":[function(require,module,exports) {
var e=require("preact"),r=e.h;module.exports=function(e){var t,p=function(){t.value&&e.search(t.value)};return r("div",{className:"uppy-SearchProvider"},r("input",{className:"uppy-u-reset uppy-c-textInput uppy-SearchProvider-input",type:"text","aria-label":e.i18n("enterTextToSearch"),placeholder:e.i18n("enterTextToSearch"),onKeyUp:function(e){13===e.keyCode&&p()},ref:function(e){t=e},"data-uppy-super-focusable":!0}),r("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-SearchProvider-searchButton",type:"button",onClick:p},e.i18n("searchImages")))};
},{"preact":"sSEx"}],"cFmF":[function(require,module,exports) {
var r=require("preact"),e=r.h;module.exports=function(r){return e("button",{type:"button",onClick:r.triggerSearchInput,className:"uppy-u-reset uppy-ProviderBrowser-userLogout"},r.i18n("backToSearch"))};
},{"preact":"sSEx"}],"H3GB":[function(require,module,exports) {
var i,e;function t(){return(t=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=t[r])}return i}).apply(this,arguments)}var r=require("preact"),n=r.h,s=require("./InputView"),l=require("../Browser"),h=require("../Loader"),o=require("@uppy/utils/lib/generateFileID"),a=require("@uppy/utils/lib/getFileType"),u=require("@uppy/utils/lib/isPreviewSupported"),p=require("./Header"),d=require("../SharedHandler"),c=require("../CloseWrapper");module.exports=(e=i=function(){function i(i,e){this.plugin=i,this.provider=e.provider,this._sharedHandler=new d(i);this.opts=t({},{viewType:"grid",showTitles:!1,showFilter:!1,showBreadcrumbs:!1},e),this.search=this.search.bind(this),this.triggerSearchInput=this.triggerSearchInput.bind(this),this.addFile=this.addFile.bind(this),this.preFirstRender=this.preFirstRender.bind(this),this.handleError=this.handleError.bind(this),this.handleScroll=this.handleScroll.bind(this),this.donePicking=this.donePicking.bind(this),this.cancelPicking=this.cancelPicking.bind(this),this.clearSelection=this.clearSelection.bind(this),this.render=this.render.bind(this),this.clearSelection(),this.plugin.setPluginState({isInputMode:!0,files:[],folders:[],directories:[],filterInput:"",isSearchVisible:!1})}var e=i.prototype;return e.tearDown=function(){},e._updateFilesAndInputMode=function(i,e){this.nextPageQuery=i.nextPageQuery,this._searchTerm=i.searchedFor,i.items.forEach(function(i){e.push(i)}),this.plugin.setPluginState({isInputMode:!1,files:e})},e.preFirstRender=function(){this.plugin.setPluginState({didFirstRender:!0}),this.plugin.onFirstRender()},e.search=function(i){var e=this;if(!i||i!==this._searchTerm)return this._sharedHandler.loaderWrapper(this.provider.search(i),function(i){e._updateFilesAndInputMode(i,[])},this.handleError);this.plugin.setPluginState({isInputMode:!1})},e.triggerSearchInput=function(){this.plugin.setPluginState({isInputMode:!0})},e.addFile=function(i){var e={id:this.providerFileToId(i),source:this.plugin.id,data:i,name:i.name||i.id,type:i.mimeType,isRemote:!0,body:{fileId:i.id},remote:{companionUrl:this.plugin.opts.companionUrl,url:""+this.provider.fileUrl(i.requestPath),body:{fileId:i.id},providerOptions:t({},this.provider.opts,{provider:null})}},r=a(e);r&&u(r)&&(e.preview=i.thumbnail),this.plugin.uppy.log("Adding remote file");try{this.plugin.uppy.addFile(e)}catch(n){n.isRestriction||this.plugin.uppy.log(n)}},e.providerFileToId=function(i){return o({data:i,name:i.name||i.id,type:i.mimeType})},e.handleError=function(i){var e=this.plugin.uppy;e.log(i.toString());var t=e.i18n("companionError");e.info({message:t,details:i.toString()},"error",5e3)},e.handleScroll=function(i){var e=this,t=i.target.scrollHeight-(i.target.scrollTop+i.target.offsetHeight),r=this.nextPageQuery||null;t<50&&r&&!this._isHandlingScroll&&(this.provider.search(this._searchTerm,r).then(function(i){var t=e.plugin.getPluginState().files;e._updateFilesAndInputMode(i,t)}).catch(this.handleError).then(function(){e._isHandlingScroll=!1}),this._isHandlingScroll=!0)},e.donePicking=function(){var i=this,e=this.plugin.getPluginState().currentSelection.map(function(e){return i.addFile(e)});this._sharedHandler.loaderWrapper(Promise.all(e),function(){i.clearSelection()},function(){})},e.cancelPicking=function(){this.clearSelection();var i=this.plugin.uppy.getPlugin("Dashboard");i&&i.hideAllPanels()},e.clearSelection=function(){this.plugin.setPluginState({currentSelection:[]})},e.render=function(i,e){void 0===e&&(e={});var r=this.plugin.getPluginState(),o=r.didFirstRender,a=r.isInputMode;if(o||this.preFirstRender(),this.plugin.getPluginState().loading)return n(c,{onUnmount:this.clearSelection},n(h,{i18n:this.plugin.uppy.i18n}));if(a)return n(c,{onUnmount:this.clearSelection},n(s,{search:this.search,i18n:this.plugin.uppy.i18n}));var u=t({},this.opts,e),d=t({},this.plugin.getPluginState(),{isChecked:this._sharedHandler.isChecked,toggleCheckbox:this._sharedHandler.toggleCheckbox,handleScroll:this.handleScroll,done:this.donePicking,cancel:this.cancelPicking,headerComponent:p({triggerSearchInput:this.triggerSearchInput,i18n:this.plugin.uppy.i18n}),title:this.plugin.title,viewType:u.viewType,showTitles:u.showTitles,showFilter:u.showFilter,showBreadcrumbs:u.showBreadcrumbs,pluginIcon:this.plugin.icon,i18n:this.plugin.uppy.i18n,uppyFiles:this.plugin.uppy.getFiles(),validateRestrictions:this.plugin.uppy.validateRestrictions});return n(c,{onUnmount:this.clearSelection},n(l,d))},i}(),i.VERSION="1.12.0",e);
},{"preact":"sSEx","./InputView":"lFCt","../Browser":"rAhD","../Loader":"kL8N","@uppy/utils/lib/generateFileID":"nk61","@uppy/utils/lib/getFileType":"Vbpm","@uppy/utils/lib/isPreviewSupported":"OgXR","./Header":"cFmF","../SharedHandler":"BqWS","../CloseWrapper":"hgge"}],"JRm0":[function(require,module,exports) {
module.exports=require("./SearchProviderView");
},{"./SearchProviderView":"H3GB"}],"kLTu":[function(require,module,exports) {
var e=require("./ProviderView"),r=require("./SearchProviderView");module.exports={ProviderViews:e,SearchProviderViews:r};
},{"./ProviderView":"XpCw","./SearchProviderView":"JRm0"}],"gTt0":[function(require,module,exports) {
var e,i;function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function t(e,i){e.prototype=Object.create(i.prototype),e.prototype.constructor=e,o(e,i)}function o(e,i){return(o=Object.setPrototypeOf||function(e,i){return e.__proto__=i,e})(e,i)}var n=require("@uppy/core"),s=n.Plugin,l=require("@uppy/companion-client"),p=l.Provider,a=require("@uppy/provider-views"),u=a.ProviderViews,c=require("preact"),d=c.h;module.exports=(i=e=function(e){function i(i,t){var o;return(o=e.call(this,i,t)||this).id=o.opts.id||"Facebook",p.initPlugin(r(o),t),o.title=o.opts.title||"Facebook",o.icon=function(){return d("svg",{"aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32"},d("g",{fill:"none",fillRule:"evenodd"},d("rect",{className:"uppy-ProviderIconBg",width:"32",height:"32",rx:"16",fill:"#3C5A99"}),d("path",{d:"M17.842 26v-8.667h2.653l.398-3.377h-3.051v-2.157c0-.978.248-1.644 1.527-1.644H21V7.132A19.914 19.914 0 0 0 18.623 7c-2.352 0-3.963 1.574-3.963 4.465v2.49H12v3.378h2.66V26h3.182z",fill:"#FFF",fillRule:"nonzero"})))},o.provider=new p(i,{companionUrl:o.opts.companionUrl,companionHeaders:o.opts.companionHeaders||o.opts.serverHeaders,companionKeysParams:o.opts.companionKeysParams,companionCookiesRule:o.opts.companionCookiesRule,provider:"facebook",pluginId:o.id}),o.onFirstRender=o.onFirstRender.bind(r(o)),o.render=o.render.bind(r(o)),o}t(i,e);var o=i.prototype;return o.install=function(){this.view=new u(this,{provider:this.provider});var e=this.opts.target;e&&this.mount(e,this)},o.uninstall=function(){this.view.tearDown(),this.unmount()},o.onFirstRender=function(){return Promise.all([this.provider.fetchPreAuthToken(),this.view.getFolder()])},o.render=function(e){var i={};return this.getPluginState().files.length&&!this.getPluginState().folders.length&&(i.viewType="grid",i.showFilter=!1,i.showTitles=!1),this.view.render(e,i)},i}(s),e.VERSION="1.1.26",i);
},{"@uppy/core":"PDAA","@uppy/companion-client":"MaVI","@uppy/provider-views":"kLTu","preact":"sSEx"}],"y8xO":[function(require,module,exports) {
var define;
var global = arguments[3];
var t,e=arguments[3];!function(e,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof t&&t.amd?t(i):(e=e||self).Cropper=i()}(this,function(){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function i(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function a(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,a)}return i}function n(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach(function(e){i(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function o(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return r(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,a=new Array(e);i<e;i++)a[i]=t[i];return a}var h="undefined"!=typeof window&&void 0!==window.document,s=h?window:{},c=!(!h||!s.document.documentElement)&&"ontouchstart"in s.document.documentElement,l=!!h&&"PointerEvent"in s,p="".concat("cropper","-crop"),d="".concat("cropper","-disabled"),m="".concat("cropper","-hidden"),u="".concat("cropper","-hide"),g="".concat("cropper","-invisible"),f="".concat("cropper","-modal"),v="".concat("cropper","-move"),w="".concat("cropper","Action"),b="".concat("cropper","Preview"),y=l?"pointerdown":c?"touchstart":"mousedown",x=l?"pointermove":c?"touchmove":"mousemove",M=l?"pointerup pointercancel":c?"touchend touchcancel":"mouseup",C=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,D=/^data:/,B=/^data:image\/jpeg;base64,/,k=/^img|canvas$/i,O={viewMode:0,dragMode:"crop",initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},T=Number.isNaN||s.isNaN;function E(t){return"number"==typeof t&&!T(t)}var W=function(t){return t>0&&t<1/0};function N(t){return void 0===t}function H(e){return"object"===t(e)&&null!==e}var z=Object.prototype.hasOwnProperty;function L(t){if(!H(t))return!1;try{var e=t.constructor,i=e.prototype;return e&&i&&z.call(i,"isPrototypeOf")}catch(a){return!1}}function Y(t){return"function"==typeof t}var X=Array.prototype.slice;function R(t){return Array.from?Array.from(t):X.call(t)}function S(t,e){return t&&Y(e)&&(Array.isArray(t)||E(t.length)?R(t).forEach(function(i,a){e.call(t,i,a,t)}):H(t)&&Object.keys(t).forEach(function(i){e.call(t,t[i],i,t)})),t}var j=Object.assign||function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),a=1;a<e;a++)i[a-1]=arguments[a];return H(t)&&i.length>0&&i.forEach(function(e){H(e)&&Object.keys(e).forEach(function(i){t[i]=e[i]})}),t},A=/\.\d*(?:0|9){12}\d*$/;function I(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return A.test(t)?Math.round(t*e)/e:t}var P=/^width|height|left|top|marginLeft|marginTop$/;function U(t,e){var i=t.style;S(e,function(t,e){P.test(e)&&E(t)&&(t="".concat(t,"px")),i[e]=t})}function q(t,e){if(e)if(E(t.length))S(t,function(t){q(t,e)});else if(t.classList)t.classList.add(e);else{var i=t.className.trim();i?i.indexOf(e)<0&&(t.className="".concat(i," ").concat(e)):t.className=e}}function $(t,e){e&&(E(t.length)?S(t,function(t){$(t,e)}):t.classList?t.classList.remove(e):t.className.indexOf(e)>=0&&(t.className=t.className.replace(e,"")))}function Q(t,e,i){e&&(E(t.length)?S(t,function(t){Q(t,e,i)}):i?q(t,e):$(t,e))}var K=/([a-z\d])([A-Z])/g;function Z(t){return t.replace(K,"$1-$2").toLowerCase()}function G(t,e){return H(t[e])?t[e]:t.dataset?t.dataset[e]:t.getAttribute("data-".concat(Z(e)))}function V(t,e,i){H(i)?t[e]=i:t.dataset?t.dataset[e]=i:t.setAttribute("data-".concat(Z(e)),i)}var F=/\s\s*/,J=function(){var t=!1;if(h){var e=!1,i=function(){},a=Object.defineProperty({},"once",{get:function(){return t=!0,e},set:function(t){e=t}});s.addEventListener("test",i,a),s.removeEventListener("test",i,a)}return t}();function _(t,e,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=i;e.trim().split(F).forEach(function(e){if(!J){var o=t.listeners;o&&o[e]&&o[e][i]&&(n=o[e][i],delete o[e][i],0===Object.keys(o[e]).length&&delete o[e],0===Object.keys(o).length&&delete t.listeners)}t.removeEventListener(e,n,a)})}function tt(t,e,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=i;e.trim().split(F).forEach(function(e){if(a.once&&!J){var o=t.listeners,r=void 0===o?{}:o;n=function(){delete r[e][i],t.removeEventListener(e,n,a);for(var o=arguments.length,h=new Array(o),s=0;s<o;s++)h[s]=arguments[s];i.apply(t,h)},r[e]||(r[e]={}),r[e][i]&&t.removeEventListener(e,r[e][i],a),r[e][i]=n,t.listeners=r}t.addEventListener(e,n,a)})}function et(t,e,i){var a;return Y(Event)&&Y(CustomEvent)?a=new CustomEvent(e,{detail:i,bubbles:!0,cancelable:!0}):(a=document.createEvent("CustomEvent")).initCustomEvent(e,!0,!0,i),t.dispatchEvent(a)}function it(t){var e=t.getBoundingClientRect();return{left:e.left+(window.pageXOffset-document.documentElement.clientLeft),top:e.top+(window.pageYOffset-document.documentElement.clientTop)}}var at=s.location,nt=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function ot(t){var e=t.match(nt);return null!==e&&(e[1]!==at.protocol||e[2]!==at.hostname||e[3]!==at.port)}function rt(t){var e="timestamp=".concat((new Date).getTime());return t+(-1===t.indexOf("?")?"?":"&")+e}function ht(t){var e=t.rotate,i=t.scaleX,a=t.scaleY,n=t.translateX,o=t.translateY,r=[];E(n)&&0!==n&&r.push("translateX(".concat(n,"px)")),E(o)&&0!==o&&r.push("translateY(".concat(o,"px)")),E(e)&&0!==e&&r.push("rotate(".concat(e,"deg)")),E(i)&&1!==i&&r.push("scaleX(".concat(i,")")),E(a)&&1!==a&&r.push("scaleY(".concat(a,")"));var h=r.length?r.join(" "):"none";return{WebkitTransform:h,msTransform:h,transform:h}}function st(t,e){var i=t.pageX,a=t.pageY,o={endX:i,endY:a};return e?o:n({startX:i,startY:a},o)}function ct(t){var e=t.aspectRatio,i=t.height,a=t.width,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"contain",o=W(a),r=W(i);if(o&&r){var h=i*e;"contain"===n&&h>a||"cover"===n&&h<a?i=a/e:a=i*e}else o?i=a/e:r&&(a=i*e);return{width:a,height:i}}var lt=String.fromCharCode;var pt=/^data:.*,/;function dt(t){var e,i=new DataView(t);try{var a,n,o;if(255===i.getUint8(0)&&216===i.getUint8(1))for(var r=i.byteLength,h=2;h+1<r;){if(255===i.getUint8(h)&&225===i.getUint8(h+1)){n=h;break}h+=1}if(n){var s=n+10;if("Exif"===function(t,e,i){var a="";i+=e;for(var n=e;n<i;n+=1)a+=lt(t.getUint8(n));return a}(i,n+4,4)){var c=i.getUint16(s);if(((a=18761===c)||19789===c)&&42===i.getUint16(s+2,a)){var l=i.getUint32(s+4,a);l>=8&&(o=s+l)}}}if(o){var p,d,m=i.getUint16(o,a);for(d=0;d<m;d+=1)if(p=o+12*d+2,274===i.getUint16(p,a)){p+=8,e=i.getUint16(p,a),i.setUint16(p,1,a);break}}}catch(u){e=1}return e}var mt={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var t=this.element,e=this.options,i=this.container,a=this.cropper;q(a,m),$(t,m);var n={width:Math.max(i.offsetWidth,Number(e.minContainerWidth)||200),height:Math.max(i.offsetHeight,Number(e.minContainerHeight)||100)};this.containerData=n,U(a,{width:n.width,height:n.height}),q(t,m),$(a,m)},initCanvas:function(){var t=this.containerData,e=this.imageData,i=this.options.viewMode,a=Math.abs(e.rotate)%180==90,n=a?e.naturalHeight:e.naturalWidth,o=a?e.naturalWidth:e.naturalHeight,r=n/o,h=t.width,s=t.height;t.height*r>t.width?3===i?h=t.height*r:s=t.width/r:3===i?s=t.width/r:h=t.height*r;var c={aspectRatio:r,naturalWidth:n,naturalHeight:o,width:h,height:s};c.left=(t.width-h)/2,c.top=(t.height-s)/2,c.oldLeft=c.left,c.oldTop=c.top,this.canvasData=c,this.limited=1===i||2===i,this.limitCanvas(!0,!0),this.initialImageData=j({},e),this.initialCanvasData=j({},c)},limitCanvas:function(t,e){var i=this.options,a=this.containerData,n=this.canvasData,o=this.cropBoxData,r=i.viewMode,h=n.aspectRatio,s=this.cropped&&o;if(t){var c=Number(i.minCanvasWidth)||0,l=Number(i.minCanvasHeight)||0;r>1?(c=Math.max(c,a.width),l=Math.max(l,a.height),3===r&&(l*h>c?c=l*h:l=c/h)):r>0&&(c?c=Math.max(c,s?o.width:0):l?l=Math.max(l,s?o.height:0):s&&(c=o.width,(l=o.height)*h>c?c=l*h:l=c/h));var p=ct({aspectRatio:h,width:c,height:l});c=p.width,l=p.height,n.minWidth=c,n.minHeight=l,n.maxWidth=1/0,n.maxHeight=1/0}if(e)if(r>(s?0:1)){var d=a.width-n.width,m=a.height-n.height;n.minLeft=Math.min(0,d),n.minTop=Math.min(0,m),n.maxLeft=Math.max(0,d),n.maxTop=Math.max(0,m),s&&this.limited&&(n.minLeft=Math.min(o.left,o.left+(o.width-n.width)),n.minTop=Math.min(o.top,o.top+(o.height-n.height)),n.maxLeft=o.left,n.maxTop=o.top,2===r&&(n.width>=a.width&&(n.minLeft=Math.min(0,d),n.maxLeft=Math.max(0,d)),n.height>=a.height&&(n.minTop=Math.min(0,m),n.maxTop=Math.max(0,m))))}else n.minLeft=-n.width,n.minTop=-n.height,n.maxLeft=a.width,n.maxTop=a.height},renderCanvas:function(t,e){var i=this.canvasData,a=this.imageData;if(e){var n=function(t){var e=t.width,i=t.height,a=t.degree;if(90==(a=Math.abs(a)%180))return{width:i,height:e};var n=a%90*Math.PI/180,o=Math.sin(n),r=Math.cos(n),h=e*r+i*o,s=e*o+i*r;return a>90?{width:s,height:h}:{width:h,height:s}}({width:a.naturalWidth*Math.abs(a.scaleX||1),height:a.naturalHeight*Math.abs(a.scaleY||1),degree:a.rotate||0}),o=n.width,r=n.height,h=i.width*(o/i.naturalWidth),s=i.height*(r/i.naturalHeight);i.left-=(h-i.width)/2,i.top-=(s-i.height)/2,i.width=h,i.height=s,i.aspectRatio=o/r,i.naturalWidth=o,i.naturalHeight=r,this.limitCanvas(!0,!1)}(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCanvas(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,U(this.canvas,j({width:i.width,height:i.height},ht({translateX:i.left,translateY:i.top}))),this.renderImage(t),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(t){var e=this.canvasData,i=this.imageData,a=i.naturalWidth*(e.width/e.naturalWidth),n=i.naturalHeight*(e.height/e.naturalHeight);j(i,{width:a,height:n,left:(e.width-a)/2,top:(e.height-n)/2}),U(this.image,j({width:i.width,height:i.height},ht(j({translateX:i.left,translateY:i.top},i)))),t&&this.output()},initCropBox:function(){var t=this.options,e=this.canvasData,i=t.aspectRatio||t.initialAspectRatio,a=Number(t.autoCropArea)||.8,n={width:e.width,height:e.height};i&&(e.height*i>e.width?n.height=n.width/i:n.width=n.height*i),this.cropBoxData=n,this.limitCropBox(!0,!0),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),n.width=Math.max(n.minWidth,n.width*a),n.height=Math.max(n.minHeight,n.height*a),n.left=e.left+(e.width-n.width)/2,n.top=e.top+(e.height-n.height)/2,n.oldLeft=n.left,n.oldTop=n.top,this.initialCropBoxData=j({},n)},limitCropBox:function(t,e){var i=this.options,a=this.containerData,n=this.canvasData,o=this.cropBoxData,r=this.limited,h=i.aspectRatio;if(t){var s=Number(i.minCropBoxWidth)||0,c=Number(i.minCropBoxHeight)||0,l=r?Math.min(a.width,n.width,n.width+n.left,a.width-n.left):a.width,p=r?Math.min(a.height,n.height,n.height+n.top,a.height-n.top):a.height;s=Math.min(s,a.width),c=Math.min(c,a.height),h&&(s&&c?c*h>s?c=s/h:s=c*h:s?c=s/h:c&&(s=c*h),p*h>l?p=l/h:l=p*h),o.minWidth=Math.min(s,l),o.minHeight=Math.min(c,p),o.maxWidth=l,o.maxHeight=p}e&&(r?(o.minLeft=Math.max(0,n.left),o.minTop=Math.max(0,n.top),o.maxLeft=Math.min(a.width,n.left+n.width)-o.width,o.maxTop=Math.min(a.height,n.top+n.height)-o.height):(o.minLeft=0,o.minTop=0,o.maxLeft=a.width-o.width,o.maxTop=a.height-o.height))},renderCropBox:function(){var t=this.options,e=this.containerData,i=this.cropBoxData;(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCropBox(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,t.movable&&t.cropBoxMovable&&V(this.face,w,i.width>=e.width&&i.height>=e.height?"move":"all"),U(this.cropBox,j({width:i.width,height:i.height},ht({translateX:i.left,translateY:i.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),et(this.element,"crop",this.getData())}},ut={initPreview:function(){var t=this.element,e=this.crossOrigin,i=this.options.preview,a=e?this.crossOriginUrl:this.url,n=t.alt||"The image to preview",o=document.createElement("img");if(e&&(o.crossOrigin=e),o.src=a,o.alt=n,this.viewBox.appendChild(o),this.viewBoxImage=o,i){var r=i;"string"==typeof i?r=t.ownerDocument.querySelectorAll(i):i.querySelector&&(r=[i]),this.previews=r,S(r,function(t){var i=document.createElement("img");V(t,b,{width:t.offsetWidth,height:t.offsetHeight,html:t.innerHTML}),e&&(i.crossOrigin=e),i.src=a,i.alt=n,i.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',t.innerHTML="",t.appendChild(i)})}},resetPreview:function(){S(this.previews,function(t){var e=G(t,b);U(t,{width:e.width,height:e.height}),t.innerHTML=e.html,function(t,e){if(H(t[e]))try{delete t[e]}catch(i){t[e]=void 0}else if(t.dataset)try{delete t.dataset[e]}catch(i){t.dataset[e]=void 0}else t.removeAttribute("data-".concat(Z(e)))}(t,b)})},preview:function(){var t=this.imageData,e=this.canvasData,i=this.cropBoxData,a=i.width,n=i.height,o=t.width,r=t.height,h=i.left-e.left-t.left,s=i.top-e.top-t.top;this.cropped&&!this.disabled&&(U(this.viewBoxImage,j({width:o,height:r},ht(j({translateX:-h,translateY:-s},t)))),S(this.previews,function(e){var i=G(e,b),c=i.width,l=i.height,p=c,d=l,m=1;a&&(d=n*(m=c/a)),n&&d>l&&(p=a*(m=l/n),d=l),U(e,{width:p,height:d}),U(e.getElementsByTagName("img")[0],j({width:o*m,height:r*m},ht(j({translateX:-h*m,translateY:-s*m},t))))}))}},gt={bind:function(){var t=this.element,e=this.options,i=this.cropper;Y(e.cropstart)&&tt(t,"cropstart",e.cropstart),Y(e.cropmove)&&tt(t,"cropmove",e.cropmove),Y(e.cropend)&&tt(t,"cropend",e.cropend),Y(e.crop)&&tt(t,"crop",e.crop),Y(e.zoom)&&tt(t,"zoom",e.zoom),tt(i,y,this.onCropStart=this.cropStart.bind(this)),e.zoomable&&e.zoomOnWheel&&tt(i,"wheel",this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&tt(i,"dblclick",this.onDblclick=this.dblclick.bind(this)),tt(t.ownerDocument,x,this.onCropMove=this.cropMove.bind(this)),tt(t.ownerDocument,M,this.onCropEnd=this.cropEnd.bind(this)),e.responsive&&tt(window,"resize",this.onResize=this.resize.bind(this))},unbind:function(){var t=this.element,e=this.options,i=this.cropper;Y(e.cropstart)&&_(t,"cropstart",e.cropstart),Y(e.cropmove)&&_(t,"cropmove",e.cropmove),Y(e.cropend)&&_(t,"cropend",e.cropend),Y(e.crop)&&_(t,"crop",e.crop),Y(e.zoom)&&_(t,"zoom",e.zoom),_(i,y,this.onCropStart),e.zoomable&&e.zoomOnWheel&&_(i,"wheel",this.onWheel,{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&_(i,"dblclick",this.onDblclick),_(t.ownerDocument,x,this.onCropMove),_(t.ownerDocument,M,this.onCropEnd),e.responsive&&_(window,"resize",this.onResize)}},ft={resize:function(){if(!this.disabled){var t,e,i=this.options,a=this.container,n=this.containerData,o=a.offsetWidth/n.width;if(1!==o||a.offsetHeight!==n.height)i.restore&&(t=this.getCanvasData(),e=this.getCropBoxData()),this.render(),i.restore&&(this.setCanvasData(S(t,function(e,i){t[i]=e*o})),this.setCropBoxData(S(e,function(t,i){e[i]=t*o})))}},dblclick:function(){var t,e;this.disabled||"none"===this.options.dragMode||this.setDragMode((t=this.dragBox,e=p,(t.classList?t.classList.contains(e):t.className.indexOf(e)>-1)?"move":"crop"))},wheel:function(t){var e=this,i=Number(this.options.wheelZoomRatio)||.1,a=1;this.disabled||(t.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout(function(){e.wheeling=!1},50),t.deltaY?a=t.deltaY>0?1:-1:t.wheelDelta?a=-t.wheelDelta/120:t.detail&&(a=t.detail>0?1:-1),this.zoom(-a*i,t)))},cropStart:function(t){var e=t.buttons,i=t.button;if(!(this.disabled||("mousedown"===t.type||"pointerdown"===t.type&&"mouse"===t.pointerType)&&(E(e)&&1!==e||E(i)&&0!==i||t.ctrlKey))){var a,n=this.options,o=this.pointers;t.changedTouches?S(t.changedTouches,function(t){o[t.identifier]=st(t)}):o[t.pointerId||0]=st(t),a=Object.keys(o).length>1&&n.zoomable&&n.zoomOnTouch?"zoom":G(t.target,w),C.test(a)&&!1!==et(this.element,"cropstart",{originalEvent:t,action:a})&&(t.preventDefault(),this.action=a,this.cropping=!1,"crop"===a&&(this.cropping=!0,q(this.dragBox,f)))}},cropMove:function(t){var e=this.action;if(!this.disabled&&e){var i=this.pointers;t.preventDefault(),!1!==et(this.element,"cropmove",{originalEvent:t,action:e})&&(t.changedTouches?S(t.changedTouches,function(t){j(i[t.identifier]||{},st(t,!0))}):j(i[t.pointerId||0]||{},st(t,!0)),this.change(t))}},cropEnd:function(t){if(!this.disabled){var e=this.action,i=this.pointers;t.changedTouches?S(t.changedTouches,function(t){delete i[t.identifier]}):delete i[t.pointerId||0],e&&(t.preventDefault(),Object.keys(i).length||(this.action=""),this.cropping&&(this.cropping=!1,Q(this.dragBox,f,this.cropped&&this.options.modal)),et(this.element,"cropend",{originalEvent:t,action:e}))}}},vt={change:function(t){var e,i=this.options,a=this.canvasData,o=this.containerData,r=this.cropBoxData,h=this.pointers,s=this.action,c=i.aspectRatio,l=r.left,p=r.top,d=r.width,u=r.height,g=l+d,f=p+u,v=0,w=0,b=o.width,y=o.height,x=!0;!c&&t.shiftKey&&(c=d&&u?d/u:1),this.limited&&(v=r.minLeft,w=r.minTop,b=v+Math.min(o.width,a.width,a.left+a.width),y=w+Math.min(o.height,a.height,a.top+a.height));var M=h[Object.keys(h)[0]],C={x:M.endX-M.startX,y:M.endY-M.startY},D=function(t){switch(t){case"e":g+C.x>b&&(C.x=b-g);break;case"w":l+C.x<v&&(C.x=v-l);break;case"n":p+C.y<w&&(C.y=w-p);break;case"s":f+C.y>y&&(C.y=y-f)}};switch(s){case"all":l+=C.x,p+=C.y;break;case"e":if(C.x>=0&&(g>=b||c&&(p<=w||f>=y))){x=!1;break}D("e"),(d+=C.x)<0&&(s="w",l-=d=-d),c&&(u=d/c,p+=(r.height-u)/2);break;case"n":if(C.y<=0&&(p<=w||c&&(l<=v||g>=b))){x=!1;break}D("n"),u-=C.y,p+=C.y,u<0&&(s="s",p-=u=-u),c&&(d=u*c,l+=(r.width-d)/2);break;case"w":if(C.x<=0&&(l<=v||c&&(p<=w||f>=y))){x=!1;break}D("w"),d-=C.x,l+=C.x,d<0&&(s="e",l-=d=-d),c&&(u=d/c,p+=(r.height-u)/2);break;case"s":if(C.y>=0&&(f>=y||c&&(l<=v||g>=b))){x=!1;break}D("s"),(u+=C.y)<0&&(s="n",p-=u=-u),c&&(d=u*c,l+=(r.width-d)/2);break;case"ne":if(c){if(C.y<=0&&(p<=w||g>=b)){x=!1;break}D("n"),u-=C.y,p+=C.y,d=u*c}else D("n"),D("e"),C.x>=0?g<b?d+=C.x:C.y<=0&&p<=w&&(x=!1):d+=C.x,C.y<=0?p>w&&(u-=C.y,p+=C.y):(u-=C.y,p+=C.y);d<0&&u<0?(s="sw",p-=u=-u,l-=d=-d):d<0?(s="nw",l-=d=-d):u<0&&(s="se",p-=u=-u);break;case"nw":if(c){if(C.y<=0&&(p<=w||l<=v)){x=!1;break}D("n"),u-=C.y,p+=C.y,d=u*c,l+=r.width-d}else D("n"),D("w"),C.x<=0?l>v?(d-=C.x,l+=C.x):C.y<=0&&p<=w&&(x=!1):(d-=C.x,l+=C.x),C.y<=0?p>w&&(u-=C.y,p+=C.y):(u-=C.y,p+=C.y);d<0&&u<0?(s="se",p-=u=-u,l-=d=-d):d<0?(s="ne",l-=d=-d):u<0&&(s="sw",p-=u=-u);break;case"sw":if(c){if(C.x<=0&&(l<=v||f>=y)){x=!1;break}D("w"),d-=C.x,l+=C.x,u=d/c}else D("s"),D("w"),C.x<=0?l>v?(d-=C.x,l+=C.x):C.y>=0&&f>=y&&(x=!1):(d-=C.x,l+=C.x),C.y>=0?f<y&&(u+=C.y):u+=C.y;d<0&&u<0?(s="ne",p-=u=-u,l-=d=-d):d<0?(s="se",l-=d=-d):u<0&&(s="nw",p-=u=-u);break;case"se":if(c){if(C.x>=0&&(g>=b||f>=y)){x=!1;break}D("e"),u=(d+=C.x)/c}else D("s"),D("e"),C.x>=0?g<b?d+=C.x:C.y>=0&&f>=y&&(x=!1):d+=C.x,C.y>=0?f<y&&(u+=C.y):u+=C.y;d<0&&u<0?(s="nw",p-=u=-u,l-=d=-d):d<0?(s="sw",l-=d=-d):u<0&&(s="ne",p-=u=-u);break;case"move":this.move(C.x,C.y),x=!1;break;case"zoom":this.zoom(function(t){var e=n({},t),i=[];return S(t,function(t,a){delete e[a],S(e,function(e){var a=Math.abs(t.startX-e.startX),n=Math.abs(t.startY-e.startY),o=Math.abs(t.endX-e.endX),r=Math.abs(t.endY-e.endY),h=Math.sqrt(a*a+n*n),s=(Math.sqrt(o*o+r*r)-h)/h;i.push(s)})}),i.sort(function(t,e){return Math.abs(t)<Math.abs(e)}),i[0]}(h),t),x=!1;break;case"crop":if(!C.x||!C.y){x=!1;break}e=it(this.cropper),l=M.startX-e.left,p=M.startY-e.top,d=r.minWidth,u=r.minHeight,C.x>0?s=C.y>0?"se":"ne":C.x<0&&(l-=d,s=C.y>0?"sw":"nw"),C.y<0&&(p-=u),this.cropped||($(this.cropBox,m),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0))}x&&(r.width=d,r.height=u,r.left=l,r.top=p,this.action=s,this.renderCropBox()),S(h,function(t){t.startX=t.endX,t.startY=t.endY})}},wt={crop:function(){return!this.ready||this.cropped||this.disabled||(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&q(this.dragBox,f),$(this.cropBox,m),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=j({},this.initialImageData),this.canvasData=j({},this.initialCanvasData),this.cropBoxData=j({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(j(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),$(this.dragBox,f),q(this.cropBox,m)),this},replace:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!this.disabled&&t&&(this.isImg&&(this.element.src=t),e?(this.url=t,this.image.src=t,this.ready&&(this.viewBoxImage.src=t,S(this.previews,function(e){e.getElementsByTagName("img")[0].src=t}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(t))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,$(this.cropper,d)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,q(this.cropper,d)),this},destroy:function(){var t=this.element;return t.cropper?(t.cropper=void 0,this.isImg&&this.replaced&&(t.src=this.originalUrl),this.uncreate(),this):this},move:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=this.canvasData,a=i.left,n=i.top;return this.moveTo(N(t)?t:a+Number(t),N(e)?e:n+Number(e))},moveTo:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=this.canvasData,a=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.movable&&(E(t)&&(i.left=t,a=!0),E(e)&&(i.top=e,a=!0),a&&this.renderCanvas(!0)),this},zoom:function(t,e){var i=this.canvasData;return t=(t=Number(t))<0?1/(1-t):1+t,this.zoomTo(i.width*t/i.naturalWidth,null,e)},zoomTo:function(t,e,i){var a=this.options,n=this.canvasData,o=n.width,r=n.height,h=n.naturalWidth,s=n.naturalHeight;if((t=Number(t))>=0&&this.ready&&!this.disabled&&a.zoomable){var c=h*t,l=s*t;if(!1===et(this.element,"zoom",{ratio:t,oldRatio:o/h,originalEvent:i}))return this;if(i){var p=this.pointers,d=it(this.cropper),m=p&&Object.keys(p).length?function(t){var e=0,i=0,a=0;return S(t,function(t){var n=t.startX,o=t.startY;e+=n,i+=o,a+=1}),{pageX:e/=a,pageY:i/=a}}(p):{pageX:i.pageX,pageY:i.pageY};n.left-=(c-o)*((m.pageX-d.left-n.left)/o),n.top-=(l-r)*((m.pageY-d.top-n.top)/r)}else L(e)&&E(e.x)&&E(e.y)?(n.left-=(c-o)*((e.x-n.left)/o),n.top-=(l-r)*((e.y-n.top)/r)):(n.left-=(c-o)/2,n.top-=(l-r)/2);n.width=c,n.height=l,this.renderCanvas(!0)}return this},rotate:function(t){return this.rotateTo((this.imageData.rotate||0)+Number(t))},rotateTo:function(t){return E(t=Number(t))&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=t%360,this.renderCanvas(!0,!0)),this},scaleX:function(t){var e=this.imageData.scaleY;return this.scale(t,E(e)?e:1)},scaleY:function(t){var e=this.imageData.scaleX;return this.scale(E(e)?e:1,t)},scale:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=this.imageData,a=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.scalable&&(E(t)&&(i.scaleX=t,a=!0),E(e)&&(i.scaleY=e,a=!0),a&&this.renderCanvas(!0,!0)),this},getData:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=this.options,a=this.imageData,n=this.canvasData,o=this.cropBoxData;if(this.ready&&this.cropped){t={x:o.left-n.left,y:o.top-n.top,width:o.width,height:o.height};var r=a.width/a.naturalWidth;if(S(t,function(e,i){t[i]=e/r}),e){var h=Math.round(t.y+t.height),s=Math.round(t.x+t.width);t.x=Math.round(t.x),t.y=Math.round(t.y),t.width=s-t.x,t.height=h-t.y}}else t={x:0,y:0,width:0,height:0};return i.rotatable&&(t.rotate=a.rotate||0),i.scalable&&(t.scaleX=a.scaleX||1,t.scaleY=a.scaleY||1),t},setData:function(t){var e=this.options,i=this.imageData,a=this.canvasData,n={};if(this.ready&&!this.disabled&&L(t)){var o=!1;e.rotatable&&E(t.rotate)&&t.rotate!==i.rotate&&(i.rotate=t.rotate,o=!0),e.scalable&&(E(t.scaleX)&&t.scaleX!==i.scaleX&&(i.scaleX=t.scaleX,o=!0),E(t.scaleY)&&t.scaleY!==i.scaleY&&(i.scaleY=t.scaleY,o=!0)),o&&this.renderCanvas(!0,!0);var r=i.width/i.naturalWidth;E(t.x)&&(n.left=t.x*r+a.left),E(t.y)&&(n.top=t.y*r+a.top),E(t.width)&&(n.width=t.width*r),E(t.height)&&(n.height=t.height*r),this.setCropBoxData(n)}return this},getContainerData:function(){return this.ready?j({},this.containerData):{}},getImageData:function(){return this.sized?j({},this.imageData):{}},getCanvasData:function(){var t=this.canvasData,e={};return this.ready&&S(["left","top","width","height","naturalWidth","naturalHeight"],function(i){e[i]=t[i]}),e},setCanvasData:function(t){var e=this.canvasData,i=e.aspectRatio;return this.ready&&!this.disabled&&L(t)&&(E(t.left)&&(e.left=t.left),E(t.top)&&(e.top=t.top),E(t.width)?(e.width=t.width,e.height=t.width/i):E(t.height)&&(e.height=t.height,e.width=t.height*i),this.renderCanvas(!0)),this},getCropBoxData:function(){var t,e=this.cropBoxData;return this.ready&&this.cropped&&(t={left:e.left,top:e.top,width:e.width,height:e.height}),t||{}},setCropBoxData:function(t){var e,i,a=this.cropBoxData,n=this.options.aspectRatio;return this.ready&&this.cropped&&!this.disabled&&L(t)&&(E(t.left)&&(a.left=t.left),E(t.top)&&(a.top=t.top),E(t.width)&&t.width!==a.width&&(e=!0,a.width=t.width),E(t.height)&&t.height!==a.height&&(i=!0,a.height=t.height),n&&(e?a.height=a.width/n:i&&(a.width=a.height*n)),this.renderCropBox()),this},getCroppedCanvas:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var e=this.canvasData,i=function(t,e,i,a){var n=e.aspectRatio,r=e.naturalWidth,h=e.naturalHeight,s=e.rotate,c=void 0===s?0:s,l=e.scaleX,p=void 0===l?1:l,d=e.scaleY,m=void 0===d?1:d,u=i.aspectRatio,g=i.naturalWidth,f=i.naturalHeight,v=a.fillColor,w=void 0===v?"transparent":v,b=a.imageSmoothingEnabled,y=void 0===b||b,x=a.imageSmoothingQuality,M=void 0===x?"low":x,C=a.maxWidth,D=void 0===C?1/0:C,B=a.maxHeight,k=void 0===B?1/0:B,O=a.minWidth,T=void 0===O?0:O,E=a.minHeight,W=void 0===E?0:E,N=document.createElement("canvas"),H=N.getContext("2d"),z=ct({aspectRatio:u,width:D,height:k}),L=ct({aspectRatio:u,width:T,height:W},"cover"),Y=Math.min(z.width,Math.max(L.width,g)),X=Math.min(z.height,Math.max(L.height,f)),R=ct({aspectRatio:n,width:D,height:k}),S=ct({aspectRatio:n,width:T,height:W},"cover"),j=Math.min(R.width,Math.max(S.width,r)),A=Math.min(R.height,Math.max(S.height,h)),P=[-j/2,-A/2,j,A];return N.width=I(Y),N.height=I(X),H.fillStyle=w,H.fillRect(0,0,Y,X),H.save(),H.translate(Y/2,X/2),H.rotate(c*Math.PI/180),H.scale(p,m),H.imageSmoothingEnabled=y,H.imageSmoothingQuality=M,H.drawImage.apply(H,[t].concat(o(P.map(function(t){return Math.floor(I(t))})))),H.restore(),N}(this.image,this.imageData,e,t);if(!this.cropped)return i;var a=this.getData(),n=a.x,r=a.y,h=a.width,s=a.height,c=i.width/Math.floor(e.naturalWidth);1!==c&&(n*=c,r*=c,h*=c,s*=c);var l=h/s,p=ct({aspectRatio:l,width:t.maxWidth||1/0,height:t.maxHeight||1/0}),d=ct({aspectRatio:l,width:t.minWidth||0,height:t.minHeight||0},"cover"),m=ct({aspectRatio:l,width:t.width||(1!==c?i.width:h),height:t.height||(1!==c?i.height:s)}),u=m.width,g=m.height;u=Math.min(p.width,Math.max(d.width,u)),g=Math.min(p.height,Math.max(d.height,g));var f=document.createElement("canvas"),v=f.getContext("2d");f.width=I(u),f.height=I(g),v.fillStyle=t.fillColor||"transparent",v.fillRect(0,0,u,g);var w=t.imageSmoothingEnabled,b=void 0===w||w,y=t.imageSmoothingQuality;v.imageSmoothingEnabled=b,y&&(v.imageSmoothingQuality=y);var x,M,C,D,B,k,O=i.width,T=i.height,E=n,W=r;E<=-h||E>O?(E=0,x=0,C=0,B=0):E<=0?(C=-E,E=0,B=x=Math.min(O,h+E)):E<=O&&(C=0,B=x=Math.min(h,O-E)),x<=0||W<=-s||W>T?(W=0,M=0,D=0,k=0):W<=0?(D=-W,W=0,k=M=Math.min(T,s+W)):W<=T&&(D=0,k=M=Math.min(s,T-W));var N=[E,W,x,M];if(B>0&&k>0){var H=u/h;N.push(C*H,D*H,B*H,k*H)}return v.drawImage.apply(v,[i].concat(o(N.map(function(t){return Math.floor(I(t))})))),f},setAspectRatio:function(t){var e=this.options;return this.disabled||N(t)||(e.aspectRatio=Math.max(0,t)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(t){var e=this.options,i=this.dragBox,a=this.face;if(this.ready&&!this.disabled){var n="crop"===t,o=e.movable&&"move"===t;t=n||o?t:"none",e.dragMode=t,V(i,w,t),Q(i,p,n),Q(i,v,o),e.cropBoxMovable||(V(a,w,t),Q(a,p,n),Q(a,v,o))}return this}},bt=s.Cropper,yt=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!e||!k.test(e.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=e,this.options=j({},O,L(i)&&i),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}var i,a,n;return i=t,n=[{key:"noConflict",value:function(){return window.Cropper=bt,t}},{key:"setDefaults",value:function(t){j(O,L(t)&&t)}}],(a=[{key:"init",value:function(){var t,e=this.element,i=e.tagName.toLowerCase();if(!e.cropper){if(e.cropper=this,"img"===i){if(this.isImg=!0,t=e.getAttribute("src")||"",this.originalUrl=t,!t)return;t=e.src}else"canvas"===i&&window.HTMLCanvasElement&&(t=e.toDataURL());this.load(t)}}},{key:"load",value:function(t){var e=this;if(t){this.url=t,this.imageData={};var i=this.element,a=this.options;if(a.rotatable||a.scalable||(a.checkOrientation=!1),a.checkOrientation&&window.ArrayBuffer)if(D.test(t))B.test(t)?this.read((n=t.replace(pt,""),o=atob(n),r=new ArrayBuffer(o.length),S(h=new Uint8Array(r),function(t,e){h[e]=o.charCodeAt(e)}),r)):this.clone();else{var n,o,r,h,s=new XMLHttpRequest,c=this.clone.bind(this);this.reloading=!0,this.xhr=s,s.onabort=c,s.onerror=c,s.ontimeout=c,s.onprogress=function(){"image/jpeg"!==s.getResponseHeader("content-type")&&s.abort()},s.onload=function(){e.read(s.response)},s.onloadend=function(){e.reloading=!1,e.xhr=null},a.checkCrossOrigin&&ot(t)&&i.crossOrigin&&(t=rt(t)),s.open("GET",t),s.responseType="arraybuffer",s.withCredentials="use-credentials"===i.crossOrigin,s.send()}else this.clone()}}},{key:"read",value:function(t){var e=this.options,i=this.imageData,a=dt(t),n=0,o=1,r=1;if(a>1){this.url=function(t,e){for(var i=[],a=new Uint8Array(t);a.length>0;)i.push(lt.apply(null,R(a.subarray(0,8192)))),a=a.subarray(8192);return"data:".concat(e,";base64,").concat(btoa(i.join("")))}(t,"image/jpeg");var h=function(t){var e=0,i=1,a=1;switch(t){case 2:i=-1;break;case 3:e=-180;break;case 4:a=-1;break;case 5:e=90,a=-1;break;case 6:e=90;break;case 7:e=90,i=-1;break;case 8:e=-90}return{rotate:e,scaleX:i,scaleY:a}}(a);n=h.rotate,o=h.scaleX,r=h.scaleY}e.rotatable&&(i.rotate=n),e.scalable&&(i.scaleX=o,i.scaleY=r),this.clone()}},{key:"clone",value:function(){var t=this.element,e=this.url,i=t.crossOrigin,a=e;this.options.checkCrossOrigin&&ot(e)&&(i||(i="anonymous"),a=rt(e)),this.crossOrigin=i,this.crossOriginUrl=a;var n=document.createElement("img");i&&(n.crossOrigin=i),n.src=a||e,n.alt=t.alt||"The image to crop",this.image=n,n.onload=this.start.bind(this),n.onerror=this.stop.bind(this),q(n,u),t.parentNode.insertBefore(n,t.nextSibling)}},{key:"start",value:function(){var t=this,e=this.image;e.onload=null,e.onerror=null,this.sizing=!0;var i=s.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(s.navigator.userAgent),a=function(e,i){j(t.imageData,{naturalWidth:e,naturalHeight:i,aspectRatio:e/i}),t.sizing=!1,t.sized=!0,t.build()};if(!e.naturalWidth||i){var n=document.createElement("img"),o=document.body||document.documentElement;this.sizingImage=n,n.onload=function(){a(n.width,n.height),i||o.removeChild(n)},n.src=e.src,i||(n.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",o.appendChild(n))}else a(e.naturalWidth,e.naturalHeight)}},{key:"stop",value:function(){var t=this.image;t.onload=null,t.onerror=null,t.parentNode.removeChild(t),this.image=null}},{key:"build",value:function(){if(this.sized&&!this.ready){var t=this.element,e=this.options,i=this.image,a=t.parentNode,n=document.createElement("div");n.innerHTML='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>';var o=n.querySelector(".".concat("cropper","-container")),r=o.querySelector(".".concat("cropper","-canvas")),h=o.querySelector(".".concat("cropper","-drag-box")),s=o.querySelector(".".concat("cropper","-crop-box")),c=s.querySelector(".".concat("cropper","-face"));this.container=a,this.cropper=o,this.canvas=r,this.dragBox=h,this.cropBox=s,this.viewBox=o.querySelector(".".concat("cropper","-view-box")),this.face=c,r.appendChild(i),q(t,m),a.insertBefore(o,t.nextSibling),this.isImg||$(i,u),this.initPreview(),this.bind(),e.initialAspectRatio=Math.max(0,e.initialAspectRatio)||NaN,e.aspectRatio=Math.max(0,e.aspectRatio)||NaN,e.viewMode=Math.max(0,Math.min(3,Math.round(e.viewMode)))||0,q(s,m),e.guides||q(s.getElementsByClassName("".concat("cropper","-dashed")),m),e.center||q(s.getElementsByClassName("".concat("cropper","-center")),m),e.background&&q(o,"".concat("cropper","-bg")),e.highlight||q(c,g),e.cropBoxMovable&&(q(c,v),V(c,w,"all")),e.cropBoxResizable||(q(s.getElementsByClassName("".concat("cropper","-line")),m),q(s.getElementsByClassName("".concat("cropper","-point")),m)),this.render(),this.ready=!0,this.setDragMode(e.dragMode),e.autoCrop&&this.crop(),this.setData(e.data),Y(e.ready)&&tt(t,"ready",e.ready,{once:!0}),et(t,"ready")}}},{key:"unbuild",value:function(){this.ready&&(this.ready=!1,this.unbind(),this.resetPreview(),this.cropper.parentNode.removeChild(this.cropper),$(this.element,m))}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}])&&e(i.prototype,a),n&&e(i,n),t}();return j(yt.prototype,mt,ut,gt,ft,vt,wt),yt});
},{}],"nVR0":[function(require,module,exports) {
function t(t,o){t.prototype=Object.create(o.prototype),t.prototype.constructor=t,e(t,o)}function e(t,o){return(e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,o)}var o=require("cropperjs"),r=require("preact"),p=r.h,i=r.Component;module.exports=function(e){function r(){for(var t,o=arguments.length,r=new Array(o),p=0;p<o;p++)r[p]=arguments[p];return(t=e.call.apply(e,[this].concat(r))||this).save=function(){t.cropper.getCroppedCanvas().toBlob(function(e){return t.props.save(e)},t.props.currentImage.type,t.props.opts.quality)},t}t(r,e);var i=r.prototype;return i.componentDidMount=function(){this.cropper=new o(this.imgElement,this.props.opts.cropperOptions)},i.componentWillUnmount=function(){this.cropper.destroy()},i.renderRevert=function(){var t=this;return p("button",{type:"button",className:"uppy-u-reset uppy-c-btn","aria-label":this.props.i18n("revert"),"data-microtip-position":"top",role:"tooltip",onClick:function(){t.cropper.reset(),t.cropper.setAspectRatio(0)}},p("svg",{"aria-hidden":"true",className:"uppy-c-icon",width:"24",height:"24",viewBox:"0 0 24 24"},p("path",{d:"M0 0h24v24H0z",fill:"none"}),p("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"})))},i.renderRotate=function(){var t=this;return p("button",{type:"button",className:"uppy-u-reset uppy-c-btn",onClick:function(){return t.cropper.rotate(90)},"aria-label":this.props.i18n("rotate"),"data-microtip-position":"top",role:"tooltip"},p("svg",{"aria-hidden":"true",className:"uppy-c-icon",width:"24",height:"24",viewBox:"0 0 24 24"},p("path",{d:"M0 0h24v24H0V0zm0 0h24v24H0V0z",fill:"none"}),p("path",{d:"M7.47 21.49C4.2 19.93 1.86 16.76 1.5 13H0c.51 6.16 5.66 11 11.95 11 .23 0 .44-.02.66-.03L8.8 20.15l-1.33 1.34zM12.05 0c-.23 0-.44.02-.66.04l3.81 3.81 1.33-1.33C19.8 4.07 22.14 7.24 22.5 11H24c-.51-6.16-5.66-11-11.95-11zM16 14h2V8c0-1.11-.9-2-2-2h-6v2h6v6zm-8 2V4H6v2H4v2h2v8c0 1.1.89 2 2 2h8v2h2v-2h2v-2H8z"})))},i.renderFlip=function(){var t=this;return p("button",{type:"button",className:"uppy-u-reset uppy-c-btn","aria-label":this.props.i18n("flipHorizontal"),"data-microtip-position":"top",role:"tooltip",onClick:function(){return t.cropper.scaleX(-t.cropper.getData().scaleX||-1)}},p("svg",{"aria-hidden":"true",className:"uppy-c-icon",width:"24",height:"24",viewBox:"0 0 24 24"},p("path",{d:"M0 0h24v24H0z",fill:"none"}),p("path",{d:"M15 21h2v-2h-2v2zm4-12h2V7h-2v2zM3 5v14c0 1.1.9 2 2 2h4v-2H5V5h4V3H5c-1.1 0-2 .9-2 2zm16-2v2h2c0-1.1-.9-2-2-2zm-8 20h2V1h-2v22zm8-6h2v-2h-2v2zM15 5h2V3h-2v2zm4 8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2z"})))},i.renderZoomIn=function(){var t=this;return p("button",{type:"button",className:"uppy-u-reset uppy-c-btn","aria-label":this.props.i18n("zoomIn"),"data-microtip-position":"top",role:"tooltip",onClick:function(){return t.cropper.zoom(.1)}},p("svg",{"aria-hidden":"true",className:"uppy-c-icon",height:"24",viewBox:"0 0 24 24",width:"24"},p("path",{d:"M0 0h24v24H0V0z",fill:"none"}),p("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),p("path",{d:"M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"})))},i.renderZoomOut=function(){var t=this;return p("button",{type:"button",className:"uppy-u-reset uppy-c-btn","aria-label":this.props.i18n("zoomOut"),"data-microtip-position":"top",role:"tooltip",onClick:function(){return t.cropper.zoom(-.1)}},p("svg",{"aria-hidden":"true",className:"uppy-c-icon",width:"24",height:"24",viewBox:"0 0 24 24"},p("path",{d:"M0 0h24v24H0V0z",fill:"none"}),p("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zM7 9h5v1H7z"})))},i.renderCropSquare=function(){var t=this;return p("button",{type:"button",className:"uppy-u-reset uppy-c-btn","aria-label":this.props.i18n("aspectRatioSquare"),"data-microtip-position":"top",role:"tooltip",onClick:function(){return t.cropper.setAspectRatio(1)}},p("svg",{"aria-hidden":"true",className:"uppy-c-icon",width:"24",height:"24",viewBox:"0 0 24 24"},p("path",{d:"M0 0h24v24H0z",fill:"none"}),p("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"})))},i.renderCropWidescreen=function(){var t=this;return p("button",{type:"button",className:"uppy-u-reset uppy-c-btn","aria-label":this.props.i18n("aspectRatioLandscape"),"data-microtip-position":"top",role:"tooltip",onClick:function(){return t.cropper.setAspectRatio(16/9)}},p("svg",{"aria-hidden":"true",className:"uppy-c-icon",width:"24",height:"24",viewBox:"0 0 24 24"},p("path",{d:"M 19,4.9999992 V 17.000001 H 4.9999998 V 6.9999992 H 19 m 0,-2 H 4.9999998 c -1.0999999,0 -1.9999999,0.9000001 -1.9999999,2 V 17.000001 c 0,1.1 0.9,2 1.9999999,2 H 19 c 1.1,0 2,-0.9 2,-2 V 6.9999992 c 0,-1.0999999 -0.9,-2 -2,-2 z"}),p("path",{fill:"none",d:"M0 0h24v24H0z"})))},i.renderCropWidescreenVertical=function(){var t=this;return p("button",{type:"button",className:"uppy-u-reset uppy-c-btn","aria-label":this.props.i18n("aspectRatioPortrait"),"data-microtip-position":"top",role:"tooltip",onClick:function(){return t.cropper.setAspectRatio(9/16)}},p("svg",{"aria-hidden":"true",className:"uppy-c-icon",width:"24",height:"24",viewBox:"0 0 24 24"},p("path",{d:"M 19.000001,19 H 6.999999 V 5 h 10.000002 v 14 m 2,0 V 5 c 0,-1.0999999 -0.9,-1.9999999 -2,-1.9999999 H 6.999999 c -1.1,0 -2,0.9 -2,1.9999999 v 14 c 0,1.1 0.9,2 2,2 h 10.000002 c 1.1,0 2,-0.9 2,-2 z"}),p("path",{d:"M0 0h24v24H0z",fill:"none"})))},i.render=function(){var t=this,e=this.props,o=e.currentImage,r=e.i18n,i=e.opts.actions,n=URL.createObjectURL(o.data);return p("div",{className:"uppy-ImageCropper"},p("div",{className:"uppy-ImageCropper-container"},p("img",{className:"uppy-ImageCropper-image",alt:o.name,src:n,ref:function(e){t.imgElement=e}})),p("div",{className:"uppy-ImageCropper-controls"},p("button",{type:"button",className:"uppy-u-reset uppy-c-btn","aria-label":r("save"),"data-microtip-position":"top",role:"tooltip",onClick:function(){return t.save()}},p("svg",{"aria-hidden":"true",className:"uppy-c-icon",width:"24",height:"24",viewBox:"0 0 24 24"},p("path",{d:"M0 0h24v24H0z",fill:"none"}),p("path",{d:"M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"}))),i.revert&&this.renderRevert(),i.rotate&&this.renderRotate(),i.flip&&this.renderFlip(),i.zoomIn&&this.renderZoomIn(),i.zoomOut&&this.renderZoomOut(),i.cropSquare&&this.renderCropSquare(),i.cropWidescreen&&this.renderCropWidescreen(),i.cropWidescreenVertical&&this.renderCropWidescreenVertical()))},r}(i);
},{"cropperjs":"y8xO","preact":"sSEx"}],"vDQd":[function(require,module,exports) {
var t,e;function r(){return(r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t}).apply(this,arguments)}function i(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,o(t,e)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var n=require("@uppy/core"),a=n.Plugin,s=require("./Editor"),p=require("@uppy/utils/lib/Translator"),u=require("preact"),l=u.h;module.exports=(e=t=function(t){function e(e,i){var o;(o=t.call(this,e,i)||this).save=function(t){var e=o.getPluginState().currentImage;o.uppy.setFileState(e.id,{data:t,size:t.size,preview:null});var r=o.uppy.getFile(e.id);o.uppy.emit("thumbnail:request",r),o.setPluginState({currentImage:r}),o.uppy.emit("file-editor:complete",r)},o.selectFile=function(t){o.uppy.emit("file-editor:start",t),o.setPluginState({currentImage:t})},o.id=o.opts.id||"ImageEditor",o.title="Image Editor",o.type="editor",o.defaultLocale={strings:{save:"Save",revert:"Revert",rotate:"Rotate",zoomIn:"Zoom in",zoomOut:"Zoom out",flipHorizontal:"Flip horizontal",aspectRatioSquare:"Crop square",aspectRatioLandscape:"Crop landscape (16:9)",aspectRatioPortrait:"Crop portrait (9:16)"}};return o.opts=r({},{quality:.8},i,{actions:r({},{revert:!0,rotate:!0,flip:!0,zoomIn:!0,zoomOut:!0,cropSquare:!0,cropWidescreen:!0,cropWidescreenVertical:!0},i.actions),cropperOptions:r({},{viewMode:1,background:!1,autoCropArea:1,responsive:!0},i.cropperOptions)}),o.i18nInit(),o}i(e,t);var o=e.prototype;return o.setOptions=function(e){t.prototype.setOptions.call(this,e),this.i18nInit()},o.i18nInit=function(){this.translator=new p([this.defaultLocale,this.uppy.locale,this.opts.locale]),this.i18n=this.translator.translate.bind(this.translator),this.setPluginState()},o.canEditFile=function(t){if(!t.type||t.isRemote)return!1;var e=t.type.split("/")[1];return!!/^(jpe?g|gif|png|bmp|webp)$/.test(e)},o.install=function(){this.setPluginState({currentImage:null});var t=this.opts.target;t&&this.mount(t,this)},o.uninstall=function(){this.unmount()},o.render=function(){var t=this.getPluginState().currentImage;if(null!==t&&!t.isRemote)return l(s,{currentImage:t,save:this.save,opts:this.opts,i18n:this.i18n})},e}(a),t.VERSION="0.2.4",e);
},{"@uppy/core":"PDAA","./Editor":"nVR0","@uppy/utils/lib/Translator":"hG0x","preact":"sSEx"}],"DGkN":[function(require,module,exports) {
var e,r;function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function n(e,r){e.prototype=Object.create(r.prototype),e.prototype.constructor=e,t(e,r)}function t(e,r){return(t=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(e,r)}var o=require("@uppy/core"),s=o.Plugin,p=require("@uppy/companion-client"),u=p.Provider,c=require("@uppy/provider-views"),d=c.ProviderViews,l=require("preact"),a=l.h;module.exports=(r=e=function(e){function r(r,n){var t;return(t=e.call(this,r,n)||this).id=t.opts.id||"OneDrive",u.initPlugin(i(t),n),t.title=t.opts.title||"OneDrive",t.icon=function(){return a("svg",{"aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32"},a("g",{fill:"none",fillRule:"evenodd"},a("rect",{className:"uppy-ProviderIconBg",width:"32",height:"32",rx:"16",fill:"#0262C0"}),a("g",{fill:"#FFF",fillRule:"nonzero"},a("path",{d:"M24.157 22s1.492-.205 1.79-1.655a2.624 2.624 0 0 0 .03-.878c-.22-1.64-1.988-2.01-1.988-2.01s.307-1.765-1.312-2.69c-1.62-.925-3.1 0-3.1 0S18.711 13 16.366 13c-3.016 0-3.519 3.448-3.519 3.448S10 16.618 10 19.14c0 2.523 2.597 2.86 2.597 2.86h11.56z"}),a("path",{d:"M9.421 19.246c0-2.197 1.606-3.159 2.871-3.472.44-1.477 1.654-3.439 4.135-3.439H16.445c1.721 0 2.79.823 3.368 1.476a3.99 3.99 0 0 1 1.147-.171h.01l.03.002C21.017 13.5 20.691 10 16.757 10c-2.69 0-3.639 2.345-3.639 2.345s-1.95-1.482-3.955.567c-1.028 1.052-.79 2.669-.79 2.669S6 15.824 6 18.412C6 20.757 8.452 21 8.452 21h1.372a3.77 3.77 0 0 1-.403-1.754z"}))))},t.provider=new u(r,{companionUrl:t.opts.companionUrl,companionHeaders:t.opts.companionHeaders||t.opts.serverHeaders,companionCookiesRule:t.opts.companionCookiesRule,provider:"onedrive",pluginId:t.id}),t.onFirstRender=t.onFirstRender.bind(i(t)),t.render=t.render.bind(i(t)),t}n(r,e);var t=r.prototype;return t.install=function(){this.view=new d(this,{provider:this.provider});var e=this.opts.target;e&&this.mount(e,this)},t.uninstall=function(){this.view.tearDown(),this.unmount()},t.onFirstRender=function(){return Promise.all([this.provider.fetchPreAuthToken(),this.view.getFolder()])},t.render=function(e){return this.view.render(e)},r}(s),e.VERSION="1.1.26",r);
},{"@uppy/core":"PDAA","@uppy/companion-client":"MaVI","@uppy/provider-views":"kLTu","preact":"sSEx"}],"uV4j":[function(require,module,exports) {
function t(){return(t=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}var e=require("cuid"),r="uppy/STATE_UPDATE",n=function(t){return function(e){return e.uppy[t]}},i=function(){function t(t){this._store=t.store,this._id=t.id||e(),this._selector=t.selector||n(this._id),this.setState({})}var i=t.prototype;return i.setState=function(t){this._store.dispatch({type:r,id:this._id,payload:t})},i.getState=function(){return this._selector(this._store.getState())},i.subscribe=function(t){var e=this,r=this.getState();return this._store.subscribe(function(){var n=e.getState();if(r!==n){var i=o(r,n);t(r,n,i),r=n}})},t}();function o(t,e){var r=Object.keys(e),n={};return r.forEach(function(r){t[r]!==e[r]&&(n[r]=e[r])}),n}function u(e,n){if(void 0===e&&(e={}),n.type===r){var i,o=t({},e[n.id],n.payload);return t({},e,((i={})[n.id]=o,i))}return e}function s(){return function(){return function(t){return function(e){t(e)}}}}i.VERSION="1.2.6",module.exports=function(t){return new i(t)},module.exports.STATE_UPDATE=r,module.exports.reducer=u,module.exports.middleware=s;
},{"cuid":"EdMi"}],"lC4Z":[function(require,module,exports) {
module.exports=function(r,n){if(r===n)return!0;for(var i in r)if(!(i in n))return!1;for(var i in n)if(r[i]!==n[i])return!1;return!0};
},{}],"IZjg":[function(require,module,exports) {
var a=require("preact"),e=a.h;function l(){return e("svg",{"aria-hidden":"true",focusable:"false",width:"25",height:"25",viewBox:"0 0 25 25"},e("g",{fill:"#686DE0",fillRule:"evenodd"},e("path",{d:"M5 7v10h15V7H5zm0-1h15a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1z",fillRule:"nonzero"}),e("path",{d:"M6.35 17.172l4.994-5.026a.5.5 0 0 1 .707 0l2.16 2.16 3.505-3.505a.5.5 0 0 1 .707 0l2.336 2.31-.707.72-1.983-1.97-3.505 3.505a.5.5 0 0 1-.707 0l-2.16-2.159-3.938 3.939-1.409.026z",fillRule:"nonzero"}),e("circle",{cx:"7.5",cy:"9.5",r:"1.5"})))}function i(){return e("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},e("path",{d:"M9.5 18.64c0 1.14-1.145 2-2.5 2s-2.5-.86-2.5-2c0-1.14 1.145-2 2.5-2 .557 0 1.079.145 1.5.396V7.25a.5.5 0 0 1 .379-.485l9-2.25A.5.5 0 0 1 18.5 5v11.64c0 1.14-1.145 2-2.5 2s-2.5-.86-2.5-2c0-1.14 1.145-2 2.5-2 .557 0 1.079.145 1.5.396V8.67l-8 2v7.97zm8-11v-2l-8 2v2l8-2zM7 19.64c.855 0 1.5-.484 1.5-1s-.645-1-1.5-1-1.5.484-1.5 1 .645 1 1.5 1zm9-2c.855 0 1.5-.484 1.5-1s-.645-1-1.5-1-1.5.484-1.5 1 .645 1 1.5 1z",fill:"#049BCF",fillRule:"nonzero"}))}function h(){return e("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},e("path",{d:"M16 11.834l4.486-2.691A1 1 0 0 1 22 10v6a1 1 0 0 1-1.514.857L16 14.167V17a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v2.834zM15 9H5v8h10V9zm1 4l5 3v-6l-5 3z",fill:"#19AF67",fillRule:"nonzero"}))}function o(){return e("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},e("path",{d:"M9.766 8.295c-.691-1.843-.539-3.401.747-3.726 1.643-.414 2.505.938 2.39 3.299-.039.79-.194 1.662-.537 3.148.324.49.66.967 1.055 1.51.17.231.382.488.629.757 1.866-.128 3.653.114 4.918.655 1.487.635 2.192 1.685 1.614 2.84-.566 1.133-1.839 1.084-3.416.249-1.141-.604-2.457-1.634-3.51-2.707a13.467 13.467 0 0 0-2.238.426c-1.392 4.051-4.534 6.453-5.707 4.572-.986-1.58 1.38-4.206 4.914-5.375.097-.322.185-.656.264-1.001.08-.353.306-1.31.407-1.737-.678-1.059-1.2-2.031-1.53-2.91zm2.098 4.87c-.033.144-.068.287-.104.427l.033-.01-.012.038a14.065 14.065 0 0 1 1.02-.197l-.032-.033.052-.004a7.902 7.902 0 0 1-.208-.271c-.197-.27-.38-.526-.555-.775l-.006.028-.002-.003c-.076.323-.148.632-.186.8zm5.77 2.978c1.143.605 1.832.632 2.054.187.26-.519-.087-1.034-1.113-1.473-.911-.39-2.175-.608-3.55-.608.845.766 1.787 1.459 2.609 1.894zM6.559 18.789c.14.223.693.16 1.425-.413.827-.648 1.61-1.747 2.208-3.206-2.563 1.064-4.102 2.867-3.633 3.62zm5.345-10.97c.088-1.793-.351-2.48-1.146-2.28-.473.119-.564 1.05-.056 2.405.213.566.52 1.188.908 1.859.18-.858.268-1.453.294-1.984z",fill:"#E2514A",fillRule:"nonzero"}))}function c(){return e("svg",{"aria-hidden":"true",focusable:"false",width:"25",height:"25",viewBox:"0 0 25 25"},e("path",{d:"M10.45 2.05h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5V2.55a.5.5 0 0 1 .5-.5zm2.05 1.024h1.05a.5.5 0 0 1 .5.5V3.6a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5v-.001zM10.45 0h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5V.5a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-2.05 3.074h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-2.05 1.024h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm-2.05 1.025h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-1.656 3.074l-.82 5.946c.52.302 1.174.458 1.976.458.803 0 1.455-.156 1.975-.458l-.82-5.946h-2.311zm0-1.025h2.312c.512 0 .946.378 1.015.885l.82 5.946c.056.412-.142.817-.501 1.026-.686.398-1.515.597-2.49.597-.974 0-1.804-.199-2.49-.597a1.025 1.025 0 0 1-.5-1.026l.819-5.946c.07-.507.503-.885 1.015-.885zm.545 6.6a.5.5 0 0 1-.397-.561l.143-.999a.5.5 0 0 1 .495-.429h.74a.5.5 0 0 1 .495.43l.143.998a.5.5 0 0 1-.397.561c-.404.08-.819.08-1.222 0z",fill:"#00C469",fillRule:"nonzero"}))}function r(){return e("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},e("g",{fill:"#A7AFB7",fillRule:"nonzero"},e("path",{d:"M5.5 22a.5.5 0 0 1-.5-.5v-18a.5.5 0 0 1 .5-.5h10.719a.5.5 0 0 1 .367.16l3.281 3.556a.5.5 0 0 1 .133.339V21.5a.5.5 0 0 1-.5.5h-14zm.5-1h13V7.25L16 4H6v17z"}),e("path",{d:"M15 4v3a1 1 0 0 0 1 1h3V7h-3V4h-1z"})))}function n(){return e("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},e("path",{d:"M4.5 7h13a.5.5 0 1 1 0 1h-13a.5.5 0 0 1 0-1zm0 3h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm0 3h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm0 3h10a.5.5 0 1 1 0 1h-10a.5.5 0 1 1 0-1z",fill:"#5A5E69",fillRule:"nonzero"}))}module.exports=function(a){var e={color:"#838999",icon:r()};if(!a)return e;var t=a.split("/")[0],u=a.split("/")[1];if("text"===t)return{color:"#5a5e69",icon:n()};if("image"===t)return{color:"#686de0",icon:l()};if("audio"===t)return{color:"#068dbb",icon:i()};if("video"===t)return{color:"#19af67",icon:h()};if("application"===t&&"pdf"===u)return{color:"#e25149",icon:o()};return"application"===t&&-1!==["zip","x-7z-compressed","x-rar-compressed","x-tar","x-gzip","x-apple-diskimage"].indexOf(u)?{color:"#00C469",icon:c()}:e};
},{"preact":"sSEx"}],"qPaL":[function(require,module,exports) {
var e=require("../utils/getFileTypeIcon"),r=require("preact"),a=r.h;module.exports=function(r){var i=r.file;if(i.preview)return a("img",{className:"uppy-Dashboard-Item-previewImg",alt:i.name,src:i.preview});var p=e(i.type),s=p.color,t=p.icon;return a("div",{className:"uppy-Dashboard-Item-previewIconWrap"},a("span",{className:"uppy-Dashboard-Item-previewIcon",style:{color:s}},t),a("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-Dashboard-Item-previewIconBg",width:"58",height:"76",viewBox:"0 0 58 76"},a("rect",{fill:"#FFF",width:"58",height:"76",rx:"3",fillRule:"evenodd"})))};
},{"../utils/getFileTypeIcon":"IZjg","preact":"sSEx"}],"kvdX":[function(require,module,exports) {
var e=require("preact"),r=e.h,l=require("../../FilePreview"),a=require("../../../utils/getFileTypeIcon");module.exports=function(e){return r("div",{className:"uppy-Dashboard-Item-previewInnerWrap",style:{backgroundColor:a(e.file.type).color}},e.showLinkToFileUploadResult&&e.file.uploadURL&&r("a",{className:"uppy-Dashboard-Item-previewLink",href:e.file.uploadURL,rel:"noreferrer noopener",target:"_blank","aria-label":e.file.meta.name}),r(l,{file:e.file}))};
},{"preact":"sSEx","../../FilePreview":"qPaL","../../../utils/getFileTypeIcon":"IZjg"}],"lx5B":[function(require,module,exports) {
var e=require("preact"),r=e.h;function a(e){e.isUploaded||(!e.error||e.hideRetryButton?e.resumableUploads&&!e.hidePauseResumeButton?e.pauseUpload(e.file.id):e.individualCancellation&&!e.hideCancelButton&&e.cancelUpload(e.file.id):e.retryUpload(e.file.id))}function s(e){return e.isUploaded?e.i18n("uploadComplete"):e.error?e.i18n("retryUpload"):e.resumableUploads?e.file.isPaused?e.i18n("resumeUpload"):e.i18n("pauseUpload"):e.individualCancellation?e.i18n("cancelUpload"):""}function o(e){return r("div",{className:"uppy-Dashboard-Item-progress"},r("button",{className:"uppy-u-reset uppy-Dashboard-Item-progressIndicator",type:"button","aria-label":s(e),title:s(e),onClick:function(){return a(e)}},e.children))}function t(e){var a=e.children;return r("svg",{"aria-hidden":"true",focusable:"false",width:"70",height:"70",viewBox:"0 0 36 36",className:"uppy-c-icon uppy-Dashboard-Item-progressIcon--circle"},a)}function l(e){var a=e.progress,s=2*Math.PI*15;return r("g",null,r("circle",{className:"uppy-Dashboard-Item-progressIcon--bg",r:"15",cx:"18",cy:"18",strokeWidth:"2",fill:"none"}),r("circle",{className:"uppy-Dashboard-Item-progressIcon--progress",r:"15",cx:"18",cy:"18",transform:"rotate(-90, 18, 18)",strokeWidth:"2",fill:"none",strokeDasharray:s,strokeDashoffset:s-s/100*a}))}module.exports=function(e){return e.file.progress.uploadStarted?e.isUploaded?r("div",{className:"uppy-Dashboard-Item-progress"},r("div",{className:"uppy-Dashboard-Item-progressIndicator"},r(t,null,r("circle",{r:"15",cx:"18",cy:"18",fill:"#1bb240"}),r("polygon",{className:"uppy-Dashboard-Item-progressIcon--check",transform:"translate(2, 3)",points:"14 22.5 7 15.2457065 8.99985857 13.1732815 14 18.3547104 22.9729883 9 25 11.1005634"})))):e.error&&!e.hideRetryButton?r(o,e,r("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-Dashboard-Item-progressIcon--retry",width:"28",height:"31",viewBox:"0 0 16 19"},r("path",{d:"M16 11a8 8 0 1 1-8-8v2a6 6 0 1 0 6 6h2z"}),r("path",{d:"M7.9 3H10v2H7.9z"}),r("path",{d:"M8.536.5l3.535 3.536-1.414 1.414L7.12 1.914z"}),r("path",{d:"M10.657 2.621l1.414 1.415L8.536 7.57 7.12 6.157z"}))):e.resumableUploads&&!e.hidePauseResumeButton?r(o,e,r(t,null,r(l,{progress:e.file.progress.percentage}),e.file.isPaused?r("polygon",{className:"uppy-Dashboard-Item-progressIcon--play",transform:"translate(3, 3)",points:"12 20 12 10 20 15"}):r("g",{className:"uppy-Dashboard-Item-progressIcon--pause",transform:"translate(14.5, 13)"},r("rect",{x:"0",y:"0",width:"2",height:"10",rx:"0"}),r("rect",{x:"5",y:"0",width:"2",height:"10",rx:"0"})))):e.resumableUploads||!e.individualCancellation||e.hideCancelButton?r("div",{className:"uppy-Dashboard-Item-progress"},r("div",{className:"uppy-Dashboard-Item-progressIndicator"},r(t,null,r(l,{progress:e.file.progress.percentage})))):r(o,e,r(t,null,r(l,{progress:e.file.progress.percentage}),r("polygon",{className:"cancel",transform:"translate(2, 2)",points:"19.8856516 11.0625 16 14.9481516 12.1019737 11.0625 11.0625 12.1143484 14.9481516 16 11.0625 19.8980263 12.1019737 20.9375 16 17.0518484 19.8856516 20.9375 20.9375 19.8980263 17.0518484 16 20.9375 12"}))):null};
},{"preact":"sSEx"}],"PpB9":[function(require,module,exports) {
module.exports=function(t,r){if(t.length<=r)return t;if(r<="...".length)return t.substr(0,r);var e=r-"...".length,n=Math.ceil(e/2),u=Math.floor(e/2);return t.substr(0,n)+"..."+t.substr(t.length-u)};
},{}],"K2uR":[function(require,module,exports) {
var e=require("preact"),i=e.h,r=require("@transloadit/prettier-bytes"),a=require("@uppy/utils/lib/truncateString"),t=function(e,r){return i("span",{title:r.i18n("fileSource",{name:e.name})},e.icon())},n=function(e){return e.file.source&&e.file.source!==e.id&&i("div",{className:"uppy-Dashboard-Item-sourceIcon"},e.acquirers.map(function(i){if(i.id===e.file.source)return t(i,e)}))},o=function(e){var r;return r=e.containerWidth<=352?35:e.containerWidth<=576?60:30,i("div",{className:"uppy-Dashboard-Item-name",title:e.file.meta.name},a(e.file.meta.name,r))},u=function(e){return e.file.data.size&&i("div",{className:"uppy-Dashboard-Item-statusSize"},r(e.file.data.size))},s=function(e){var r=e.file,a=e.onClick;return r.error?i("span",{className:"uppy-Dashboard-Item-errorDetails","aria-label":r.error,"data-microtip-position":"bottom","data-microtip-size":"medium",role:"tooltip",onClick:a},"?"):null};module.exports=function(e){return i("div",{className:"uppy-Dashboard-Item-fileInfo","data-uppy-file-source":e.file.source},o(e),i("div",{className:"uppy-Dashboard-Item-status"},u(e),n(e),i(s,{file:e.file,onClick:function(){alert(e.file.error)}})))};
},{"preact":"sSEx","@transloadit/prettier-bytes":"n6LF","@uppy/utils/lib/truncateString":"PpB9"}],"MjLX":[function(require,module,exports) {
module.exports=function(e,o){return o=o||"Copy the URL below",new Promise(function(t){var n=document.createElement("textarea");n.setAttribute("style",{position:"fixed",top:0,left:0,width:"2em",height:"2em",padding:0,border:"none",outline:"none",boxShadow:"none",background:"transparent"}),n.value=e,document.body.appendChild(n),n.select();var d=function(){document.body.removeChild(n),window.prompt(o,e),t()};try{return document.execCommand("copy")?(document.body.removeChild(n),t()):d()}catch(r){return document.body.removeChild(n),d()}})};
},{}],"dlG6":[function(require,module,exports) {
var e=require("preact"),i=e.h,l=require("../../../utils/copyToClipboard");function o(e){var l=e.file,o=e.uploadInProgressOrComplete,a=e.metaFields,t=e.canEditFile,n=e.i18n,r=e.onClick;return!o&&a&&a.length>0||!o&&t(l)?i("button",{className:"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--edit",type:"button","aria-label":n("editFile")+" "+l.meta.name,title:n("editFile"),onClick:function(){return r()}},i("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"14",height:"14",viewBox:"0 0 14 14"},i("g",{fillRule:"evenodd"},i("path",{d:"M1.5 10.793h2.793A1 1 0 0 0 5 10.5L11.5 4a1 1 0 0 0 0-1.414L9.707.793a1 1 0 0 0-1.414 0l-6.5 6.5A1 1 0 0 0 1.5 8v2.793zm1-1V8L9 1.5l1.793 1.793-6.5 6.5H2.5z",fillRule:"nonzero"}),i("rect",{x:"1",y:"12.293",width:"11",height:"1",rx:".5"}),i("path",{fillRule:"nonzero",d:"M6.793 2.5L9.5 5.207l.707-.707L7.5 1.793z"})))):null}function a(e){var l=e.i18n,o=e.onClick;return i("button",{className:"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--remove",type:"button","aria-label":l("removeFile"),title:l("removeFile"),onClick:function(){return o()}},i("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"18",height:"18",viewBox:"0 0 18 18"},i("path",{d:"M9 0C4.034 0 0 4.034 0 9s4.034 9 9 9 9-4.034 9-9-4.034-9-9-9z"}),i("path",{fill:"#FFF",d:"M13 12.222l-.778.778L9 9.778 5.778 13 5 12.222 8.222 9 5 5.778 5.778 5 9 8.222 12.222 5l.778.778L9.778 9z"})))}var t=function(e,i){l(i.file.uploadURL,i.i18n("copyLinkToClipboardFallback")).then(function(){i.log("Link copied to clipboard."),i.info(i.i18n("copyLinkToClipboardSuccess"),"info",3e3)}).catch(i.log).then(function(){return e.target.focus({preventScroll:!0})})};function n(e){return i("button",{className:"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--copyLink",type:"button","aria-label":e.i18n("copyLink"),title:e.i18n("copyLink"),onClick:function(i){return t(i,e)}},i("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"14",height:"14",viewBox:"0 0 14 12"},i("path",{d:"M7.94 7.703a2.613 2.613 0 0 1-.626 2.681l-.852.851a2.597 2.597 0 0 1-1.849.766A2.616 2.616 0 0 1 2.764 7.54l.852-.852a2.596 2.596 0 0 1 2.69-.625L5.267 7.099a1.44 1.44 0 0 0-.833.407l-.852.851a1.458 1.458 0 0 0 1.03 2.486c.39 0 .755-.152 1.03-.426l.852-.852c.231-.231.363-.522.406-.824l1.04-1.038zm4.295-5.937A2.596 2.596 0 0 0 10.387 1c-.698 0-1.355.272-1.849.766l-.852.851a2.614 2.614 0 0 0-.624 2.688l1.036-1.036c.041-.304.173-.6.407-.833l.852-.852c.275-.275.64-.426 1.03-.426a1.458 1.458 0 0 1 1.03 2.486l-.852.851a1.442 1.442 0 0 1-.824.406l-1.04 1.04a2.596 2.596 0 0 0 2.683-.628l.851-.85a2.616 2.616 0 0 0 0-3.697zm-6.88 6.883a.577.577 0 0 0 .82 0l3.474-3.474a.579.579 0 1 0-.819-.82L5.355 7.83a.579.579 0 0 0 0 .819z"})))}module.exports=function(e){var l=e.file,t=e.uploadInProgressOrComplete,r=e.canEditFile,u=e.metaFields,c=e.showLinkToFileUploadResult,p=e.showRemoveButton,s=e.i18n,d=e.removeFile,h=e.toggleFileCard,f=e.openFileEditor,m=e.log,b=e.info;return i("div",{className:"uppy-Dashboard-Item-actionWrapper"},i(o,{i18n:s,file:l,uploadInProgressOrComplete:t,canEditFile:r,metaFields:u,onClick:function(){u&&u.length>0?h(!0,l.id):f(l)}}),c&&l.uploadURL?i(n,{file:l,i18n:s,info:b,log:m}):null,p?i(a,{i18n:s,info:e.info,log:e.log,onClick:function(){return d(l.id,"removed-by-user")}}):null)};
},{"preact":"sSEx","../../../utils/copyToClipboard":"MjLX"}],"Y4Ur":[function(require,module,exports) {
function e(e,s){e.prototype=Object.create(s.prototype),e.prototype.constructor=e,o(e,s)}function o(e,s){return(o=Object.setPrototypeOf||function(e,o){return e.__proto__=o,e})(e,s)}var s=require("preact"),i=s.h,r=s.Component,t=require("classnames"),p=require("is-shallow-equal"),n=require("./FilePreviewAndLink"),l=require("./FileProgress"),a=require("./FileInfo"),u=require("./Buttons");module.exports=function(o){function s(){return o.apply(this,arguments)||this}e(s,o);var r=s.prototype;return r.shouldComponentUpdate=function(e){return!p(this.props,e)},r.componentDidMount=function(){var e=this.props.file;e.preview||this.props.handleRequestThumbnail(e)},r.componentWillUnmount=function(){var e=this.props.file;e.preview||this.props.handleCancelThumbnail(e)},r.render=function(){var e=this.props.file,o=e.progress.preprocess||e.progress.postprocess,s=e.progress.uploadComplete&&!o&&!e.error,r=e.progress.uploadStarted||o,p=e.progress.uploadStarted&&!e.progress.uploadComplete||o,d=e.error||!1,h=this.props.individualCancellation?!s:!p&&!s;s&&this.props.showRemoveButtonAfterComplete&&(h=!0);var c=t({"uppy-Dashboard-Item":!0,"is-inprogress":p,"is-processing":o,"is-complete":s,"is-error":!!d,"is-resumable":this.props.resumableUploads,"is-noIndividualCancellation":!this.props.individualCancellation});return i("div",{className:c,id:"uppy_"+e.id,role:this.props.role},i("div",{className:"uppy-Dashboard-Item-preview"},i(n,{file:e,showLinkToFileUploadResult:this.props.showLinkToFileUploadResult}),i(l,{file:e,error:d,isUploaded:s,hideRetryButton:this.props.hideRetryButton,hideCancelButton:this.props.hideCancelButton,hidePauseResumeButton:this.props.hidePauseResumeButton,showRemoveButtonAfterComplete:this.props.showRemoveButtonAfterComplete,resumableUploads:this.props.resumableUploads,individualCancellation:this.props.individualCancellation,pauseUpload:this.props.pauseUpload,cancelUpload:this.props.cancelUpload,retryUpload:this.props.retryUpload,i18n:this.props.i18n})),i("div",{className:"uppy-Dashboard-Item-fileInfoAndButtons"},i(a,{file:e,id:this.props.id,acquirers:this.props.acquirers,containerWidth:this.props.containerWidth,i18n:this.props.i18n}),i(u,{file:e,metaFields:this.props.metaFields,showLinkToFileUploadResult:this.props.showLinkToFileUploadResult,showRemoveButton:h,canEditFile:this.props.canEditFile,uploadInProgressOrComplete:r,removeFile:this.props.removeFile,toggleFileCard:this.props.toggleFileCard,openFileEditor:this.props.openFileEditor,i18n:this.props.i18n,log:this.props.log,info:this.props.info})))},s}(r);
},{"preact":"sSEx","classnames":"kpqe","is-shallow-equal":"lC4Z","./FilePreviewAndLink":"kvdX","./FileProgress":"lx5B","./FileInfo":"K2uR","./Buttons":"dlG6"}],"PqGy":[function(require,module,exports) {
function t(){return(t=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t}).apply(this,arguments)}function e(t,e){if(null==t)return{};var n,o,i={},r=Object.keys(t);for(o=0;o<r.length;o++)n=r[o],e.indexOf(n)>=0||(i[n]=t[n]);return i}function n(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,o(t,e)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var i=require("preact"),r=i.h,s=i.Component,c={position:"relative",width:"100%",minHeight:"100%"},a={position:"absolute",top:0,left:0,width:"100%",overflow:"visible"},l=function(o){function i(t){var e;return(e=o.call(this,t)||this).handleResize=function(){e.resize()},e.handleScroll=function(){e.setState({offset:e.base.scrollTop}),e.props.sync&&e.forceUpdate()},e.focusElement=null,e.state={offset:0,height:0},e}n(i,o);var s=i.prototype;return s.resize=function(){this.state.height!==this.base.offsetHeight&&this.setState({height:this.base.offsetHeight})},s.componentWillUpdate=function(){this.base.contains(document.activeElement)&&(this.focusElement=document.activeElement)},s.componentDidUpdate=function(){this.focusElement&&this.focusElement.parentNode&&document.activeElement!==this.focusElement&&this.focusElement.focus(),this.focusElement=null,this.resize()},s.componentDidMount=function(){this.resize(),window.addEventListener("resize",this.handleResize)},s.componentWillUnmount=function(){window.removeEventListener("resize",this.handleResize)},s.render=function(n){var o=n.data,i=n.rowHeight,s=n.renderRow,l=n.overscanCount,h=void 0===l?10:l,u=(n.sync,e(n,["data","rowHeight","renderRow","overscanCount","sync"])),f=this.state,p=f.offset,d=f.height,m=Math.floor(p/i),v=Math.floor(d/i);h&&(m=Math.max(0,m-m%h),v+=h);var g=m+v+4,y=o.slice(m,g),w=t({},c,{height:o.length*i}),E=t({},a,{top:m*i});return r("div",t({onScroll:this.handleScroll},u),r("div",{role:"presentation",style:w},r("div",{role:"presentation",style:E},y.map(s))))},i}(s);module.exports=l;
},{"preact":"sSEx"}],"KuLE":[function(require,module,exports) {
function e(){return(e=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var t=arguments[i];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e}).apply(this,arguments)}var i=require("./FileItem/index.js"),t=require("./VirtualList"),l=require("classnames"),o=require("preact"),r=o.h;function n(e,i){var t=[],l=[];return e.forEach(function(e,o){l.length<i?l.push(e):(t.push(l),l=[e])}),l.length&&t.push(l),t}module.exports=function(o){var a=0===o.totalFileCount,u=l("uppy-Dashboard-files",{"uppy-Dashboard-files--noFiles":a}),s=1===o.itemsPerRow?71:200,d={id:o.id,error:o.error,i18n:o.i18n,log:o.log,info:o.info,acquirers:o.acquirers,resumableUploads:o.resumableUploads,individualCancellation:o.individualCancellation,hideRetryButton:o.hideRetryButton,hidePauseResumeButton:o.hidePauseResumeButton,hideCancelButton:o.hideCancelButton,showLinkToFileUploadResult:o.showLinkToFileUploadResult,showRemoveButtonAfterComplete:o.showRemoveButtonAfterComplete,isWide:o.isWide,metaFields:o.metaFields,retryUpload:o.retryUpload,pauseUpload:o.pauseUpload,cancelUpload:o.cancelUpload,toggleFileCard:o.toggleFileCard,removeFile:o.removeFile,handleRequestThumbnail:o.handleRequestThumbnail,handleCancelThumbnail:o.handleCancelThumbnail},p=n(Object.keys(o.files),o.itemsPerRow);return r(t,{class:u,role:"list",data:p,renderRow:function(t){return r("div",{role:"presentation",key:t[0]},t.map(function(t){return r(i,e({key:t},d,{role:"listitem",openFileEditor:o.openFileEditor,canEditFile:o.canEditFile,file:o.files[t]}))}))},rowHeight:s})};
},{"./FileItem/index.js":"Y4Ur","./VirtualList":"PqGy","classnames":"kpqe","preact":"sSEx"}],"OwTy":[function(require,module,exports) {
function e(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,r(e,t)}function r(e,t){return(r=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(e,t)}var t=require("preact"),n=t.h,p=t.Component,a=function(r){function t(){for(var e,t=arguments.length,p=new Array(t),a=0;a<t;a++)p[a]=arguments[a];return(e=r.call.apply(r,[this].concat(p))||this).triggerFileInputClick=function(){e.fileInput.click()},e.triggerFolderInputClick=function(){e.folderInput.click()},e.onFileInputChange=function(r){e.props.handleInputChange(r),r.target.value=null},e.renderHiddenInput=function(r,t){return n("input",{className:"uppy-Dashboard-input",hidden:!0,"aria-hidden":"true",tabIndex:-1,webkitdirectory:r,type:"file",name:"files[]",multiple:1!==e.props.maxNumberOfFiles,onChange:e.onFileInputChange,accept:e.props.allowedFileTypes,ref:t})},e.renderMyDeviceAcquirer=function(){return n("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MyDevice"},n("button",{type:"button",className:"uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:e.triggerFileInputClick},n("svg",{"aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32"},n("g",{fill:"none",fillRule:"evenodd"},n("rect",{className:"uppy-ProviderIconBg",width:"32",height:"32",rx:"16",fill:"#2275D7"}),n("path",{d:"M21.973 21.152H9.863l-1.108-5.087h14.464l-1.246 5.087zM9.935 11.37h3.958l.886 1.444a.673.673 0 0 0 .585.316h6.506v1.37H9.935v-3.13zm14.898 3.44a.793.793 0 0 0-.616-.31h-.978v-2.126c0-.379-.275-.613-.653-.613H15.75l-.886-1.445a.673.673 0 0 0-.585-.316H9.232c-.378 0-.667.209-.667.587V14.5h-.782a.793.793 0 0 0-.61.303.795.795 0 0 0-.155.663l1.45 6.633c.078.36.396.618.764.618h13.354c.36 0 .674-.246.76-.595l1.631-6.636a.795.795 0 0 0-.144-.675z",fill:"#FFF"}))),n("div",{className:"uppy-DashboardTab-name"},e.props.i18n("myDevice"))))},e.renderBrowseButton=function(r,t){var p=e.props.acquirers.length;return n("button",{type:"button",className:"uppy-u-reset uppy-Dashboard-browse",onClick:t,"data-uppy-super-focusable":0===p},r)},e.renderDropPasteBrowseTagline=function(){var r=e.props.acquirers.length,t=e.props.fileManagerSelectionType,p=t.charAt(0).toUpperCase()+t.slice(1),a="browse",o="browse",s="browse";if("files"===t)try{a=e.props.i18n("browse"),o=e.props.i18n("browse"),s=e.props.i18n("browse")}catch(c){}try{o=e.props.i18n("browseFiles"),s=e.props.i18n("browseFolders")}catch(h){}var i,l=e.renderBrowseButton(a,e.triggerFileInputClick),u=e.renderBrowseButton(o,e.triggerFileInputClick),d=e.renderBrowseButton(s,e.triggerFolderInputClick);if(i=r>0?e.props.i18nArray("dropPasteImport"+p,{browseFiles:u,browseFolders:d,browse:l}):e.props.i18nArray("dropPaste"+p,{browseFiles:u,browseFolders:d,browse:l}),"files"===t)try{i=r>0?e.props.i18nArray("dropPasteImport",{browse:l}):e.props.i18nArray("dropPaste",{browse:l})}catch(y){}return n("div",{className:"uppy-Dashboard-AddFiles-title"},i)},e.renderAcquirer=function(r){return n("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":r.id},n("button",{type:"button",className:"uppy-DashboardTab-btn",role:"tab",tabIndex:0,"aria-controls":"uppy-DashboardContent-panel--"+r.id,"aria-selected":e.props.activePickerPanel.id===r.id,"data-uppy-super-focusable":!0,onClick:function(){return e.props.showPanel(r.id)}},r.icon(),n("div",{className:"uppy-DashboardTab-name"},r.name)))},e.renderAcquirers=function(r){var t=[].concat(r),p=t.splice(r.length-2,r.length);return n("div",{className:"uppy-Dashboard-AddFiles-list",role:"tablist"},e.renderMyDeviceAcquirer(),t.map(function(r){return e.renderAcquirer(r)}),n("span",{role:"presentation",style:"white-space: nowrap;"},p.map(function(r){return e.renderAcquirer(r)})))},e}e(t,r);var p=t.prototype;return p.renderPoweredByUppy=function(){var e=n("span",null,n("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-Dashboard-poweredByIcon",width:"11",height:"11",viewBox:"0 0 11 11"},n("path",{d:"M7.365 10.5l-.01-4.045h2.612L5.5.806l-4.467 5.65h2.604l.01 4.044h3.718z",fillRule:"evenodd"})),n("span",{className:"uppy-Dashboard-poweredByUppy"},"Uppy")),r=this.props.i18nArray("poweredBy2",{backwardsCompat:this.props.i18n("poweredBy"),uppy:e});return n("a",{tabIndex:"-1",href:"https://uppy.io",rel:"noreferrer noopener",target:"_blank",className:"uppy-Dashboard-poweredBy"},r)},p.render=function(){var e=this;return n("div",{className:"uppy-Dashboard-AddFiles"},this.renderHiddenInput(!1,function(r){e.fileInput=r}),this.renderHiddenInput(!0,function(r){e.folderInput=r}),this.renderDropPasteBrowseTagline(),this.props.acquirers.length>0&&this.renderAcquirers(this.props.acquirers),n("div",{className:"uppy-Dashboard-AddFiles-info"},this.props.note&&n("div",{className:"uppy-Dashboard-note"},this.props.note),this.props.proudlyDisplayPoweredByUppy&&this.renderPoweredByUppy(this.props)))},t}(p);module.exports=a;
},{"preact":"sSEx"}],"UVsU":[function(require,module,exports) {
var e=require("preact"),a=e.h,n=require("classnames"),s=require("./AddFiles"),d=function(e){return a("div",{className:n("uppy-Dashboard-AddFilesPanel",e.className),"data-uppy-panelType":"AddFiles","aria-hidden":e.showAddFilesPanel},a("div",{className:"uppy-DashboardContent-bar"},a("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},e.i18n("addingMoreFiles")),a("button",{className:"uppy-DashboardContent-back",type:"button",onClick:function(a){return e.toggleAddFilesPanel(!1)}},e.i18n("back"))),a(s,e))};module.exports=d;
},{"preact":"sSEx","classnames":"kpqe","./AddFiles":"OwTy"}],"s5A7":[function(require,module,exports) {
function t(t){var a=t.target.tagName;"INPUT"!==a&&"TEXTAREA"!==a?(t.preventDefault(),t.stopPropagation()):t.stopPropagation()}module.exports=t;
},{}],"OGrK":[function(require,module,exports) {
var e=require("preact"),a=e.h,n=require("classnames"),t=require("../utils/ignoreEvent.js");function r(e){return a("div",{className:n("uppy-DashboardContent-panel",e.className),role:"tabpanel","data-uppy-panelType":"PickerPanel",id:"uppy-DashboardContent-panel--"+e.activePickerPanel.id,onDragOver:t,onDragLeave:t,onDrop:t,onPaste:t},a("div",{className:"uppy-DashboardContent-bar"},a("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},e.i18n("importFrom",{name:e.activePickerPanel.name})),a("button",{className:"uppy-DashboardContent-back",type:"button",onClick:e.hideAllPanels},e.i18n("done"))),a("div",{className:"uppy-DashboardContent-panelBody"},e.getPlugin(e.activePickerPanel.id).render(e.state)))}module.exports=r;
},{"preact":"sSEx","classnames":"kpqe","../utils/ignoreEvent.js":"s5A7"}],"sLKK":[function(require,module,exports) {
var e=require("preact"),a=e.h,t=require("classnames");function n(e){var n=this.props.files[this.props.fileCardFor];return a("div",{className:t("uppy-DashboardContent-panel",e.className),role:"tabpanel","data-uppy-panelType":"FileEditor",id:"uppy-DashboardContent-panel--editor"},a("div",{className:"uppy-DashboardContent-bar"},a("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},e.i18nArray("editing",{file:a("span",{className:"uppy-DashboardContent-titleFile"},n.meta?n.meta.name:n.name)})),a("button",{className:"uppy-DashboardContent-back",type:"button",onClick:e.hideAllPanels},e.i18n("done"))),a("div",{className:"uppy-DashboardContent-panelBody"},e.editors.map(function(a){return e.getPlugin(a.id).render(e.state)})))}module.exports=n;
},{"preact":"sSEx","classnames":"kpqe"}],"NIVE":[function(require,module,exports) {
var e=require("preact"),a=e.h,t={STATE_ERROR:"error",STATE_WAITING:"waiting",STATE_PREPROCESSING:"preprocessing",STATE_UPLOADING:"uploading",STATE_POSTPROCESSING:"postprocessing",STATE_COMPLETE:"complete",STATE_PAUSED:"paused"};function n(e,a,n,s){if(void 0===s&&(s={}),e)return t.STATE_ERROR;if(a)return t.STATE_COMPLETE;if(n)return t.STATE_PAUSED;for(var r=t.STATE_WAITING,l=Object.keys(s),o=0;o<l.length;o++){var i=s[l[o]].progress;if(i.uploadStarted&&!i.uploadComplete)return t.STATE_UPLOADING;i.preprocess&&r!==t.STATE_UPLOADING&&(r=t.STATE_PREPROCESSING),i.postprocess&&r!==t.STATE_UPLOADING&&r!==t.STATE_PREPROCESSING&&(r=t.STATE_POSTPROCESSING)}return r}function s(e){switch(n(e.isAllErrored,e.isAllComplete,e.isAllPaused,e.files)){case"uploading":return e.i18n("uploadingXFiles",{smart_count:e.inProgressNotPausedFiles.length});case"preprocessing":case"postprocessing":return e.i18n("processingXFiles",{smart_count:e.processingFiles.length});case"paused":return e.i18n("uploadPaused");case"waiting":return e.i18n("xFilesSelected",{smart_count:e.newFiles.length});case"complete":return e.i18n("uploadComplete")}}function r(e){var t=e.allowNewUpload;return t&&e.maxNumberOfFiles&&(t=e.totalFileCount<e.maxNumberOfFiles),a("div",{className:"uppy-DashboardContent-bar"},e.isAllComplete||e.hideCancelButton?a("div",null):a("button",{className:"uppy-DashboardContent-back",type:"button",onClick:e.cancelAll},e.i18n("cancel")),a("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},a(s,e)),t?a("button",{className:"uppy-DashboardContent-addMore",type:"button","aria-label":e.i18n("addMoreFiles"),title:e.i18n("addMoreFiles"),onClick:function(){return e.toggleAddFilesPanel(!0)}},a("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"15",height:"15",viewBox:"0 0 15 15"},a("path",{d:"M8 6.5h6a.5.5 0 0 1 .5.5v.5a.5.5 0 0 1-.5.5H8v6a.5.5 0 0 1-.5.5H7a.5.5 0 0 1-.5-.5V8h-6a.5.5 0 0 1-.5-.5V7a.5.5 0 0 1 .5-.5h6v-6A.5.5 0 0 1 7 0h.5a.5.5 0 0 1 .5.5v6z"})),a("span",{className:"uppy-DashboardContent-addMoreCaption"},e.i18n("addMore"))):a("div",null))}module.exports=r;
},{"preact":"sSEx"}],"OiVi":[function(require,module,exports) {
function e(){return(e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function t(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,a(e,t)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=require("preact"),n=r.h,i=r.Component,s=require("classnames"),p=require("../../utils/getFileTypeIcon"),o=require("../../utils/ignoreEvent.js"),l=require("../FilePreview"),u=function(a){function r(t){var r;(r=a.call(this,t)||this).saveOnEnter=function(e){if(13===e.keyCode){e.stopPropagation(),e.preventDefault();var t=r.props.files[r.props.fileCardFor];r.props.saveFileCard(r.state.formState,t.id)}},r.updateMeta=function(t,a){var n;r.setState({formState:e({},r.state.formState,(n={},n[a]=t,n))})},r.handleSave=function(){var e=r.props.fileCardFor;r.props.saveFileCard(r.state.formState,e)},r.handleCancel=function(){r.props.toggleFileCard(!1)},r.renderMetaFields=function(){var e=r.getMetaFields()||[],t={text:"uppy-u-reset uppy-c-textInput uppy-Dashboard-FileCard-input"};return e.map(function(e){var a="uppy-Dashboard-FileCard-input-"+e.id;return n("fieldset",{key:e.id,className:"uppy-Dashboard-FileCard-fieldset"},n("label",{className:"uppy-Dashboard-FileCard-label",htmlFor:a},e.name),void 0!==e.render?e.render({value:r.state.formState[e.id],onChange:function(t){return r.updateMeta(t,e.id)},fieldCSSClasses:t},n):n("input",{className:t.text,id:a,type:e.type||"text",value:r.state.formState[e.id],placeholder:e.placeholder,onKeyUp:r.saveOnEnter,onKeyDown:r.saveOnEnter,onKeyPress:r.saveOnEnter,onInput:function(t){return r.updateMeta(t.target.value,e.id)},"data-uppy-super-focusable":!0}))})};var i=r.props.files[r.props.fileCardFor],s=r.getMetaFields()||[],p={};return s.forEach(function(e){p[e.id]=i.meta[e.id]||""}),r.state={formState:p},r}t(r,a);var i=r.prototype;return i.getMetaFields=function(){return"function"==typeof this.props.metaFields?this.props.metaFields(this.props.files[this.props.fileCardFor]):this.props.metaFields},i.render=function(){var e=this,t=this.props.files[this.props.fileCardFor],a=this.props.canEditFile(t);return n("div",{className:s("uppy-Dashboard-FileCard",this.props.className),"data-uppy-panelType":"FileCard",onDragOver:o,onDragLeave:o,onDrop:o,onPaste:o},n("div",{className:"uppy-DashboardContent-bar"},n("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},this.props.i18nArray("editing",{file:n("span",{className:"uppy-DashboardContent-titleFile"},t.meta?t.meta.name:t.name)})),n("button",{className:"uppy-DashboardContent-back",type:"button",title:this.props.i18n("finishEditingFile"),onClick:this.handleSave},this.props.i18n("done"))),n("div",{className:"uppy-Dashboard-FileCard-inner"},n("div",{className:"uppy-Dashboard-FileCard-preview",style:{backgroundColor:p(t.type).color}},n(l,{file:t}),a&&n("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-Dashboard-FileCard-edit",onClick:function(){return e.props.openFileEditor(t)}},this.props.i18n("editFile"))),n("div",{className:"uppy-Dashboard-FileCard-info"},this.renderMetaFields()),n("div",{className:"uppy-Dashboard-FileCard-actions"},n("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Dashboard-FileCard-actionsBtn",type:"button",onClick:this.handleSave},this.props.i18n("saveChanges")),n("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-link uppy-Dashboard-FileCard-actionsBtn",type:"button",onClick:this.handleCancel},this.props.i18n("cancel")))))},r}(i);module.exports=u;
},{"preact":"sSEx","classnames":"kpqe","../../utils/getFileTypeIcon":"IZjg","../../utils/ignoreEvent.js":"s5A7","../FilePreview":"qPaL"}],"OSGI":[function(require,module,exports) {
function e(e,a){e.prototype=Object.create(a.prototype),e.prototype.constructor=e,t(e,a)}function t(e,a){return(t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,a)}var a=require("preact"),n=a.cloneElement,i=a.Component,r=require("classnames"),o="uppy-transition-slideDownUp",s=250,c=function(t){function a(e){var a;return(a=t.call(this,e)||this).state={cachedChildren:null,className:""},a}e(a,t);var i=a.prototype;return i.componentWillUpdate=function(e){var t=this,a=this.state.cachedChildren,n=e.children[0];if(a!==n){var i={cachedChildren:n};n&&!a&&(i.className=o+"-enter",cancelAnimationFrame(this.animationFrame),clearTimeout(this.leaveTimeout),this.leaveTimeout=void 0,this.animationFrame=requestAnimationFrame(function(){t.base.getBoundingClientRect(),t.setState({className:o+"-enter "+o+"-enter-active"}),t.enterTimeout=setTimeout(function(){t.setState({className:""})},s)})),a&&!n&&void 0===this.leaveTimeout&&(i.cachedChildren=a,i.className=o+"-leave",cancelAnimationFrame(this.animationFrame),clearTimeout(this.enterTimeout),this.enterTimeout=void 0,this.animationFrame=requestAnimationFrame(function(){t.setState({className:o+"-leave "+o+"-leave-active"}),t.leaveTimeout=setTimeout(function(){t.setState({cachedChildren:null,className:""})},s)})),this.setState(i)}},i.render=function(){var e=this.state,t=e.cachedChildren,a=e.className;return t?n(t,{className:r(a,t.attributes.className)}):null},a}(i);module.exports=c;
},{"preact":"sSEx","classnames":"kpqe"}],"CX9K":[function(require,module,exports) {
module.exports=function(){var n=document.createElement("div");return"draggable"in n&&"ondragstart"in n&&"ondrop"in n&&("FormData"in window&&"FileReader"in window)};
},{}],"gcOb":[function(require,module,exports) {
function e(){return(e=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var a=arguments[i];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}var i=require("./FileList"),a=require("./AddFiles"),r=require("./AddFilesPanel"),n=require("./PickerPanelContent"),l=require("./EditorPanel"),s=require("./PickerPanelTopBar"),d=require("./FileCard"),t=require("./Slide"),o=require("classnames"),p=require("@uppy/utils/lib/isDragDropSupported"),u=require("preact"),h=u.h,c=900,y=700,b=576,g=400;module.exports=function(u){var D=0===u.totalFileCount,m=u.containerWidth>b,v=o({"uppy-Root":u.isTargetDOMEl}),P=o({"uppy-Dashboard":!0,"uppy-Dashboard--isDisabled":u.disabled,"uppy-Dashboard--animateOpenClose":u.animateOpenClose,"uppy-Dashboard--isClosing":u.isClosing,"uppy-Dashboard--isDraggingOver":u.isDraggingOver,"uppy-Dashboard--modal":!u.inline,"uppy-size--md":u.containerWidth>b,"uppy-size--lg":u.containerWidth>y,"uppy-size--xl":u.containerWidth>c,"uppy-size--height-md":u.containerHeight>g,"uppy-Dashboard--isAddFilesPanelVisible":u.showAddFilesPanel,"uppy-Dashboard--isInnerWrapVisible":u.areInsidesReadyToBeVisible}),F=1;u.containerWidth>c?F=5:u.containerWidth>y?F=4:u.containerWidth>b&&(F=3);var q=u.showSelectedFiles&&!D,C=h("div",{className:P,"data-uppy-theme":u.theme,"data-uppy-num-acquirers":u.acquirers.length,"data-uppy-drag-drop-supported":p(),"aria-hidden":u.inline?"false":u.isHidden,"aria-disabled":u.disabled,"aria-label":u.inline?u.i18n("dashboardTitle"):u.i18n("dashboardWindowTitle"),onPaste:u.handlePaste,onDragOver:u.handleDragOver,onDragLeave:u.handleDragLeave,onDrop:u.handleDrop},h("div",{className:"uppy-Dashboard-overlay",tabIndex:-1,onClick:u.handleClickOutside}),h("div",{className:"uppy-Dashboard-inner","aria-modal":!u.inline&&"true",role:!u.inline&&"dialog",style:{width:u.inline&&u.width?u.width:"",height:u.inline&&u.height?u.height:""}},u.inline?null:h("button",{className:"uppy-u-reset uppy-Dashboard-close",type:"button","aria-label":u.i18n("closeModal"),title:u.i18n("closeModal"),onClick:u.closeModal},h("span",{"aria-hidden":"true"},"×")),h("div",{className:"uppy-Dashboard-innerWrap"},h("div",{className:"uppy-Dashboard-dropFilesHereHint"},u.i18n("dropHint")),q&&h(s,u),q?h(i,e({},u,{itemsPerRow:F})):h(a,e({},u,{isSizeMD:m})),h(t,null,u.showAddFilesPanel?h(r,e({key:"AddFiles"},u,{isSizeMD:m})):null),h(t,null,u.fileCardFor?h(d,e({key:"FileCard"},u)):null),h(t,null,u.activePickerPanel?h(n,e({key:"Picker"},u)):null),h(t,null,u.showFileEditor?h(l,e({key:"Editor"},u)):null),h("div",{className:"uppy-Dashboard-progressindicators"},u.progressindicators.map(function(e){return u.getPlugin(e.id).render(u.state)})))));return h("div",{className:v,dir:u.direction},C)};
},{"./FileList":"KuLE","./AddFiles":"OwTy","./AddFilesPanel":"UVsU","./PickerPanelContent":"OGrK","./EditorPanel":"sLKK","./PickerPanelTopBar":"NIVE","./FileCard":"OiVi","./Slide":"OSGI","classnames":"kpqe","@uppy/utils/lib/isDragDropSupported":"CX9K","preact":"sSEx"}],"tjTy":[function(require,module,exports) {
module.exports={STATE_ERROR:"error",STATE_WAITING:"waiting",STATE_PREPROCESSING:"preprocessing",STATE_UPLOADING:"uploading",STATE_POSTPROCESSING:"postprocessing",STATE_COMPLETE:"complete"};
},{}],"ZR7Y":[function(require,module,exports) {
module.exports=function(o){return{hours:Math.floor(o/3600)%24,minutes:Math.floor(o/60)%60,seconds:Math.floor(o%60)}};
},{}],"CKvx":[function(require,module,exports) {
var s=require("./secondsToTime");module.exports=function(r){var u=s(r),e=u.hours?u.hours+"h ":"",o=u.hours?("0"+u.minutes).substr(-2):u.minutes,n=o?o+"m":"",t=o?("0"+u.seconds).substr(-2):u.seconds;return""+e+n+(u.hours?"":o?" "+t+"s":t+"s")};
},{"./secondsToTime":"ZR7Y"}],"bZNO":[function(require,module,exports) {
function t(){return(t=Object.assign||function(t){for(var a=1;a<arguments.length;a++){var e=arguments[a];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t}).apply(this,arguments)}var a=require("lodash.throttle"),e=require("classnames"),s=require("./StatusBarStates"),l=require("@transloadit/prettier-bytes"),u=require("@uppy/utils/lib/prettyETA"),r=require("preact"),n=r.h;function i(t){var a=[];Object.keys(t).forEach(function(e){var s=t[e].progress;s.preprocess&&a.push(s.preprocess),s.postprocess&&a.push(s.postprocess)});var e=a[0];return{mode:e.mode,message:e.message,value:a.filter(function(t){return"determinate"===t.mode}).reduce(function(t,a,e,s){return t+a.value/s.length},0)}}function o(t){if(!t.isAllComplete)return t.resumableUploads?t.isAllPaused?t.resumeAll():t.pauseAll():t.cancelAll()}module.exports=function(a){var l,u,r=a=a||{},o=r.newFiles,f=r.allowNewUpload,S=r.isUploadInProgress,B=r.isAllPaused,h=r.resumableUploads,b=r.error,N=r.hideUploadButton,E=r.hidePauseResumeButton,P=r.hideCancelButton,w=r.hideRetryButton,F=a.uploadState,U=a.totalProgress;if(F===s.STATE_PREPROCESSING||F===s.STATE_POSTPROCESSING){var C=i(a.files);"determinate"===(l=C.mode)&&(U=100*C.value),u=v(C)}else F===s.STATE_COMPLETE?u=A(a):F===s.STATE_UPLOADING?(a.supportsUploadProgress||(l="indeterminate",U=null),u=T(a)):F===s.STATE_ERROR&&(U=void 0,u=g(a));var _="number"==typeof U?U:100,O=F===s.STATE_WAITING&&a.hideUploadButton||F===s.STATE_WAITING&&!a.newFiles>0||F===s.STATE_COMPLETE&&a.hideAfterFinish,I=!b&&o&&!S&&!B&&f&&!N,M=!P&&F!==s.STATE_WAITING&&F!==s.STATE_COMPLETE,L=h&&!E&&F===s.STATE_UPLOADING,R=b&&!w,x=a.doneButtonHandler&&F===s.STATE_COMPLETE,z="uppy-StatusBar-progress\n                           "+(l?"is-"+l:""),k=e({"uppy-Root":a.isTargetDOMEl},"uppy-StatusBar","is-"+F);return n("div",{className:k,"aria-hidden":O},n("div",{className:z,style:{width:_+"%"},role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":U}),u,n("div",{className:"uppy-StatusBar-actions"},I?n(p,t({},a,{uploadState:F})):null,R?n(c,a):null,L?n(y,a):null,M?n(d,a):null,x?n(m,a):null))};var p=function(t){var a=e("uppy-u-reset","uppy-c-btn","uppy-StatusBar-actionBtn","uppy-StatusBar-actionBtn--upload",{"uppy-c-btn-primary":t.uploadState===s.STATE_WAITING});return n("button",{type:"button",className:a,"aria-label":t.i18n("uploadXFiles",{smart_count:t.newFiles}),onClick:t.startUpload,"data-uppy-super-focusable":!0},t.newFiles&&t.isUploadStarted?t.i18n("uploadXNewFiles",{smart_count:t.newFiles}):t.i18n("uploadXFiles",{smart_count:t.newFiles}))},c=function(t){return n("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--retry","aria-label":t.i18n("retryUpload"),onClick:t.retryAll,"data-uppy-super-focusable":!0},n("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"8",height:"10",viewBox:"0 0 8 10"},n("path",{d:"M4 2.408a2.75 2.75 0 1 0 2.75 2.75.626.626 0 0 1 1.25.018v.023a4 4 0 1 1-4-4.041V.25a.25.25 0 0 1 .389-.208l2.299 1.533a.25.25 0 0 1 0 .416l-2.3 1.533A.25.25 0 0 1 4 3.316v-.908z"})),t.i18n("retry"))},d=function(t){return n("button",{type:"button",className:"uppy-u-reset uppy-StatusBar-actionCircleBtn",title:t.i18n("cancel"),"aria-label":t.i18n("cancel"),onClick:t.cancelAll,"data-uppy-super-focusable":!0},n("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"16",height:"16",viewBox:"0 0 16 16"},n("g",{fill:"none",fillRule:"evenodd"},n("circle",{fill:"#888",cx:"8",cy:"8",r:"8"}),n("path",{fill:"#FFF",d:"M9.283 8l2.567 2.567-1.283 1.283L8 9.283 5.433 11.85 4.15 10.567 6.717 8 4.15 5.433 5.433 4.15 8 6.717l2.567-2.567 1.283 1.283z"}))))},y=function(t){var a=t.isAllPaused,e=t.i18n,s=e(a?"resume":"pause");return n("button",{title:s,"aria-label":s,className:"uppy-u-reset uppy-StatusBar-actionCircleBtn",type:"button",onClick:function(){return o(t)},"data-uppy-super-focusable":!0},n("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"16",height:"16",viewBox:"0 0 16 16"},n("g",{fill:"none",fillRule:"evenodd"},n("circle",{fill:"#888",cx:"8",cy:"8",r:"8"}),n("path",a?{fill:"#FFF",d:"M6 4.25L11.5 8 6 11.75z"}:{d:"M5 4.5h2v7H5v-7zm4 0h2v7H9v-7z",fill:"#FFF"}))))},m=function(t){var a=t.i18n;return n("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--done",onClick:t.doneButtonHandler,"data-uppy-super-focusable":!0},a("done"))},f=function(){return n("svg",{className:"uppy-StatusBar-spinner","aria-hidden":"true",focusable:"false",width:"14",height:"14"},n("path",{d:"M13.983 6.547c-.12-2.509-1.64-4.893-3.939-5.936-2.48-1.127-5.488-.656-7.556 1.094C.524 3.367-.398 6.048.162 8.562c.556 2.495 2.46 4.52 4.94 5.183 2.932.784 5.61-.602 7.256-3.015-1.493 1.993-3.745 3.309-6.298 2.868-2.514-.434-4.578-2.349-5.153-4.84a6.226 6.226 0 0 1 2.98-6.778C6.34.586 9.74 1.1 11.373 3.493c.407.596.693 1.282.842 1.988.127.598.073 1.197.161 1.794.078.525.543 1.257 1.15.864.525-.341.49-1.05.456-1.592-.007-.15.02.3 0 0",fillRule:"evenodd"}))},v=function(t){var a=Math.round(100*t.value);return n("div",{className:"uppy-StatusBar-content"},n(f,null),"determinate"===t.mode?a+"% · ":"",t.message)},S=function(){return" · "},B=function(t){var a=t.numUploads>1;return n("div",{className:"uppy-StatusBar-statusSecondary"},a&&t.i18n("filesUploadedOfTotal",{complete:t.complete,smart_count:t.numUploads}),n("span",{className:"uppy-StatusBar-additionalInfo"},a&&S(),t.i18n("dataUploadedOfTotal",{complete:l(t.totalUploadedSize),total:l(t.totalSize)}),S(),t.i18n("xTimeLeft",{time:u(t.totalETA)})))},h=function(t){return n("div",{className:"uppy-StatusBar-statusSecondary"},t.i18n("filesUploadedOfTotal",{complete:t.complete,smart_count:t.numUploads}))},b=function(t){var a=e("uppy-u-reset","uppy-c-btn","uppy-StatusBar-actionBtn","uppy-StatusBar-actionBtn--uploadNewlyAdded");return n("div",{className:"uppy-StatusBar-statusSecondary"},n("div",{className:"uppy-StatusBar-statusSecondaryHint"},t.i18n("xMoreFilesAdded",{smart_count:t.newFiles})),n("button",{type:"button",className:a,"aria-label":t.i18n("uploadXFiles",{smart_count:t.newFiles}),onClick:t.startUpload},t.i18n("upload")))},N=a(B,500,{leading:!0,trailing:!0}),T=function(t){if(!t.isUploadStarted||t.isAllComplete)return null;var a=t.isAllPaused?t.i18n("paused"):t.i18n("uploading"),e=t.newFiles&&t.isUploadStarted;return n("div",{className:"uppy-StatusBar-content","aria-label":a,title:a},t.isAllPaused?null:n(f,null),n("div",{className:"uppy-StatusBar-status"},n("div",{className:"uppy-StatusBar-statusPrimary"},t.supportsUploadProgress?a+": "+t.totalProgress+"%":a),t.isAllPaused||e||!t.showProgressDetails?null:t.supportsUploadProgress?n(N,t):n(h,t),e?n(b,t):null))},A=function(t){t.totalProgress;var a=t.i18n;return n("div",{className:"uppy-StatusBar-content",role:"status",title:a("complete")},n("div",{className:"uppy-StatusBar-status"},n("div",{className:"uppy-StatusBar-statusPrimary"},n("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-StatusBar-statusIndicator uppy-c-icon",width:"15",height:"11",viewBox:"0 0 15 11"},n("path",{d:"M.414 5.843L1.627 4.63l3.472 3.472L13.202 0l1.212 1.213L5.1 10.528z"})),a("complete"))))},g=function(t){var a=t.error,e=(t.retryAll,t.hideRetryButton,t.i18n);return n("div",{className:"uppy-StatusBar-content",role:"alert",title:e("uploadFailed")},n("div",{className:"uppy-StatusBar-status"},n("div",{className:"uppy-StatusBar-statusPrimary"},n("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-StatusBar-statusIndicator uppy-c-icon",width:"11",height:"11",viewBox:"0 0 11 11"},n("path",{d:"M4.278 5.5L0 1.222 1.222 0 5.5 4.278 9.778 0 11 1.222 6.722 5.5 11 9.778 9.778 11 5.5 6.722 1.222 11 0 9.778z"})),e("uploadFailed"))),n("span",{className:"uppy-StatusBar-details","aria-label":a,"data-microtip-position":"top-right","data-microtip-size":"medium",role:"tooltip",onClick:function(){var t=e("uploadFailed")+" \n\n "+a;alert(t)}},"?"))};
},{"lodash.throttle":"Ai1e","classnames":"kpqe","./StatusBarStates":"tjTy","@transloadit/prettier-bytes":"n6LF","@uppy/utils/lib/prettyETA":"CKvx","preact":"sSEx"}],"AZiQ":[function(require,module,exports) {
module.exports=function(e){if(!e.bytesUploaded)return 0;var t=new Date-e.uploadStarted;return e.bytesUploaded/(t/1e3)};
},{}],"jWRG":[function(require,module,exports) {
module.exports=function(e){return e.bytesTotal-e.bytesUploaded};
},{}],"sfh4":[function(require,module,exports) {
function r(r){for(;r&&!r.dir;)r=r.parentNode;return r?r.dir:void 0}module.exports=r;
},{}],"VW3H":[function(require,module,exports) {
var t,e;function r(){return(r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t}).apply(this,arguments)}function o(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,n(t,e)}function n(t,e){return(n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var l=require("@uppy/core"),i=l.Plugin,a=require("@uppy/utils/lib/Translator"),u=require("./StatusBar"),p=require("./StatusBarStates"),d=require("@uppy/utils/lib/getSpeed"),c=require("@uppy/utils/lib/getBytesRemaining"),h=require("@uppy/utils/lib/getTextDirection");module.exports=(e=t=function(t){function e(e,s){var n;(n=t.call(this,e,s)||this).startUpload=function(){return n.uppy.upload().catch(function(){})},n.id=n.opts.id||"StatusBar",n.title="StatusBar",n.type="progressindicator",n.defaultLocale={strings:{uploading:"Uploading",upload:"Upload",complete:"Complete",uploadFailed:"Upload failed",paused:"Paused",retry:"Retry",retryUpload:"Retry upload",cancel:"Cancel",pause:"Pause",resume:"Resume",done:"Done",filesUploadedOfTotal:{0:"%{complete} of %{smart_count} file uploaded",1:"%{complete} of %{smart_count} files uploaded"},dataUploadedOfTotal:"%{complete} of %{total}",xTimeLeft:"%{time} left",uploadXFiles:{0:"Upload %{smart_count} file",1:"Upload %{smart_count} files"},uploadXNewFiles:{0:"Upload +%{smart_count} file",1:"Upload +%{smart_count} files"},xMoreFilesAdded:{0:"%{smart_count} more file added",1:"%{smart_count} more files added"}}};return n.opts=r({},{target:"body",hideUploadButton:!1,hideRetryButton:!1,hidePauseResumeButton:!1,hideCancelButton:!1,showProgressDetails:!1,hideAfterFinish:!0,doneButtonHandler:null},s),n.i18nInit(),n.render=n.render.bind(o(n)),n.install=n.install.bind(o(n)),n}s(e,t);var n=e.prototype;return n.setOptions=function(e){t.prototype.setOptions.call(this,e),this.i18nInit()},n.i18nInit=function(){this.translator=new a([this.defaultLocale,this.uppy.locale,this.opts.locale]),this.i18n=this.translator.translate.bind(this.translator),this.setPluginState()},n.getTotalSpeed=function(t){var e=0;return t.forEach(function(t){e+=d(t.progress)}),e},n.getTotalETA=function(t){var e=this.getTotalSpeed(t);if(0===e)return 0;var r=t.reduce(function(t,e){return t+c(e.progress)},0);return Math.round(r/e*10)/10},n.getUploadingState=function(t,e,r){if(t)return p.STATE_ERROR;if(e)return p.STATE_COMPLETE;for(var o=p.STATE_WAITING,s=Object.keys(r),n=0;n<s.length;n++){var l=r[s[n]].progress;if(l.uploadStarted&&!l.uploadComplete)return p.STATE_UPLOADING;l.preprocess&&o!==p.STATE_UPLOADING&&(o=p.STATE_PREPROCESSING),l.postprocess&&o!==p.STATE_UPLOADING&&o!==p.STATE_PREPROCESSING&&(o=p.STATE_POSTPROCESSING)}return o},n.render=function(t){var e=t.capabilities,r=t.files,o=t.allowNewUpload,s=t.totalProgress,n=t.error,l=Object.keys(r).map(function(t){return r[t]}),i=l.filter(function(t){return!t.progress.uploadStarted&&!t.progress.preprocess&&!t.progress.postprocess}),a=l.filter(function(t){return t.progress.uploadStarted}).filter(function(t){return t.isPaused}),p=l.filter(function(t){return t.progress.uploadComplete}),d=l.filter(function(t){return t.error}),c=l.filter(function(t){return!t.progress.uploadComplete&&t.progress.uploadStarted}),h=c.filter(function(t){return!t.isPaused}),f=l.filter(function(t){return t.progress.uploadStarted||t.progress.preprocess||t.progress.postprocess}),g=l.filter(function(t){return t.progress.preprocess||t.progress.postprocess}),m=this.getTotalETA(h),y=0,S=0;f.forEach(function(t){y+=t.progress.bytesTotal||0,S+=t.progress.bytesUploaded||0});var T=f.length>0,A=100===s&&p.length===Object.keys(r).length&&0===g.length,U=n&&d.length===l.length,P=0!==c.length&&a.length===c.length,E=c.length>0,O=e.resumableUploads||!1,b=!1!==e.uploadProgress;return u({error:n,uploadState:this.getUploadingState(U,A,t.files||{}),allowNewUpload:o,totalProgress:s,totalSize:y,totalUploadedSize:S,isAllComplete:A,isAllPaused:P,isAllErrored:U,isUploadStarted:T,isUploadInProgress:E,complete:p.length,newFiles:i.length,numUploads:f.length,totalETA:m,files:r,i18n:this.i18n,pauseAll:this.uppy.pauseAll,resumeAll:this.uppy.resumeAll,retryAll:this.uppy.retryAll,cancelAll:this.uppy.cancelAll,startUpload:this.startUpload,doneButtonHandler:this.opts.doneButtonHandler,resumableUploads:O,supportsUploadProgress:b,showProgressDetails:this.opts.showProgressDetails,hideUploadButton:this.opts.hideUploadButton,hideRetryButton:this.opts.hideRetryButton,hidePauseResumeButton:this.opts.hidePauseResumeButton,hideCancelButton:this.opts.hideCancelButton,hideAfterFinish:this.opts.hideAfterFinish,isTargetDOMEl:this.isTargetDOMEl})},n.onMount=function(){var t=this.el;h(t)||(t.dir="ltr")},n.install=function(){var t=this.opts.target;t&&this.mount(t,this)},n.uninstall=function(){this.unmount()},e}(i),t.VERSION="1.9.3",e);
},{"@uppy/core":"PDAA","@uppy/utils/lib/Translator":"hG0x","./StatusBar":"bZNO","./StatusBarStates":"tjTy","@uppy/utils/lib/getSpeed":"AZiQ","@uppy/utils/lib/getBytesRemaining":"jWRG","@uppy/utils/lib/getTextDirection":"sfh4"}],"KHlI":[function(require,module,exports) {
var t,e;function o(){return(o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r])}return t}).apply(this,arguments)}function r(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,n(t,e)}function n(t,e){return(n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var i=require("@uppy/core"),p=i.Plugin,u=require("preact"),a=u.h;module.exports=(e=t=function(t){function e(e,r){var n;(n=t.call(this,e,r)||this).render=function(t){var e=t.info,o=e.isHidden,r=e.message,i=e.details;return a("div",{className:"uppy uppy-Informer","aria-hidden":o},a("p",{role:"alert"},r," ",i&&a("span",{"aria-label":i,"data-microtip-position":"top-left","data-microtip-size":"medium",role:"tooltip",onClick:function(){alert(r+" \n\n "+i)},onMouseOver:function(){clearTimeout(n.uppy.infoTimeoutID)},onMouseLeave:function(){n.uppy.infoTimeoutID=setTimeout(n.uppy.hideInfo,2e3)}},"?")))},n.type="progressindicator",n.id=n.opts.id||"Informer",n.title="Informer";return n.opts=o({},{},r),n}return r(e,t),e.prototype.install=function(){var t=this.opts.target;t&&this.mount(t,this)},e}(p),t.VERSION="1.6.3",e);
},{"@uppy/core":"PDAA","preact":"sSEx"}],"Q78z":[function(require,module,exports) {
module.exports=function(t,e,l){var n=t.split(",")[1],r=e.mimeType||t.split(",")[0].split(":")[1].split(";")[0];null==r&&(r="plain/text");for(var p,i=atob(n),a=[],o=0;o<i.length;o++)a.push(i.charCodeAt(o));try{p=new Uint8Array(a)}catch(u){return null}return l?new File([p],e.name||"",{type:r}):new Blob([p],{type:r})};
},{}],"gdan":[function(require,module,exports) {
module.exports=function(e){return 0===e.indexOf("blob:")};
},{}],"wm1J":[function(require,module,exports) {
"use strict";module.exports=Math.log2||function(t){return Math.log(t)*Math.LOG2E};
},{}],"rH1J":[function(require,module,exports) {

var t,e,n=module.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}function u(t){if(e===clearTimeout)return clearTimeout(t);if((e===o||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(t);try{return e(t)}catch(n){try{return e.call(null,t)}catch(n){return e.call(this,t)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(n){t=r}try{e="function"==typeof clearTimeout?clearTimeout:o}catch(n){e=o}}();var c,s=[],l=!1,a=-1;function f(){l&&c&&(l=!1,c.length?s=c.concat(s):a=-1,s.length&&h())}function h(){if(!l){var t=i(f);l=!0;for(var e=s.length;e;){for(c=s,s=[];++a<e;)c&&c[a].run();a=-1,e=s.length}c=null,l=!1,u(t)}}function m(t,e){this.fun=t,this.array=e}function p(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new m(t,e)),1!==s.length||l||i(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0};
},{}],"QAnv":[function(require,module,exports) {
"use strict";exports.byteLength=u,exports.toByteArray=i,exports.fromByteArray=d;for(var r=[],t=[],e="undefined"!=typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,a=n.length;o<a;++o)r[o]=n[o],t[n.charCodeAt(o)]=o;function h(r){var t=r.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=r.indexOf("=");return-1===e&&(e=t),[e,e===t?0:4-e%4]}function u(r){var t=h(r),e=t[0],n=t[1];return 3*(e+n)/4-n}function c(r,t,e){return 3*(t+e)/4-e}function i(r){var n,o,a=h(r),u=a[0],i=a[1],f=new e(c(r,u,i)),A=0,d=i>0?u-4:u;for(o=0;o<d;o+=4)n=t[r.charCodeAt(o)]<<18|t[r.charCodeAt(o+1)]<<12|t[r.charCodeAt(o+2)]<<6|t[r.charCodeAt(o+3)],f[A++]=n>>16&255,f[A++]=n>>8&255,f[A++]=255&n;return 2===i&&(n=t[r.charCodeAt(o)]<<2|t[r.charCodeAt(o+1)]>>4,f[A++]=255&n),1===i&&(n=t[r.charCodeAt(o)]<<10|t[r.charCodeAt(o+1)]<<4|t[r.charCodeAt(o+2)]>>2,f[A++]=n>>8&255,f[A++]=255&n),f}function f(t){return r[t>>18&63]+r[t>>12&63]+r[t>>6&63]+r[63&t]}function A(r,t,e){for(var n,o=[],a=t;a<e;a+=3)n=(r[a]<<16&16711680)+(r[a+1]<<8&65280)+(255&r[a+2]),o.push(f(n));return o.join("")}function d(t){for(var e,n=t.length,o=n%3,a=[],h=0,u=n-o;h<u;h+=16383)a.push(A(t,h,h+16383>u?u:h+16383));return 1===o?(e=t[n-1],a.push(r[e>>2]+r[e<<4&63]+"==")):2===o&&(e=(t[n-2]<<8)+t[n-1],a.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"=")),a.join("")}t["-".charCodeAt(0)]=62,t["_".charCodeAt(0)]=63;
},{}],"O1Qa":[function(require,module,exports) {
exports.read=function(a,o,t,r,h){var M,p,w=8*h-r-1,f=(1<<w)-1,e=f>>1,i=-7,N=t?h-1:0,n=t?-1:1,s=a[o+N];for(N+=n,M=s&(1<<-i)-1,s>>=-i,i+=w;i>0;M=256*M+a[o+N],N+=n,i-=8);for(p=M&(1<<-i)-1,M>>=-i,i+=r;i>0;p=256*p+a[o+N],N+=n,i-=8);if(0===M)M=1-e;else{if(M===f)return p?NaN:1/0*(s?-1:1);p+=Math.pow(2,r),M-=e}return(s?-1:1)*p*Math.pow(2,M-r)},exports.write=function(a,o,t,r,h,M){var p,w,f,e=8*M-h-1,i=(1<<e)-1,N=i>>1,n=23===h?Math.pow(2,-24)-Math.pow(2,-77):0,s=r?0:M-1,u=r?1:-1,l=o<0||0===o&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(w=isNaN(o)?1:0,p=i):(p=Math.floor(Math.log(o)/Math.LN2),o*(f=Math.pow(2,-p))<1&&(p--,f*=2),(o+=p+N>=1?n/f:n*Math.pow(2,1-N))*f>=2&&(p++,f/=2),p+N>=i?(w=0,p=i):p+N>=1?(w=(o*f-1)*Math.pow(2,h),p+=N):(w=o*Math.pow(2,N-1)*Math.pow(2,h),p=0));h>=8;a[t+s]=255&w,s+=u,w/=256,h-=8);for(p=p<<h|w,e+=h;e>0;a[t+s]=255&p,s+=u,p/=256,e-=8);a[t+s-u]|=128*l};
},{}],"ZCp3":[function(require,module,exports) {
var r={}.toString;module.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)};
},{}],"fe91":[function(require,module,exports) {

var global = arguments[3];
var t=arguments[3],r=require("base64-js"),e=require("ieee754"),n=require("isarray");function i(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(r){return!1}}function o(){return f.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(t,r){if(o()<r)throw new RangeError("Invalid typed array length");return f.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(r)).__proto__=f.prototype:(null===t&&(t=new f(r)),t.length=r),t}function f(t,r,e){if(!(f.TYPED_ARRAY_SUPPORT||this instanceof f))return new f(t,r,e);if("number"==typeof t){if("string"==typeof r)throw new Error("If encoding is specified then the first argument must be a string");return c(this,t)}return s(this,t,r,e)}function s(t,r,e,n){if("number"==typeof r)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&r instanceof ArrayBuffer?g(t,r,e,n):"string"==typeof r?l(t,r,e):y(t,r)}function h(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function a(t,r,e,n){return h(r),r<=0?u(t,r):void 0!==e?"string"==typeof n?u(t,r).fill(e,n):u(t,r).fill(e):u(t,r)}function c(t,r){if(h(r),t=u(t,r<0?0:0|w(r)),!f.TYPED_ARRAY_SUPPORT)for(var e=0;e<r;++e)t[e]=0;return t}function l(t,r,e){if("string"==typeof e&&""!==e||(e="utf8"),!f.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');var n=0|v(r,e),i=(t=u(t,n)).write(r,e);return i!==n&&(t=t.slice(0,i)),t}function p(t,r){var e=r.length<0?0:0|w(r.length);t=u(t,e);for(var n=0;n<e;n+=1)t[n]=255&r[n];return t}function g(t,r,e,n){if(r.byteLength,e<0||r.byteLength<e)throw new RangeError("'offset' is out of bounds");if(r.byteLength<e+(n||0))throw new RangeError("'length' is out of bounds");return r=void 0===e&&void 0===n?new Uint8Array(r):void 0===n?new Uint8Array(r,e):new Uint8Array(r,e,n),f.TYPED_ARRAY_SUPPORT?(t=r).__proto__=f.prototype:t=p(t,r),t}function y(t,r){if(f.isBuffer(r)){var e=0|w(r.length);return 0===(t=u(t,e)).length?t:(r.copy(t,0,0,e),t)}if(r){if("undefined"!=typeof ArrayBuffer&&r.buffer instanceof ArrayBuffer||"length"in r)return"number"!=typeof r.length||W(r.length)?u(t,0):p(t,r);if("Buffer"===r.type&&n(r.data))return p(t,r.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function w(t){if(t>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|t}function d(t){return+t!=t&&(t=0),f.alloc(+t)}function v(t,r){if(f.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var e=t.length;if(0===e)return 0;for(var n=!1;;)switch(r){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":case void 0:return $(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*e;case"hex":return e>>>1;case"base64":return K(t).length;default:if(n)return $(t).length;r=(""+r).toLowerCase(),n=!0}}function E(t,r,e){var n=!1;if((void 0===r||r<0)&&(r=0),r>this.length)return"";if((void 0===e||e>this.length)&&(e=this.length),e<=0)return"";if((e>>>=0)<=(r>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return x(this,r,e);case"utf8":case"utf-8":return Y(this,r,e);case"ascii":return L(this,r,e);case"latin1":case"binary":return D(this,r,e);case"base64":return S(this,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,r,e);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function b(t,r,e){var n=t[r];t[r]=t[e],t[e]=n}function R(t,r,e,n,i){if(0===t.length)return-1;if("string"==typeof e?(n=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e=+e,isNaN(e)&&(e=i?0:t.length-1),e<0&&(e=t.length+e),e>=t.length){if(i)return-1;e=t.length-1}else if(e<0){if(!i)return-1;e=0}if("string"==typeof r&&(r=f.from(r,n)),f.isBuffer(r))return 0===r.length?-1:_(t,r,e,n,i);if("number"==typeof r)return r&=255,f.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,r,e):Uint8Array.prototype.lastIndexOf.call(t,r,e):_(t,[r],e,n,i);throw new TypeError("val must be string, number or Buffer")}function _(t,r,e,n,i){var o,u=1,f=t.length,s=r.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||r.length<2)return-1;u=2,f/=2,s/=2,e/=2}function h(t,r){return 1===u?t[r]:t.readUInt16BE(r*u)}if(i){var a=-1;for(o=e;o<f;o++)if(h(t,o)===h(r,-1===a?0:o-a)){if(-1===a&&(a=o),o-a+1===s)return a*u}else-1!==a&&(o-=o-a),a=-1}else for(e+s>f&&(e=f-s),o=e;o>=0;o--){for(var c=!0,l=0;l<s;l++)if(h(t,o+l)!==h(r,l)){c=!1;break}if(c)return o}return-1}function A(t,r,e,n){e=Number(e)||0;var i=t.length-e;n?(n=Number(n))>i&&(n=i):n=i;var o=r.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var u=0;u<n;++u){var f=parseInt(r.substr(2*u,2),16);if(isNaN(f))return u;t[e+u]=f}return u}function m(t,r,e,n){return Q($(r,t.length-e),t,e,n)}function P(t,r,e,n){return Q(G(r),t,e,n)}function T(t,r,e,n){return P(t,r,e,n)}function B(t,r,e,n){return Q(K(r),t,e,n)}function U(t,r,e,n){return Q(H(r,t.length-e),t,e,n)}function S(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function Y(t,r,e){e=Math.min(t.length,e);for(var n=[],i=r;i<e;){var o,u,f,s,h=t[i],a=null,c=h>239?4:h>223?3:h>191?2:1;if(i+c<=e)switch(c){case 1:h<128&&(a=h);break;case 2:128==(192&(o=t[i+1]))&&(s=(31&h)<<6|63&o)>127&&(a=s);break;case 3:o=t[i+1],u=t[i+2],128==(192&o)&&128==(192&u)&&(s=(15&h)<<12|(63&o)<<6|63&u)>2047&&(s<55296||s>57343)&&(a=s);break;case 4:o=t[i+1],u=t[i+2],f=t[i+3],128==(192&o)&&128==(192&u)&&128==(192&f)&&(s=(15&h)<<18|(63&o)<<12|(63&u)<<6|63&f)>65535&&s<1114112&&(a=s)}null===a?(a=65533,c=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),i+=c}return O(n)}exports.Buffer=f,exports.SlowBuffer=d,exports.INSPECT_MAX_BYTES=50,f.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:i(),exports.kMaxLength=o(),f.poolSize=8192,f._augment=function(t){return t.__proto__=f.prototype,t},f.from=function(t,r,e){return s(null,t,r,e)},f.TYPED_ARRAY_SUPPORT&&(f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&f[Symbol.species]===f&&Object.defineProperty(f,Symbol.species,{value:null,configurable:!0})),f.alloc=function(t,r,e){return a(null,t,r,e)},f.allocUnsafe=function(t){return c(null,t)},f.allocUnsafeSlow=function(t){return c(null,t)},f.isBuffer=function(t){return!(null==t||!t._isBuffer)},f.compare=function(t,r){if(!f.isBuffer(t)||!f.isBuffer(r))throw new TypeError("Arguments must be Buffers");if(t===r)return 0;for(var e=t.length,n=r.length,i=0,o=Math.min(e,n);i<o;++i)if(t[i]!==r[i]){e=t[i],n=r[i];break}return e<n?-1:n<e?1:0},f.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(t,r){if(!n(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return f.alloc(0);var e;if(void 0===r)for(r=0,e=0;e<t.length;++e)r+=t[e].length;var i=f.allocUnsafe(r),o=0;for(e=0;e<t.length;++e){var u=t[e];if(!f.isBuffer(u))throw new TypeError('"list" argument must be an Array of Buffers');u.copy(i,o),o+=u.length}return i},f.byteLength=v,f.prototype._isBuffer=!0,f.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<t;r+=2)b(this,r,r+1);return this},f.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<t;r+=4)b(this,r,r+3),b(this,r+1,r+2);return this},f.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<t;r+=8)b(this,r,r+7),b(this,r+1,r+6),b(this,r+2,r+5),b(this,r+3,r+4);return this},f.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?Y(this,0,t):E.apply(this,arguments)},f.prototype.equals=function(t){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===f.compare(this,t)},f.prototype.inspect=function(){var t="",r=exports.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},f.prototype.compare=function(t,r,e,n,i){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===r&&(r=0),void 0===e&&(e=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),r<0||e>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&r>=e)return 0;if(n>=i)return-1;if(r>=e)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(n>>>=0),u=(e>>>=0)-(r>>>=0),s=Math.min(o,u),h=this.slice(n,i),a=t.slice(r,e),c=0;c<s;++c)if(h[c]!==a[c]){o=h[c],u=a[c];break}return o<u?-1:u<o?1:0},f.prototype.includes=function(t,r,e){return-1!==this.indexOf(t,r,e)},f.prototype.indexOf=function(t,r,e){return R(this,t,r,e,!0)},f.prototype.lastIndexOf=function(t,r,e){return R(this,t,r,e,!1)},f.prototype.write=function(t,r,e,n){if(void 0===r)n="utf8",e=this.length,r=0;else if(void 0===e&&"string"==typeof r)n=r,e=this.length,r=0;else{if(!isFinite(r))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");r|=0,isFinite(e)?(e|=0,void 0===n&&(n="utf8")):(n=e,e=void 0)}var i=this.length-r;if((void 0===e||e>i)&&(e=i),t.length>0&&(e<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return A(this,t,r,e);case"utf8":case"utf-8":return m(this,t,r,e);case"ascii":return P(this,t,r,e);case"latin1":case"binary":return T(this,t,r,e);case"base64":return B(this,t,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,t,r,e);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;function O(t){var r=t.length;if(r<=I)return String.fromCharCode.apply(String,t);for(var e="",n=0;n<r;)e+=String.fromCharCode.apply(String,t.slice(n,n+=I));return e}function L(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i)n+=String.fromCharCode(127&t[i]);return n}function D(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i)n+=String.fromCharCode(t[i]);return n}function x(t,r,e){var n=t.length;(!r||r<0)&&(r=0),(!e||e<0||e>n)&&(e=n);for(var i="",o=r;o<e;++o)i+=Z(t[o]);return i}function C(t,r,e){for(var n=t.slice(r,e),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function M(t,r,e){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+r>e)throw new RangeError("Trying to access beyond buffer length")}function k(t,r,e,n,i,o){if(!f.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>i||r<o)throw new RangeError('"value" argument is out of bounds');if(e+n>t.length)throw new RangeError("Index out of range")}function N(t,r,e,n){r<0&&(r=65535+r+1);for(var i=0,o=Math.min(t.length-e,2);i<o;++i)t[e+i]=(r&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function z(t,r,e,n){r<0&&(r=4294967295+r+1);for(var i=0,o=Math.min(t.length-e,4);i<o;++i)t[e+i]=r>>>8*(n?i:3-i)&255}function F(t,r,e,n,i,o){if(e+n>t.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function j(t,r,n,i,o){return o||F(t,r,n,4,3.4028234663852886e38,-3.4028234663852886e38),e.write(t,r,n,i,23,4),n+4}function q(t,r,n,i,o){return o||F(t,r,n,8,1.7976931348623157e308,-1.7976931348623157e308),e.write(t,r,n,i,52,8),n+8}f.prototype.slice=function(t,r){var e,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(r=void 0===r?n:~~r)<0?(r+=n)<0&&(r=0):r>n&&(r=n),r<t&&(r=t),f.TYPED_ARRAY_SUPPORT)(e=this.subarray(t,r)).__proto__=f.prototype;else{var i=r-t;e=new f(i,void 0);for(var o=0;o<i;++o)e[o]=this[o+t]}return e},f.prototype.readUIntLE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t],i=1,o=0;++o<r&&(i*=256);)n+=this[t+o]*i;return n},f.prototype.readUIntBE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t+--r],i=1;r>0&&(i*=256);)n+=this[t+--r]*i;return n},f.prototype.readUInt8=function(t,r){return r||M(t,1,this.length),this[t]},f.prototype.readUInt16LE=function(t,r){return r||M(t,2,this.length),this[t]|this[t+1]<<8},f.prototype.readUInt16BE=function(t,r){return r||M(t,2,this.length),this[t]<<8|this[t+1]},f.prototype.readUInt32LE=function(t,r){return r||M(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},f.prototype.readUInt32BE=function(t,r){return r||M(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},f.prototype.readIntLE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t],i=1,o=0;++o<r&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*r)),n},f.prototype.readIntBE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=r,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*r)),o},f.prototype.readInt8=function(t,r){return r||M(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},f.prototype.readInt16LE=function(t,r){r||M(t,2,this.length);var e=this[t]|this[t+1]<<8;return 32768&e?4294901760|e:e},f.prototype.readInt16BE=function(t,r){r||M(t,2,this.length);var e=this[t+1]|this[t]<<8;return 32768&e?4294901760|e:e},f.prototype.readInt32LE=function(t,r){return r||M(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},f.prototype.readInt32BE=function(t,r){return r||M(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},f.prototype.readFloatLE=function(t,r){return r||M(t,4,this.length),e.read(this,t,!0,23,4)},f.prototype.readFloatBE=function(t,r){return r||M(t,4,this.length),e.read(this,t,!1,23,4)},f.prototype.readDoubleLE=function(t,r){return r||M(t,8,this.length),e.read(this,t,!0,52,8)},f.prototype.readDoubleBE=function(t,r){return r||M(t,8,this.length),e.read(this,t,!1,52,8)},f.prototype.writeUIntLE=function(t,r,e,n){(t=+t,r|=0,e|=0,n)||k(this,t,r,e,Math.pow(2,8*e)-1,0);var i=1,o=0;for(this[r]=255&t;++o<e&&(i*=256);)this[r+o]=t/i&255;return r+e},f.prototype.writeUIntBE=function(t,r,e,n){(t=+t,r|=0,e|=0,n)||k(this,t,r,e,Math.pow(2,8*e)-1,0);var i=e-1,o=1;for(this[r+i]=255&t;--i>=0&&(o*=256);)this[r+i]=t/o&255;return r+e},f.prototype.writeUInt8=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,1,255,0),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[r]=255&t,r+1},f.prototype.writeUInt16LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):N(this,t,r,!0),r+2},f.prototype.writeUInt16BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):N(this,t,r,!1),r+2},f.prototype.writeUInt32LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[r+3]=t>>>24,this[r+2]=t>>>16,this[r+1]=t>>>8,this[r]=255&t):z(this,t,r,!0),r+4},f.prototype.writeUInt32BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):z(this,t,r,!1),r+4},f.prototype.writeIntLE=function(t,r,e,n){if(t=+t,r|=0,!n){var i=Math.pow(2,8*e-1);k(this,t,r,e,i-1,-i)}var o=0,u=1,f=0;for(this[r]=255&t;++o<e&&(u*=256);)t<0&&0===f&&0!==this[r+o-1]&&(f=1),this[r+o]=(t/u>>0)-f&255;return r+e},f.prototype.writeIntBE=function(t,r,e,n){if(t=+t,r|=0,!n){var i=Math.pow(2,8*e-1);k(this,t,r,e,i-1,-i)}var o=e-1,u=1,f=0;for(this[r+o]=255&t;--o>=0&&(u*=256);)t<0&&0===f&&0!==this[r+o+1]&&(f=1),this[r+o]=(t/u>>0)-f&255;return r+e},f.prototype.writeInt8=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,1,127,-128),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[r]=255&t,r+1},f.prototype.writeInt16LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):N(this,t,r,!0),r+2},f.prototype.writeInt16BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):N(this,t,r,!1),r+2},f.prototype.writeInt32LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,2147483647,-2147483648),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8,this[r+2]=t>>>16,this[r+3]=t>>>24):z(this,t,r,!0),r+4},f.prototype.writeInt32BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):z(this,t,r,!1),r+4},f.prototype.writeFloatLE=function(t,r,e){return j(this,t,r,!0,e)},f.prototype.writeFloatBE=function(t,r,e){return j(this,t,r,!1,e)},f.prototype.writeDoubleLE=function(t,r,e){return q(this,t,r,!0,e)},f.prototype.writeDoubleBE=function(t,r,e){return q(this,t,r,!1,e)},f.prototype.copy=function(t,r,e,n){if(e||(e=0),n||0===n||(n=this.length),r>=t.length&&(r=t.length),r||(r=0),n>0&&n<e&&(n=e),n===e)return 0;if(0===t.length||0===this.length)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(e<0||e>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-r<n-e&&(n=t.length-r+e);var i,o=n-e;if(this===t&&e<r&&r<n)for(i=o-1;i>=0;--i)t[i+r]=this[i+e];else if(o<1e3||!f.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+r]=this[i+e];else Uint8Array.prototype.set.call(t,this.subarray(e,e+o),r);return o},f.prototype.fill=function(t,r,e,n){if("string"==typeof t){if("string"==typeof r?(n=r,r=0,e=this.length):"string"==typeof e&&(n=e,e=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!f.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(r<0||this.length<r||this.length<e)throw new RangeError("Out of range index");if(e<=r)return this;var o;if(r>>>=0,e=void 0===e?this.length:e>>>0,t||(t=0),"number"==typeof t)for(o=r;o<e;++o)this[o]=t;else{var u=f.isBuffer(t)?t:$(new f(t,n).toString()),s=u.length;for(o=0;o<e-r;++o)this[o+r]=u[o%s]}return this};var V=/[^+\/0-9A-Za-z-_]/g;function X(t){if((t=J(t).replace(V,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}function J(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Z(t){return t<16?"0"+t.toString(16):t.toString(16)}function $(t,r){var e;r=r||1/0;for(var n=t.length,i=null,o=[],u=0;u<n;++u){if((e=t.charCodeAt(u))>55295&&e<57344){if(!i){if(e>56319){(r-=3)>-1&&o.push(239,191,189);continue}if(u+1===n){(r-=3)>-1&&o.push(239,191,189);continue}i=e;continue}if(e<56320){(r-=3)>-1&&o.push(239,191,189),i=e;continue}e=65536+(i-55296<<10|e-56320)}else i&&(r-=3)>-1&&o.push(239,191,189);if(i=null,e<128){if((r-=1)<0)break;o.push(e)}else if(e<2048){if((r-=2)<0)break;o.push(e>>6|192,63&e|128)}else if(e<65536){if((r-=3)<0)break;o.push(e>>12|224,e>>6&63|128,63&e|128)}else{if(!(e<1114112))throw new Error("Invalid code point");if((r-=4)<0)break;o.push(e>>18|240,e>>12&63|128,e>>6&63|128,63&e|128)}}return o}function G(t){for(var r=[],e=0;e<t.length;++e)r.push(255&t.charCodeAt(e));return r}function H(t,r){for(var e,n,i,o=[],u=0;u<t.length&&!((r-=2)<0);++u)n=(e=t.charCodeAt(u))>>8,i=e%256,o.push(i),o.push(n);return o}function K(t){return r.toByteArray(X(t))}function Q(t,r,e,n){for(var i=0;i<n&&!(i+e>=r.length||i>=t.length);++i)r[i+e]=t[i];return i}function W(t){return t!=t}
},{"base64-js":"QAnv","ieee754":"O1Qa","isarray":"ZCp3","buffer":"fe91"}],"rgFZ":[function(require,module,exports) {
var define;
var global = arguments[3];
var process = require("process");
var Buffer = require("buffer").Buffer;
var e,t=arguments[3],n=require("process"),r=require("buffer").Buffer;!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof e&&e.amd?e("exifr",["exports"],n):n((t="undefined"!=typeof globalThis?globalThis:t||self).exifr={})}(this,function(e){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});var n=["prototype","__proto__","caller","arguments","length","name"];Object.getOwnPropertyNames(t).forEach(function(r){-1===n.indexOf(r)&&e[r]!==t[r]&&(e[r]=t[r])}),t&&c(e,t)}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function l(e,t,n){return(l=h()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&c(i,n.prototype),i}).apply(null,arguments)}function d(e){var t="function"==typeof Map?new Map:void 0;return(d=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return l(e,arguments,f(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),c(r,e)})(e)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){var t=h();return function(){var n,r=f(e);if(t){var i=f(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?v(e):t}(this,n)}}function y(e,t,n){return(y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}var g=Object.values||function(e){var t=[];for(var n in e)t.push(e[n]);return t},k=Object.entries||function(e){var t=[];for(var n in e)t.push([n,e[n]]);return t},m=Object.assign||function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.forEach(function(t){for(var n in t)e[n]=t[n]}),e},b=Object.fromEntries||function(e){var t={};return A(e).forEach(function(e){var n=e[0],r=e[1];t[n]=r}),t},A=Array.from||function(e){if(e instanceof x){var t=[];return e.forEach(function(e,n){return t.push([n,e])}),t}return Array.prototype.slice.call(e)};function w(e){return-1!==this.indexOf(e)}Array.prototype.includes||(Array.prototype.includes=w),String.prototype.includes||(String.prototype.includes=w),String.prototype.startsWith||(String.prototype.startsWith=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.substring(t,t+e.length)===e}),String.prototype.endsWith||(String.prototype.endsWith=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length;return this.substring(t-e.length,t)===e});var O="undefined"!=typeof self?self:t,S=O.fetch||function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(n,r){var i=new XMLHttpRequest;if(i.open("get",e,!0),i.responseType="arraybuffer",i.onerror=r,t.headers)for(var a in t.headers)i.setRequestHeader(a,t.headers[a]);i.onload=function(){n({ok:i.status>=200&&i.status<300,status:i.status,arrayBuffer:function(){return Promise.resolve(i.response)}})},i.send(null)})},P=function(e){var t=[];if(Object.defineProperties(t,{size:{get:function(){return this.length}},has:{value:function(e){return-1!==this.indexOf(e)}},add:{value:function(e){this.has(e)||this.push(e)}},delete:{value:function(e){if(this.has(e)){var t=this.indexOf(e);this.splice(t,1)}}}}),Array.isArray(e))for(var n=0;n<e.length;n++)t.add(e[n]);return t},U=function(e){return new x(e)},x=void 0!==O.Map&&void 0!==O.Map.prototype.keys?O.Map:function(){function e(t){if(i(this,e),this.clear(),t)for(var n=0;n<t.length;n++)this.set(t[n][0],t[n][1])}return s(e,[{key:"clear",value:function(){this._map={},this._keys=[]}},{key:"size",get:function(){return this._keys.length}},{key:"get",value:function(e){return this._map["map_"+e]}},{key:"set",value:function(e,t){return this._map["map_"+e]=t,this._keys.indexOf(e)<0&&this._keys.push(e),this}},{key:"has",value:function(e){return this._keys.indexOf(e)>=0}},{key:"delete",value:function(e){var t=this._keys.indexOf(e);return!(t<0||(delete this._map["map_"+e],this._keys.splice(t,1),0))}},{key:"keys",value:function(){return this._keys.slice(0)}},{key:"values",value:function(){var e=this;return this._keys.map(function(t){return e.get(t)})}},{key:"entries",value:function(){var e=this;return this._keys.map(function(t){return[t,e.get(t)]})}},{key:"forEach",value:function(e,t){for(var n=0;n<this._keys.length;n++)e.call(t,this._map["map_"+this._keys[n]],this._keys[n],this)}}]),e}(),C="undefined"!=typeof self?self:t,B="undefined"!=typeof navigator,j=B&&"undefined"==typeof HTMLImageElement,_=!(void 0===t||void 0===n||!n.versions||!n.versions.node),V=C.Buffer,I=!!V,L=function(e){return void 0!==e};function T(e){return void 0===e||(e instanceof x?0===e.size:0===g(e).filter(L).length)}function z(e){var t=new Error(e);throw delete t.stack,t}function F(e){var t=function(e){var t=0;return e.ifd0.enabled&&(t+=1024),e.exif.enabled&&(t+=2048),e.makerNote&&(t+=2048),e.userComment&&(t+=1024),e.gps.enabled&&(t+=512),e.interop.enabled&&(t+=100),e.ifd1.enabled&&(t+=1024),t+2048}(e);return e.jfif.enabled&&(t+=50),e.xmp.enabled&&(t+=2e4),e.iptc.enabled&&(t+=14e3),e.icc.enabled&&(t+=6e3),t}var E=function(e){return String.fromCharCode.apply(null,e)},D="undefined"!=typeof TextDecoder?new TextDecoder("utf-8"):void 0;var R=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;if(i(this,e),"boolean"==typeof a&&(this.le=a),Array.isArray(t)&&(t=new Uint8Array(t)),0===t)this.byteOffset=0,this.byteLength=0;else if(t instanceof ArrayBuffer){void 0===r&&(r=t.byteLength-n);var s=new DataView(t,n,r);this._swapDataView(s)}else if(t instanceof Uint8Array||t instanceof DataView||t instanceof e){void 0===r&&(r=t.byteLength-n),(n+=t.byteOffset)+r>t.byteOffset+t.byteLength&&z("Creating view outside of available memory in ArrayBuffer");var u=new DataView(t.buffer,n,r);this._swapDataView(u)}else if("number"==typeof t){var o=new DataView(new ArrayBuffer(t));this._swapDataView(o)}else z("Invalid input argument for BufferView: "+t)}return s(e,[{key:"_swapArrayBuffer",value:function(e){this._swapDataView(new DataView(e))}},{key:"_swapBuffer",value:function(e){this._swapDataView(new DataView(e.buffer,e.byteOffset,e.byteLength))}},{key:"_swapDataView",value:function(e){this.dataView=e,this.buffer=e.buffer,this.byteOffset=e.byteOffset,this.byteLength=e.byteLength}},{key:"_lengthToEnd",value:function(e){return this.byteLength-e}},{key:"set",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;return t instanceof DataView||t instanceof e?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t instanceof ArrayBuffer&&(t=new Uint8Array(t)),t instanceof Uint8Array||z("BufferView.set(): Invalid data argument."),this.toUint8().set(t,n),new r(this,n,t.byteLength)}},{key:"subarray",value:function(t,n){return new e(this,t,n=n||this._lengthToEnd(t))}},{key:"toUint8",value:function(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}},{key:"getUint8Array",value:function(e,t){return new Uint8Array(this.buffer,this.byteOffset+e,t)}},{key:"getString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.byteLength;return function(e){return D?D.decode(e):I?r.from(e).toString("utf8"):decodeURIComponent(escape(E(e)))}(this.getUint8Array(e,t))}},{key:"getLatin1String",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.byteLength,n=this.getUint8Array(e,t);return E(n)}},{key:"getUnicodeString",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.byteLength,n=[],r=0;r<t&&e+r<this.byteLength;r+=2)n.push(this.getUint16(e+r));return E(n)}},{key:"getInt8",value:function(e){return this.dataView.getInt8(e)}},{key:"getUint8",value:function(e){return this.dataView.getUint8(e)}},{key:"getInt16",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le;return this.dataView.getInt16(e,t)}},{key:"getInt32",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le;return this.dataView.getInt32(e,t)}},{key:"getUint16",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le;return this.dataView.getUint16(e,t)}},{key:"getUint32",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le;return this.dataView.getUint32(e,t)}},{key:"getFloat32",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le;return this.dataView.getFloat32(e,t)}},{key:"getFloat64",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le;return this.dataView.getFloat64(e,t)}},{key:"getFloat",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le;return this.dataView.getFloat32(e,t)}},{key:"getDouble",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le;return this.dataView.getFloat64(e,t)}},{key:"getUintBytes",value:function(e,t,n){switch(t){case 1:return this.getUint8(e,n);case 2:return this.getUint16(e,n);case 4:return this.getUint32(e,n);case 8:return this.getUint64&&this.getUint64(e,n)}}},{key:"getUint",value:function(e,t,n){switch(t){case 8:return this.getUint8(e,n);case 16:return this.getUint16(e,n);case 32:return this.getUint32(e,n);case 64:return this.getUint64&&this.getUint64(e,n)}}},{key:"toString",value:function(e){return this.dataView.toString(e,this.constructor.name)}},{key:"ensureChunk",value:function(){}}],[{key:"from",value:function(t,n){return t instanceof this&&t.le===n?t:new e(t,void 0,void 0,n)}}]),e}();function N(e,t){z("".concat(e," '").concat(t,"' was not loaded, try using full build of exifr."))}var M=function(e){o(n,d(x));var t=p(n);function n(e){var r;return i(this,n),(r=t.call(this)).kind=e,r}return s(n,[{key:"get",value:function(e,t){return this.has(e)||N(this.kind,e),t&&(e in t||function(e,t){z("Unknown ".concat(e," '").concat(t,"'."))}(this.kind,e),t[e].enabled||N(this.kind,e)),y(f(n.prototype),"get",this).call(this,e)}},{key:"keyList",value:function(){return A(this.keys())}}]),n}(),W=new M("file parser"),K=new M("segment parser"),H=new M("file reader");function X(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}function Y(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}var G=X(function(e){return new Promise(function(t,n){var r=new FileReader;r.onloadend=function(){return t(r.result||new ArrayBuffer)},r.onerror=n,r.readAsArrayBuffer(e)})}),q=X(function(e){return S(e).then(function(e){return e.arrayBuffer()})}),J=X(function(e,t){return Y(t(e),function(e){return new R(e)})}),Q=X(function(e,t,n){var r=new(H.get(n))(e,t);return Y(r.read(),function(){return r})}),Z=X(function(e,t,n,r){return H.has(n)?Q(e,t,n):r?J(e,r):(z("Parser ".concat(n," is not loaded")),Y())}),$="Invalid input argument";function ee(e,t){return(n=e).startsWith("data:")||n.length>1e4?Q(e,t,"base64"):B?Z(e,t,"url",q):_?Q(e,t,"fs"):void z($);var n}var te=function(e){o(n,d(x));var t=p(n);function n(){return i(this,n),t.apply(this,arguments)}return s(n,[{key:"tagKeys",get:function(){return this.allKeys||(this.allKeys=A(this.keys())),this.allKeys}},{key:"tagValues",get:function(){return this.allValues||(this.allValues=A(this.values())),this.allValues}}]),n}();function ne(e,t,n){var r=new te,i=n;Array.isArray(i)||("function"==typeof i.entries&&(i=i.entries()),i=A(i));for(var a=0;a<i.length;a++){var s=i[a],u=s[0],o=s[1];r.set(u,o)}if(Array.isArray(t)){var f=t;Array.isArray(f)||("function"==typeof f.entries&&(f=f.entries()),f=A(f));for(var c=0;c<f.length;c++){var h=f[c];e.set(h,r)}}else e.set(t,r);return r}function re(e,t,n){var r,i=e.get(t),a=n;Array.isArray(a)||("function"==typeof a.entries&&(a=a.entries()),a=A(a));for(var s=0;s<a.length;s++)r=a[s],i.set(r[0],r[1])}var ie=U(),ae=U(),se=U(),ue=37500,oe=37510,fe=40965,ce=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],he=["jfif","xmp","icc","iptc","ihdr"],le=["tiff"].concat(he),de=["ifd0","ifd1","exif","gps","interop"],ve=[].concat(le,de),pe=["makerNote","userComment"],ye=["translateKeys","translateValues","reviveValues","multiSegment"],ge=[].concat(ye,["sanitize","mergeOutput","silentErrors"]),ke=function(){function e(){i(this,e)}return s(e,[{key:"translate",get:function(){return this.translateKeys||this.translateValues||this.reviveValues}}]),e}(),me=function(e){o(n,ke);var t=p(n);function n(e,r,a,s){var o;if(i(this,n),u(v(o=t.call(this)),"enabled",!1),u(v(o),"skip",P()),u(v(o),"pick",P()),u(v(o),"deps",P()),u(v(o),"translateKeys",!1),u(v(o),"translateValues",!1),u(v(o),"reviveValues",!1),o.key=e,o.enabled=r,o.parse=o.enabled,o.applyInheritables(s),o.canBeFiltered=de.includes(e),o.canBeFiltered&&(o.dict=ie.get(e)),void 0!==a)if(Array.isArray(a))o.parse=o.enabled=!0,o.canBeFiltered&&a.length>0&&o.translateTagSet(a,o.pick);else if("object"==typeof a){if(o.enabled=!0,o.parse=!1!==a.parse,o.canBeFiltered){var f=a.pick,c=a.skip;f&&f.length>0&&o.translateTagSet(f,o.pick),c&&c.length>0&&o.translateTagSet(c,o.skip)}o.applyInheritables(a)}else!0===a||!1===a?o.parse=o.enabled=a:z("Invalid options argument: ".concat(a));return o}return s(n,[{key:"needed",get:function(){return this.enabled||this.deps.size>0}},{key:"applyInheritables",value:function(e){var t,n,r=ye;Array.isArray(r)||("function"==typeof r.entries&&(r=r.entries()),r=A(r));for(var i=0;i<r.length;i++)void 0!==(n=e[t=r[i]])&&(this[t]=n)}},{key:"translateTagSet",value:function(e,t){if(this.dict){var n,r,i=this.dict,a=i.tagKeys,s=i.tagValues,u=e;Array.isArray(u)||("function"==typeof u.entries&&(u=u.entries()),u=A(u));for(var o=0;o<u.length;o++)"string"==typeof(n=u[o])?(-1===(r=s.indexOf(n))&&(r=a.indexOf(Number(n))),-1!==r&&t.add(Number(a[r]))):t.add(n)}else{var f=e;Array.isArray(f)||("function"==typeof f.entries&&(f=f.entries()),f=A(f));for(var c=0;c<f.length;c++){var h=f[c];t.add(h)}}}},{key:"finalizeFilters",value:function(){!this.enabled&&this.deps.size>0?(this.enabled=!0,Pe(this.pick,this.deps)):this.enabled&&this.pick.size>0&&Pe(this.pick,this.deps)}}]),n}(),be={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},Ae=U(),we=function(e){o(n,ke);var t=p(n);function n(e){var r;return i(this,n),r=t.call(this),!0===e?r.setupFromTrue():void 0===e?r.setupFromUndefined():Array.isArray(e)?r.setupFromArray(e):"object"==typeof e?r.setupFromObject(e):z("Invalid options argument ".concat(e)),void 0===r.firstChunkSize&&(r.firstChunkSize=B?r.firstChunkSizeBrowser:r.firstChunkSizeNode),r.mergeOutput&&(r.ifd1.enabled=!1),r.filterNestedSegmentTags(),r.traverseTiffDependencyTree(),r.checkLoadedPlugins(),r}return s(n,[{key:"setupFromUndefined",value:function(){var e,t=ce;Array.isArray(t)||("function"==typeof t.entries&&(t=t.entries()),t=A(t));for(var n=0;n<t.length;n++)this[e=t[n]]=be[e];var r=ge;Array.isArray(r)||("function"==typeof r.entries&&(r=r.entries()),r=A(r));for(var i=0;i<r.length;i++)this[e=r[i]]=be[e];var a=pe;Array.isArray(a)||("function"==typeof a.entries&&(a=a.entries()),a=A(a));for(var s=0;s<a.length;s++)this[e=a[s]]=be[e];var u=ve;Array.isArray(u)||("function"==typeof u.entries&&(u=u.entries()),u=A(u));for(var o=0;o<u.length;o++)this[e=u[o]]=new me(e,be[e],void 0,this)}},{key:"setupFromTrue",value:function(){var e,t=ce;Array.isArray(t)||("function"==typeof t.entries&&(t=t.entries()),t=A(t));for(var n=0;n<t.length;n++)this[e=t[n]]=be[e];var r=ge;Array.isArray(r)||("function"==typeof r.entries&&(r=r.entries()),r=A(r));for(var i=0;i<r.length;i++)this[e=r[i]]=be[e];var a=pe;Array.isArray(a)||("function"==typeof a.entries&&(a=a.entries()),a=A(a));for(var s=0;s<a.length;s++)this[e=a[s]]=!0;var u=ve;Array.isArray(u)||("function"==typeof u.entries&&(u=u.entries()),u=A(u));for(var o=0;o<u.length;o++)this[e=u[o]]=new me(e,!0,void 0,this)}},{key:"setupFromArray",value:function(e){var t,n=ce;Array.isArray(n)||("function"==typeof n.entries&&(n=n.entries()),n=A(n));for(var r=0;r<n.length;r++)this[t=n[r]]=be[t];var i=ge;Array.isArray(i)||("function"==typeof i.entries&&(i=i.entries()),i=A(i));for(var a=0;a<i.length;a++)this[t=i[a]]=be[t];var s=pe;Array.isArray(s)||("function"==typeof s.entries&&(s=s.entries()),s=A(s));for(var u=0;u<s.length;u++)this[t=s[u]]=be[t];var o=ve;Array.isArray(o)||("function"==typeof o.entries&&(o=o.entries()),o=A(o));for(var f=0;f<o.length;f++)this[t=o[f]]=new me(t,!1,void 0,this);this.setupGlobalFilters(e,void 0,de)}},{key:"setupFromObject",value:function(e){var t;de.ifd0=de.ifd0||de.image,de.ifd1=de.ifd1||de.thumbnail,m(this,e);var n=ce;Array.isArray(n)||("function"==typeof n.entries&&(n=n.entries()),n=A(n));for(var r=0;r<n.length;r++)this[t=n[r]]=Se(e[t],be[t]);var i=ge;Array.isArray(i)||("function"==typeof i.entries&&(i=i.entries()),i=A(i));for(var a=0;a<i.length;a++)this[t=i[a]]=Se(e[t],be[t]);var s=pe;Array.isArray(s)||("function"==typeof s.entries&&(s=s.entries()),s=A(s));for(var u=0;u<s.length;u++)this[t=s[u]]=Se(e[t],be[t]);var o=le;Array.isArray(o)||("function"==typeof o.entries&&(o=o.entries()),o=A(o));for(var f=0;f<o.length;f++)this[t=o[f]]=new me(t,be[t],e[t],this);var c=de;Array.isArray(c)||("function"==typeof c.entries&&(c=c.entries()),c=A(c));for(var h=0;h<c.length;h++)this[t=c[h]]=new me(t,be[t],e[t],this.tiff);this.setupGlobalFilters(e.pick,e.skip,de,ve),!0===e.tiff?this.batchEnableWithBool(de,!0):!1===e.tiff?this.batchEnableWithUserValue(de,e):Array.isArray(e.tiff)?this.setupGlobalFilters(e.tiff,void 0,de):"object"==typeof e.tiff&&this.setupGlobalFilters(e.tiff.pick,e.tiff.skip,de)}},{key:"batchEnableWithBool",value:function(e,t){var n=e;Array.isArray(n)||("function"==typeof n.entries&&(n=n.entries()),n=A(n));for(var r=0;r<n.length;r++)this[n[r]].enabled=t}},{key:"batchEnableWithUserValue",value:function(e,t){var n=e;Array.isArray(n)||("function"==typeof n.entries&&(n=n.entries()),n=A(n));for(var r=0;r<n.length;r++){var i=n[r],a=t[i];this[i].enabled=!1!==a&&void 0!==a}}},{key:"setupGlobalFilters",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;if(e&&e.length){var i=r;Array.isArray(i)||("function"==typeof i.entries&&(i=i.entries()),i=A(i));for(var a=0;a<i.length;a++){this[i[a]].enabled=!1}var s=Oe(e,n);Array.isArray(s)||("function"==typeof s.entries&&(s=s.entries()),s=A(s));for(var u=0;u<s.length;u++){var o=s[u],f=o[0],c=o[1];Pe(this[f].pick,c),this[f].enabled=!0}}else if(t&&t.length){var h=Oe(t,n);Array.isArray(h)||("function"==typeof h.entries&&(h=h.entries()),h=A(h));for(var l=0;l<h.length;l++){var d=h[l],v=d[0],p=d[1];Pe(this[v].skip,p)}}}},{key:"filterNestedSegmentTags",value:function(){var e=this.ifd0,t=this.exif,n=this.xmp,r=this.iptc,i=this.icc;this.makerNote?t.deps.add(ue):t.skip.add(ue),this.userComment?t.deps.add(oe):t.skip.add(oe),n.enabled||e.skip.add(700),r.enabled||e.skip.add(33723),i.enabled||e.skip.add(34675)}},{key:"traverseTiffDependencyTree",value:function(){var e=this,t=this.ifd0,n=this.exif,r=this.gps;this.interop.needed&&(n.deps.add(fe),t.deps.add(fe)),n.needed&&t.deps.add(34665),r.needed&&t.deps.add(34853),this.tiff.enabled=de.some(function(t){return!0===e[t].enabled})||this.makerNote||this.userComment;var i=de;Array.isArray(i)||("function"==typeof i.entries&&(i=i.entries()),i=A(i));for(var a=0;a<i.length;a++)this[i[a]].finalizeFilters()}},{key:"onlyTiff",get:function(){var e=this;return!he.map(function(t){return e[t].enabled}).some(function(e){return!0===e})&&this.tiff.enabled}},{key:"checkLoadedPlugins",value:function(){var e=le;Array.isArray(e)||("function"==typeof e.entries&&(e=e.entries()),e=A(e));for(var t=0;t<e.length;t++){var n=e[t];this[n].enabled&&!K.has(n)&&N("segment parser",n)}}}],[{key:"useCached",value:function(e){var t=Ae.get(e);return void 0!==t||(t=new this(e),Ae.set(e,t)),t}}]),n}();function Oe(e,t){var n,r,i,a=[],s=t;Array.isArray(s)||("function"==typeof s.entries&&(s=s.entries()),s=A(s));for(var u=0;u<s.length;u++){r=s[u],n=[];var o=ie.get(r);Array.isArray(o)||("function"==typeof o.entries&&(o=o.entries()),o=A(o));for(var f=0;f<o.length;f++)i=o[f],(e.includes(i[0])||e.includes(i[1]))&&n.push(i[0]);n.length&&a.push([r,n])}return a}function Se(e,t){return void 0!==e?e:void 0!==t?t:void 0}function Pe(e,t){var n=t;Array.isArray(n)||("function"==typeof n.entries&&(n=n.entries()),n=A(n));for(var r=0;r<n.length;r++){var i=n[r];e.add(i)}}function Ue(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function xe(){}function Ce(e,t){if(!t)return e&&e.then?e.then(xe):Promise.resolve()}function Be(e,t){var n=e();return n&&n.then?n.then(t):t(n)}u(we,"default",be);var je,_e=function(){function e(t){i(this,e),u(this,"parsers",{}),this.options=we.useCached(t)}return s(e,[{key:"setup",value:function(){if(!this.fileParser){var e=this.file,t=e.getUint16(0),n=W;Array.isArray(n)||("function"==typeof n.entries&&(n=n.entries()),n=A(n));for(var r=0;r<n.length;r++){var i=n[r],a=i[0],s=i[1];if(s.canHandle(e,t))return this.fileParser=new s(this.options,this.file,this.parsers),e[a]=!0}z("Unknown file format")}}},{key:"read",value:function(e){try{var t=this;return Ue(function(e,t){return"string"==typeof e?ee(e,t):B&&!j&&e instanceof HTMLImageElement?ee(e.src,t):e instanceof Uint8Array||e instanceof ArrayBuffer||e instanceof DataView?new R(e):B&&e instanceof Blob?Z(e,t,"blob",G):void z($)}(e,t.options),function(e){t.file=e})}catch(e){return Promise.reject(e)}}},{key:"parse",value:function(){try{var e=this;e.setup();var t={},n=[];return Be(function(){return e.options.silentErrors?Ue(e.doParse(t,n).catch(function(e){return n.push(e)}),function(){n.push.apply(n,e.fileParser.errors)}):Ce(e.doParse(t,n))},function(){return e.file.close&&e.file.close(),e.options.silentErrors&&n.length>0&&(t.errors=n),T(r=t)?void 0:r;var r})}catch(e){return Promise.reject(e)}}},{key:"doParse",value:function(e,t){try{var n=this;return Ue(n.fileParser.parse(),function(){var r,i=g(n.parsers).map((r=function(t){return Ue(t.parse(),function(n){t.assignToOutput(e,n)})},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return Promise.resolve(r.apply(this,e))}catch(e){return Promise.reject(e)}}));if(n.options.silentErrors){var a=function(e){return t.push(e)};i=i.map(function(e){return e.catch(a)})}return Ce(Promise.all(i))})}catch(e){return Promise.reject(e)}}},{key:"extractThumbnail",value:function(){try{var e=this;e.setup();var t,n=e.options,r=e.file,i=K.get("tiff",n);return Be(function(){if(!r.tiff)return function(e){var t=e();if(t&&t.then)return t.then(xe)}(function(){if(r.jpeg)return Ue(e.fileParser.getOrFindSegment("tiff"),function(e){t=e})});t={start:0,type:"tiff"}},function(){if(void 0!==t)return Ue(e.fileParser.ensureSegmentChunk(t),function(t){return Ue((e.parsers.tiff=new i(t,n,r)).extractThumbnail(),function(e){return r.close&&r.close(),e})})})}catch(e){return Promise.reject(e)}}}]),e}(),Ve=(je=function(e,t){var n,r,i=new _e(t);return r=function(){return i.parse()},(n=i.read(e))&&n.then||(n=Promise.resolve(n)),r?n.then(r):n},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return Promise.resolve(je.apply(this,e))}catch(e){return Promise.reject(e)}}),Ie=Object.freeze({__proto__:null,parse:Ve,Exifr:_e,fileParsers:W,segmentParsers:K,fileReaders:H,tagKeys:ie,tagValues:ae,tagRevivers:se,createDictionary:ne,extendDictionary:re,fetchUrlAsArrayBuffer:q,readBlobAsArrayBuffer:G,chunkedProps:ce,otherSegments:he,segments:le,tiffBlocks:de,segmentsAndBlocks:ve,tiffExtractables:pe,inheritables:ye,allFormatters:ge,Options:we});function Le(){}var Te=function(){function e(t,n,r){var a=this;i(this,e),u(this,"errors",[]),u(this,"ensureSegmentChunk",function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(function(e){var t,n,r,i=e.start,s=e.size||65536;return t=function(){if(a.file.chunked)return function(e){var t=e();if(t&&t.then)return t.then(Le)}(function(){if(!a.file.available(i,s))return function(e){if(e&&e.then)return e.then(Le)}(function(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}(function(){return t=a.file.readChunk(i,s),n=function(t){e.chunk=t},t&&t.then||(t=Promise.resolve(t)),n?t.then(n):t;var t,n},function(t){z("Couldn't read segment: ".concat(JSON.stringify(e),". ").concat(t.message))}));e.chunk=a.file.subarray(i,s)});a.file.byteLength>i+s?e.chunk=a.file.subarray(i,s):void 0===e.size?e.chunk=a.file.subarray(i):z("Segment unreachable: "+JSON.stringify(e))},n=function(){return e.chunk},(r=t())&&r.then?r.then(n):n()}.apply(this,t))}catch(e){return Promise.reject(e)}}),this.extendOptions&&this.extendOptions(t),this.options=t,this.file=n,this.parsers=r}return s(e,[{key:"injectSegment",value:function(e,t){this.options[e].enabled&&this.createParser(e,t)}},{key:"createParser",value:function(e,t){var n=new(K.get(e))(t,this.options,this.file);return this.parsers[e]=n}},{key:"createParsers",value:function(e){var t=e;Array.isArray(t)||("function"==typeof t.entries&&(t=t.entries()),t=A(t));for(var n=0;n<t.length;n++){var r=t[n],i=r.type,a=r.chunk,s=this.options[i];if(s&&s.enabled){var u=this.parsers[i];u&&u.append||u||this.createParser(i,a)}}}},{key:"readSegments",value:function(e){try{var t=e.map(this.ensureSegmentChunk);return function(e,t){return e&&e.then?e.then(Le):Promise.resolve()}(Promise.all(t))}catch(e){return Promise.reject(e)}}}]),e}(),ze=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0;i(this,e),u(this,"errors",[]),u(this,"raw",U()),u(this,"handleError",function(e){if(!n.options.silentErrors)throw e;n.errors.push(e.message)}),this.chunk=this.normalizeInput(t),this.file=a,this.type=this.constructor.type,this.globalOptions=this.options=r,this.localOptions=r[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}return s(e,[{key:"normalizeInput",value:function(e){return e instanceof R?e:new R(e)}},{key:"translate",value:function(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}},{key:"output",get:function(){return this.translated?this.translated:this.raw?b(this.raw):void 0}},{key:"translateBlock",value:function(e,t){var n=se.get(t),r=ae.get(t),i=ie.get(t),a=this.options[t],s=a.reviveValues&&!!n,u=a.translateValues&&!!r,o=a.translateKeys&&!!i,f={},c=e;Array.isArray(c)||("function"==typeof c.entries&&(c=c.entries()),c=A(c));for(var h=0;h<c.length;h++){var l=c[h],d=l[0],v=l[1];s&&n.has(d)?v=n.get(d)(v):u&&r.has(d)&&(v=this.translateValue(v,r.get(d))),o&&i.has(d)&&(d=i.get(d)||d),f[d]=v}return f}},{key:"translateValue",value:function(e,t){return t[e]||t.DEFAULT||e}},{key:"assignToOutput",value:function(e,t){this.assignObjectToOutput(e,this.constructor.type,t)}},{key:"assignObjectToOutput",value:function(e,t,n){if(this.globalOptions.mergeOutput)return m(e,n);e[t]?m(e[t],n):e[t]=n}}],[{key:"findPosition",value:function(e,t){var n=e.getUint16(t+2)+2,r="function"==typeof this.headerLength?this.headerLength(e,t,n):this.headerLength,i=t+r,a=n-r;return{offset:t,length:n,headerLength:r,start:i,size:a,end:i+a}}},{key:"parse",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new this(e,new we(u({},this.type,t))).parse()}}]),e}();function Fe(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function Ee(){}function De(e,t){var n=e();return n&&n.then?n.then(t):t(n)}function Re(e,t,n){if(!e.s){if(n instanceof Ne){if(!n.s)return void(n.o=Re.bind(null,e,t));1&t&&(t=n.s),n=n.v}if(n&&n.then)return void n.then(Re.bind(null,e,t),Re.bind(null,e,2));e.s=t,e.v=n;var r=e.o;r&&r(e)}}u(ze,"headerLength",4),u(ze,"type",void 0),u(ze,"multiSegment",!1),u(ze,"canHandle",function(){return!1});var Ne=function(){function e(){}return e.prototype.then=function(t,n){var r=new e,i=this.s;if(i){var a=1&i?t:n;if(a){try{Re(r,1,a(this.v))}catch(e){Re(r,2,e)}return r}return this}return this.o=function(e){try{var i=e.v;1&e.s?Re(r,1,t?t(i):i):n?Re(r,1,n(i)):Re(r,2,i)}catch(e){Re(r,2,e)}},r},e}();function Me(e){return e instanceof Ne&&1&e.s}function We(e){return 192===e||194===e||196===e||219===e||221===e||218===e||254===e}function Ke(e){return e>=224&&e<=239}function He(e,t,n){var r=K;Array.isArray(r)||("function"==typeof r.entries&&(r=r.entries()),r=A(r));for(var i=0;i<r.length;i++){var a=r[i],s=a[0];if(a[1].canHandle(e,t,n))return s}}var Xe=function(e){o(n,Te);var t=p(n);function n(){var e;i(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return u(v(e=t.call.apply(t,[this].concat(a))),"appSegments",[]),u(v(e),"jpegSegments",[]),u(v(e),"unknownSegments",[]),e}return s(n,[{key:"parse",value:function(){try{var e=this;return Fe(e.findAppSegments(),function(){return Fe(e.readSegments(e.appSegments),function(){e.mergeMultiSegments(),e.createParsers(e.mergedAppSegments||e.appSegments)})})}catch(e){return Promise.reject(e)}}},{key:"setupSegmentFinderArgs",value:function(e){var t=this;!0===e?(this.findAll=!0,this.wanted=P(K.keyList())):(e=void 0===e?K.keyList().filter(function(e){return t.options[e].enabled}):e.filter(function(e){return t.options[e].enabled&&K.has(e)}),this.findAll=!1,this.remaining=P(e),this.wanted=P(e)),this.unfinishedMultiSegment=!1}},{key:"findAppSegments",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;try{var n=this;n.setupSegmentFinderArgs(t);var r=n.file,i=n.findAll,a=n.wanted,s=n.remaining;return De(function(){if(!i&&n.file.chunked)return i=A(a).some(function(e){var t=K.get(e),r=n.options[e];return t.multiSegment&&r.multiSegment}),function(e){var t=e();if(t&&t.then)return t.then(Ee)}(function(){if(i)return function(e,t){if(!t)return e&&e.then?e.then(Ee):Promise.resolve()}(n.file.readWhole())})},function(){var t=!1;if(e=n.findAppSegmentsInRange(e,r.byteLength),!n.options.onlyTiff)return function(){if(r.chunked){var i=!1;return function(e,t,n){for(var r;;){var i=e();if(Me(i)&&(i=i.v),!i)return a;if(i.then){r=0;break}var a=n();if(a&&a.then){if(!Me(a)){r=1;break}a=a.s}if(t){var s=t();if(s&&s.then&&!Me(s)){r=2;break}}}var u=new Ne,o=Re.bind(null,u,2);return(0===r?i.then(c):1===r?a.then(f):s.then(h)).then(void 0,o),u;function f(r){a=r;do{if(t&&(s=t())&&s.then&&!Me(s))return void s.then(h).then(void 0,o);if(!(i=e())||Me(i)&&!i.v)return void Re(u,1,a);if(i.then)return void i.then(c).then(void 0,o);Me(a=n())&&(a=a.v)}while(!a||!a.then);a.then(f).then(void 0,o)}function c(e){e?(a=n())&&a.then?a.then(f).then(void 0,o):f(a):Re(u,1,a)}function h(){(i=e())?i.then?i.then(c).then(void 0,o):c(i):Re(u,1,a)}}(function(){return!t&&s.size>0&&!i&&(!!r.canReadNextChunk||!!n.unfinishedMultiSegment)},void 0,function(){var a=r.nextChunkOffset,s=n.appSegments.some(function(e){return!n.file.available(e.offset||e.start,e.length||e.size)});return De(function(){return Fe(e>a&&!s?r.readNextChunk(e):r.readNextChunk(a),function(e){i=!e})},function(){void 0===(e=n.findAppSegmentsInRange(e,r.byteLength))&&(t=!0)})})}}()})}catch(e){return Promise.reject(e)}}},{key:"findAppSegmentsInRange",value:function(e,t){t-=2;for(var n,r,i,a,s,u,o=this.file,f=this.findAll,c=this.wanted,h=this.remaining,l=this.options;e<t;e++)if(255===o.getUint8(e))if(Ke(n=o.getUint8(e+1))){if(r=o.getUint16(e+2),(i=He(o,e,r))&&c.has(i)&&(s=(a=K.get(i)).findPosition(o,e),u=l[i],s.type=i,this.appSegments.push(s),!f&&(a.multiSegment&&u.multiSegment?(this.unfinishedMultiSegment=s.chunkNumber<s.chunkCount,this.unfinishedMultiSegment||h.delete(i)):h.delete(i),0===h.size)))break;l.recordUnknownSegments&&((s=ze.findPosition(o,e)).marker=n,this.unknownSegments.push(s)),e+=r+1}else if(We(n)){if(r=o.getUint16(e+2),218===n&&!1!==l.stopAfterSos)return;l.recordJpegSegments&&this.jpegSegments.push({offset:e,length:r,marker:n}),e+=r+1}return e}},{key:"mergeMultiSegments",value:function(){var e=this;if(this.appSegments.some(function(e){return e.multiSegment})){var t=function(e,t){for(var n,r,i,a=U(),s=0;s<e.length;s++)r=(n=e[s]).type,a.has(r)?i=a.get(r):a.set(r,i=[]),i.push(n);return A(a)}(this.appSegments);this.mergedAppSegments=t.map(function(t){var n=t[0],r=t[1],i=K.get(n,e.options);return i.handleMultiSegments?{type:n,chunk:i.handleMultiSegments(r)}:r[0]})}}},{key:"getSegment",value:function(e){return this.appSegments.find(function(t){return t.type===e})}},{key:"getOrFindSegment",value:function(e){try{var t=this,n=t.getSegment(e);return De(function(){if(void 0===n)return Fe(t.findAppSegments(0,[e]),function(){n=t.getSegment(e)})},function(){return n})}catch(e){return Promise.reject(e)}}}],[{key:"canHandle",value:function(e,t){return 65496===t}}]),n}();function Ye(){}function Ge(e,t){if(!t)return e&&e.then?e.then(Ye):Promise.resolve()}function qe(e,t){var n=e();return n&&n.then?n.then(t):t(n)}u(Xe,"type","jpeg"),W.set("jpeg",Xe);var Je=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4],Qe=function(e){o(n,e);var t=p(n);function n(){return i(this,n),t.apply(this,arguments)}return s(n,[{key:"parse",value:function(){try{var e=this;e.parseHeader();var t=e.options;return qe(function(){if(t.ifd0.enabled)return Ge(e.parseIfd0Block())},function(){return qe(function(){if(t.exif.enabled)return Ge(e.safeParse("parseExifBlock"))},function(){return qe(function(){if(t.gps.enabled)return Ge(e.safeParse("parseGpsBlock"))},function(){return qe(function(){if(t.interop.enabled)return Ge(e.safeParse("parseInteropBlock"))},function(){return qe(function(){if(t.ifd1.enabled)return Ge(e.safeParse("parseThumbnailBlock"))},function(){return e.createOutput()})})})})})}catch(e){return Promise.reject(e)}}},{key:"safeParse",value:function(e){var t=this[e]();return void 0!==t.catch&&(t=t.catch(this.handleError)),t}},{key:"findIfd0Offset",value:function(){void 0===this.ifd0Offset&&(this.ifd0Offset=this.chunk.getUint32(4))}},{key:"findIfd1Offset",value:function(){if(void 0===this.ifd1Offset){this.findIfd0Offset();var e=this.chunk.getUint16(this.ifd0Offset),t=this.ifd0Offset+2+12*e;this.ifd1Offset=this.chunk.getUint32(t)}}},{key:"parseBlock",value:function(e,t){var n=U();return this[t]=n,this.parseTags(e,t,n),n}},{key:"parseIfd0Block",value:function(){try{var e=this;if(e.ifd0)return;var t=e.file;return e.findIfd0Offset(),e.ifd0Offset<8&&z("Malformed EXIF data"),!t.chunked&&e.ifd0Offset>t.byteLength&&z("IFD0 offset points to outside of file.\nthis.ifd0Offset: ".concat(e.ifd0Offset,", file.byteLength: ").concat(t.byteLength)),qe(function(){if(t.tiff)return Ge(t.ensureChunk(e.ifd0Offset,F(e.options)))},function(){var t=e.parseBlock(e.ifd0Offset,"ifd0");if(0!==t.size)return e.exifOffset=t.get(34665),e.interopOffset=t.get(fe),e.gpsOffset=t.get(34853),e.xmp=t.get(700),e.iptc=t.get(33723),e.icc=t.get(34675),e.options.sanitize&&(t.delete(34665),t.delete(fe),t.delete(34853),t.delete(700),t.delete(33723),t.delete(34675)),t})}catch(e){return Promise.reject(e)}}},{key:"parseExifBlock",value:function(){try{var e=this;if(e.exif)return;return qe(function(){if(!e.ifd0)return Ge(e.parseIfd0Block())},function(){if(void 0!==e.exifOffset)return qe(function(){if(e.file.tiff)return Ge(e.file.ensureChunk(e.exifOffset,F(e.options)))},function(){var t=e.parseBlock(e.exifOffset,"exif");return e.interopOffset||(e.interopOffset=t.get(fe)),e.makerNote=t.get(ue),e.userComment=t.get(oe),e.options.sanitize&&(t.delete(fe),t.delete(ue),t.delete(oe)),e.unpack(t,41728),e.unpack(t,41729),t})})}catch(e){return Promise.reject(e)}}},{key:"unpack",value:function(e,t){var n=e.get(t);n&&1===n.length&&e.set(t,n[0])}},{key:"parseGpsBlock",value:function(){try{var e=this;if(e.gps)return;return qe(function(){if(!e.ifd0)return Ge(e.parseIfd0Block())},function(){if(void 0!==e.gpsOffset){var t=e.parseBlock(e.gpsOffset,"gps");return t&&t.has(2)&&t.has(4)&&(t.set("latitude",Ze.apply(void 0,t.get(2).concat([t.get(1)]))),t.set("longitude",Ze.apply(void 0,t.get(4).concat([t.get(3)])))),t}})}catch(e){return Promise.reject(e)}}},{key:"parseInteropBlock",value:function(){try{var e=this;if(e.interop)return;return qe(function(){if(!e.ifd0)return Ge(e.parseIfd0Block())},function(){return qe(function(){if(void 0===e.interopOffset&&!e.exif)return Ge(e.parseExifBlock())},function(){if(void 0!==e.interopOffset)return e.parseBlock(e.interopOffset,"interop")})})}catch(e){return Promise.reject(e)}}},{key:"parseThumbnailBlock",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{var t=this;if(t.ifd1||t.ifd1Parsed)return;if(t.options.mergeOutput&&!e)return;return t.findIfd1Offset(),t.ifd1Offset>0&&(t.parseBlock(t.ifd1Offset,"ifd1"),t.ifd1Parsed=!0),t.ifd1}catch(e){return Promise.reject(e)}}},{key:"extractThumbnail",value:function(){try{var e=this;return e.headerParsed||e.parseHeader(),qe(function(){if(!e.ifd1Parsed)return Ge(e.parseThumbnailBlock(!0))},function(){if(void 0!==e.ifd1){var t=e.ifd1.get(513),n=e.ifd1.get(514);return e.chunk.getUint8Array(t,n)}})}catch(e){return Promise.reject(e)}}},{key:"image",get:function(){return this.ifd0}},{key:"thumbnail",get:function(){return this.ifd1}},{key:"createOutput",value:function(){var e,t,n,r={},i=de;Array.isArray(i)||("function"==typeof i.entries&&(i=i.entries()),i=A(i));for(var a=0;a<i.length;a++)if(!T(e=this[t=i[a]]))if(n=this.canTranslate?this.translateBlock(e,t):b(e),this.options.mergeOutput){if("ifd1"===t)continue;m(r,n)}else r[t]=n;return this.makerNote&&(r.makerNote=this.makerNote),this.userComment&&(r.userComment=this.userComment),r}},{key:"assignToOutput",value:function(e,t){if(this.globalOptions.mergeOutput)m(e,t);else{var n=k(t);Array.isArray(n)||("function"==typeof n.entries&&(n=n.entries()),n=A(n));for(var r=0;r<n.length;r++){var i=n[r],a=i[0],s=i[1];this.assignObjectToOutput(e,a,s)}}}}],[{key:"canHandle",value:function(e,t){return 225===e.getUint8(t+1)&&1165519206===e.getUint32(t+4)&&0===e.getUint16(t+8)}}]),n}(function(e){o(n,ze);var t=p(n);function n(){return i(this,n),t.apply(this,arguments)}return s(n,[{key:"parseHeader",value:function(){var e=this.chunk.getUint16();18761===e?this.le=!0:19789===e&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}},{key:"parseTags",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:U(),r=this.options[t],i=r.pick,a=r.skip,s=(i=P(i)).size>0,u=0===a.size,o=this.chunk.getUint16(e);e+=2;for(var f=0;f<o;f++){var c=this.chunk.getUint16(e);if(s){if(i.has(c)&&(n.set(c,this.parseTag(e,c,t)),i.delete(c),0===i.size))break}else!u&&a.has(c)||n.set(c,this.parseTag(e,c,t));e+=12}return n}},{key:"parseTag",value:function(e,t,n){var r,i=this.chunk,a=i.getUint16(e+2),s=i.getUint32(e+4),u=Je[a];if(u*s<=4?e+=8:e=i.getUint32(e+8),(a<1||a>13)&&z("Invalid TIFF value type. block: ".concat(n.toUpperCase(),", tag: ").concat(t.toString(16),", type: ").concat(a,", offset ").concat(e)),e>i.byteLength&&z("Invalid TIFF value offset. block: ".concat(n.toUpperCase(),", tag: ").concat(t.toString(16),", type: ").concat(a,", offset ").concat(e," is outside of chunk size ").concat(i.byteLength)),1===a)return i.getUint8Array(e,s);if(2===a)return""===(r=function(e){for(;e.endsWith("\0");)e=e.slice(0,-1);return e}(r=i.getString(e,s)).trim())?void 0:r;if(7===a)return i.getUint8Array(e,s);if(1===s)return this.parseTagValue(a,e);for(var o=new(function(e){switch(a){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 10:return Array;case 11:return Float32Array;case 12:return Float64Array;default:return Array}}())(s),f=u,c=0;c<s;c++)o[c]=this.parseTagValue(a,e),e+=f;return o}},{key:"parseTagValue",value:function(e,t){var n=this.chunk;switch(e){case 1:return n.getUint8(t);case 3:return n.getUint16(t);case 4:return n.getUint32(t);case 5:return n.getUint32(t)/n.getUint32(t+4);case 6:return n.getInt8(t);case 8:return n.getInt16(t);case 9:return n.getInt32(t);case 10:return n.getInt32(t)/n.getInt32(t+4);case 11:return n.getFloat(t);case 12:return n.getDouble(t);case 13:return n.getUint32(t);default:z("Invalid tiff type ".concat(e))}}}]),n}());function Ze(e,t,n,r){var i=e+t/60+n/3600;return"S"!==r&&"W"!==r||(i*=-1),i}u(Qe,"type","tiff"),u(Qe,"headerLength",10),K.set("tiff",Qe);var $e=Object.freeze({__proto__:null,default:Ie,Exifr:_e,fileParsers:W,segmentParsers:K,fileReaders:H,tagKeys:ie,tagValues:ae,tagRevivers:se,createDictionary:ne,extendDictionary:re,fetchUrlAsArrayBuffer:q,readBlobAsArrayBuffer:G,chunkedProps:ce,otherSegments:he,segments:le,tiffBlocks:de,segmentsAndBlocks:ve,tiffExtractables:pe,inheritables:ye,allFormatters:ge,Options:we,parse:Ve});function et(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function tt(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}var nt=tt(function(e){var t=new _e(ot);return et(t.read(e),function(){return et(t.parse(),function(e){if(e&&e.ifd0)return e.ifd0[274]})})}),rt=tt(function(e){var t=new _e(ut);return et(t.read(e),function(){return et(t.parse(),function(e){if(e&&e.gps){var t=e.gps;return{latitude:t.latitude,longitude:t.longitude}}})})}),it=tt(function(e){return et(this.thumbnail(e),function(e){if(void 0!==e){var t=new Blob([e]);return URL.createObjectURL(t)}})}),at=tt(function(e){var t=new _e(ft);return et(t.read(e),function(){return et(t.extractThumbnail(),function(e){return e&&I?V.from(e):e})})}),st={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1},ut=m({},st,{firstChunkSize:4e4,gps:[1,2,3,4]}),ot=m({},st,{firstChunkSize:4e4,ifd0:[274]}),ft=m({},st,{tiff:!1,ifd1:!0,mergeOutput:!1}),ct=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}});if(e.rotateCanvas=!0,e.rotateCss=!0,"object"==typeof navigator){var ht=navigator.userAgent;if(ht.includes("iPad")||ht.includes("iPhone")){var lt=ht.match(/OS (\d+)_(\d+)/);if(lt){var dt=lt[1],vt=lt[2],pt=Number(dt)+.1*Number(vt);e.rotateCanvas=pt<13.4,e.rotateCss=!1}}else if(ht.includes("OS X 10")){var yt=ht.match(/OS X 10[_.](\d+)/)[1];e.rotateCanvas=e.rotateCss=Number(yt)<15}if(ht.includes("Chrome/")){var gt=ht.match(/Chrome\/(\d+)/)[1];e.rotateCanvas=e.rotateCss=Number(gt)<81}else if(ht.includes("Firefox/")){var kt=ht.match(/Firefox\/(\d+)/)[1];e.rotateCanvas=e.rotateCss=Number(kt)<77}}function mt(){}var bt=function(e){o(n,R);var t=p(n);function n(){var e;i(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return u(v(e=t.call.apply(t,[this].concat(a))),"ranges",new At),0!==e.byteLength&&e.ranges.add(0,e.byteLength),e}return s(n,[{key:"_tryExtend",value:function(e,t,n){if(0===e&&0===this.byteLength&&n){var r=new DataView(n.buffer||n,n.byteOffset,n.byteLength);this._swapDataView(r)}else{var i=e+t;if(i>this.byteLength){var a=this._extend(i).dataView;this._swapDataView(a)}}}},{key:"_extend",value:function(e){var t;t=I?V.allocUnsafe(e):new Uint8Array(e);var n=new DataView(t.buffer,t.byteOffset,t.byteLength);return t.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:t,dataView:n}}},{key:"subarray",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t=t||this._lengthToEnd(e),r&&this._tryExtend(e,t),this.ranges.add(e,t),y(f(n.prototype),"subarray",this).call(this,e,t)}},{key:"set",value:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&this._tryExtend(t,e.byteLength,e);var r=y(f(n.prototype),"set",this).call(this,e,t);return this.ranges.add(t,r.byteLength),r}},{key:"ensureChunk",value:function(e,t){try{var n=this;if(!n.chunked)return;if(n.ranges.available(e,t))return;return function(e,t){return e&&e.then?e.then(mt):Promise.resolve()}(n.readChunk(e,t))}catch(e){return Promise.reject(e)}}},{key:"available",value:function(e,t){return this.ranges.available(e,t)}}]),n}(),At=function(){function e(){i(this,e),u(this,"list",[])}return s(e,[{key:"length",get:function(){return this.list.length}},{key:"add",value:function(e,t){var n=e+t,r=this.list.filter(function(t){return wt(e,t.offset,n)||wt(e,t.end,n)});if(r.length>0){e=Math.min.apply(Math,[e].concat(r.map(function(e){return e.offset}))),t=(n=Math.max.apply(Math,[n].concat(r.map(function(e){return e.end}))))-e;var i=r.shift();i.offset=e,i.length=t,i.end=n,this.list=this.list.filter(function(e){return!r.includes(e)})}else this.list.push({offset:e,length:t,end:n})}},{key:"available",value:function(e,t){var n=e+t;return this.list.some(function(t){return t.offset<=e&&n<=t.end})}}]),e}();function wt(e,t,n){return e<=t&&t<=n}function Ot(){}function St(e,t){if(!t)return e&&e.then?e.then(Ot):Promise.resolve()}function Pt(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}var Ut=function(e){o(n,e);var t=p(n);function n(){return i(this,n),t.apply(this,arguments)}return s(n,[{key:"readWhole",value:function(){try{var e=this;return e.chunked=!1,Pt(G(e.input),function(t){e._swapArrayBuffer(t)})}catch(e){return Promise.reject(e)}}},{key:"readChunked",value:function(){return this.chunked=!0,this.size=this.input.size,y(f(n.prototype),"readChunked",this).call(this)}},{key:"_readChunk",value:function(e,t){try{var n=this,r=t?e+t:void 0,i=n.input.slice(e,r);return Pt(G(i),function(t){return n.set(t,e,!0)})}catch(e){return Promise.reject(e)}}}]),n}(function(e){o(n,bt);var t=p(n);function n(e,r){var a;return i(this,n),u(v(a=t.call(this,0)),"chunksRead",0),a.input=e,a.options=r,a}return s(n,[{key:"readWhole",value:function(){try{var e=this;return e.chunked=!1,St(e.readChunk(e.nextChunkOffset))}catch(e){return Promise.reject(e)}}},{key:"readChunked",value:function(){try{var e=this;return e.chunked=!0,St(e.readChunk(0,e.options.firstChunkSize))}catch(e){return Promise.reject(e)}}},{key:"readNextChunk",value:function(e){try{var t=this;if(void 0===e&&(e=t.nextChunkOffset),t.fullyRead)return t.chunksRead++,!1;var n=t.options.chunkSize;return r=t.readChunk(e,n),i=function(e){return!!e&&e.byteLength===n},r&&r.then||(r=Promise.resolve(r)),i?r.then(i):r}catch(e){return Promise.reject(e)}var r,i}},{key:"readChunk",value:function(e,t){try{var n=this;if(n.chunksRead++,0===(t=n.safeWrapAddress(e,t)))return;return n._readChunk(e,t)}catch(e){return Promise.reject(e)}}},{key:"safeWrapAddress",value:function(e,t){return void 0!==this.size&&e+t>this.size?Math.max(0,this.size-e):t}},{key:"nextChunkOffset",get:function(){if(0!==this.ranges.list.length)return this.ranges.list[0].length}},{key:"canReadNextChunk",get:function(){return this.chunksRead<this.options.chunkLimit}},{key:"fullyRead",get:function(){return void 0!==this.size&&this.nextChunkOffset===this.size}},{key:"read",value:function(){return this.options.chunked?this.readChunked():this.readWhole()}},{key:"close",value:function(){}}]),n}());H.set("blob",Ut),e.Exifr=_e,e.Options=we,e.allFormatters=ge,e.chunkedProps=ce,e.createDictionary=ne,e.default=$e,e.disableAllOptions=st,e.extendDictionary=re,e.fetchUrlAsArrayBuffer=q,e.fileParsers=W,e.fileReaders=H,e.gps=rt,e.gpsOnlyOptions=ut,e.inheritables=ye,e.orientation=nt,e.orientationOnlyOptions=ot,e.otherSegments=he,e.parse=Ve,e.readBlobAsArrayBuffer=G,e.rotation=function(t){return et(nt(t),function(t){return m({canvas:e.rotateCanvas,css:e.rotateCss},ct[t])})},e.rotations=ct,e.segmentParsers=K,e.segments=le,e.segmentsAndBlocks=ve,e.tagKeys=ie,e.tagRevivers=se,e.tagValues=ae,e.thumbnail=at,e.thumbnailOnlyOptions=ft,e.thumbnailUrl=it,e.tiffBlocks=de,e.tiffExtractables=pe,Object.defineProperty(e,"__esModule",{value:!0})});
},{"process":"rH1J","buffer":"fe91"}],"Y1mF":[function(require,module,exports) {
var e,t;function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function n(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,r(e,t)}function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var o=require("@uppy/core"),a=o.Plugin,u=require("@uppy/utils/lib/Translator"),s=require("@uppy/utils/lib/dataURItoBlob"),h=require("@uppy/utils/lib/isObjectURL"),l=require("@uppy/utils/lib/isPreviewSupported"),p=require("math-log2"),c=require("exifr/dist/mini.legacy.umd.js");module.exports=(t=e=function(e){function t(t,n){var r;(r=e.call(this,t,n)||this).onFileAdded=function(e){e.preview||!l(e.type)||e.isRemote||r.addToQueue(e.id)},r.onCancelRequest=function(e){var t=r.queue.indexOf(e.id);-1!==t&&r.queue.splice(t,1)},r.onFileRemoved=function(e){var t=r.queue.indexOf(e.id);-1!==t&&r.queue.splice(t,1),e.preview&&h(e.preview)&&URL.revokeObjectURL(e.preview)},r.onRestored=function(){var e=r.uppy.getState().files;Object.keys(e).forEach(function(e){var t=r.uppy.getFile(e);t.isRestored&&(t.preview&&!h(t.preview)||r.addToQueue(t.id))})},r.waitUntilAllProcessed=function(e){e.forEach(function(e){var t=r.uppy.getFile(e);r.uppy.emit("preprocess-progress",t,{mode:"indeterminate",message:r.i18n("generatingThumbnails")})});var t=function(){e.forEach(function(e){var t=r.uppy.getFile(e);r.uppy.emit("preprocess-complete",t)})};return new Promise(function(e,i){r.queueProcessing?r.uppy.once("thumbnail:all-generated",function(){t(),e()}):(t(),e())})},r.type="modifier",r.id=r.opts.id||"ThumbnailGenerator",r.title="Thumbnail Generator",r.queue=[],r.queueProcessing=!1,r.defaultThumbnailDimension=200,r.thumbnailType=r.opts.thumbnailType||"image/jpeg",r.defaultLocale={strings:{generatingThumbnails:"Generating thumbnails..."}};if(r.opts=i({},{thumbnailWidth:null,thumbnailHeight:null,waitForThumbnailsBeforeUpload:!1,lazy:!1},n),r.opts.lazy&&r.opts.waitForThumbnailsBeforeUpload)throw new Error("ThumbnailGenerator: The `lazy` and `waitForThumbnailsBeforeUpload` options are mutually exclusive. Please ensure at most one of them is set to `true`.");return r.i18nInit(),r}n(t,e);var r=t.prototype;return r.setOptions=function(t){e.prototype.setOptions.call(this,t),this.i18nInit()},r.i18nInit=function(){this.translator=new u([this.defaultLocale,this.uppy.locale,this.opts.locale]),this.i18n=this.translator.translate.bind(this.translator),this.setPluginState()},r.createThumbnail=function(e,t,i){var n=this,r=URL.createObjectURL(e.data),o=new Promise(function(e,t){var i=new Image;i.src=r,i.addEventListener("load",function(){URL.revokeObjectURL(r),e(i)}),i.addEventListener("error",function(e){URL.revokeObjectURL(r),t(e.error||new Error("Could not create thumbnail"))})}),a=c.rotation(e.data).catch(function(e){return 1});return Promise.all([o,a]).then(function(e){var r=e[0],o=e[1],a=n.getProportionalDimensions(r,t,i,o.deg),u=n.rotateImage(r,o),s=n.resizeImage(u,a.width,a.height);return n.canvasToBlob(s,n.thumbnailType,80)}).then(function(e){return URL.createObjectURL(e)})},r.getProportionalDimensions=function(e,t,i,n){var r=e.width/e.height;return 90!==n&&270!==n||(r=e.height/e.width),null!=t?{width:t,height:Math.round(t/r)}:null!=i?{width:Math.round(i*r),height:i}:{width:this.defaultThumbnailDimension,height:Math.round(this.defaultThumbnailDimension/r)}},r.protect=function(e){var t=e.width/e.height,i=Math.floor(Math.sqrt(5e6*t)),n=Math.floor(5e6/Math.sqrt(5e6*t));if(i>4096&&(i=4096,n=Math.round(i/t)),n>4096&&(n=4096,i=Math.round(t*n)),e.width>i){var r=document.createElement("canvas");r.width=i,r.height=n,r.getContext("2d").drawImage(e,0,0,i,n),e=r}return e},r.resizeImage=function(e,t,i){e=this.protect(e);var n=Math.ceil(p(e.width/t));n<1&&(n=1);for(var r=t*Math.pow(2,n-1),o=i*Math.pow(2,n-1);n--;){var a=document.createElement("canvas");a.width=r,a.height=o,a.getContext("2d").drawImage(e,0,0,r,o),e=a,r=Math.round(r/2),o=Math.round(o/2)}return e},r.rotateImage=function(e,t){var i=e.width,n=e.height;90!==t.deg&&270!==t.deg||(i=e.height,n=e.width);var r=document.createElement("canvas");r.width=i,r.height=n;var o=r.getContext("2d");return o.translate(i/2,n/2),t.canvas&&(o.rotate(t.rad),o.scale(t.scaleX,t.scaleY)),o.drawImage(e,-e.width/2,-e.height/2,e.width,e.height),r},r.canvasToBlob=function(e,t,i){try{e.getContext("2d").getImageData(0,0,1,1)}catch(n){if(18===n.code)return Promise.reject(new Error("cannot read image, probably an svg with external resources"))}return e.toBlob?new Promise(function(n){e.toBlob(n,t,i)}).then(function(e){if(null===e)throw new Error("cannot read image, probably an svg with external resources");return e}):Promise.resolve().then(function(){return s(e.toDataURL(t,i),{})}).then(function(e){if(null===e)throw new Error("could not extract blob, probably an old browser");return e})},r.setPreviewURL=function(e,t){this.uppy.setFileState(e,{preview:t})},r.addToQueue=function(e){this.queue.push(e),!1===this.queueProcessing&&this.processQueue()},r.processQueue=function(){var e=this;if(this.queueProcessing=!0,this.queue.length>0){var t=this.uppy.getFile(this.queue.shift());return t?this.requestThumbnail(t).catch(function(e){}).then(function(){return e.processQueue()}):void this.uppy.log("[ThumbnailGenerator] file was removed before a thumbnail could be generated, but not removed from the queue. This is probably a bug","error")}this.queueProcessing=!1,this.uppy.log("[ThumbnailGenerator] Emptied thumbnail queue"),this.uppy.emit("thumbnail:all-generated")},r.requestThumbnail=function(e){var t=this;return l(e.type)&&!e.isRemote?this.createThumbnail(e,this.opts.thumbnailWidth,this.opts.thumbnailHeight).then(function(i){t.setPreviewURL(e.id,i),t.uppy.log("[ThumbnailGenerator] Generated thumbnail for "+e.id),t.uppy.emit("thumbnail:generated",t.uppy.getFile(e.id),i)}).catch(function(i){t.uppy.log("[ThumbnailGenerator] Failed thumbnail for "+e.id+":","warning"),t.uppy.log(i,"warning"),t.uppy.emit("thumbnail:error",t.uppy.getFile(e.id),i)}):Promise.resolve()},r.install=function(){this.uppy.on("file-removed",this.onFileRemoved),this.opts.lazy?(this.uppy.on("thumbnail:request",this.onFileAdded),this.uppy.on("thumbnail:cancel",this.onCancelRequest)):(this.uppy.on("file-added",this.onFileAdded),this.uppy.on("restored",this.onRestored)),this.opts.waitForThumbnailsBeforeUpload&&this.uppy.addPreProcessor(this.waitUntilAllProcessed)},r.uninstall=function(){this.uppy.off("file-removed",this.onFileRemoved),this.opts.lazy?(this.uppy.off("thumbnail:request",this.onFileAdded),this.uppy.off("thumbnail:cancel",this.onCancelRequest)):(this.uppy.off("file-added",this.onFileAdded),this.uppy.off("restored",this.onRestored)),this.opts.waitForThumbnailsBeforeUpload&&this.uppy.removePreProcessor(this.waitUntilAllProcessed)},t}(a),e.VERSION="1.7.8",t);
},{"@uppy/core":"PDAA","@uppy/utils/lib/Translator":"hG0x","@uppy/utils/lib/dataURItoBlob":"Q78z","@uppy/utils/lib/isObjectURL":"gdan","@uppy/utils/lib/isPreviewSupported":"OgXR","math-log2":"wm1J","exifr/dist/mini.legacy.umd.js":"rgFZ"}],"ZTc1":[function(require,module,exports) {
var e=require("./isDOMElement");module.exports=function(r){if("string"==typeof r){var t=[].slice.call(document.querySelectorAll(r));return t.length>0?t:null}if("object"==typeof r&&e(r))return[r]};
},{"./isDOMElement":"J4dM"}],"d6Wp":[function(require,module,exports) {
module.exports=function(r){return Array.prototype.slice.call(r||[],0)};
},{}],"LVfl":[function(require,module,exports) {
module.exports=function(l){return l.fullPath&&l.fullPath!=="/"+l.name?l.fullPath:null};
},{}],"zTer":[function(require,module,exports) {
module.exports=function n(c,o,t,e){var u=e.onSuccess;c.readEntries(function(e){var s=[].concat(o,e);e.length?setTimeout(function(){n(c,s,t,{onSuccess:u})},0):u(s)},function(n){t(n),u(o)})};
},{}],"pB79":[function(require,module,exports) {
var e=require("../../../toArray"),r=require("./getRelativePath"),t=require("./getFilesAndDirectoriesFromDirectory");module.exports=function(i,n){var o=[],u=[];return e(i.items).forEach(function(e){var i=e.webkitGetAsEntry();i&&u.push(function e(i){return new Promise(function(u){if(i.isFile)i.file(function(e){e.relativePath=r(i),o.push(e),u()},function(e){n(e),u()});else if(i.isDirectory){var c=i.createReader();t(c,[],n,{onSuccess:function(r){var t=r.map(function(r){return e(r)});Promise.all(t).then(function(){return u()})}})}})}(i))}),Promise.all(u).then(function(){return o})};
},{"../../../toArray":"d6Wp","./getRelativePath":"LVfl","./getFilesAndDirectoriesFromDirectory":"zTer"}],"u8VF":[function(require,module,exports) {
var r=require("../../toArray");module.exports=function(e){var o=r(e.files);return Promise.resolve(o)};
},{"../../toArray":"d6Wp"}],"oXap":[function(require,module,exports) {
var i=require("./utils/webkitGetAsEntryApi/index"),e=require("./utils/fallbackApi");module.exports=function(r,t){var n=(void 0===t?{}:t).logDropError,o=void 0===n?function(){}:n;return r.items&&r.items[0]&&"webkitGetAsEntry"in r.items[0]?i(r,o):e(r)};
},{"./utils/webkitGetAsEntryApi/index":"pB79","./utils/fallbackApi":"u8VF"}],"uMwT":[function(require,module,exports) {
module.exports=function(e,r){if(r){var t=e.querySelector('[data-uppy-paneltype="'+r+'"]');if(t)return t}return e};
},{}],"kYnp":[function(require,module,exports) {
module.exports=['a[href]:not([tabindex^="-"]):not([inert]):not([aria-hidden])','area[href]:not([tabindex^="-"]):not([inert]):not([aria-hidden])',"input:not([disabled]):not([inert]):not([aria-hidden])","select:not([disabled]):not([inert]):not([aria-hidden])","textarea:not([disabled]):not([inert]):not([aria-hidden])","button:not([disabled]):not([inert]):not([aria-hidden])",'iframe:not([tabindex^="-"]):not([inert]):not([aria-hidden])','object:not([tabindex^="-"]):not([inert]):not([aria-hidden])','embed:not([tabindex^="-"]):not([inert]):not([aria-hidden])','[contenteditable]:not([tabindex^="-"]):not([inert]):not([aria-hidden])','[tabindex]:not([tabindex^="-"]):not([inert]):not([aria-hidden])'];
},{}],"jop0":[function(require,module,exports) {
var e=require("@uppy/utils/lib/toArray"),t=require("./getActiveOverlayEl"),n=require("@uppy/utils/lib//FOCUSABLE_ELEMENTS");function u(e,t){var n=t[0];n&&(n.focus(),e.preventDefault())}function r(e,t){var n=t[t.length-1];n&&(n.focus(),e.preventDefault())}function i(e){return e.contains(document.activeElement)}function l(l,o,c){var f=t(c,o),a=e(f.querySelectorAll(n)),v=a.indexOf(document.activeElement);i(f)?l.shiftKey&&0===v?r(l,a):l.shiftKey||v!==a.length-1||u(l,a):u(l,a)}module.exports={forModal:function(e,t,n){l(e,t,n)},forInline:function(e,t,n){null===t||l(e,t,n)}};
},{"@uppy/utils/lib/toArray":"d6Wp","./getActiveOverlayEl":"uMwT","@uppy/utils/lib//FOCUSABLE_ELEMENTS":"kYnp"}],"l9tA":[function(require,module,exports) {
var global = arguments[3];
var t=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=function(){if("undefined"!=typeof Map)return Map;function t(t,e){var n=-1;return t.some(function(t,r){return t[0]===e&&(n=r,!0)}),n}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var n=t(this.__entries__,e),r=this.__entries__[n];return r&&r[1]},e.prototype.set=function(e,n){var r=t(this.__entries__,e);~r?this.__entries__[r][1]=n:this.__entries__.push([e,n])},e.prototype.delete=function(e){var n=this.__entries__,r=t(n,e);~r&&n.splice(r,1)},e.prototype.has=function(e){return!!~t(this.__entries__,e)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,e){void 0===e&&(e=null);for(var n=0,r=this.__entries__;n<r.length;n++){var i=r[n];t.call(e,i[1],i[0])}},e}()}(),n="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,r=void 0!==t&&t.Math===Math?t:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),i="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(r):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)},o=2;function s(t,e){var n=!1,r=!1,s=0;function c(){n&&(n=!1,t()),r&&h()}function a(){i(c)}function h(){var t=Date.now();if(n){if(t-s<o)return;r=!0}else n=!0,r=!1,setTimeout(a,e);s=t}return h}var c=20,a=["top","right","bottom","left","width","height","size","weight"],h="undefined"!=typeof MutationObserver,u=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=s(this.refresh.bind(this),c)}return t.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},t.prototype.removeObserver=function(t){var e=this.observers_,n=e.indexOf(t);~n&&e.splice(n,1),!e.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},t.prototype.updateObservers_=function(){var t=this.observers_.filter(function(t){return t.gatherActive(),t.hasActive()});return t.forEach(function(t){return t.broadcastActive()}),t.length>0},t.prototype.connect_=function(){n&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),h?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){n&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(t){var e=t.propertyName,n=void 0===e?"":e;a.some(function(t){return!!~n.indexOf(t)})&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),f=function(t,e){for(var n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];Object.defineProperty(t,i,{value:e[i],enumerable:!1,writable:!1,configurable:!0})}return t},d=function(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView||r},p=E(0,0,0,0);function v(t){return parseFloat(t)||0}function _(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.reduce(function(e,n){return e+v(t["border-"+n+"-width"])},0)}function l(t){for(var e={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var i=r[n],o=t["padding-"+i];e[i]=v(o)}return e}function b(t){var e=t.getBBox();return E(0,0,e.width,e.height)}function m(t){var e=t.clientWidth,n=t.clientHeight;if(!e&&!n)return p;var r=d(t).getComputedStyle(t),i=l(r),o=i.left+i.right,s=i.top+i.bottom,c=v(r.width),a=v(r.height);if("border-box"===r.boxSizing&&(Math.round(c+o)!==e&&(c-=_(r,"left","right")+o),Math.round(a+s)!==n&&(a-=_(r,"top","bottom")+s)),!w(t)){var h=Math.round(c+o)-e,u=Math.round(a+s)-n;1!==Math.abs(h)&&(c-=h),1!==Math.abs(u)&&(a-=u)}return E(i.left,i.top,c,a)}var y="undefined"!=typeof SVGGraphicsElement?function(t){return t instanceof d(t).SVGGraphicsElement}:function(t){return t instanceof d(t).SVGElement&&"function"==typeof t.getBBox};function w(t){return t===d(t).document.documentElement}function g(t){return n?y(t)?b(t):m(t):p}function O(t){var e=t.x,n=t.y,r=t.width,i=t.height,o="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,s=Object.create(o.prototype);return f(s,{x:e,y:n,width:r,height:i,top:n,right:e+r,bottom:i+n,left:e}),s}function E(t,e,n,r){return{x:t,y:e,width:n,height:r}}var M=function(){function t(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=E(0,0,0,0),this.target=t}return t.prototype.isActive=function(){var t=g(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},t}(),A=function(){return function(t,e){var n=O(e);f(this,{target:t,contentRect:n})}}(),x=function(){function t(t,n,r){if(this.activeObservations_=[],this.observations_=new e,"function"!=typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=n,this.callbackCtx_=r}return t.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof d(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new M(t)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof d(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e.delete(t),e.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(e){e.isActive()&&t.activeObservations_.push(e)})},t.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map(function(t){return new A(t.target,t.broadcastRect())});this.callback_.call(t,e,t),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),T="undefined"!=typeof WeakMap?new WeakMap:new e,R=function(){return function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=u.getInstance(),r=new x(e,n,this);T.set(this,r)}}();["observe","unobserve","disconnect"].forEach(function(t){R.prototype[t]=function(){var e;return(e=T.get(this))[t].apply(e,arguments)}});var D=void 0!==r.ResizeObserver?r.ResizeObserver:R,j=D;exports.default=j;
},{}],"or4r":[function(require,module,exports) {
var global = arguments[3];
var t=arguments[3],e="Expected a function",n=NaN,r="[object Symbol]",i=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,f=/^0o[0-7]+$/i,c=parseInt,a="object"==typeof t&&t&&t.Object===Object&&t,s="object"==typeof self&&self&&self.Object===Object&&self,v=a||s||Function("return this")(),l=Object.prototype,p=l.toString,b=Math.max,m=Math.min,y=function(){return v.Date.now()};function d(t,n,r){var i,o,u,f,c,a,s=0,v=!1,l=!1,p=!0;if("function"!=typeof t)throw new TypeError(e);function d(e){var n=i,r=o;return i=o=void 0,s=e,f=t.apply(r,n)}function g(t){var e=t-a;return void 0===a||e>=n||e<0||l&&t-s>=u}function O(){var t=y();if(g(t))return x(t);c=setTimeout(O,function(t){var e=n-(t-a);return l?m(e,u-(t-s)):e}(t))}function x(t){return c=void 0,p&&i?d(t):(i=o=void 0,f)}function T(){var t=y(),e=g(t);if(i=arguments,o=this,a=t,e){if(void 0===c)return function(t){return s=t,c=setTimeout(O,n),v?d(t):f}(a);if(l)return c=setTimeout(O,n),d(a)}return void 0===c&&(c=setTimeout(O,n)),f}return n=h(n)||0,j(r)&&(v=!!r.leading,u=(l="maxWait"in r)?b(h(r.maxWait)||0,n):u,p="trailing"in r?!!r.trailing:p),T.cancel=function(){void 0!==c&&clearTimeout(c),s=0,i=a=o=c=void 0},T.flush=function(){return void 0===c?f:x(y())},T}function j(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function g(t){return!!t&&"object"==typeof t}function O(t){return"symbol"==typeof t||g(t)&&p.call(t)==r}function h(t){if("number"==typeof t)return t;if(O(t))return n;if(j(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=j(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(i,"");var r=u.test(t);return r||f.test(t)?c(t.slice(2),r?2:8):o.test(t)?n:+t}module.exports=d;
},{}],"q9qR":[function(require,module,exports) {
var e=require("lodash.debounce"),r=require("@uppy/utils/lib/FOCUSABLE_ELEMENTS"),u=require("./getActiveOverlayEl");module.exports=function(){var t=!1;return e(function(e,l){var o=u(e,l),c=o.contains(document.activeElement);if(!c||!t){var i=o.querySelector("[data-uppy-super-focusable]");if(!c||i)if(i)i.focus({preventScroll:!0}),t=!0;else{var a=o.querySelector(r);a&&a.focus({preventScroll:!0}),t=!1}}},260)};
},{"lodash.debounce":"or4r","@uppy/utils/lib/FOCUSABLE_ELEMENTS":"kYnp","./getActiveOverlayEl":"uMwT"}],"wYb7":[function(require,module,exports) {
"use strict";function t(t,r){if(t.length!==r.length)return!1;for(var e=0;e<t.length;e++)if(t[e]!==r[e])return!1;return!0}function r(r,e){var n;void 0===e&&(e=t);var u,i=[],o=!1;return function(){for(var t=[],f=0;f<arguments.length;f++)t[f]=arguments[f];return o&&n===this&&e(t,i)?u:(u=r.apply(this,t),o=!0,n=this,i=t,u)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r;exports.default=e;
},{}],"Fk0s":[function(require,module,exports) {
var e,t;function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i])}return e}).apply(this,arguments)}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function n(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,a(e,t)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=require("preact"),l=r.h,s=require("@uppy/core"),d=s.Plugin,u=require("@uppy/utils/lib/Translator"),p=require("./components/Dashboard"),c=require("@uppy/status-bar"),g=require("@uppy/informer"),h=require("@uppy/thumbnail-generator"),f=require("@uppy/utils/lib/findAllDOMElements"),y=require("@uppy/utils/lib/toArray"),m=require("@uppy/utils/lib/getDroppedFiles"),v=require("@uppy/utils/lib/getTextDirection"),b=require("./utils/trapFocus"),F=require("cuid"),P=require("resize-observer-polyfill").default||require("resize-observer-polyfill"),w=require("./utils/createSuperFocus"),T=require("memoize-one").default||require("memoize-one"),C=require("@uppy/utils/lib/FOCUSABLE_ELEMENTS"),D=9,E=27;function O(){var e={};return e.promise=new Promise(function(t,o){e.resolve=t,e.reject=o}),e}function S(){return l("svg",{"aria-hidden":"true",focusable:"false",width:"30",height:"30",viewBox:"0 0 30 30"},l("path",{d:"M15 30c8.284 0 15-6.716 15-15 0-8.284-6.716-15-15-15C6.716 0 0 6.716 0 15c0 8.284 6.716 15 15 15zm4.258-12.676v6.846h-8.426v-6.846H5.204l9.82-12.364 9.82 12.364H19.26z"}))}module.exports=(t=e=function(e){function t(t,n){var a;(a=e.call(this,t,n)||this).setOptions=function(t){e.prototype.setOptions.call(i(a),t),a.i18nInit()},a.i18nInit=function(){a.translator=new u([a.defaultLocale,a.uppy.locale,a.opts.locale]),a.i18n=a.translator.translate.bind(a.translator),a.i18nArray=a.translator.translateArray.bind(a.translator),a.setPluginState()},a.removeTarget=function(e){var t=a.getPluginState().targets.filter(function(t){return t.id!==e.id});a.setPluginState({targets:t})},a.addTarget=function(e){var t=e.id||e.constructor.name,o=e.title||t,i=e.type;if("acquirer"===i||"progressindicator"===i||"editor"===i){var n={id:t,name:o,type:i},r=a.getPluginState().targets.slice();return r.push(n),a.setPluginState({targets:r}),a.el}a.uppy.log("Dashboard: can only be targeted by plugins of types: acquirer, progressindicator, editor","error")},a.hideAllPanels=function(){var e={activePickerPanel:!1,showAddFilesPanel:!1,activeOverlayType:null,fileCardFor:null,showFileEditor:!1},t=a.getPluginState();t.activePickerPanel===e.activePickerPanel&&t.showAddFilesPanel===e.showAddFilesPanel&&t.showFileEditor===e.showFileEditor&&t.activeOverlayType===e.activeOverlayType||a.setPluginState(e)},a.showPanel=function(e){var t=a.getPluginState().targets.filter(function(t){return"acquirer"===t.type&&t.id===e})[0];a.setPluginState({activePickerPanel:t,activeOverlayType:"PickerPanel"})},a.canEditFile=function(e){var t=a.getPluginState().targets;return a._getEditors(t).some(function(t){return a.uppy.getPlugin(t.id).canEditFile(e)})},a.openFileEditor=function(e){var t=a.getPluginState().targets,o=a._getEditors(t);a.setPluginState({showFileEditor:!0,fileCardFor:e.id||null,activeOverlayType:"FileEditor"}),o.forEach(function(t){a.uppy.getPlugin(t.id).selectFile(e)})},a.openModal=function(){var e=O(),t=e.promise,o=e.resolve;if(a.savedScrollPosition=window.pageYOffset,a.savedActiveElement=document.activeElement,a.opts.disablePageScrollWhenModalOpen&&document.body.classList.add("uppy-Dashboard-isFixed"),a.opts.animateOpenClose&&a.getPluginState().isClosing){a.el.addEventListener("animationend",function e(){a.setPluginState({isHidden:!1}),a.el.removeEventListener("animationend",e,!1),o()},!1)}else a.setPluginState({isHidden:!1}),o();return a.opts.browserBackButtonClose&&a.updateBrowserHistory(),document.addEventListener("keydown",a.handleKeyDownInModal),a.uppy.emit("dashboard:modal-open"),t},a.closeModal=function(e){void 0===e&&(e={});var t=e.manualClose,o=void 0===t||t,i=a.getPluginState(),n=i.isHidden,r=i.isClosing;if(!n&&!r){var l=O(),s=l.promise,d=l.resolve;if(a.opts.disablePageScrollWhenModalOpen&&document.body.classList.remove("uppy-Dashboard-isFixed"),a.opts.animateOpenClose){a.setPluginState({isClosing:!0});a.el.addEventListener("animationend",function e(){a.setPluginState({isHidden:!0,isClosing:!1}),a.superFocus.cancel(),a.savedActiveElement.focus(),a.el.removeEventListener("animationend",e,!1),d()},!1)}else a.setPluginState({isHidden:!0}),a.superFocus.cancel(),a.savedActiveElement.focus(),d();return document.removeEventListener("keydown",a.handleKeyDownInModal),o&&a.opts.browserBackButtonClose&&history.state&&history.state[a.modalName]&&history.go(-1),a.uppy.emit("dashboard:modal-closed"),s}},a.isModalOpen=function(){return!a.getPluginState().isHidden||!1},a.requestCloseModal=function(){return a.opts.onRequestCloseModal?a.opts.onRequestCloseModal():a.closeModal()},a.setDarkModeCapability=function(e){var t=a.uppy.getState().capabilities;a.uppy.setState({capabilities:o({},t,{darkMode:e})})},a.handleSystemDarkModeChange=function(e){var t=e.matches;a.uppy.log("[Dashboard] Dark mode is "+(t?"on":"off")),a.setDarkModeCapability(t)},a.toggleFileCard=function(e,t){var o=a.uppy.getFile(t);e?a.uppy.emit("dashboard:file-edit-start",o):a.uppy.emit("dashboard:file-edit-complete",o),a.setPluginState({fileCardFor:e?t:null,activeOverlayType:e?"FileCard":null})},a.toggleAddFilesPanel=function(e){a.setPluginState({showAddFilesPanel:e,activeOverlayType:e?"AddFiles":null})},a.addFiles=function(e){var t=e.map(function(e){return{source:a.id,name:e.name,type:e.type,data:e,meta:{relativePath:e.relativePath||null}}});try{a.uppy.addFiles(t)}catch(o){a.uppy.log(o)}},a.startListeningToResize=function(){a.resizeObserver=new P(function(e,t){var o=e[0].contentRect,i=o.width,n=o.height;a.uppy.log("[Dashboard] resized: "+i+" / "+n,"debug"),a.setPluginState({containerWidth:i,containerHeight:n,areInsidesReadyToBeVisible:!0})}),a.resizeObserver.observe(a.el.querySelector(".uppy-Dashboard-inner")),a.makeDashboardInsidesVisibleAnywayTimeout=setTimeout(function(){var e=a.getPluginState(),t=!a.opts.inline&&e.isHidden;e.areInsidesReadyToBeVisible||t||(a.uppy.log("[Dashboard] resize event didn't fire on time: defaulted to mobile layout","debug"),a.setPluginState({areInsidesReadyToBeVisible:!0}))},1e3)},a.stopListeningToResize=function(){a.resizeObserver.disconnect(),clearTimeout(a.makeDashboardInsidesVisibleAnywayTimeout)},a.recordIfFocusedOnUppyRecently=function(e){a.el.contains(e.target)?a.ifFocusedOnUppyRecently=!0:(a.ifFocusedOnUppyRecently=!1,a.superFocus.cancel())},a.disableAllFocusableElements=function(e){var t=y(a.el.querySelectorAll(C));e?t.forEach(function(e){var t=e.getAttribute("tabindex");t&&(e.dataset.inertTabindex=t),e.setAttribute("tabindex","-1")}):t.forEach(function(e){"inertTabindex"in e.dataset?e.setAttribute("tabindex",e.dataset.inertTabindex):e.removeAttribute("tabindex")}),a.dashboardIsDisabled=e},a.updateBrowserHistory=function(){var e;history.state&&history.state[a.modalName]||history.pushState(o({},history.state,((e={})[a.modalName]=!0,e)),"");window.addEventListener("popstate",a.handlePopState,!1)},a.handlePopState=function(e){!a.isModalOpen()||e.state&&e.state[a.modalName]||a.closeModal({manualClose:!1}),!a.isModalOpen()&&e.state&&e.state[a.modalName]&&history.go(-1)},a.handleKeyDownInModal=function(e){e.keyCode===E&&a.requestCloseModal(e),e.keyCode===D&&b.forModal(e,a.getPluginState().activeOverlayType,a.el)},a.handleClickOutside=function(){a.opts.closeModalOnClickOutside&&a.requestCloseModal()},a.handlePaste=function(e){a.uppy.iteratePlugins(function(t){"acquirer"===t.type&&t.handleRootPaste&&t.handleRootPaste(e)});var t=y(e.clipboardData.files);a.addFiles(t)},a.handleInputChange=function(e){e.preventDefault();var t=y(e.target.files);a.addFiles(t)},a.handleDragOver=function(e){e.preventDefault(),e.stopPropagation(),a.opts.disabled||(e.dataTransfer.dropEffect="copy",clearTimeout(a.removeDragOverClassTimeout),a.setPluginState({isDraggingOver:!0}))},a.handleDragLeave=function(e){e.preventDefault(),e.stopPropagation(),a.opts.disabled||(clearTimeout(a.removeDragOverClassTimeout),a.removeDragOverClassTimeout=setTimeout(function(){a.setPluginState({isDraggingOver:!1})},50))},a.handleDrop=function(e,t){if(e.preventDefault(),e.stopPropagation(),!a.opts.disabled){clearTimeout(a.removeDragOverClassTimeout),a.setPluginState({isDraggingOver:!1}),a.uppy.iteratePlugins(function(t){"acquirer"===t.type&&t.handleRootDrop&&t.handleRootDrop(e)});var o=!1;m(e.dataTransfer,{logDropError:function(e){a.uppy.log(e,"error"),o||(a.uppy.info(e.message,"error"),o=!0)}}).then(function(e){e.length>0&&(a.uppy.log("[Dashboard] Files were dropped"),a.addFiles(e))})}},a.handleRequestThumbnail=function(e){a.opts.waitForThumbnailsBeforeUpload||a.uppy.emit("thumbnail:request",e)},a.handleCancelThumbnail=function(e){a.opts.waitForThumbnailsBeforeUpload||a.uppy.emit("thumbnail:cancel",e)},a.handleKeyDownInInline=function(e){e.keyCode===D&&b.forInline(e,a.getPluginState().activeOverlayType,a.el)},a.handlePasteOnBody=function(e){a.el.contains(document.activeElement)&&a.handlePaste(e)},a.handleComplete=function(e){var t=e.failed;a.opts.closeAfterFinish&&0===t.length&&a.requestCloseModal()},a._openFileEditorWhenFilesAdded=function(e){var t=e[0];a.canEditFile(t)&&a.openFileEditor(t)},a.initEvents=function(){if(a.opts.trigger&&!a.opts.inline){var e=f(a.opts.trigger);e?e.forEach(function(e){return e.addEventListener("click",a.openModal)}):a.uppy.log("Dashboard modal trigger not found. Make sure `trigger` is set in Dashboard options, unless you are planning to call `dashboard.openModal()` method yourself","warning")}a.startListeningToResize(),document.addEventListener("paste",a.handlePasteOnBody),a.uppy.on("plugin-remove",a.removeTarget),a.uppy.on("file-added",a.hideAllPanels),a.uppy.on("dashboard:modal-closed",a.hideAllPanels),a.uppy.on("file-editor:complete",a.hideAllPanels),a.uppy.on("complete",a.handleComplete),document.addEventListener("focus",a.recordIfFocusedOnUppyRecently,!0),document.addEventListener("click",a.recordIfFocusedOnUppyRecently,!0),a.opts.inline&&a.el.addEventListener("keydown",a.handleKeyDownInInline),a.opts.autoOpenFileEditor&&a.uppy.on("files-added",a._openFileEditorWhenFilesAdded)},a.removeEvents=function(){var e=f(a.opts.trigger);!a.opts.inline&&e&&e.forEach(function(e){return e.removeEventListener("click",a.openModal)}),a.stopListeningToResize(),document.removeEventListener("paste",a.handlePasteOnBody),window.removeEventListener("popstate",a.handlePopState,!1),a.uppy.off("plugin-remove",a.removeTarget),a.uppy.off("file-added",a.hideAllPanels),a.uppy.off("dashboard:modal-closed",a.hideAllPanels),a.uppy.off("complete",a.handleComplete),document.removeEventListener("focus",a.recordIfFocusedOnUppyRecently),document.removeEventListener("click",a.recordIfFocusedOnUppyRecently),a.opts.inline&&a.el.removeEventListener("keydown",a.handleKeyDownInInline),a.opts.autoOpenFileEditor&&a.uppy.off("files-added",a._openFileEditorWhenFilesAdded)},a.superFocusOnEachUpdate=function(){var e=a.el.contains(document.activeElement),t=document.activeElement===document.body||null===document.activeElement,o=a.uppy.getState().info.isHidden,i=!a.opts.inline;o&&(i||e||t&&a.ifFocusedOnUppyRecently)?a.superFocus(a.el,a.getPluginState().activeOverlayType):a.superFocus.cancel()},a.afterUpdate=function(){!a.opts.disabled||a.dashboardIsDisabled?(!a.opts.disabled&&a.dashboardIsDisabled&&a.disableAllFocusableElements(!1),a.superFocusOnEachUpdate()):a.disableAllFocusableElements(!0)},a.cancelUpload=function(e){a.uppy.removeFile(e)},a.saveFileCard=function(e,t){a.uppy.setFileMeta(t,e),a.toggleFileCard(!1,t)},a._attachRenderFunctionToTarget=function(e){var t=a.uppy.getPlugin(e.id);return o({},e,{icon:t.icon||a.opts.defaultPickerIcon,render:t.render})},a._isTargetSupported=function(e){var t=a.uppy.getPlugin(e.id);return"function"!=typeof t.isSupported||t.isSupported()},a._getAcquirers=T(function(e){return e.filter(function(e){return"acquirer"===e.type&&a._isTargetSupported(e)}).map(a._attachRenderFunctionToTarget)}),a._getProgressIndicators=T(function(e){return e.filter(function(e){return"progressindicator"===e.type}).map(a._attachRenderFunctionToTarget)}),a._getEditors=T(function(e){return e.filter(function(e){return"editor"===e.type}).map(a._attachRenderFunctionToTarget)}),a.render=function(e){var t,o=a.getPluginState(),i=e.files,n=e.capabilities,r=e.allowNewUpload,l=Object.keys(i).filter(function(e){return!i[e].progress.uploadStarted}),s=Object.keys(i).filter(function(e){return i[e].progress.uploadStarted}),d=Object.keys(i).filter(function(e){return i[e].isPaused}),u=Object.keys(i).filter(function(e){return i[e].progress.uploadComplete}),c=Object.keys(i).filter(function(e){return i[e].error}),g=Object.keys(i).filter(function(e){return!i[e].progress.uploadComplete&&i[e].progress.uploadStarted}),h=g.filter(function(e){return!i[e].isPaused}),f=Object.keys(i).filter(function(e){return i[e].progress.preprocess||i[e].progress.postprocess}),y=s.length>0,m=100===e.totalProgress&&u.length===Object.keys(i).length&&0===f.length,v=y&&c.length===s.length,b=0!==g.length&&d.length===g.length,F=a._getAcquirers(o.targets),P=a._getProgressIndicators(o.targets),w=a._getEditors(o.targets);return t="auto"===a.opts.theme?n.darkMode?"dark":"light":a.opts.theme,["files","folders","both"].indexOf(a.opts.fileManagerSelectionType)<0&&(a.opts.fileManagerSelectionType="files",console.error('Unsupported option for "fileManagerSelectionType". Using default of "'+a.opts.fileManagerSelectionType+'".')),p({state:e,isHidden:o.isHidden,files:i,newFiles:l,uploadStartedFiles:s,completeFiles:u,erroredFiles:c,inProgressFiles:g,inProgressNotPausedFiles:h,processingFiles:f,isUploadStarted:y,isAllComplete:m,isAllErrored:v,isAllPaused:b,totalFileCount:Object.keys(i).length,totalProgress:e.totalProgress,allowNewUpload:r,acquirers:F,theme:t,disabled:a.opts.disabled,direction:a.opts.direction,activePickerPanel:o.activePickerPanel,showFileEditor:o.showFileEditor,disableAllFocusableElements:a.disableAllFocusableElements,animateOpenClose:a.opts.animateOpenClose,isClosing:o.isClosing,getPlugin:a.uppy.getPlugin,progressindicators:P,editors:w,autoProceed:a.uppy.opts.autoProceed,id:a.id,closeModal:a.requestCloseModal,handleClickOutside:a.handleClickOutside,handleInputChange:a.handleInputChange,handlePaste:a.handlePaste,inline:a.opts.inline,showPanel:a.showPanel,hideAllPanels:a.hideAllPanels,log:a.uppy.log,i18n:a.i18n,i18nArray:a.i18nArray,removeFile:a.uppy.removeFile,uppy:a.uppy,info:a.uppy.info,note:a.opts.note,metaFields:o.metaFields,resumableUploads:n.resumableUploads||!1,individualCancellation:n.individualCancellation,isMobileDevice:n.isMobileDevice,pauseUpload:a.uppy.pauseResume,retryUpload:a.uppy.retryUpload,cancelUpload:a.cancelUpload,cancelAll:a.uppy.cancelAll,fileCardFor:o.fileCardFor,toggleFileCard:a.toggleFileCard,toggleAddFilesPanel:a.toggleAddFilesPanel,showAddFilesPanel:o.showAddFilesPanel,saveFileCard:a.saveFileCard,openFileEditor:a.openFileEditor,canEditFile:a.canEditFile,width:a.opts.width,height:a.opts.height,showLinkToFileUploadResult:a.opts.showLinkToFileUploadResult,fileManagerSelectionType:a.opts.fileManagerSelectionType,proudlyDisplayPoweredByUppy:a.opts.proudlyDisplayPoweredByUppy,hideCancelButton:a.opts.hideCancelButton,hideRetryButton:a.opts.hideRetryButton,hidePauseResumeButton:a.opts.hidePauseResumeButton,showRemoveButtonAfterComplete:a.opts.showRemoveButtonAfterComplete,containerWidth:o.containerWidth,containerHeight:o.containerHeight,areInsidesReadyToBeVisible:o.areInsidesReadyToBeVisible,isTargetDOMEl:a.isTargetDOMEl,parentElement:a.el,allowedFileTypes:a.uppy.opts.restrictions.allowedFileTypes,maxNumberOfFiles:a.uppy.opts.restrictions.maxNumberOfFiles,showSelectedFiles:a.opts.showSelectedFiles,handleRequestThumbnail:a.handleRequestThumbnail,handleCancelThumbnail:a.handleCancelThumbnail,isDraggingOver:o.isDraggingOver,handleDragOver:a.handleDragOver,handleDragLeave:a.handleDragLeave,handleDrop:a.handleDrop})},a.discoverProviderPlugins=function(){a.uppy.iteratePlugins(function(e){e&&!e.target&&e.opts&&e.opts.target===a.constructor&&a.addTarget(e)})},a.install=function(){a.setPluginState({isHidden:!0,fileCardFor:null,activeOverlayType:null,showAddFilesPanel:!1,activePickerPanel:!1,showFileEditor:!1,metaFields:a.opts.metaFields,targets:[],areInsidesReadyToBeVisible:!1,isDraggingOver:!1});var e=a.opts,t=e.inline,o=e.closeAfterFinish;if(t&&o)throw new Error("[Dashboard] `closeAfterFinish: true` cannot be used on an inline Dashboard, because an inline Dashboard cannot be closed at all. Either set `inline: false`, or disable the `closeAfterFinish` option.");a.uppy.opts.allowMultipleUploads&&o&&a.uppy.log("[Dashboard] When using `closeAfterFinish`, we recommended setting the `allowMultipleUploads` option to `false` in the Uppy constructor. See https://uppy.io/docs/uppy/#allowMultipleUploads-true","warning");var n=a.opts.target;n&&a.mount(n,i(a)),(a.opts.plugins||[]).forEach(function(e){var t=a.uppy.getPlugin(e);t&&t.mount(i(a),t)}),a.opts.disableStatusBar||a.uppy.use(c,{id:a.id+":StatusBar",target:i(a),hideUploadButton:a.opts.hideUploadButton,hideRetryButton:a.opts.hideRetryButton,hidePauseResumeButton:a.opts.hidePauseResumeButton,hideCancelButton:a.opts.hideCancelButton,showProgressDetails:a.opts.showProgressDetails,hideAfterFinish:a.opts.hideProgressAfterFinish,locale:a.opts.locale,doneButtonHandler:a.opts.doneButtonHandler}),a.opts.disableInformer||a.uppy.use(g,{id:a.id+":Informer",target:i(a)}),a.opts.disableThumbnailGenerator||a.uppy.use(h,{id:a.id+":ThumbnailGenerator",thumbnailWidth:a.opts.thumbnailWidth,thumbnailType:a.opts.thumbnailType,waitForThumbnailsBeforeUpload:a.opts.waitForThumbnailsBeforeUpload,lazy:!a.opts.waitForThumbnailsBeforeUpload}),a.darkModeMediaQuery="undefined"!=typeof window&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):null;var r=!!a.darkModeMediaQuery&&a.darkModeMediaQuery.matches;a.uppy.log("[Dashboard] Dark mode is "+(r?"on":"off")),a.setDarkModeCapability(r),"auto"===a.opts.theme&&a.darkModeMediaQuery.addListener(a.handleSystemDarkModeChange),a.discoverProviderPlugins(),a.initEvents()},a.uninstall=function(){if(!a.opts.disableInformer){var e=a.uppy.getPlugin(a.id+":Informer");e&&a.uppy.removePlugin(e)}if(!a.opts.disableStatusBar){var t=a.uppy.getPlugin(a.id+":StatusBar");t&&a.uppy.removePlugin(t)}if(!a.opts.disableThumbnailGenerator){var o=a.uppy.getPlugin(a.id+":ThumbnailGenerator");o&&a.uppy.removePlugin(o)}(a.opts.plugins||[]).forEach(function(e){var t=a.uppy.getPlugin(e);t&&t.unmount()}),"auto"===a.opts.theme&&a.darkModeMediaQuery.removeListener(a.handleSystemDarkModeChange),a.unmount(),a.removeEvents()},a.id=a.opts.id||"Dashboard",a.title="Dashboard",a.type="orchestrator",a.modalName="uppy-Dashboard-"+F(),a.defaultLocale={strings:{closeModal:"Close Modal",importFrom:"Import from %{name}",addingMoreFiles:"Adding more files",addMoreFiles:"Add more files",dashboardWindowTitle:"File Uploader Window (Press escape to close)",dashboardTitle:"File Uploader",copyLinkToClipboardSuccess:"Link copied to clipboard",copyLinkToClipboardFallback:"Copy the URL below",copyLink:"Copy link",fileSource:"File source: %{name}",done:"Done",back:"Back",addMore:"Add more",removeFile:"Remove file",editFile:"Edit file",editing:"Editing %{file}",finishEditingFile:"Finish editing file",saveChanges:"Save changes",cancel:"Cancel",myDevice:"My Device",dropPasteFiles:"Drop files here, paste or %{browseFiles}",dropPasteFolders:"Drop files here, paste or %{browseFolders}",dropPasteBoth:"Drop files here, paste, %{browseFiles} or %{browseFolders}",dropPasteImportFiles:"Drop files here, paste, %{browseFiles} or import from:",dropPasteImportFolders:"Drop files here, paste, %{browseFolders} or import from:",dropPasteImportBoth:"Drop files here, paste, %{browseFiles}, %{browseFolders} or import from:",dropHint:"Drop your files here",browseFiles:"browse files",browseFolders:"browse folders",uploadComplete:"Upload complete",uploadPaused:"Upload paused",resumeUpload:"Resume upload",pauseUpload:"Pause upload",retryUpload:"Retry upload",cancelUpload:"Cancel upload",xFilesSelected:{0:"%{smart_count} file selected",1:"%{smart_count} files selected"},uploadingXFiles:{0:"Uploading %{smart_count} file",1:"Uploading %{smart_count} files"},processingXFiles:{0:"Processing %{smart_count} file",1:"Processing %{smart_count} files"},poweredBy2:"%{backwardsCompat} %{uppy}",poweredBy:"Powered by"}};var r={target:"body",metaFields:[],trigger:"#uppy-select-files",inline:!1,width:750,height:550,thumbnailWidth:280,thumbnailType:"image/jpeg",waitForThumbnailsBeforeUpload:!1,defaultPickerIcon:S,showLinkToFileUploadResult:!0,showProgressDetails:!1,hideUploadButton:!1,hideCancelButton:!1,hideRetryButton:!1,hidePauseResumeButton:!1,hideProgressAfterFinish:!1,doneButtonHandler:function(){a.uppy.reset(),a.requestCloseModal()},note:null,closeModalOnClickOutside:!1,closeAfterFinish:!1,disableStatusBar:!1,disableInformer:!1,disableThumbnailGenerator:!1,disablePageScrollWhenModalOpen:!0,animateOpenClose:!0,fileManagerSelectionType:"files",proudlyDisplayPoweredByUppy:!0,onRequestCloseModal:function(){return a.closeModal()},showSelectedFiles:!0,showRemoveButtonAfterComplete:!1,browserBackButtonClose:!1,theme:"light",autoOpenFileEditor:!1,disabled:!1};return a.opts=o({},r,n),a.i18nInit(),a.superFocus=w(),a.ifFocusedOnUppyRecently=!1,a.makeDashboardInsidesVisibleAnywayTimeout=null,a.removeDragOverClassTimeout=null,a}return n(t,e),t.prototype.onMount=function(){var e=this.el;v(e)||(e.dir="ltr")},t}(d),e.VERSION="1.18.0",t);
},{"preact":"sSEx","@uppy/core":"PDAA","@uppy/utils/lib/Translator":"hG0x","./components/Dashboard":"gcOb","@uppy/status-bar":"VW3H","@uppy/informer":"KHlI","@uppy/thumbnail-generator":"Y1mF","@uppy/utils/lib/findAllDOMElements":"ZTc1","@uppy/utils/lib/toArray":"d6Wp","@uppy/utils/lib/getDroppedFiles":"oXap","@uppy/utils/lib/getTextDirection":"sfh4","./utils/trapFocus":"jop0","cuid":"EdMi","resize-observer-polyfill":"l9tA","./utils/createSuperFocus":"q9qR","memoize-one":"wYb7","@uppy/utils/lib/FOCUSABLE_ELEMENTS":"kYnp"}],"BRNE":[function(require,module,exports) {
var e,t;function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function n(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,a(e,t)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var o=require("@uppy/core"),s=o.Plugin,p=require("@uppy/utils/lib/Translator"),u=require("@uppy/utils/lib/toArray"),l=require("@uppy/utils/lib/isDragDropSupported"),h=require("@uppy/utils/lib/getDroppedFiles"),g=require("preact"),d=g.h;module.exports=(t=e=function(e){function t(t,i){var a;(a=e.call(this,t,i)||this).type="acquirer",a.id=a.opts.id||"DragDrop",a.title="Drag & Drop",a.defaultLocale={strings:{dropHereOr:"Drop files here or %{browse}",browse:"browse"}};return a.opts=r({},{target:null,inputName:"files[]",width:"100%",height:"100%",note:null},i),a.isDragDropSupported=l(),a.removeDragOverClassTimeout=null,a.i18nInit(),a.onInputChange=a.onInputChange.bind(n(a)),a.handleDragOver=a.handleDragOver.bind(n(a)),a.handleDragLeave=a.handleDragLeave.bind(n(a)),a.handleDrop=a.handleDrop.bind(n(a)),a.addFiles=a.addFiles.bind(n(a)),a.render=a.render.bind(n(a)),a}i(t,e);var a=t.prototype;return a.setOptions=function(t){e.prototype.setOptions.call(this,t),this.i18nInit()},a.i18nInit=function(){this.translator=new p([this.defaultLocale,this.uppy.locale,this.opts.locale]),this.i18n=this.translator.translate.bind(this.translator),this.i18nArray=this.translator.translateArray.bind(this.translator),this.setPluginState()},a.addFiles=function(e){var t=this,r=e.map(function(e){return{source:t.id,name:e.name,type:e.type,data:e,meta:{relativePath:e.relativePath||null}}});try{this.uppy.addFiles(r)}catch(n){this.uppy.log(n)}},a.onInputChange=function(e){this.uppy.log("[DragDrop] Files selected through input");var t=u(e.target.files);this.addFiles(t),e.target.value=null},a.handleDrop=function(e,t){var r=this;e.preventDefault(),e.stopPropagation(),clearTimeout(this.removeDragOverClassTimeout),this.setPluginState({isDraggingOver:!1}),this.uppy.log("[DragDrop] Files were dropped");h(e.dataTransfer,{logDropError:function(e){r.uppy.log(e,"error")}}).then(function(e){return r.addFiles(e)})},a.handleDragOver=function(e){e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="copy",clearTimeout(this.removeDragOverClassTimeout),this.setPluginState({isDraggingOver:!0})},a.handleDragLeave=function(e){var t=this;e.preventDefault(),e.stopPropagation(),clearTimeout(this.removeDragOverClassTimeout),this.removeDragOverClassTimeout=setTimeout(function(){t.setPluginState({isDraggingOver:!1})},50)},a.renderHiddenFileInput=function(){var e=this,t=this.uppy.opts.restrictions;return d("input",{className:"uppy-DragDrop-input",type:"file",hidden:!0,ref:function(t){e.fileInputRef=t},name:this.opts.inputName,multiple:1!==t.maxNumberOfFiles,accept:t.allowedFileTypes,onChange:this.onInputChange})},a.renderArrowSvg=function(){return d("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-DragDrop-arrow",width:"16",height:"16",viewBox:"0 0 16 16"},d("path",{d:"M11 10V0H5v10H2l6 6 6-6h-3zm0 0",fillRule:"evenodd"}))},a.renderLabel=function(){return d("div",{className:"uppy-DragDrop-label"},this.i18nArray("dropHereOr",{browse:d("span",{className:"uppy-DragDrop-browse"},this.i18n("browse"))}))},a.renderNote=function(){return d("span",{className:"uppy-DragDrop-note"},this.opts.note)},a.render=function(e){var t=this,r="uppy-Root\n      uppy-u-reset\n      uppy-DragDrop-container\n      "+(this.isDragDropSupported?"uppy-DragDrop--isDragDropSupported":"")+"\n      "+(this.getPluginState().isDraggingOver?"uppy-DragDrop--isDraggingOver":"")+"\n    ",n={width:this.opts.width,height:this.opts.height};return d("button",{type:"button",className:r,style:n,onClick:function(){return t.fileInputRef.click()},onDragOver:this.handleDragOver,onDragLeave:this.handleDragLeave,onDrop:this.handleDrop},this.renderHiddenFileInput(),d("div",{className:"uppy-DragDrop-inner"},this.renderArrowSvg(),this.renderLabel(),this.renderNote()))},a.install=function(){this.setPluginState({isDraggingOver:!1});var e=this.opts.target;e&&this.mount(e,this)},a.uninstall=function(){this.unmount()},t}(s),e.VERSION="1.4.27",t);
},{"@uppy/core":"PDAA","@uppy/utils/lib/Translator":"hG0x","@uppy/utils/lib/toArray":"d6Wp","@uppy/utils/lib/isDragDropSupported":"CX9K","@uppy/utils/lib/getDroppedFiles":"oXap","preact":"sSEx"}],"juFi":[function(require,module,exports) {
var e,r;function t(){return(t=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}function n(e,r){e.prototype=Object.create(r.prototype),e.prototype.constructor=e,a(e,r)}function a(e,r){return(a=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(e,r)}var o=require("@uppy/core"),i=o.Plugin,s=require("@uppy/utils/lib/getDroppedFiles"),u=require("@uppy/utils/lib/toArray");module.exports=(r=e=function(e){function r(r,n){var a;(a=e.call(this,r,n)||this).addFiles=function(e){var r=e.map(function(e){return{source:a.id,name:e.name,type:e.type,data:e,meta:{relativePath:e.relativePath||null}}});try{a.uppy.addFiles(r)}catch(t){a.uppy.log(t)}},a.handleDrop=function(e){e.preventDefault(),e.stopPropagation(),clearTimeout(a.removeDragOverClassTimeout),e.currentTarget.classList.remove("uppy-is-drag-over"),a.setPluginState({isDraggingOver:!1}),a.uppy.log("[DropTarget] Files were dropped");s(e.dataTransfer,{logDropError:function(e){a.uppy.log(e,"error")}}).then(function(e){return a.addFiles(e)})},a.handleDragOver=function(e){e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="copy",clearTimeout(a.removeDragOverClassTimeout),e.currentTarget.classList.add("uppy-is-drag-over"),a.setPluginState({isDraggingOver:!0})},a.handleDragLeave=function(e){e.preventDefault(),e.stopPropagation();var r=e.currentTarget;clearTimeout(a.removeDragOverClassTimeout),a.removeDragOverClassTimeout=setTimeout(function(){r.classList.remove("uppy-is-drag-over"),a.setPluginState({isDraggingOver:!1})},50)},a.addListeners=function(){var e=a.opts.target;if(e instanceof Element?a.nodes=[e]:"string"==typeof e&&(a.nodes=u(document.querySelectorAll(e))),!a.nodes&&!a.nodes.length>0)throw new Error('"'+e+'" does not match any HTML elements');a.nodes.forEach(function(e){e.addEventListener("dragover",a.handleDragOver,!1),e.addEventListener("dragleave",a.handleDragLeave,!1),e.addEventListener("drop",a.handleDrop,!1)})},a.removeListeners=function(){a.nodes&&a.nodes.forEach(function(e){e.removeEventListener("dragover",a.handleDragOver,!1),e.removeEventListener("dragleave",a.handleDragLeave,!1),e.removeEventListener("drop",a.handleDrop,!1)})},a.type="acquirer",a.id=a.opts.id||"DropTarget",a.title="Drop Target";return a.opts=t({},{target:null},n),a.removeDragOverClassTimeout=null,a}n(r,e);var a=r.prototype;return a.install=function(){this.setPluginState({isDraggingOver:!1}),this.addListeners()},a.uninstall=function(){this.removeListeners()},r}(i),e.VERSION="0.2.0",r);
},{"@uppy/core":"PDAA","@uppy/utils/lib/getDroppedFiles":"oXap","@uppy/utils/lib/toArray":"d6Wp"}],"QfKQ":[function(require,module,exports) {
var t,e;function n(){return(n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function r(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,s(t,e)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var o=require("@uppy/core"),a=o.Plugin,l=require("@uppy/utils/lib/toArray"),p=require("@uppy/utils/lib/Translator"),u=require("preact"),h=u.h;module.exports=(e=t=function(t){function e(e,r){var s;(s=t.call(this,e,r)||this).id=s.opts.id||"FileInput",s.title="File Input",s.type="acquirer",s.defaultLocale={strings:{chooseFiles:"Choose files"}};return s.opts=n({},{target:null,pretty:!0,inputName:"files[]"},r),s.i18nInit(),s.render=s.render.bind(i(s)),s.handleInputChange=s.handleInputChange.bind(i(s)),s.handleClick=s.handleClick.bind(i(s)),s}r(e,t);var s=e.prototype;return s.setOptions=function(e){t.prototype.setOptions.call(this,e),this.i18nInit()},s.i18nInit=function(){this.translator=new p([this.defaultLocale,this.uppy.locale,this.opts.locale]),this.i18n=this.translator.translate.bind(this.translator),this.i18nArray=this.translator.translateArray.bind(this.translator),this.setPluginState()},s.addFiles=function(t){var e=this,n=t.map(function(t){return{source:e.id,name:t.name,type:t.type,data:t}});try{this.uppy.addFiles(n)}catch(i){this.uppy.log(i)}},s.handleInputChange=function(t){this.uppy.log("[FileInput] Something selected through input...");var e=l(t.target.files);this.addFiles(e),t.target.value=null},s.handleClick=function(t){this.input.click()},s.render=function(t){var e=this,n=this.uppy.opts.restrictions,i=n.allowedFileTypes?n.allowedFileTypes.join(","):null;return h("div",{className:"uppy-Root uppy-FileInput-container"},h("input",{className:"uppy-FileInput-input",style:this.opts.pretty&&{width:"0.1px",height:"0.1px",opacity:0,overflow:"hidden",position:"absolute",zIndex:-1},type:"file",name:this.opts.inputName,onChange:this.handleInputChange,multiple:1!==n.maxNumberOfFiles,accept:i,ref:function(t){e.input=t}}),this.opts.pretty&&h("button",{className:"uppy-FileInput-btn",type:"button",onClick:this.handleClick},this.i18n("chooseFiles")))},s.install=function(){var t=this.opts.target;t&&this.mount(t,this)},s.uninstall=function(){this.unmount()},e}(a),t.VERSION="1.4.25",e);
},{"@uppy/core":"PDAA","@uppy/utils/lib/toArray":"d6Wp","@uppy/utils/lib/Translator":"hG0x","preact":"sSEx"}],"e8Zs":[function(require,module,exports) {
var t,r;function e(){return(e=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var e=arguments[r];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t}).apply(this,arguments)}function n(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i(t,r){t.prototype=Object.create(r.prototype),t.prototype.constructor=t,o(t,r)}function o(t,r){return(o=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t})(t,r)}var s=require("@uppy/core"),a=s.Plugin,p=require("preact"),u=p.h;module.exports=(r=t=function(t){function r(r,i){var o;(o=t.call(this,r,i)||this).id=o.opts.id||"ProgressBar",o.title="Progress Bar",o.type="progressindicator";return o.opts=e({},{target:"body",replaceTargetContent:!1,fixed:!1,hideAfterFinish:!0},i),o.render=o.render.bind(n(o)),o}i(r,t);var o=r.prototype;return o.render=function(t){var r=t.totalProgress||0,e=(0===r||100===r)&&this.opts.hideAfterFinish;return u("div",{className:"uppy uppy-ProgressBar",style:{position:this.opts.fixed?"fixed":"initial"},"aria-hidden":e},u("div",{className:"uppy-ProgressBar-inner",style:{width:r+"%"}}),u("div",{className:"uppy-ProgressBar-percentage"},r))},o.install=function(){var t=this.opts.target;t&&this.mount(t,this)},o.uninstall=function(){this.unmount()},r}(a),t.VERSION="1.3.27",r);
},{"@uppy/core":"PDAA","preact":"sSEx"}],"GHYE":[function(require,module,exports) {
var e,r;function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o(e,r){e.prototype=Object.create(r.prototype),e.prototype.constructor=e,n(e,r)}function n(e,r){return(n=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(e,r)}var t=require("@uppy/core"),s=t.Plugin,p=require("@uppy/companion-client"),u=p.Provider,l=require("@uppy/provider-views"),a=l.ProviderViews,d=require("preact"),c=d.h;module.exports=(r=e=function(e){function r(r,o){var n;return(n=e.call(this,r,o)||this).id=n.opts.id||"Dropbox",u.initPlugin(i(n),o),n.title=n.opts.title||"Dropbox",n.icon=function(){return c("svg",{"aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32"},c("g",{fill:"none",fillRule:"evenodd"},c("rect",{className:"uppy-ProviderIconBg",fill:"#0D2481",width:"32",height:"32",rx:"16"}),c("path",{d:"M11 8l5 3.185-5 3.186-5-3.186L11 8zm10 0l5 3.185-5 3.186-5-3.186L21 8zM6 17.556l5-3.185 5 3.185-5 3.186-5-3.186zm15-3.185l5 3.185-5 3.186-5-3.186 5-3.185zm-10 7.432l5-3.185 5 3.185-5 3.186-5-3.186z",fill:"#FFF",fillRule:"nonzero"})))},n.provider=new u(r,{companionUrl:n.opts.companionUrl,companionHeaders:n.opts.companionHeaders||n.opts.serverHeaders,companionKeysParams:n.opts.companionKeysParams,companionCookiesRule:n.opts.companionCookiesRule,provider:"dropbox",pluginId:n.id}),n.onFirstRender=n.onFirstRender.bind(i(n)),n.render=n.render.bind(i(n)),n}o(r,e);var n=r.prototype;return n.install=function(){this.view=new a(this,{provider:this.provider});var e=this.opts.target;e&&this.mount(e,this)},n.uninstall=function(){this.view.tearDown(),this.unmount()},n.onFirstRender=function(){return Promise.all([this.provider.fetchPreAuthToken(),this.view.getFolder()])},n.render=function(e){return this.view.render(e)},r}(s),e.VERSION="1.4.26",r);
},{"@uppy/core":"PDAA","@uppy/companion-client":"MaVI","@uppy/provider-views":"kLTu","preact":"sSEx"}],"q3wJ":[function(require,module,exports) {
function t(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,o(t,e)}function o(t,e){return(o=Object.setPrototypeOf||function(t,o){return t.__proto__=o,t})(t,e)}var e=require("@uppy/provider-views"),r=e.ProviderViews;module.exports=function(o){function e(){return o.apply(this,arguments)||this}return t(e,o),e.prototype.toggleCheckbox=function(t,e){t.stopPropagation(),t.preventDefault(),e.custom.isTeamDrive||e.custom.isSharedDrive||o.prototype.toggleCheckbox.call(this,t,e)},e}(r);
},{"@uppy/provider-views":"kLTu"}],"hbRV":[function(require,module,exports) {
var e,r;function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function t(e,r){e.prototype=Object.create(r.prototype),e.prototype.constructor=e,o(e,r)}function o(e,r){return(o=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(e,r)}var n=require("@uppy/core"),s=n.Plugin,l=require("@uppy/companion-client"),p=l.Provider,u=require("./DriveProviderViews"),a=require("preact"),c=a.h;module.exports=(r=e=function(e){function r(r,t){var o;return(o=e.call(this,r,t)||this).id=o.opts.id||"GoogleDrive",o.title=o.opts.title||"Google Drive",p.initPlugin(i(o),t),o.title=o.opts.title||"Google Drive",o.icon=function(){return c("svg",{"aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32"},c("g",{fill:"none",fillRule:"evenodd"},c("rect",{className:"uppy-ProviderIconBg",fill:"#4285F4",width:"32",height:"32",rx:"16"}),c("path",{d:"M10.324 23.3l3-5.1H25l-3 5.1H10.324zM13 18.2l-3 5.1-3-5.1 5.839-9.924 2.999 5.1L13 18.2zm11.838-.276h-6L13 8h6l5.84 9.924h-.002z",fill:"#FFF"})))},o.provider=new p(r,{companionUrl:o.opts.companionUrl,companionHeaders:o.opts.companionHeaders||o.opts.serverHeaders,companionKeysParams:o.opts.companionKeysParams,companionCookiesRule:o.opts.companionCookiesRule,provider:"drive",pluginId:o.id}),o.onFirstRender=o.onFirstRender.bind(i(o)),o.render=o.render.bind(i(o)),o}t(r,e);var o=r.prototype;return o.install=function(){this.view=new u(this,{provider:this.provider});var e=this.opts.target;e&&this.mount(e,this)},o.uninstall=function(){this.view.tearDown(),this.unmount()},o.onFirstRender=function(){return Promise.all([this.provider.fetchPreAuthToken(),this.view.getFolder("root","/")])},o.render=function(e){return this.view.render(e)},r}(s),e.VERSION="1.6.0",r);
},{"@uppy/core":"PDAA","@uppy/companion-client":"MaVI","./DriveProviderViews":"q3wJ","preact":"sSEx"}],"a3AZ":[function(require,module,exports) {
var e,r;function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function t(e,r){e.prototype=Object.create(r.prototype),e.prototype.constructor=e,n(e,r)}function n(e,r){return(n=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(e,r)}var o=require("@uppy/core"),s=o.Plugin,a=require("@uppy/companion-client"),c=a.Provider,p=require("@uppy/provider-views"),u=p.ProviderViews,d=require("preact"),l=d.h;module.exports=(r=e=function(e){function r(r,t){var n;return(n=e.call(this,r,t)||this).id=n.opts.id||"Instagram",c.initPlugin(i(n),t),n.title=n.opts.title||"Instagram",n.icon=function(){return l("svg",{"aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32"},l("g",{fill:"none",fillRule:"evenodd"},l("rect",{className:"uppy-ProviderIconBg",fill:"#E1306C",width:"32",height:"32",rx:"16"}),l("path",{d:"M16 8.622c2.403 0 2.688.009 3.637.052.877.04 1.354.187 1.67.31.392.144.745.374 1.036.673.299.29.529.644.673 1.035.123.317.27.794.31 1.671.043.95.052 1.234.052 3.637s-.009 2.688-.052 3.637c-.04.877-.187 1.354-.31 1.671a2.98 2.98 0 0 1-1.708 1.708c-.317.123-.794.27-1.671.31-.95.043-1.234.053-3.637.053s-2.688-.01-3.637-.053c-.877-.04-1.354-.187-1.671-.31a2.788 2.788 0 0 1-1.035-.673 2.788 2.788 0 0 1-.673-1.035c-.123-.317-.27-.794-.31-1.671-.043-.949-.052-1.234-.052-3.637s.009-2.688.052-3.637c.04-.877.187-1.354.31-1.67.144-.392.374-.745.673-1.036.29-.299.644-.529 1.035-.673.317-.123.794-.27 1.671-.31.95-.043 1.234-.052 3.637-.052zM16 7c-2.444 0-2.75.01-3.71.054-.959.044-1.613.196-2.185.419-.6.225-1.145.58-1.594 1.038-.458.45-.813.993-1.039 1.594-.222.572-.374 1.226-.418 2.184C7.01 13.25 7 13.556 7 16s.01 2.75.054 3.71c.044.959.196 1.613.419 2.185.226.6.58 1.145 1.038 1.594.45.458.993.813 1.594 1.038.572.223 1.227.375 2.184.419.96.044 1.267.054 3.711.054s2.75-.01 3.71-.054c.959-.044 1.613-.196 2.185-.419a4.602 4.602 0 0 0 2.632-2.632c.223-.572.375-1.226.419-2.184.044-.96.054-1.267.054-3.711s-.01-2.75-.054-3.71c-.044-.959-.196-1.613-.419-2.185A4.412 4.412 0 0 0 23.49 8.51a4.412 4.412 0 0 0-1.594-1.039c-.572-.222-1.226-.374-2.184-.418C18.75 7.01 18.444 7 16 7zm0 4.5a4.5 4.5 0 1 0 0 9 4.5 4.5 0 0 0 0-9zm0 7.421a2.921 2.921 0 1 1 0-5.842 2.921 2.921 0 0 1 0 5.842zm4.875-6.671a1.125 1.125 0 1 1 0-2.25 1.125 1.125 0 0 1 0 2.25z",fill:"#FFF"})))},n.provider=new c(r,{companionUrl:n.opts.companionUrl,companionHeaders:n.opts.companionHeaders||n.opts.serverHeaders,companionKeysParams:n.opts.companionKeysParams,companionCookiesRule:n.opts.companionCookiesRule,provider:"instagram",pluginId:n.id}),n.onFirstRender=n.onFirstRender.bind(i(n)),n.render=n.render.bind(i(n)),n}t(r,e);var n=r.prototype;return n.install=function(){this.view=new u(this,{provider:this.provider,viewType:"grid",showTitles:!1,showFilter:!1,showBreadcrumbs:!1});var e=this.opts.target;e&&this.mount(e,this)},n.uninstall=function(){this.view.tearDown(),this.unmount()},n.onFirstRender=function(){return Promise.all([this.provider.fetchPreAuthToken(),this.view.getFolder("recent")])},n.render=function(e){return this.view.render(e)},r}(s),e.VERSION="1.4.26",r);
},{"@uppy/core":"PDAA","@uppy/companion-client":"MaVI","@uppy/provider-views":"kLTu","preact":"sSEx"}],"TVq1":[function(require,module,exports) {
var e,r;function t(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(e,r){e.prototype=Object.create(r.prototype),e.prototype.constructor=e,n(e,r)}function n(e,r){return(n=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(e,r)}var o=require("@uppy/core"),s=o.Plugin,c=require("@uppy/companion-client"),u=c.Provider,p=require("@uppy/provider-views"),l=p.ProviderViews,d=require("preact"),a=d.h;module.exports=(r=e=function(e){function r(r,i){var n;return(n=e.call(this,r,i)||this).id=n.opts.id||"Box",u.initPlugin(t(n),i),n.title=n.opts.title||"Box",n.icon=function(){return a("svg",{"aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32"},a("g",{fill:"none",fillRule:"evenodd"},a("rect",{className:"uppy-ProviderIconBg",fill:"#0061D5",width:"32",height:"32",rx:"16"}),a("g",{fill:"#fff",fillRule:"nonzero"},a("path",{d:"m16.4 13.5c-1.6 0-3 0.9-3.7 2.2-0.7-1.3-2.1-2.2-3.7-2.2-1 0-1.8 0.3-2.5 0.8v-3.6c-0.1-0.3-0.5-0.7-1-0.7s-0.8 0.4-0.8 0.8v7c0 2.3 1.9 4.2 4.2 4.2 1.6 0 3-0.9 3.7-2.2 0.7 1.3 2.1 2.2 3.7 2.2 2.3 0 4.2-1.9 4.2-4.2 0.1-2.4-1.8-4.3-4.1-4.3m-7.5 6.8c-1.4 0-2.5-1.1-2.5-2.5s1.1-2.5 2.5-2.5 2.5 1.1 2.5 2.5-1.1 2.5-2.5 2.5m7.5 0c-1.4 0-2.5-1.1-2.5-2.5s1.1-2.5 2.5-2.5 2.5 1.1 2.5 2.5-1.1 2.5-2.5 2.5"}),a("path",{d:"m27.2 20.6l-2.3-2.8 2.3-2.8c0.3-0.4 0.2-0.9-0.2-1.2s-1-0.2-1.3 0.2l-2 2.4-2-2.4c-0.3-0.4-0.9-0.4-1.3-0.2-0.4 0.3-0.5 0.8-0.2 1.2l2.3 2.8-2.3 2.8c-0.3 0.4-0.2 0.9 0.2 1.2s1 0.2 1.3-0.2l2-2.4 2 2.4c0.3 0.4 0.9 0.4 1.3 0.2 0.4-0.3 0.4-0.8 0.2-1.2"}))))},n.provider=new u(r,{companionUrl:n.opts.companionUrl,companionHeaders:n.opts.companionHeaders||n.opts.serverHeaders,provider:"box",pluginId:n.id}),n.onFirstRender=n.onFirstRender.bind(t(n)),n.render=n.render.bind(t(n)),n}i(r,e);var n=r.prototype;return n.install=function(){this.view=new l(this,{provider:this.provider});var e=this.opts.target;e&&this.mount(e,this)},n.uninstall=function(){this.view.tearDown(),this.unmount()},n.onFirstRender=function(){return this.view.getFolder()},n.render=function(e){return this.view.render(e)},r}(s),e.VERSION="0.3.8",r);
},{"@uppy/core":"PDAA","@uppy/companion-client":"MaVI","@uppy/provider-views":"kLTu","preact":"sSEx"}],"KR0e":[function(require,module,exports) {
var t,r;function o(){return(o=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var o=arguments[r];for(var e in o)Object.prototype.hasOwnProperty.call(o,e)&&(t[e]=o[e])}return t}).apply(this,arguments)}function e(t,r){t.prototype=Object.create(r.prototype),t.prototype.constructor=t,n(t,r)}function n(t,r){return(n=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t})(t,r)}var i=require("@uppy/core"),p=i.Plugin,s=require("preact"),a=s.h,u=require("@uppy/companion-client"),c=u.SearchProvider,h=require("@uppy/provider-views"),l=h.SearchProviderViews;module.exports=(r=t=function(t){function r(r,e){var n;(n=t.call(this,r,e)||this).id=n.opts.id||"Unsplash",n.title=n.opts.title||"Unsplash",n.type="acquirer",n.icon=function(){return a("svg",{viewBox:"0 0 32 32",height:"32",width:"32","aria-hidden":"true"},a("path",{d:"M46.575 10.883v-9h12v9zm12 5h10v18h-32v-18h10v9h12z",fill:"#fff"}),a("rect",{className:"uppy-ProviderIconBg",width:"32",height:"32",rx:"16"}),a("path",{d:"M13 12.5V8h6v4.5zm6 2.5h5v9H8v-9h5v4.5h6z",fill:"#fff"}))};if(n.opts=o({},{},e),n.hostname=n.opts.companionUrl,!n.hostname)throw new Error("Companion hostname is required, please consult https://uppy.io/docs/companion");return n.provider=new c(r,{companionUrl:n.opts.companionUrl,companionHeaders:n.opts.companionHeaders,companionCookiesRule:n.opts.companionCookiesRule,provider:"unsplash",pluginId:n.id}),n}e(r,t);var n=r.prototype;return n.install=function(){this.view=new l(this,{provider:this.provider});var t=this.opts.target;t&&this.mount(t,this)},n.onFirstRender=function(){},n.render=function(t){return this.view.render(t)},n.uninstall=function(){this.unmount()},r}(p),t.VERSION="0.1.10",r);
},{"@uppy/core":"PDAA","preact":"sSEx","@uppy/companion-client":"MaVI","@uppy/provider-views":"kLTu"}],"xLOo":[function(require,module,exports) {
function t(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function e(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,n(t,e)}function n(t,e){return(n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var r=require("preact"),p=r.h,i=r.Component,o=function(n){function r(e){var r;return(r=n.call(this,e)||this).handleKeyPress=r.handleKeyPress.bind(t(r)),r.handleClick=r.handleClick.bind(t(r)),r}e(r,n);var i=r.prototype;return i.componentDidMount=function(){this.input.value=""},i.handleKeyPress=function(t){13===t.keyCode&&this.props.addFile(this.input.value)},i.handleClick=function(){this.props.addFile(this.input.value)},i.render=function(){var t=this;return p("div",{className:"uppy-Url"},p("input",{className:"uppy-u-reset uppy-c-textInput uppy-Url-input",type:"text","aria-label":this.props.i18n("enterUrlToImport"),placeholder:this.props.i18n("enterUrlToImport"),onKeyUp:this.handleKeyPress,ref:function(e){t.input=e},"data-uppy-super-focusable":!0}),p("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Url-importButton",type:"button",onClick:this.handleClick},this.props.i18n("import")))},r}(i);module.exports=o;
},{"preact":"sSEx"}],"XouO":[function(require,module,exports) {
var t=require("@uppy/utils/lib/toArray");module.exports=function(r,e,i){var n,u=t(r.items);switch(e){case"paste":if(u.some(function(t){return"file"===t.kind}))return;n=u.filter(function(t){return"string"===t.kind&&"text/plain"===t.type});break;case"drop":n=u.filter(function(t){return"string"===t.kind&&"text/uri-list"===t.type});break;default:throw new Error("isDropOrPaste must be either 'drop' or 'paste', but it's "+e)}n.forEach(function(t){t.getAsString(function(t){return i(t)})})};
},{"@uppy/utils/lib/toArray":"d6Wp"}],"FH5p":[function(require,module,exports) {
var t,e;function r(){return(r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function n(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function o(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,i(t,e)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var a=require("@uppy/core"),l=a.Plugin,s=require("@uppy/utils/lib/Translator"),p=require("preact"),c=p.h,u=require("@uppy/companion-client"),d=u.RequestClient,h=require("./UrlUI.js"),f=require("./utils/forEachDroppedOrPastedUrl");function m(){return c("svg",{"aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32"},c("g",{fill:"none",fillRule:"evenodd"},c("rect",{className:"uppy-ProviderIconBg",fill:"#FF753E",width:"32",height:"32",rx:"16"}),c("path",{d:"M22.788 15.389l-2.199 2.19a3.184 3.184 0 0 1-.513.437c-.806.584-1.686.876-2.638.876a4.378 4.378 0 0 1-3.519-1.752c-.22-.292-.146-.802.147-1.021.293-.22.806-.146 1.026.146.953 1.313 2.785 1.532 4.105.583a.571.571 0 0 0 .293-.292l2.199-2.189c1.1-1.167 1.1-2.992-.073-4.086a2.976 2.976 0 0 0-4.105 0l-1.246 1.24a.71.71 0 0 1-1.026 0 .703.703 0 0 1 0-1.022l1.246-1.24a4.305 4.305 0 0 1 6.083 0c1.833 1.605 1.906 4.451.22 6.13zm-7.183 5.035l-1.246 1.24a2.976 2.976 0 0 1-4.105 0c-1.172-1.094-1.172-2.991-.073-4.086l2.2-2.19.292-.291c.66-.438 1.393-.657 2.2-.584.805.146 1.465.51 1.905 1.168.22.292.733.365 1.026.146.293-.22.367-.73.147-1.022-.733-.949-1.76-1.532-2.859-1.678-1.1-.22-2.272.073-3.225.802l-.44.438-2.199 2.19c-1.686 1.75-1.612 4.524.074 6.202.88.803 1.979 1.241 3.078 1.241 1.1 0 2.199-.438 3.079-1.24l1.246-1.241a.703.703 0 0 0 0-1.022c-.294-.292-.807-.365-1.1-.073z",fill:"#FFF",fillRule:"nonzero"})))}module.exports=(e=t=function(t){function e(e,o){var i;(i=t.call(this,e,o)||this).id=i.opts.id||"Url",i.title=i.opts.title||"Link",i.type="acquirer",i.icon=function(){return c(m,null)},i.defaultLocale={strings:{import:"Import",enterUrlToImport:"Enter URL to import a file",failedToFetch:"Companion failed to fetch this URL, please make sure it’s correct",enterCorrectUrl:"Incorrect URL: Please make sure you are entering a direct link to a file"}};if(i.opts=r({},{},o),i.i18nInit(),i.hostname=i.opts.companionUrl,!i.hostname)throw new Error("Companion hostname is required, please consult https://uppy.io/docs/companion");return i.getMeta=i.getMeta.bind(n(i)),i.addFile=i.addFile.bind(n(i)),i.handleRootDrop=i.handleRootDrop.bind(n(i)),i.handleRootPaste=i.handleRootPaste.bind(n(i)),i.client=new d(e,{companionUrl:i.opts.companionUrl,companionHeaders:i.opts.companionHeaders||i.opts.serverHeaders}),i}o(e,t);var i=e.prototype;return i.setOptions=function(e){t.prototype.setOptions.call(this,e),this.i18nInit()},i.i18nInit=function(){this.translator=new s([this.defaultLocale,this.uppy.locale,this.opts.locale]),this.i18n=this.translator.translate.bind(this.translator),this.i18nArray=this.translator.translateArray.bind(this.translator),this.setPluginState()},i.getFileNameFromUrl=function(t){return t.substring(t.lastIndexOf("/")+1)},i.checkIfCorrectURL=function(t){if(!t)return!1;var e=t.match(/^([a-z0-9]+):\/\//)[1];return"http"===e||"https"===e},i.addProtocolToURL=function(t){return/^[a-z0-9]+:\/\//.test(t)?t:"http://"+t},i.getMeta=function(t){var e=this;return this.client.post("url/meta",{url:t}).then(function(t){if(t.error)throw e.uppy.log("[URL] Error:"),e.uppy.log(t.error),new Error("Failed to fetch the file");return t})},i.addFile=function(t){var e=this;return t=this.addProtocolToURL(t),this.checkIfCorrectURL(t)?this.getMeta(t).then(function(r){return{source:e.id,name:e.getFileNameFromUrl(t),type:r.type,data:{size:r.size},isRemote:!0,body:{url:t},remote:{companionUrl:e.opts.companionUrl,url:e.hostname+"/url/get",body:{fileId:t,url:t},providerOptions:e.client.opts}}}).then(function(t){e.uppy.log("[Url] Adding remote file");try{e.uppy.addFile(t)}catch(r){r.isRestriction||e.uppy.log(r)}}).catch(function(t){e.uppy.log(t),e.uppy.info({message:e.i18n("failedToFetch"),details:t},"error",4e3)}):(this.uppy.log("[URL] Incorrect URL entered: "+t),void this.uppy.info(this.i18n("enterCorrectUrl"),"error",4e3))},i.handleRootDrop=function(t){var e=this;f(t.dataTransfer,"drop",function(t){e.uppy.log("[URL] Adding file from dropped url: "+t),e.addFile(t)})},i.handleRootPaste=function(t){var e=this;f(t.clipboardData,"paste",function(t){e.uppy.log("[URL] Adding file from pasted url: "+t),e.addFile(t)})},i.render=function(t){return c(h,{i18n:this.i18n,addFile:this.addFile})},i.install=function(){var t=this.opts.target;t&&this.mount(t,this)},i.uninstall=function(){this.unmount()},e}(l),t.VERSION="1.5.20",e);
},{"@uppy/core":"PDAA","@uppy/utils/lib/Translator":"hG0x","preact":"sSEx","@uppy/companion-client":"MaVI","./UrlUI.js":"xLOo","./utils/forEachDroppedOrPastedUrl":"XouO"}],"aTts":[function(require,module,exports) {
var e={"audio/mp3":"mp3","audio/mp4":"mp4","audio/ogg":"ogg","audio/webm":"webm","image/gif":"gif","image/heic":"heic","image/heif":"heif","image/jpeg":"jpg","image/png":"png","image/svg+xml":"svg","video/mp4":"mp4","video/ogg":"ogv","video/quicktime":"mov","video/webm":"webm","video/x-matroska":"mkv","video/x-msvideo":"avi"};module.exports=function(i){return i=i.replace(/;.*$/,""),e[i]||null};
},{}],"PbAj":[function(require,module,exports) {
var o=require("./dataURItoBlob");module.exports=function(t,e,r){return t.toBlob?new Promise(function(o){t.toBlob(o,e,r)}):Promise.resolve().then(function(){return o(t.toDataURL(e,r),{})})};
},{"./dataURItoBlob":"Q78z"}],"QXKo":[function(require,module,exports) {
module.exports=function(){return"function"==typeof MediaRecorder&&!!MediaRecorder.prototype&&"function"==typeof MediaRecorder.prototype.start};
},{}],"odTw":[function(require,module,exports) {
var e=require("preact"),c=e.h;module.exports=function(e){return c("svg",{"aria-hidden":"true",focusable:"false",fill:"#0097DC",width:"66",height:"55",viewBox:"0 0 66 55"},c("path",{d:"M57.3 8.433c4.59 0 8.1 3.51 8.1 8.1v29.7c0 4.59-3.51 8.1-8.1 8.1H8.7c-4.59 0-8.1-3.51-8.1-8.1v-29.7c0-4.59 3.51-8.1 8.1-8.1h9.45l4.59-7.02c.54-.54 1.35-1.08 2.16-1.08h16.2c.81 0 1.62.54 2.16 1.08l4.59 7.02h9.45zM33 14.64c-8.62 0-15.393 6.773-15.393 15.393 0 8.62 6.773 15.393 15.393 15.393 8.62 0 15.393-6.773 15.393-15.393 0-8.62-6.773-15.393-15.393-15.393zM33 40c-5.648 0-9.966-4.319-9.966-9.967 0-5.647 4.318-9.966 9.966-9.966s9.966 4.319 9.966 9.966C42.966 35.681 38.648 40 33 40z",fillRule:"evenodd"}))};
},{"preact":"sSEx"}],"H0vK":[function(require,module,exports) {
var e=require("preact"),t=e.h,u=require("./CameraIcon");module.exports=function(e){var a=e.onSnapshot,r=e.i18n;return t("button",{className:"uppy-u-reset uppy-c-btn uppy-Webcam-button uppy-Webcam-button--picture",type:"button",title:r("takePicture"),"aria-label":r("takePicture"),onClick:a,"data-uppy-super-focusable":!0},u())};
},{"preact":"sSEx","./CameraIcon":"odTw"}],"PJNT":[function(require,module,exports) {
var e=require("preact"),t=e.h;module.exports=function(e){var a=e.recording,o=e.onStartRecording,c=e.onStopRecording,u=e.i18n;return a?t("button",{className:"uppy-u-reset uppy-c-btn uppy-Webcam-button uppy-Webcam-button--video",type:"button",title:u("stopRecording"),"aria-label":u("stopRecording"),onClick:c,"data-uppy-super-focusable":!0},t("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"100",height:"100",viewBox:"0 0 100 100"},t("rect",{x:"15",y:"15",width:"70",height:"70"}))):t("button",{className:"uppy-u-reset uppy-c-btn uppy-Webcam-button uppy-Webcam-button--video",type:"button",title:u("startRecording"),"aria-label":u("startRecording"),onClick:o,"data-uppy-super-focusable":!0},t("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"100",height:"100",viewBox:"0 0 100 100"},t("circle",{cx:"50",cy:"50",r:"40"})))};
},{"preact":"sSEx"}],"R62h":[function(require,module,exports) {
module.exports=function(t){return Math.floor(t/60)+":"+String(t%60).padStart(2,0)};
},{}],"h0yl":[function(require,module,exports) {
var r=require("preact"),e=r.h,n=require("./formatSeconds");module.exports=function(r){var o=r.recordingLengthSeconds,a=r.i18n,i=n(o);return e("span",{"aria-label":a("recordingLength",{recording_length:i})},i)};
},{"preact":"sSEx","./formatSeconds":"R62h"}],"FUms":[function(require,module,exports) {
var e=require("preact"),c=e.h;module.exports=function(e){var r=e.currentDeviceId,u=e.videoSources,o=e.onChangeVideoSource;return c("div",{className:"uppy-Webcam-videoSource"},c("select",{className:"uppy-u-reset uppy-Webcam-videoSource-select",onChange:function(e){o(e.target.value)}},u.map(function(e){return c("option",{key:e.deviceId,value:e.deviceId,selected:e.deviceId===r},e.label)})))};
},{"preact":"sSEx"}],"bUid":[function(require,module,exports) {
function o(o,r){o.prototype=Object.create(r.prototype),o.prototype.constructor=o,e(o,r)}function e(o,r){return(e=Object.setPrototypeOf||function(o,e){return o.__proto__=e,o})(o,r)}var r=require("preact"),t=r.h,p=r.Component,s=require("./SnapshotButton"),i=require("./RecordButton"),n=require("./RecordingLength"),u=require("./VideoSourceSelect");function c(o,e){return-1!==o.indexOf(e)}var a=function(e){function r(){return e.apply(this,arguments)||this}o(r,e);var p=r.prototype;return p.componentDidMount=function(){this.props.onFocus()},p.componentWillUnmount=function(){this.props.onStop()},p.render=function(){var o=this.props.supportsRecording&&(c(this.props.modes,"video-only")||c(this.props.modes,"audio-only")||c(this.props.modes,"video-audio")),e=c(this.props.modes,"picture"),r=this.props.supportsRecording&&this.props.showRecordingLength,p=this.props.showVideoSourceDropdown&&this.props.videoSources&&this.props.videoSources.length>1;return t("div",{className:"uppy uppy-Webcam-container"},t("div",{className:"uppy-Webcam-videoContainer"},t("video",{className:"uppy-Webcam-video  "+(this.props.mirror?"uppy-Webcam-video--mirrored":""),autoPlay:!0,muted:!0,playsinline:!0,srcObject:this.props.src||""})),t("div",{className:"uppy-Webcam-footer"},t("div",{className:"uppy-Webcam-videoSourceContainer"},p?u(this.props):null),t("div",{className:"uppy-Webcam-buttonContainer"},e?s(this.props):null," ",o?i(this.props):null),t("div",{className:"uppy-Webcam-recordingLength"},r?n(this.props):null)))},r}(p);module.exports=a;
},{"preact":"sSEx","./SnapshotButton":"H0vK","./RecordButton":"PJNT","./RecordingLength":"h0yl","./VideoSourceSelect":"FUms"}],"kOTa":[function(require,module,exports) {
var e=require("preact"),a=e.h;module.exports=function(e){return a("div",{className:"uppy-Webcam-permissons"},a("div",{className:"uppy-Webcam-permissonsIcon"},e.icon()),a("h1",{className:"uppy-Webcam-title"},e.hasCamera?e.i18n("allowAccessTitle"):e.i18n("noCameraTitle")),a("p",null,e.hasCamera?e.i18n("allowAccessDescription"):e.i18n("noCameraDescription")))};
},{"preact":"sSEx"}],"Q7Cm":[function(require,module,exports) {
var e,t;function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function n(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,o(e,t)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var s=require("preact"),a=s.h,c=require("@uppy/core"),d=c.Plugin,u=require("@uppy/utils/lib/Translator"),h=require("@uppy/utils/lib/getFileTypeExtension"),p=require("@uppy/utils/lib/mimeTypes"),l=require("@uppy/utils/lib/canvasToBlob"),g=require("./supportsMediaRecorder"),m=require("./CameraIcon"),f=require("./CameraScreen"),v=require("./PermissionsScreen");function y(e){return"."===e[0]?p[e.slice(1)]:e}function S(e){return/^video\/[^*]+$/.test(e)}function w(e){return/^image\/[^*]+$/.test(e)}function _(){if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)return navigator.mediaDevices;var e=navigator.mozGetUserMedia||navigator.webkitGetUserMedia;return e?{getUserMedia:function(t){return new Promise(function(i,r){e.call(navigator,t,i,r)})}}:null}module.exports=(t=e=function(e){function t(t,n){var o;(o=e.call(this,t,n)||this).mediaDevices=_(),o.supportsUserMedia=!!o.mediaDevices,o.protocol=location.protocol.match(/https/i)?"https":"http",o.id=o.opts.id||"Webcam",o.title=o.opts.title||"Camera",o.type="acquirer",o.icon=function(){return a("svg",{"aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32"},a("g",{fill:"none",fillRule:"evenodd"},a("rect",{className:"uppy-ProviderIconBg",fill:"#03BFEF",width:"32",height:"32",rx:"16"}),a("path",{d:"M22 11c1.133 0 2 .867 2 2v7.333c0 1.134-.867 2-2 2H10c-1.133 0-2-.866-2-2V13c0-1.133.867-2 2-2h2.333l1.134-1.733C13.6 9.133 13.8 9 14 9h4c.2 0 .4.133.533.267L19.667 11H22zm-6 1.533a3.764 3.764 0 0 0-3.8 3.8c0 2.129 1.672 3.801 3.8 3.801s3.8-1.672 3.8-3.8c0-2.13-1.672-3.801-3.8-3.801zm0 6.261c-1.395 0-2.46-1.066-2.46-2.46 0-1.395 1.065-2.461 2.46-2.461s2.46 1.066 2.46 2.46c0 1.395-1.065 2.461-2.46 2.461z",fill:"#FFF",fillRule:"nonzero"})))},o.defaultLocale={strings:{smile:"Smile!",takePicture:"Take a picture",startRecording:"Begin video recording",stopRecording:"Stop video recording",allowAccessTitle:"Please allow access to your camera",allowAccessDescription:"In order to take pictures or record video with your camera, please allow camera access for this site.",noCameraTitle:"Camera Not Available",noCameraDescription:"In order to take pictures or record video, please connect a camera device",recordingStoppedMaxSize:"Recording stopped because the file size is about to exceed the limit",recordingLength:"Recording length %{recording_length}"}};var s={onBeforeSnapshot:function(){return Promise.resolve()},countdown:!1,modes:["video-audio","video-only","audio-only","picture"],mirror:!0,showVideoSourceDropdown:!1,facingMode:"user",preferredImageMimeType:null,preferredVideoMimeType:null,showRecordingLength:!1};return o.opts=i({},s,n),o.i18nInit(),o.install=o.install.bind(r(o)),o.setPluginState=o.setPluginState.bind(r(o)),o.render=o.render.bind(r(o)),o._start=o._start.bind(r(o)),o._stop=o._stop.bind(r(o)),o._takeSnapshot=o._takeSnapshot.bind(r(o)),o._startRecording=o._startRecording.bind(r(o)),o._stopRecording=o._stopRecording.bind(r(o)),o._oneTwoThreeSmile=o._oneTwoThreeSmile.bind(r(o)),o._focus=o._focus.bind(r(o)),o._changeVideoSource=o._changeVideoSource.bind(r(o)),o.webcamActive=!1,o.opts.countdown&&(o.opts.onBeforeSnapshot=o._oneTwoThreeSmile),o.setPluginState({hasCamera:!1,cameraReady:!1,cameraError:null,recordingLengthSeconds:0,videoSources:[],currentDeviceId:null}),o}n(t,e);var o=t.prototype;return o.setOptions=function(t){e.prototype.setOptions.call(this,i({},t,{videoConstraints:i({},this.opts.videoConstraints,null==t?void 0:t.videoConstraints)})),this.i18nInit()},o.i18nInit=function(){this.translator=new u([this.defaultLocale,this.uppy.locale,this.opts.locale]),this.i18n=this.translator.translate.bind(this.translator),this.i18nArray=this.translator.translateArray.bind(this.translator),this.setPluginState()},o.hasCameraCheck=function(){return this.mediaDevices?this.mediaDevices.enumerateDevices().then(function(e){return e.some(function(e){return"videoinput"===e.kind})}):Promise.resolve(!1)},o.isAudioOnly=function(){return 1===this.opts.modes.length&&"audio-only"===this.opts.modes[0]},o.getConstraints=function(e){var t;void 0===e&&(e=null);var r=-1!==this.opts.modes.indexOf("video-audio")||-1!==this.opts.modes.indexOf("audio-only"),n=!this.isAudioOnly()&&(-1!==this.opts.modes.indexOf("video-audio")||-1!==this.opts.modes.indexOf("video-only")||-1!==this.opts.modes.indexOf("picture")),o=i({},null!=(t=this.opts.videoConstraints)?t:{facingMode:this.opts.facingMode},e?{deviceId:e,facingMode:null}:{});return{audio:r,video:!!n&&o}},o._start=function(e){var t=this;if(void 0===e&&(e=null),!this.supportsUserMedia)return Promise.reject(new Error("Webcam access not supported"));this.webcamActive=!0;var i=this.getConstraints(e&&e.deviceId?e.deviceId:null);this.hasCameraCheck().then(function(r){return t.setPluginState({hasCamera:r}),t.mediaDevices.getUserMedia(i).then(function(i){t.stream=i;var r=null,n=t.isAudioOnly()?i.getAudioTracks():i.getVideoTracks();e&&e.deviceId?n.forEach(function(t){t.getSettings().deviceId===e.deviceId&&(r=t.getSettings().deviceId)}):r=n[0].getSettings().deviceId,t.updateVideoSources(),t.setPluginState({currentDeviceId:r,cameraReady:!0})}).catch(function(e){t.setPluginState({cameraReady:!1,cameraError:e}),t.uppy.info(e.message,"error")})})},o._getMediaRecorderOptions=function(){var e={};if(MediaRecorder.isTypeSupported){var t=this.uppy.opts.restrictions,i=[];this.opts.preferredVideoMimeType?i=[this.opts.preferredVideoMimeType]:t.allowedFileTypes&&(i=t.allowedFileTypes.map(y).filter(S));var r=i.filter(function(e){return MediaRecorder.isTypeSupported(e)&&h(e)});r.length>0&&(e.mimeType=r[0])}return e},o._startRecording=function(){var e=this;this.recorder=new MediaRecorder(this.stream,this._getMediaRecorderOptions()),this.recordingChunks=[];var t=!1;this.recorder.addEventListener("dataavailable",function(i){e.recordingChunks.push(i.data);var r=e.uppy.opts.restrictions;if(e.recordingChunks.length>1&&null!=r.maxFileSize&&!t){var n=e.recordingChunks.reduce(function(e,t){return e+t.size},0),o=3*((n-e.recordingChunks[0].size)/(e.recordingChunks.length-1));n>Math.max(0,r.maxFileSize-o)&&(t=!0,e.uppy.info(e.i18n("recordingStoppedMaxSize"),"warning",4e3),e._stopRecording())}}),this.recorder.start(500),this.opts.showRecordingLength&&(this.recordingLengthTimer=setInterval(function(){var t=e.getPluginState().recordingLengthSeconds;e.setPluginState({recordingLengthSeconds:t+1})},1e3)),this.setPluginState({isRecording:!0})},o._stopRecording=function(){var e=this;return new Promise(function(t,i){e.recorder.addEventListener("stop",function(){t()}),e.recorder.stop(),e.opts.showRecordingLength&&(clearInterval(e.recordingLengthTimer),e.setPluginState({recordingLengthSeconds:0}))}).then(function(){return e.setPluginState({isRecording:!1}),e.getVideo()}).then(function(t){try{e.uppy.addFile(t)}catch(i){i.isRestriction||e.uppy.log(i)}}).then(function(){e.recordingChunks=null,e.recorder=null},function(t){throw e.recordingChunks=null,e.recorder=null,t})},o._stop=function(){this.stream&&(this.stream.getAudioTracks().forEach(function(e){e.stop()}),this.stream.getVideoTracks().forEach(function(e){e.stop()})),this.webcamActive=!1,this.stream=null},o._getVideoElement=function(){return this.el.querySelector(".uppy-Webcam-video")},o._oneTwoThreeSmile=function(){var e=this;return new Promise(function(t,i){var r=e.opts.countdown,n=setInterval(function(){if(!e.webcamActive)return clearInterval(n),e.captureInProgress=!1,i(new Error("Webcam is not active"));r>0?(e.uppy.info(r+"...","warning",800),r--):(clearInterval(n),e.uppy.info(e.i18n("smile"),"success",1500),setTimeout(function(){return t()},1500))},1e3)})},o._takeSnapshot=function(){var e=this;this.captureInProgress||(this.captureInProgress=!0,this.opts.onBeforeSnapshot().catch(function(t){var i="object"==typeof t?t.message:t;return e.uppy.info(i,"error",5e3),Promise.reject(new Error("onBeforeSnapshot: "+i))}).then(function(){return e._getImage()}).then(function(t){e.captureInProgress=!1;try{e.uppy.addFile(t)}catch(i){i.isRestriction||e.uppy.log(i)}},function(t){throw e.captureInProgress=!1,t}))},o._getImage=function(){var e=this,t=this._getVideoElement();if(!t)return Promise.reject(new Error("No video element found, likely due to the Webcam tab being closed."));var i=t.videoWidth,r=t.videoHeight,n=document.createElement("canvas");n.width=i,n.height=r,n.getContext("2d").drawImage(t,0,0);var o=this.uppy.opts.restrictions,s=[];this.opts.preferredImageMimeType?s=[this.opts.preferredImageMimeType]:o.allowedFileTypes&&(s=o.allowedFileTypes.map(y).filter(w));var a=s[0]||"image/jpeg",c=h(a)||"jpg",d="cam-"+Date.now()+"."+c;return l(n,a).then(function(t){return{source:e.id,name:d,data:new Blob([t],{type:a}),type:a}})},o.getVideo=function(){var e=this.recordingChunks[0].type,t=h(e);if(!t)return Promise.reject(new Error('Could not retrieve recording: Unsupported media type "'+e+'"'));var i="webcam-"+Date.now()+"."+t,r=new Blob(this.recordingChunks,{type:e}),n={source:this.id,name:i,data:new Blob([r],{type:e}),type:e};return Promise.resolve(n)},o._focus=function(){var e=this;this.opts.countdown&&setTimeout(function(){e.uppy.info(e.i18n("smile"),"success",1500)},1e3)},o._changeVideoSource=function(e){this._stop(),this._start({deviceId:e})},o.updateVideoSources=function(){var e=this;this.mediaDevices.enumerateDevices().then(function(t){e.setPluginState({videoSources:t.filter(function(e){return"videoinput"===e.kind})})})},o.render=function(){this.webcamActive||this._start();var e=this.getPluginState();return e.cameraReady&&e.hasCamera?a(f,i({},e,{onChangeVideoSource:this._changeVideoSource,onSnapshot:this._takeSnapshot,onStartRecording:this._startRecording,onStopRecording:this._stopRecording,onFocus:this._focus,onStop:this._stop,i18n:this.i18n,modes:this.opts.modes,showRecordingLength:this.opts.showRecordingLength,showVideoSourceDropdown:this.opts.showVideoSourceDropdown,supportsRecording:g(),recording:e.isRecording,mirror:this.opts.mirror,src:this.stream})):a(v,{icon:m,i18n:this.i18n,hasCamera:e.hasCamera})},o.install=function(){var e=this;this.setPluginState({cameraReady:!1,recordingLengthSeconds:0});var t=this.opts.target;t&&this.mount(t,this),this.mediaDevices&&(this.updateVideoSources(),this.mediaDevices.ondevicechange=function(t){if(e.updateVideoSources(),e.stream){var i=!0,r=e.getPluginState(),n=r.videoSources,o=r.currentDeviceId;n.forEach(function(e){o===e.deviceId&&(i=!1)}),i&&(e._stop(),e._start())}})},o.uninstall=function(){this.stream&&this._stop(),this.unmount()},t}(d),e.VERSION="1.8.8",t);
},{"preact":"sSEx","@uppy/core":"PDAA","@uppy/utils/lib/Translator":"hG0x","@uppy/utils/lib/getFileTypeExtension":"aTts","@uppy/utils/lib/mimeTypes":"R0tD","@uppy/utils/lib/canvasToBlob":"PbAj","./supportsMediaRecorder":"QXKo","./CameraIcon":"odTw","./CameraScreen":"bUid","./PermissionsScreen":"kOTa"}],"TZtm":[function(require,module,exports) {
var e=require("preact"),l=e.h;module.exports=function(){return l("svg",{"aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32"},l("g",{fill:"none",fillRule:"evenodd"},l("rect",{className:"uppy-ProviderIconBg",fill:"#2C3E50",width:"32",height:"32",rx:"16"}),l("path",{d:"M24.182 9H7.818C6.81 9 6 9.742 6 10.667v10c0 .916.81 1.666 1.818 1.666h4.546V24h7.272v-1.667h4.546c1 0 1.809-.75 1.809-1.666l.009-10C26 9.742 25.182 9 24.182 9zM24 21H8V11h16v10z",fill:"#FFF",fillRule:"nonzero"}),l("circle",{fill:"#FFF",cx:"16",cy:"16",r:"2"})))};
},{"preact":"sSEx"}],"EJzO":[function(require,module,exports) {
var t=require("preact"),e=t.h;module.exports=function(t){var p=t.recording,u=t.onStartRecording,a=t.onStopRecording,r=t.i18n;return p?e("button",{className:"uppy-u-reset uppy-c-btn uppy-ScreenCapture-button uppy-ScreenCapture-button--video uppy-ScreenCapture-button--stop-rec",type:"button",title:r("stopCapturing"),"aria-label":r("stopCapturing"),onClick:a,"data-uppy-super-focusable":!0},e("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"100",height:"100",viewBox:"0 0 100 100"},e("rect",{x:"15",y:"15",width:"70",height:"70"}))):e("button",{className:"uppy-u-reset uppy-c-btn uppy-ScreenCapture-button uppy-ScreenCapture-button--video",type:"button",title:r("startCapturing"),"aria-label":r("startCapturing"),onClick:u,"data-uppy-super-focusable":!0},e("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"100",height:"100",viewBox:"0 0 100 100"},e("circle",{cx:"50",cy:"50",r:"40"})))};
},{"preact":"sSEx"}],"vilm":[function(require,module,exports) {
var e=require("preact"),t=e.h;module.exports=function(e){var u=e.recording,r=e.recordedVideo,a=e.onSubmit,i=e.i18n;return r&&!u?t("button",{className:"uppy-u-reset uppy-c-btn uppy-ScreenCapture-button uppy-ScreenCapture-button--submit",type:"button",title:i("submitRecordedFile"),"aria-label":i("submitRecordedFile"),onClick:a,"data-uppy-super-focusable":!0},t("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"48",height:"48",viewBox:"0 0 48 48"},t("path",{d:"M0 0h48v48h-48z",fill:"none"}),t("path",{d:"M38.71 20.07c-1.36-6.88-7.43-12.07-14.71-12.07-5.78 0-10.79 3.28-13.3 8.07-6.01.65-10.7 5.74-10.7 11.93 0 6.63 5.37 12 12 12h26c5.52 0 10-4.48 10-10 0-5.28-4.11-9.56-9.29-9.93zm-10.71 5.93v8h-8v-8h-6l10-10 10 10h-6z"}))):null};
},{"preact":"sSEx"}],"cNhs":[function(require,module,exports) {
function t(){return(t=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t}).apply(this,arguments)}function e(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,i(t,e)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var r=require("preact"),n=r.h,o=r.Component,a=function(i){function r(t){var e;return(e=i.call(this,t)||this).state={elapsedTime:0},e.wrapperStyle={width:"100%",height:"100%",display:"flex"},e.overlayStyle={position:"absolute",width:"100%",height:"100%",background:"black",opacity:.7},e.infoContainerStyle={marginLeft:"auto",marginRight:"auto",marginTop:"auto",marginBottom:"auto",zIndex:1,color:"white"},e.infotextStyle={marginLeft:"auto",marginRight:"auto",marginBottom:"1rem",fontSize:"1.5rem"},e.timeStyle={display:"block",fontWeight:"bold",marginLeft:"auto",marginRight:"auto",fontSize:"3rem",fontFamily:"Courier New"},e}e(r,i);var o=r.prototype;return o.startTimer=function(){this.timerTick(),this.timerRunning=!0},o.resetTimer=function(){clearTimeout(this.timer),this.setState({elapsedTime:0}),this.timerRunning=!1},o.timerTick=function(){var t=this;this.timer=setTimeout(function(){t.setState({elapsedTime:t.state.elapsedTime+1}),t.timerTick()},1e3)},o.fmtMSS=function(t){return(t-(t%=60))/60+(t>9?":":":0")+t},o.render=function(){var e=t({},this.props),i=e.recording,r=e.i18n,o=this.fmtMSS(this.state.elapsedTime);return i&&!this.timerRunning&&this.startTimer(),!i&&this.timerRunning&&this.resetTimer(),i?n("div",{style:this.wrapperStyle},n("div",{style:this.overlayStyle}),n("div",{style:this.infoContainerStyle},n("div",{style:this.infotextStyle},r("recording")),n("div",{style:this.timeStyle},o))):null},r}(o);module.exports=a;
},{"preact":"sSEx"}],"B3k2":[function(require,module,exports) {
var e=require("preact"),a=e.h;module.exports=function(e){var t=e.streamActive,c=e.i18n;return t?a("div",{title:c("streamActive"),"aria-label":c("streamActive"),className:"uppy-ScreenCapture-icon--stream uppy-ScreenCapture-icon--streamActive"},a("svg",{"aria-hidden":"true",focusable:"false",width:"24",height:"24",viewBox:"0 0 24 24"},a("path",{d:"M0 0h24v24H0z",opacity:".1",fill:"none"}),a("path",{d:"M0 0h24v24H0z",fill:"none"}),a("path",{d:"M1 18v3h3c0-1.66-1.34-3-3-3zm0-4v2c2.76 0 5 2.24 5 5h2c0-3.87-3.13-7-7-7zm18-7H5v1.63c3.96 1.28 7.09 4.41 8.37 8.37H19V7zM1 10v2c4.97 0 9 4.03 9 9h2c0-6.08-4.93-11-11-11zm20-7H3c-1.1 0-2 .9-2 2v3h2V5h18v14h-7v2h7c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}))):a("div",{title:c("streamPassive"),"aria-label":c("streamPassive"),className:"uppy-ScreenCapture-icon--stream"},a("svg",{"aria-hidden":"true",focusable:"false",width:"24",height:"24",viewBox:"0 0 24 24"},a("path",{d:"M0 0h24v24H0z",opacity:".1",fill:"none"}),a("path",{d:"M0 0h24v24H0z",fill:"none"}),a("path",{d:"M21 3H3c-1.1 0-2 .9-2 2v3h2V5h18v14h-7v2h7c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM1 18v3h3c0-1.66-1.34-3-3-3zm0-4v2c2.76 0 5 2.24 5 5h2c0-3.87-3.13-7-7-7zm0-4v2c4.97 0 9 4.03 9 9h2c0-6.08-4.93-11-11-11z"})))};
},{"preact":"sSEx"}],"QTzv":[function(require,module,exports) {
function t(){return(t=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t}).apply(this,arguments)}function e(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,r(t,e)}function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var o=require("preact"),n=o.h,p=o.Component,i=require("./RecordButton"),u=require("./SubmitButton"),c=require("./StopWatch"),s=require("./StreamStatus"),a=function(r){function o(){return r.apply(this,arguments)||this}e(o,r);var p=o.prototype;return p.componentWillUnmount=function(){this.props.onStop()},p.render=function(){var e=this,r=this.props,o=r.recording,p=r.stream,a=r.recordedVideo,d={playsinline:!0};return(o||!a&&!o)&&(d.muted=!0,d.autoplay=!0,d.srcObject=p),a&&!o&&(d.muted=!1,d.controls=!0,d.src=a,this.videoElement&&(this.videoElement.srcObject=void 0)),n("div",{className:"uppy uppy-ScreenCapture-container"},n("div",{className:"uppy-ScreenCapture-videoContainer"},n(s,this.props),n("video",t({ref:function(t){return e.videoElement=t},className:"uppy-ScreenCapture-video"},d)),n(c,this.props)),n("div",{className:"uppy-ScreenCapture-buttonContainer"},n(i,this.props),n(u,this.props)))},o}(p);module.exports=a;
},{"preact":"sSEx","./RecordButton":"EJzO","./SubmitButton":"vilm","./StopWatch":"cNhs","./StreamStatus":"B3k2"}],"PjlK":[function(require,module,exports) {
var e,t;function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function n(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,o(e,t)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var a=require("preact"),s=a.h,c=require("@uppy/core"),u=c.Plugin,d=require("@uppy/utils/lib/Translator"),p=require("@uppy/utils/lib/getFileTypeExtension"),l=require("./ScreenRecIcon"),h=require("./CaptureScreen");function m(){return navigator&&navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia&&window&&window.MediaRecorder?navigator.mediaDevices:null}module.exports=(t=e=function(e){function t(t,n){var o;(o=e.call(this,t,n)||this).mediaDevices=m(),o.protocol=location.protocol.match(/https/i)?"https":"http",o.id=o.opts.id||"ScreenCapture",o.title=o.opts.title||"Screencast",o.type="acquirer",o.icon=l,o.defaultLocale={strings:{startCapturing:"Begin screen capturing",stopCapturing:"Stop screen capturing",submitRecordedFile:"Submit captured video",streamActive:"Stream active",streamPassive:"Stream passive",micDisabled:"Microphone access denied by user",recording:"Recording"}};return o.opts=r({},{displayMediaConstraints:{video:{width:1280,height:720,frameRate:{ideal:3,max:5},cursor:"motion",displaySurface:"monitor"}},userMediaConstraints:{audio:!0},preferredVideoMimeType:"video/webm"},n),o.translator=new d([o.defaultLocale,o.uppy.locale,o.opts.locale]),o.i18n=o.translator.translate.bind(o.translator),o.i18nArray=o.translator.translateArray.bind(o.translator),o.install=o.install.bind(i(o)),o.setPluginState=o.setPluginState.bind(i(o)),o.render=o.render.bind(i(o)),o.start=o.start.bind(i(o)),o.stop=o.stop.bind(i(o)),o.startRecording=o.startRecording.bind(i(o)),o.stopRecording=o.stopRecording.bind(i(o)),o.submit=o.submit.bind(i(o)),o.streamInterrupted=o.streamInactivated.bind(i(o)),o.captureActive=!1,o.capturedMediaFile=null,o}n(t,e);var o=t.prototype;return o.install=function(){if(!this.mediaDevices)return this.uppy.log("Screen recorder access is not supported","error"),null;this.setPluginState({streamActive:!1,audioStreamActive:!1});var e=this.opts.target;e&&this.mount(e,this)},o.uninstall=function(){this.videoStream&&this.stop(),this.unmount()},o.start=function(){var e=this;if(!this.mediaDevices)return Promise.reject(new Error("Screen recorder access not supported"));this.captureActive=!0,this.selectAudioStreamSource(),this.selectVideoStreamSource().then(function(t){!1===t&&e.parent&&e.parent.hideAllPanels&&(e.parent.hideAllPanels(),e.captureActive=!1)})},o.selectVideoStreamSource=function(){var e=this;return this.videoStream?new Promise(function(t){return t(e.videoStream)}):this.mediaDevices.getDisplayMedia(this.opts.displayMediaConstraints).then(function(t){return e.videoStream=t,e.videoStream.addEventListener("inactive",function(t){e.streamInactivated()}),e.setPluginState({streamActive:!0}),t}).catch(function(t){return e.setPluginState({screenRecError:t}),e.userDenied=!0,setTimeout(function(){e.userDenied=!1},1e3),!1})},o.selectAudioStreamSource=function(){var e=this;return this.audioStream?new Promise(function(t){return t(e.audioStream)}):this.mediaDevices.getUserMedia(this.opts.userMediaConstraints).then(function(t){return e.audioStream=t,e.setPluginState({audioStreamActive:!0}),t}).catch(function(t){return"NotAllowedError"===t.name&&e.uppy.info(e.i18n("micDisabled"),"error",5e3),!1})},o.startRecording=function(){var e=this,t={};this.capturedMediaFile=null,this.recordingChunks=[];var r=this.opts.preferredVideoMimeType;this.selectVideoStreamSource().then(function(i){r&&MediaRecorder.isTypeSupported(r)&&p(r)&&(t.mimeType=r);var n=[i.getVideoTracks()[0]];e.audioStream&&n.push(e.audioStream.getAudioTracks()[0]),e.outputStream=new MediaStream(n),e.recorder=new MediaRecorder(e.outputStream,t),e.recorder.addEventListener("dataavailable",function(t){e.recordingChunks.push(t.data)}),e.recorder.start(),e.setPluginState({recording:!0})}).catch(function(t){e.uppy.log(t,"error")})},o.streamInactivated=function(){var e=r({},this.getPluginState()),t=e.recordedVideo,i=e.recording;t||i?i&&(this.uppy.log("Capture stream inactive — stop recording"),this.stopRecording()):this.parent&&this.parent.hideAllPanels&&this.parent.hideAllPanels(),this.videoStream=null,this.audioStream=null,this.setPluginState({streamActive:!1,audioStreamActive:!1})},o.stopRecording=function(){var e=this;return new Promise(function(t,r){e.recorder.addEventListener("stop",function(){t()}),e.recorder.stop()}).then(function(){return e.setPluginState({recording:!1}),e.getVideo()}).then(function(t){e.capturedMediaFile=t,e.setPluginState({recordedVideo:URL.createObjectURL(t.data)})}).then(function(){e.recordingChunks=null,e.recorder=null},function(t){throw e.recordingChunks=null,e.recorder=null,t})},o.submit=function(){try{this.capturedMediaFile&&this.uppy.addFile(this.capturedMediaFile)}catch(e){e.isRestriction||this.uppy.log(e,"error")}},o.stop=function(){this.videoStream&&(this.videoStream.getVideoTracks().forEach(function(e){e.stop()}),this.videoStream.getAudioTracks().forEach(function(e){e.stop()}),this.videoStream=null),this.audioStream&&(this.audioStream.getAudioTracks().forEach(function(e){e.stop()}),this.audioStream.getVideoTracks().forEach(function(e){e.stop()}),this.audioStream=null),this.outputStream&&(this.outputStream.getAudioTracks().forEach(function(e){e.stop()}),this.outputStream.getVideoTracks().forEach(function(e){e.stop()}),this.outputStream=null),this.setPluginState({recordedVideo:null}),this.captureActive=!1},o.getVideo=function(){var e=this.recordingChunks[0].type,t=p(e);if(!t)return Promise.reject(new Error('Could not retrieve recording: Unsupported media type "'+e+'"'));var r="screencap-"+Date.now()+"."+t,i=new Blob(this.recordingChunks,{type:e}),n={source:this.id,name:r,data:new Blob([i],{type:e}),type:e};return Promise.resolve(n)},o.render=function(e){var t=this.getPluginState();return t.streamActive||this.captureActive||this.userDenied||this.start(),s(h,r({},t,{onStartRecording:this.startRecording,onStopRecording:this.stopRecording,onStop:this.stop,onSubmit:this.submit,i18n:this.i18n,stream:this.videoStream}))},t}(u),e.VERSION="1.0.17",t);
},{"preact":"sSEx","@uppy/core":"PDAA","@uppy/utils/lib/Translator":"hG0x","@uppy/utils/lib/getFileTypeExtension":"aTts","./ScreenRecIcon":"TZtm","./CaptureScreen":"QTzv"}],"R5gH":[function(require,module,exports) {
var e=require("./findIndex");function t(){return new Error("Cancelled")}module.exports=function(){function n(e){this.limit="number"!=typeof e||0===e?1/0:e,this.activeRequests=0,this.queuedHandlers=[]}var i=n.prototype;return i._call=function(e){var t=this;this.activeRequests+=1;var n,i=!1;try{n=e()}catch(r){throw this.activeRequests-=1,r}return{abort:function(){i||(i=!0,t.activeRequests-=1,n(),t._queueNext())},done:function(){i||(i=!0,t.activeRequests-=1,t._queueNext())}}},i._queueNext=function(){var e=this;Promise.resolve().then(function(){e._next()})},i._next=function(){if(!(this.activeRequests>=this.limit)&&0!==this.queuedHandlers.length){var e=this.queuedHandlers.shift(),t=this._call(e.fn);e.abort=t.abort,e.done=t.done}},i._queue=function(t,n){var i=this;void 0===n&&(n={});var r={fn:t,priority:n.priority||0,abort:function(){i._dequeue(r)},done:function(){throw new Error("Cannot mark a queued request as done: this indicates a bug")}},u=e(this.queuedHandlers,function(e){return r.priority>e.priority});return-1===u?this.queuedHandlers.push(r):this.queuedHandlers.splice(u,0,r),r},i._dequeue=function(e){var t=this.queuedHandlers.indexOf(e);-1!==t&&this.queuedHandlers.splice(t,1)},i.run=function(e,t){return this.activeRequests<this.limit?this._call(e):this._queue(e,t)},i.wrapPromiseFunction=function(e,n){var i=this;return function(){for(var r=arguments.length,u=new Array(r),o=0;o<r;o++)u[o]=arguments[o];var s,a=new Promise(function(r,o){s=i.run(function(){var n,i;try{i=Promise.resolve(e.apply(void 0,u))}catch(a){i=Promise.reject(a)}return i.then(function(e){n?o(n):(s.done(),r(e))},function(e){n?o(n):(s.done(),o(e))}),function(){n=t()}},n)});return a.abort=function(){s.abort()},a}},n}();
},{"./findIndex":"ADhK"}],"uLzd":[function(require,module,exports) {
module.exports=function(n){var u=[],t=[];function e(n){u.push(n)}function r(n){t.push(n)}return Promise.all(n.map(function(n){return n.then(e,r)})).then(function(){return{successful:u,failed:t}})};
},{}],"uTqy":[function(require,module,exports) {
var e=require("lodash.throttle");function o(e,o,r){var l=o.progress,p=o.bytesUploaded,t=o.bytesTotal;l&&(e.uppy.log("Upload progress: "+l),e.uppy.emit("upload-progress",r,{uploader:e,bytesUploaded:p,bytesTotal:t}))}module.exports=e(o,300,{leading:!0,trailing:!0});
},{"lodash.throttle":"Ai1e"}],"FB9Q":[function(require,module,exports) {
module.exports=function(t){var e=/^(?:https?:\/\/|\/\/)?(?:[^@\n]+@)?(?:www\.)?([^\n]+)/i.exec(t)[1];return(/^http:\/\//i.test(t)?"ws":"wss")+"://"+e};
},{}],"E2Ah":[function(require,module,exports) {
module.exports=function(){function t(t){this._events=[],this._emitter=t}var e=t.prototype;return e.on=function(t,e){return this._events.push([t,e]),this._emitter.on(t,e)},e.remove=function(){var t=this;this._events.forEach(function(e){var n=e[0],i=e[1];t._emitter.off(n,i)})},t}();
},{}],"adHa":[function(require,module,exports) {
var i=function(){function i(i,t){this._timeout=i,this._onTimedOut=t,this._isDone=!1,this._aliveTimer=null,this._onTimedOut=this._onTimedOut.bind(this)}var t=i.prototype;return t.progress=function(){this._isDone||this._timeout>0&&(this._aliveTimer&&clearTimeout(this._aliveTimer),this._aliveTimer=setTimeout(this._onTimedOut,this._timeout))},t.done=function(){this._aliveTimer&&(clearTimeout(this._aliveTimer),this._aliveTimer=null),this._isDone=!0},i}();module.exports=i;
},{}],"K46j":[function(require,module,exports) {
function t(t){return!!t&&(0!==t.readyState&&4!==t.readyState||0===t.status)}module.exports=t;
},{}],"P4Q4":[function(require,module,exports) {
function e(){return(e=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e}).apply(this,arguments)}var r=require("cuid"),t=require("@uppy/companion-client"),o=t.Provider,n=t.RequestClient,a=t.Socket,s=require("@uppy/utils/lib/emitSocketProgress"),i=require("@uppy/utils/lib/getSocketHost"),u=require("@uppy/utils/lib/EventTracker"),p=require("@uppy/utils/lib/ProgressTimeout"),d=require("@uppy/utils/lib/NetworkError"),l=require("@uppy/utils/lib/isNetworkError");function c(r,t){return t||(t=new Error("Upload error")),"string"==typeof t&&(t=new Error(t)),t instanceof Error||(t=e(new Error("Upload error"),{data:t})),l(r)?t=new d(t,r):(t.request=r,t)}function m(e){return e.data.slice(0,e.data.size,e.meta.type)}module.exports=function(){function t(r,t){this.uppy=r,this.opts=e({validateStatus:function(e,r,t){return e>=200&&e<300}},t),this.requests=t.__queue,this.uploaderEvents=Object.create(null),this.i18n=t.i18n}var d=t.prototype;return d._getOptions=function(r){var t=this.uppy.getState().xhrUpload,o=e({},this.opts,t||{},r.xhrUpload||{},{headers:{}});return e(o.headers,this.opts.headers),t&&e(o.headers,t.headers),r.xhrUpload&&e(o.headers,r.xhrUpload.headers),o},d.uploadFile=function(e,r,t){var o=this.uppy.getFile(e);if(o.error)throw new Error(o.error);return o.isRemote?this._uploadRemoteFile(o,r,t):this._uploadLocalFile(o,r,t)},d._addMetadata=function(e,r,t){(Array.isArray(t.metaFields)?t.metaFields:Object.keys(r)).forEach(function(t){e.append(t,r[t])})},d._createFormDataUpload=function(e,r){var t=new FormData;this._addMetadata(t,e.meta,r);var o=m(e);return e.name?t.append(r.fieldName,o,e.meta.name):t.append(r.fieldName,o),t},d._createBareUpload=function(e,r){return e.data},d._onFileRemoved=function(e,r){this.uploaderEvents[e].on("file-removed",function(t){e===t.id&&r(t.id)})},d._onRetry=function(e,r){this.uploaderEvents[e].on("upload-retry",function(t){e===t&&r()})},d._onRetryAll=function(e,r){var t=this;this.uploaderEvents[e].on("retry-all",function(o){t.uppy.getFile(e)&&r()})},d._onCancelAll=function(e,r){var t=this;this.uploaderEvents[e].on("cancel-all",function(){t.uppy.getFile(e)&&r()})},d._uploadLocalFile=function(e,t,o){var n=this,a=this._getOptions(e);return this.uppy.log("uploading "+t+" of "+o),new Promise(function(t,o){var s=a.formData?n._createFormDataUpload(e,a):n._createBareUpload(e,a),i=new XMLHttpRequest;n.uploaderEvents[e.id]=new u(n.uppy);var d=new p(a.timeout,function(){i.abort(),m.done();var r=new Error(n.i18n("timedOut",{seconds:Math.ceil(a.timeout/1e3)}));n.uppy.emit("upload-error",e,r),o(r)}),l=r();i.upload.addEventListener("loadstart",function(e){n.uppy.log("[AwsS3/XHRUpload] "+l+" started")}),i.upload.addEventListener("progress",function(r){n.uppy.log("[AwsS3/XHRUpload] "+l+" progress: "+r.loaded+" / "+r.total),d.progress(),r.lengthComputable&&n.uppy.emit("upload-progress",e,{uploader:n,bytesUploaded:r.loaded,bytesTotal:r.total})}),i.addEventListener("load",function(r){if(n.uppy.log("[AwsS3/XHRUpload] "+l+" finished"),d.done(),m.done(),n.uploaderEvents[e.id]&&(n.uploaderEvents[e.id].remove(),n.uploaderEvents[e.id]=null),a.validateStatus(r.target.status,i.responseText,i)){var s=a.getResponseData(i.responseText,i),u=s[a.responseUrlFieldName],p={status:r.target.status,body:s,uploadURL:u};return n.uppy.emit("upload-success",e,p),u&&n.uppy.log("Download "+e.name+" from "+u),t(e)}var f=a.getResponseData(i.responseText,i),v=c(i,a.getResponseError(i.responseText,i)),y={status:r.target.status,body:f};return n.uppy.emit("upload-error",e,v,y),o(v)}),i.addEventListener("error",function(r){n.uppy.log("[AwsS3/XHRUpload] "+l+" errored"),d.done(),m.done(),n.uploaderEvents[e.id]&&(n.uploaderEvents[e.id].remove(),n.uploaderEvents[e.id]=null);var t=c(i,a.getResponseError(i.responseText,i));return n.uppy.emit("upload-error",e,t),o(t)}),i.open(a.method.toUpperCase(),a.endpoint,!0),i.withCredentials=a.withCredentials,""!==a.responseType&&(i.responseType=a.responseType),Object.keys(a.headers).forEach(function(e){i.setRequestHeader(e,a.headers[e])});var m=n.requests.run(function(){return i.send(s),function(){d.done(),i.abort()}},{priority:1});n._onFileRemoved(e.id,function(){m.abort(),o(new Error("File removed"))}),n._onCancelAll(e.id,function(){m.abort(),o(new Error("Upload cancelled"))})})},d._uploadRemoteFile=function(r,t,p){var d=this,l=this._getOptions(r);return new Promise(function(t,p){var c={};(Array.isArray(l.metaFields)?l.metaFields:Object.keys(r.meta)).forEach(function(e){c[e]=r.meta[e]}),new(r.remote.providerOptions.provider?o:n)(d.uppy,r.remote.providerOptions).post(r.remote.url,e({},r.remote.body,{endpoint:l.endpoint,size:r.data.size,fieldname:l.fieldName,metadata:c,httpMethod:l.method,useFormData:l.formData,headers:l.headers})).then(function(o){var n=o.token,c=i(r.remote.companionUrl),m=new a({target:c+"/api/"+n,autoOpen:!1});d.uploaderEvents[r.id]=new u(d.uppy),d._onFileRemoved(r.id,function(){m.send("pause",{}),f.abort(),t("upload "+r.id+" was removed")}),d._onCancelAll(r.id,function(){m.send("pause",{}),f.abort(),t("upload "+r.id+" was canceled")}),d._onRetry(r.id,function(){m.send("pause",{}),m.send("resume",{})}),d._onRetryAll(r.id,function(){m.send("pause",{}),m.send("resume",{})}),m.on("progress",function(e){return s(d,e,r)}),m.on("success",function(e){var o=l.getResponseData(e.response.responseText,e.response),n=o[l.responseUrlFieldName],a={status:e.response.status,body:o,uploadURL:n};return d.uppy.emit("upload-success",r,a),f.done(),d.uploaderEvents[r.id]&&(d.uploaderEvents[r.id].remove(),d.uploaderEvents[r.id]=null),t()}),m.on("error",function(t){var o=t.response,n=o?l.getResponseError(o.responseText,o):e(new Error(t.error.message),{cause:t.error});d.uppy.emit("upload-error",r,n),f.done(),d.uploaderEvents[r.id]&&(d.uploaderEvents[r.id].remove(),d.uploaderEvents[r.id]=null),p(n)});var f=d.requests.run(function(){return m.open(),r.isPaused&&m.send("pause",{}),function(){return m.close()}})}).catch(function(e){d.uppy.emit("upload-error",r,e),p(e)})})},t}();
},{"cuid":"EdMi","@uppy/companion-client":"MaVI","@uppy/utils/lib/emitSocketProgress":"uTqy","@uppy/utils/lib/getSocketHost":"FB9Q","@uppy/utils/lib/EventTracker":"E2Ah","@uppy/utils/lib/ProgressTimeout":"adHa","@uppy/utils/lib/NetworkError":"jqwg","@uppy/utils/lib/isNetworkError":"K46j"}],"QLYP":[function(require,module,exports) {
function e(e){return e.replace(/;.*$/,"")}function t(t,r){var n=r.headers?r.headers["content-type"]:r.getResponseHeader("Content-Type");if("string"==typeof n){var o=e(n).toLowerCase();if("application/xml"===o||"text/xml"===o)return!0;if("text/html"===o&&/^<\?xml /.test(t))return!0}return!1}module.exports=t;
},{}],"zBrh":[function(require,module,exports) {
var e,t;function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,n(e,t)}function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e}).apply(this,arguments)}var a="function"==typeof URL?URL:require("url-parse"),s=require("@uppy/core"),p=s.Plugin,l=require("@uppy/utils/lib/Translator"),u=require("@uppy/utils/lib/RateLimitedQueue"),d=require("@uppy/utils/lib/settle"),c=require("@uppy/utils/lib/hasProperty"),f=require("@uppy/companion-client"),h=f.RequestClient,m=require("qs-stringify"),y=require("./MiniXHRUpload"),g=require("./isXml");function v(e,t){return e?new a(t,e).toString():new a(t).toString()}function w(e,t){var r=e.indexOf("<"+t+">"),o=e.indexOf("</"+t+">",r);return-1!==r&&-1!==o?e.slice(r+t.length+2,o):""}function U(e){if(e&&e.error){var t=new Error(e.message);throw i(t,e.error),t}return e}var b=!1;module.exports=(t=e=function(e){function t(t,o){var n;(n=e.call(this,t,o)||this).type="uploader",n.id=n.opts.id||"AwsS3",n.title="AWS S3",n.defaultLocale={strings:{timedOut:"Upload stalled for %{seconds} seconds, aborting."}};var a={timeout:3e4,limit:0,metaFields:[],getUploadParameters:n.getUploadParameters.bind(r(n))};return n.opts=i({},a,o),n.i18nInit(),n.client=new h(t,o),n.handleUpload=n.handleUpload.bind(r(n)),n.requests=new u(n.opts.limit),n}o(t,e);var n=t.prototype;return n.setOptions=function(t){e.prototype.setOptions.call(this,t),this.i18nInit()},n.i18nInit=function(){this.translator=new l([this.defaultLocale,this.uppy.locale,this.opts.locale]),this.i18n=this.translator.translate.bind(this.translator),this.setPluginState()},n.getUploadParameters=function(e){if(!this.opts.companionUrl)throw new Error("Expected a `companionUrl` option containing a Companion address.");var t=e.meta.name,r=e.meta.type,o={};this.opts.metaFields.forEach(function(t){null!=e.meta[t]&&(o[t]=e.meta[t].toString())});var n=m({filename:t,type:r,metadata:o});return this.client.get("s3/params?"+n).then(U)},n.validateParameters=function(e,t){if(!("object"==typeof t&&t&&"string"==typeof t.url&&("object"==typeof t.fields||null==t.fields))){var r=new TypeError("AwsS3: got incorrect result from 'getUploadParameters()' for file '"+e.name+"', expected an object '{ url, method, fields, headers }' but got '"+JSON.stringify(t)+"' instead.\nSee https://uppy.io/docs/aws-s3/#getUploadParameters-file for more on the expected format.");throw console.error(r),r}if(!(null==t.method||/^(put|post)$/i.test(t.method))){var o=new TypeError("AwsS3: got incorrect method from 'getUploadParameters()' for file '"+e.name+"', expected  'put' or 'post' but got '"+t.method+"' instead.\nSee https://uppy.io/docs/aws-s3/#getUploadParameters-file for more on the expected format.");throw console.error(o),o}},n.handleUpload=function(e){var t=this,r=Object.create(null);function o(e){var t=e.id;c(r,t)&&r[t].abort()}this.uppy.on("file-removed",o),e.forEach(function(e){var r=t.uppy.getFile(e);t.uppy.emit("upload-started",r)});var n=this.requests.wrapPromiseFunction(function(e){return t.opts.getUploadParameters(e)}),a=e.length;return d(e.map(function(e,o){return r[e]=n(t.uppy.getFile(e)),r[e].then(function(n){delete r[e];var s=t.uppy.getFile(e);t.validateParameters(s,n);var p=n.method,l=void 0===p?"post":p,u=n.url,d=n.fields,c=n.headers,f={method:l,formData:"post"===l.toLowerCase(),endpoint:u,metaFields:d?Object.keys(d):[]};return c&&(f.headers=c),t.uppy.setFileState(s.id,{meta:i({},s.meta,d),xhrUpload:f}),t._uploader.uploadFile(s.id,o,a)}).catch(function(o){delete r[e];var n=t.uppy.getFile(e);t.uppy.emit("upload-error",n,o)})})).then(function(e){return t.uppy.off("file-removed",o),e})},n.install=function(){var e=this.uppy;this.uppy.addUploader(this.handleUpload);var t={fieldName:"file",responseUrlFieldName:"location",timeout:this.opts.timeout,__queue:this.requests,responseType:"text",getResponseData:this.opts.getResponseData||function(t,r){return g(t,r)?{location:v(r.responseURL,w(t,"Location")),bucket:w(t,"Bucket"),key:w(t,"Key"),etag:w(t,"ETag")}:"POST"===this.method.toUpperCase()?(b||(e.log("[AwsS3] No response data found, make sure to set the success_action_status AWS SDK option to 201. See https://uppy.io/docs/aws-s3/#POST-Uploads","warning"),b=!0),{location:null}):r.responseURL?{location:r.responseURL.replace(/\?.*$/,"")}:{location:null}},getResponseError:function(e,t){if(g(e,t)){var r=w(e,"Message");return new Error(r)}}};t.i18n=this.i18n,this._uploader=new y(this.uppy,t)},n.uninstall=function(){this.uppy.removeUploader(this.handleUpload)},t}(p),e.VERSION="1.7.9",t);
},{"url-parse":"t0IB","@uppy/core":"PDAA","@uppy/utils/lib/Translator":"hG0x","@uppy/utils/lib/RateLimitedQueue":"R5gH","@uppy/utils/lib/settle":"uLzd","@uppy/utils/lib/hasProperty":"ss9M","@uppy/companion-client":"MaVI","qs-stringify":"aDV9","./MiniXHRUpload":"P4Q4","./isXml":"QLYP"}],"UCX9":[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function n(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?l(t):e}function a(t){var e=c();return function(){var n,r=o(t);if(e){var i=o(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return u(this,n)}}function f(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=o(t)););return t}function s(t,e,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=f(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}Object.defineProperty(exports,"__esModule",{value:!0});var p=function(){function e(){t(this,e),Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}return n(e,[{key:"addEventListener",value:function(t,e,n){t in this.listeners||(this.listeners[t]=[]),this.listeners[t].push({callback:e,options:n})}},{key:"removeEventListener",value:function(t,e){if(t in this.listeners)for(var n=this.listeners[t],r=0,o=n.length;r<o;r++)if(n[r].callback===e)return void n.splice(r,1)}},{key:"dispatchEvent",value:function(t){if(t.type in this.listeners){for(var e=this.listeners[t.type].slice(),n=0,r=e.length;n<r;n++){var o=e[n];try{o.callback.call(this,t)}catch(i){Promise.resolve().then(function(){throw i})}o.options&&o.options.once&&this.removeEventListener(t.type,o.callback)}return!t.defaultPrevented}}}]),e}(),b=function(e){r(c,p);var i=a(c);function c(){var e;return t(this,c),(e=i.call(this)).listeners||p.call(l(e)),Object.defineProperty(l(e),"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(l(e),"onabort",{value:null,writable:!0,configurable:!0}),e}return n(c,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(t){"abort"===t.type&&(this.aborted=!0,"function"==typeof this.onabort&&this.onabort.call(this,t)),s(o(c.prototype),"dispatchEvent",this).call(this,t)}}]),c}(),y=function(){function e(){t(this,e),Object.defineProperty(this,"signal",{value:new b,writable:!0,configurable:!0})}return n(e,[{key:"abort",value:function(){var t;try{t=new Event("abort")}catch(e){"undefined"!=typeof document?document.createEvent?(t=document.createEvent("Event")).initEvent("abort",!1,!1):(t=document.createEventObject()).type="abort":t={type:"abort",bubbles:!1,cancelable:!1}}this.signal.dispatchEvent(t)}},{key:"toString",value:function(){return"[object AbortController]"}}]),e}();"undefined"!=typeof Symbol&&Symbol.toStringTag&&(y.prototype[Symbol.toStringTag]="AbortController",b.prototype[Symbol.toStringTag]="AbortSignal"),exports.AbortController=y,exports.AbortSignal=b,exports.default=y;
},{}],"ZP1e":[function(require,module,exports) {
var r=require("abortcontroller-polyfill/dist/abortcontroller"),o=r.AbortController,t=r.AbortSignal;function e(r){void 0===r&&(r="Aborted");try{return new DOMException(r,"AbortError")}catch(t){var o=new Error(r);return o.name="AbortError",o}}exports.AbortController=o,exports.AbortSignal=t,exports.createAbortError=e;
},{"abortcontroller-polyfill/dist/abortcontroller":"UCX9"}],"FPfC":[function(require,module,exports) {
var r=require("./AbortController"),e=r.createAbortError;module.exports=function(r,n){return new Promise(function(t,o){if(n&&n.signal&&n.signal.aborted)return o(e());function i(){clearTimeout(a),s(),o(e())}var a=setTimeout(function(){s(),t()},r);function s(){n&&n.signal&&n.signal.removeEventListener("abort",i)}n&&n.signal&&n.signal.addEventListener("abort",i)})};
},{"./AbortController":"ZP1e"}],"fcVt":[function(require,module,exports) {
function t(){return(t=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t}).apply(this,arguments)}var e=require("@uppy/utils/lib/AbortController"),r=e.AbortController,o=e.createAbortError,n=require("@uppy/utils/lib/delay"),i=1048576,s={limit:1,retryDelays:[0,1e3,3e3,5e3],getChunkSize:function(t){return Math.ceil(t.size/1e4)},onStart:function(){},onProgress:function(){},onPartComplete:function(){},onSuccess:function(){},onError:function(t){throw t}};function a(t){if("string"==typeof t)return parseInt(t,10);if("number"==typeof t)return t;throw new TypeError("Expected a number")}var u=function(){function e(e,o){this.options=t({},s,o),this.options.getChunkSize||(this.options.getChunkSize=s.getChunkSize),this.file=e,this.abortController=new r,this.key=this.options.key||null,this.uploadId=this.options.uploadId||null,this.parts=[],this.createdPromise=Promise.reject(),this.isPaused=!1,this.partsInProgress=0,this.chunks=null,this.chunkState=null,this._initChunks(),this.createdPromise.catch(function(){})}var u=e.prototype;return u._aborted=function(){return this.abortController.signal.aborted},u._initChunks=function(){var t=[],e=this.options.getChunkSize(this.file),r=Math.max(5*i,Math.ceil(this.file.size/1e4)),o=Math.max(e,r);if(0===this.file.size)t.push(this.file);else for(var n=0;n<this.file.size;n+=o){var s=Math.min(this.file.size,n+o);t.push(this.file.slice(n,s))}this.chunks=t,this.chunkState=t.map(function(){return{uploaded:0,busy:!1,done:!1}})},u._createUpload=function(){var t=this;return this.createdPromise=Promise.resolve().then(function(){return t.options.createMultipartUpload()}),this.createdPromise.then(function(e){if(t._aborted())throw o();if(!("object"==typeof e&&e&&"string"==typeof e.uploadId&&"string"==typeof e.key))throw new TypeError("AwsS3/Multipart: Got incorrect result from `createMultipartUpload()`, expected an object `{ uploadId, key }`.");t.key=e.key,t.uploadId=e.uploadId,t.options.onStart(e),t._uploadParts()}).catch(function(e){t._onError(e)})},u._resumeUpload=function(){var t=this;return Promise.resolve().then(function(){return t.options.listParts({uploadId:t.uploadId,key:t.key})}).then(function(e){if(t._aborted())throw o();e.forEach(function(e){var r=e.PartNumber-1;t.chunkState[r]={uploaded:a(e.Size),etag:e.ETag,done:!0},t.parts.some(function(t){return t.PartNumber===e.PartNumber})||t.parts.push({PartNumber:e.PartNumber,ETag:e.ETag})}),t._uploadParts()}).catch(function(e){t._onError(e)})},u._uploadParts=function(){var t=this;if(!this.isPaused){var e=this.options.limit-this.partsInProgress;if(0!==e)if(this.chunkState.every(function(t){return t.done}))this._completeUpload();else{for(var r=[],o=0;o<this.chunkState.length;o++){var n=this.chunkState[o];if(!n.done&&!n.busy&&(r.push(o),r.length>=e))break}r.forEach(function(e){t._uploadPartRetryable(e).then(function(){t._uploadParts()},function(e){t._onError(e)})})}}},u._retryable=function(t){var e=this,r=t.before,i=t.attempt,s=t.after,a=this.options.retryDelays,u=this.abortController.signal;r&&r();return function t(r){return i().catch(function(i){if(e._aborted())throw o();if(function(t){if(t.source&&"number"==typeof t.source.status){var e=t.source.status;return 0===e||409===e||423===e||e>=500&&e<600}return!1}(i)&&r<a.length)return n(a[r],{signal:u}).then(function(){return t(r+1)});throw i})}(0).then(function(t){return s&&s(),t},function(t){throw s&&s(),t})},u._uploadPartRetryable=function(t){var e=this;return this._retryable({before:function(){e.partsInProgress+=1},attempt:function(){return e._uploadPart(t)},after:function(){e.partsInProgress-=1}})},u._uploadPart=function(t){var e=this,r=this.chunks[t];return this.chunkState[t].busy=!0,Promise.resolve().then(function(){return e.options.prepareUploadPart({key:e.key,uploadId:e.uploadId,body:r,number:t+1})}).then(function(t){if(!("object"==typeof t&&t&&"string"==typeof t.url))throw new TypeError("AwsS3/Multipart: Got incorrect result from `prepareUploadPart()`, expected an object `{ url }`.");return t}).then(function(r){var n=r.url,i=r.headers;if(e._aborted())throw e.chunkState[t].busy=!1,o();return e._uploadPartBytes(t,n,i)})},u._onPartProgress=function(t,e,r){this.chunkState[t].uploaded=a(e);var o=this.chunkState.reduce(function(t,e){return t+e.uploaded},0);this.options.onProgress(o,this.file.size)},u._onPartComplete=function(t,e){this.chunkState[t].etag=e,this.chunkState[t].done=!0;var r={PartNumber:t+1,ETag:e};this.parts.push(r),this.options.onPartComplete(r)},u._uploadPartBytes=function(t,e,r){var n,i=this,s=this.chunks[t],a=this.abortController.signal,u=new Promise(function(t,e){n={resolve:t,reject:e}}),c=new XMLHttpRequest;function h(){a.removeEventListener("abort",l)}function l(){c.abort()}return c.open("PUT",e,!0),r&&Object.keys(r).map(function(t){c.setRequestHeader(t,r[t])}),c.responseType="text",a.addEventListener("abort",l),c.upload.addEventListener("progress",function(e){e.lengthComputable&&i._onPartProgress(t,e.loaded,e.total)}),c.addEventListener("abort",function(e){h(),i.chunkState[t].busy=!1,n.reject(o())}),c.addEventListener("load",function(e){if(h(),i.chunkState[t].busy=!1,e.target.status<200||e.target.status>=300){var r=new Error("Non 2xx");return r.source=e.target,void n.reject(r)}i._onPartProgress(t,s.size,s.size);var o=e.target.getResponseHeader("ETag");null!==o?(i._onPartComplete(t,o),n.resolve()):n.reject(new Error("AwsS3/Multipart: Could not read the ETag header. This likely means CORS is not configured correctly on the S3 Bucket. See https://uppy.io/docs/aws-s3-multipart#S3-Bucket-Configuration for instructions."))}),c.addEventListener("error",function(e){h(),i.chunkState[t].busy=!1;var r=new Error("Unknown error");r.source=e.target,n.reject(r)}),c.send(s),u},u._completeUpload=function(){var t=this;return this.parts.sort(function(t,e){return t.PartNumber-e.PartNumber}),Promise.resolve().then(function(){return t.options.completeMultipartUpload({key:t.key,uploadId:t.uploadId,parts:t.parts})}).then(function(e){t.options.onSuccess(e)},function(e){t._onError(e)})},u._abortUpload=function(){var t=this;this.abortController.abort(),this.createdPromise.then(function(){t.options.abortMultipartUpload({key:t.key,uploadId:t.uploadId})},function(){})},u._onError=function(t){t&&"AbortError"===t.name||this.options.onError(t)},u.start=function(){this.isPaused=!1,this.uploadId?this._resumeUpload():this._createUpload()},u.pause=function(){this.abortController.abort(),this.abortController=new r,this.isPaused=!0},u.abort=function(t){if(void 0===t&&(t={}),!(t.really||!1))return this.pause();this._abortUpload()},e}();module.exports=u;
},{"@uppy/utils/lib/AbortController":"ZP1e","@uppy/utils/lib/delay":"FPfC"}],"ILtH":[function(require,module,exports) {
var e,t;function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,n(e,t)}function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e}).apply(this,arguments)}var a=require("@uppy/core"),u=a.Plugin,p=require("@uppy/companion-client"),s=p.Socket,l=p.Provider,d=p.RequestClient,c=require("@uppy/utils/lib/EventTracker"),f=require("@uppy/utils/lib/emitSocketProgress"),m=require("@uppy/utils/lib/getSocketHost"),y=require("@uppy/utils/lib/RateLimitedQueue"),v=require("./MultipartUploader");function h(e){if(e&&e.error){var t=new Error(e.message);throw i(t,e.error),t}return e}module.exports=(t=e=function(e){function t(t,o){var n;(n=e.call(this,t,o)||this).type="uploader",n.id=n.opts.id||"AwsS3Multipart",n.title="AWS S3 Multipart",n.client=new d(t,o);var a={timeout:3e4,limit:0,retryDelays:[0,1e3,3e3,5e3],createMultipartUpload:n.createMultipartUpload.bind(r(n)),listParts:n.listParts.bind(r(n)),prepareUploadPart:n.prepareUploadPart.bind(r(n)),abortMultipartUpload:n.abortMultipartUpload.bind(r(n)),completeMultipartUpload:n.completeMultipartUpload.bind(r(n))};return n.opts=i({},a,o),n.upload=n.upload.bind(r(n)),n.requests=new y(n.opts.limit),n.uploaders=Object.create(null),n.uploaderEvents=Object.create(null),n.uploaderSockets=Object.create(null),n}o(t,e);var n=t.prototype;return n.resetUploaderReferences=function(e,t){void 0===t&&(t={}),this.uploaders[e]&&(this.uploaders[e].abort({really:t.abort||!1}),this.uploaders[e]=null),this.uploaderEvents[e]&&(this.uploaderEvents[e].remove(),this.uploaderEvents[e]=null),this.uploaderSockets[e]&&(this.uploaderSockets[e].close(),this.uploaderSockets[e]=null)},n.assertHost=function(e){if(!this.opts.companionUrl)throw new Error("Expected a `companionUrl` option containing a Companion address, or if you are not using Companion, a custom `"+e+"` implementation.")},n.createMultipartUpload=function(e){this.assertHost("createMultipartUpload");var t={};return Object.keys(e.meta).map(function(r){null!=e.meta[r]&&(t[r]=e.meta[r].toString())}),this.client.post("s3/multipart",{filename:e.name,type:e.type,metadata:t}).then(h)},n.listParts=function(e,t){var r=t.key,o=t.uploadId;this.assertHost("listParts");var n=encodeURIComponent(r);return this.client.get("s3/multipart/"+o+"?key="+n).then(h)},n.prepareUploadPart=function(e,t){var r=t.key,o=t.uploadId,n=t.number;this.assertHost("prepareUploadPart");var i=encodeURIComponent(r);return this.client.get("s3/multipart/"+o+"/"+n+"?key="+i).then(h)},n.completeMultipartUpload=function(e,t){var r=t.key,o=t.uploadId,n=t.parts;this.assertHost("completeMultipartUpload");var i=encodeURIComponent(r),a=encodeURIComponent(o);return this.client.post("s3/multipart/"+a+"/complete?key="+i,{parts:n}).then(h)},n.abortMultipartUpload=function(e,t){var r=t.key,o=t.uploadId;this.assertHost("abortMultipartUpload");var n=encodeURIComponent(r),i=encodeURIComponent(o);return this.client.delete("s3/multipart/"+i+"?key="+n).then(h)},n.uploadFile=function(e){var t=this;return new Promise(function(r,o){var n=new v(e.data,i({createMultipartUpload:t.opts.createMultipartUpload.bind(t,e),listParts:t.opts.listParts.bind(t,e),prepareUploadPart:t.opts.prepareUploadPart.bind(t,e),completeMultipartUpload:t.opts.completeMultipartUpload.bind(t,e),abortMultipartUpload:t.opts.abortMultipartUpload.bind(t,e),getChunkSize:t.opts.getChunkSize?t.opts.getChunkSize.bind(t):null,onStart:function(r){var o=t.uppy.getFile(e.id);t.uppy.setFileState(e.id,{s3Multipart:i({},o.s3Multipart,{key:r.key,uploadId:r.uploadId})})},onProgress:function(r,o){t.uppy.emit("upload-progress",e,{uploader:t,bytesUploaded:r,bytesTotal:o})},onError:function(r){t.uppy.log(r),t.uppy.emit("upload-error",e,r),a.done(),t.resetUploaderReferences(e.id),o(r)},onSuccess:function(o){var u={body:i({},o),uploadURL:o.location};a.done(),t.resetUploaderReferences(e.id);var p=t.uppy.getFile(e.id);t.uppy.emit("upload-success",p||e,u),o.location&&t.uppy.log("Download "+n.file.name+" from "+o.location),r(n)},onPartComplete:function(r){var o=t.uppy.getFile(e.id);o&&t.uppy.emit("s3-multipart:part-uploaded",o,r)},limit:t.opts.limit||5,retryDelays:t.opts.retryDelays||[]},e.s3Multipart));t.uploaders[e.id]=n,t.uploaderEvents[e.id]=new c(t.uppy);var a=t.requests.run(function(){return e.isPaused||n.start(),function(){}});t.onFileRemove(e.id,function(o){a.abort(),t.resetUploaderReferences(e.id,{abort:!0}),r("upload "+o.id+" was removed")}),t.onCancelAll(e.id,function(){a.abort(),t.resetUploaderReferences(e.id,{abort:!0}),r("upload "+e.id+" was canceled")}),t.onFilePause(e.id,function(e){e?(a.abort(),n.pause()):(a.abort(),a=t.requests.run(function(){return n.start(),function(){}}))}),t.onPauseAll(e.id,function(){a.abort(),n.pause()}),t.onResumeAll(e.id,function(){a.abort(),e.error&&n.abort(),a=t.requests.run(function(){return n.start(),function(){}})}),e.isRestored||t.uppy.emit("upload-started",e,n)})},n.uploadRemote=function(e){var t=this;return this.resetUploaderReferences(e.id),this.uppy.emit("upload-started",e),e.serverToken?this.connectToServerSocket(e):new Promise(function(r,o){new(e.remote.providerOptions.provider?l:d)(t.uppy,e.remote.providerOptions).post(e.remote.url,i({},e.remote.body,{protocol:"s3-multipart",size:e.data.size,metadata:e.meta})).then(function(r){return t.uppy.setFileState(e.id,{serverToken:r.token}),e=t.uppy.getFile(e.id)}).then(function(e){return t.connectToServerSocket(e)}).then(function(){r()}).catch(function(r){t.uppy.emit("upload-error",e,r),o(r)})})},n.connectToServerSocket=function(e){var t=this;return new Promise(function(r,o){var n=e.serverToken,i=m(e.remote.companionUrl),a=new s({target:i+"/api/"+n,autoOpen:!1});t.uploaderSockets[e.id]=a,t.uploaderEvents[e.id]=new c(t.uppy),t.onFileRemove(e.id,function(o){u.abort(),a.send("pause",{}),t.resetUploaderReferences(e.id,{abort:!0}),r("upload "+e.id+" was removed")}),t.onFilePause(e.id,function(e){e?(u.abort(),a.send("pause",{})):(u.abort(),u=t.requests.run(function(){return a.send("resume",{}),function(){}}))}),t.onPauseAll(e.id,function(){u.abort(),a.send("pause",{})}),t.onCancelAll(e.id,function(){u.abort(),a.send("pause",{}),t.resetUploaderReferences(e.id),r("upload "+e.id+" was canceled")}),t.onResumeAll(e.id,function(){u.abort(),e.error&&a.send("pause",{}),u=t.requests.run(function(){a.send("resume",{})})}),t.onRetry(e.id,function(){a.isOpen&&(a.send("pause",{}),a.send("resume",{}))}),t.onRetryAll(e.id,function(){a.isOpen&&(a.send("pause",{}),a.send("resume",{}))}),a.on("progress",function(r){return f(t,r,e)}),a.on("error",function(r){t.uppy.emit("upload-error",e,new Error(r.error)),t.resetUploaderReferences(e.id),u.done(),o(new Error(r.error))}),a.on("success",function(o){var n={uploadURL:o.url};t.uppy.emit("upload-success",e,n),t.resetUploaderReferences(e.id),u.done(),r()});var u=t.requests.run(function(){return a.open(),e.isPaused&&a.send("pause",{}),function(){}})})},n.upload=function(e){var t=this;if(0===e.length)return Promise.resolve();var r=e.map(function(e){var r=t.uppy.getFile(e);return r.isRemote?t.uploadRemote(r):t.uploadFile(r)});return Promise.all(r)},n.onFileRemove=function(e,t){this.uploaderEvents[e].on("file-removed",function(r){e===r.id&&t(r.id)})},n.onFilePause=function(e,t){this.uploaderEvents[e].on("upload-pause",function(r,o){e===r&&t(o)})},n.onRetry=function(e,t){this.uploaderEvents[e].on("upload-retry",function(r){e===r&&t()})},n.onRetryAll=function(e,t){var r=this;this.uploaderEvents[e].on("retry-all",function(o){r.uppy.getFile(e)&&t()})},n.onPauseAll=function(e,t){var r=this;this.uploaderEvents[e].on("pause-all",function(){r.uppy.getFile(e)&&t()})},n.onCancelAll=function(e,t){var r=this;this.uploaderEvents[e].on("cancel-all",function(){r.uppy.getFile(e)&&t()})},n.onResumeAll=function(e,t){var r=this;this.uploaderEvents[e].on("resume-all",function(){r.uppy.getFile(e)&&t()})},n.install=function(){var e=this.uppy.getState().capabilities;this.uppy.setState({capabilities:i({},e,{resumableUploads:!0})}),this.uppy.addUploader(this.upload)},n.uninstall=function(){var e=this.uppy.getState().capabilities;this.uppy.setState({capabilities:i({},e,{resumableUploads:!1})}),this.uppy.removeUploader(this.upload)},t}(u),e.VERSION="1.8.15",t);
},{"@uppy/core":"PDAA","@uppy/companion-client":"MaVI","@uppy/utils/lib/EventTracker":"E2Ah","@uppy/utils/lib/emitSocketProgress":"uTqy","@uppy/utils/lib/getSocketHost":"FB9Q","@uppy/utils/lib/RateLimitedQueue":"R5gH","./MultipartUploader":"fcVt"}],"YBDf":[function(require,module,exports) {
var global = arguments[3];
var define;
var t,r=arguments[3];!function(r,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(r):"function"==typeof t&&t.amd?t(e):e(r)}("undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==r?r:this,function(r){"use strict";var e,n=(r=r||{}).Base64,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=function(t){for(var r={},e=0,n=t.length;e<n;e++)r[t.charAt(e)]=e;return r}(o),c=String.fromCharCode,u=function(t){if(t.length<2)return(r=t.charCodeAt(0))<128?t:r<2048?c(192|r>>>6)+c(128|63&r):c(224|r>>>12&15)+c(128|r>>>6&63)+c(128|63&r);var r=65536+1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320);return c(240|r>>>18&7)+c(128|r>>>12&63)+c(128|r>>>6&63)+c(128|63&r)},i=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,f=function(t){return t.replace(i,u)},d=function(t){var r=[0,2,1][t.length%3],e=t.charCodeAt(0)<<16|(t.length>1?t.charCodeAt(1):0)<<8|(t.length>2?t.charCodeAt(2):0);return[o.charAt(e>>>18),o.charAt(e>>>12&63),r>=2?"=":o.charAt(e>>>6&63),r>=1?"=":o.charAt(63&e)].join("")},h=r.btoa&&"function"==typeof r.btoa?function(t){return r.btoa(t)}:function(t){if(t.match(/[^\x00-\xFF]/))throw new RangeError("The string contains invalid characters.");return t.replace(/[\s\S]{1,3}/g,d)},s=function(t){return h(f(String(t)))},A=function(t){return t.replace(/[+\/]/g,function(t){return"+"==t?"-":"_"}).replace(/=/g,"")},p=function(t,r){return r?A(s(t)):s(t)};r.Uint8Array&&(e=function(t,r){for(var e="",n=0,a=t.length;n<a;n+=3){var c=t[n],u=t[n+1],i=t[n+2],f=c<<16|u<<8|i;e+=o.charAt(f>>>18)+o.charAt(f>>>12&63)+(void 0!==u?o.charAt(f>>>6&63):"=")+(void 0!==i?o.charAt(63&f):"=")}return r?A(e):e});var l,g=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,y=function(t){switch(t.length){case 4:var r=((7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3))-65536;return c(55296+(r>>>10))+c(56320+(1023&r));case 3:return c((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return c((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},x=function(t){return t.replace(g,y)},B=function(t){var r=t.length,e=r%4,n=(r>0?a[t.charAt(0)]<<18:0)|(r>1?a[t.charAt(1)]<<12:0)|(r>2?a[t.charAt(2)]<<6:0)|(r>3?a[t.charAt(3)]:0),o=[c(n>>>16),c(n>>>8&255),c(255&n)];return o.length-=[0,0,2,1][e],o.join("")},C=r.atob&&"function"==typeof r.atob?function(t){return r.atob(t)}:function(t){return t.replace(/\S{1,4}/g,B)},b=function(t){return C(String(t).replace(/[^A-Za-z0-9\+\/]/g,""))},v=function(t){return String(t).replace(/[-_]/g,function(t){return"-"==t?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,"")},F=function(t){return function(t){return x(C(t))}(v(t))};r.Uint8Array&&(l=function(t){return Uint8Array.from(b(v(t)),function(t){return t.charCodeAt(0)})});if(r.Base64={VERSION:"2.6.4",atob:b,btoa:h,fromBase64:F,toBase64:p,utob:f,encode:p,encodeURI:function(t){return p(t,!0)},btou:x,decode:F,noConflict:function(){var t=r.Base64;return r.Base64=n,t},fromUint8Array:e,toUint8Array:l},"function"==typeof Object.defineProperty){var m=function(t){return{value:t,enumerable:!1,writable:!0,configurable:!0}};r.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",m(function(){return F(this)})),Object.defineProperty(String.prototype,"toBase64",m(function(t){return p(this,t)})),Object.defineProperty(String.prototype,"toBase64URI",m(function(){return p(this,!0)}))}}return r.Meteor&&(Base64=r.Base64),"undefined"!=typeof module&&module.exports?module.exports.Base64=r.Base64:"function"==typeof t&&t.amd&&t([],function(){return r.Base64}),{Base64:r.Base64}});
},{}],"qbPO":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}function r(t){return function(){var e,n=s(t);if(f()){var r=s(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return o(this,e)}}function o(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?u(e):n}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t){var e="function"==typeof Map?new Map:void 0;return(c=function(t){if(null===t||!l(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return i(t,arguments,s(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),a(n,t)})(t)}function i(t,e,n){return(i=f()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&a(o,n.prototype),o}).apply(null,arguments)}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function l(t){return-1!==Function.toString.call(t).indexOf("[native code]")}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var p=function(t){n(u,c(Error));var o=r(u);function u(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(e(this,u),(n=o.call(this,t)).originalRequest=c,n.originalResponse=i,n.causingError=r,null!=r&&(t+=", caused by ".concat(r.toString())),null!=c){var f=c.getHeader("X-Request-ID")||"n/a",l=c.getMethod(),a=c.getURL(),s=i?i.getStatus():"n/a",p=i?i.getBody()||"":"n/a";t+=", originated from request (method: ".concat(l,", url: ").concat(a,", response code: ").concat(s,", response text: ").concat(p,", request id: ").concat(f,")")}return n.message=t,n}return u}(),y=p;exports.default=y;
},{}],"O25u":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.enableDebugLog=o,exports.log=t;var e=!1;function o(){e=!0}function t(o){e&&console.log(o)}
},{}],"dpe9":[function(require,module,exports) {
"use strict";function x(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(x){var e=16*Math.random()|0;return("x"==x?e:3&e|8).toString(16)})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=x;
},{}],"iVnA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("js-base64"),t=i(require("url-parse")),r=i(require("./error")),o=require("./logger"),n=i(require("./uuid"));function i(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach(function(t){a(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function d(e,t,r){return t&&p(e.prototype,t),r&&p(e,r),e}var h={endpoint:null,uploadUrl:null,metadata:{},fingerprint:null,uploadSize:null,onProgress:null,onChunkComplete:null,onSuccess:null,onError:null,_onUploadUrlAvailable:null,overridePatchMethod:!1,headers:{},addRequestId:!1,onBeforeRequest:null,onAfterResponse:null,onShouldRetry:null,chunkSize:1/0,retryDelays:[0,1e3,3e3,5e3],parallelUploads:1,storeFingerprintForResuming:!0,removeFingerprintOnSuccess:!1,uploadLengthDeferred:!1,uploadDataDuringCreation:!1,urlStorage:null,fileReader:null,httpStack:null},f=function(){function e(t,r){u(this,e),"resume"in r&&console.log("tus: The `resume` option has been removed in tus-js-client v2. Please use the URL storage API instead."),this.options=r,this._urlStorage=this.options.urlStorage,this.file=t,this.url=null,this._req=null,this._fingerprint=null,this._urlStorageKey=null,this._offset=null,this._aborted=!1,this._size=null,this._source=null,this._retryAttempt=0,this._retryTimeout=null,this._offsetBeforeRetry=0,this._parallelUploads=null,this._parallelUploadUrls=null}return d(e,[{key:"findPreviousUploads",value:function(){var e=this;return this.options.fingerprint(this.file,this.options).then(function(t){return e._urlStorage.findUploadsByFingerprint(t)})}},{key:"resumeFromPreviousUpload",value:function(e){this.url=e.uploadUrl||null,this._parallelUploadUrls=e.parallelUploadUrls||null,this._urlStorageKey=e.urlStorageKey}},{key:"start",value:function(){var e=this,t=this.file;if(t)if(this.options.endpoint||this.options.uploadUrl){var r=this.options.retryDelays;null==r||"[object Array]"===Object.prototype.toString.call(r)?(this.options.parallelUploads>1&&["uploadUrl","uploadSize","uploadLengthDeferred"].forEach(function(t){e.options[t]&&e._emitError(new Error("tus: cannot use the ".concat(t," option when parallelUploads is enabled")))}),this.options.fingerprint(t,this.options).then(function(r){return null==r?(0,o.log)("No fingerprint was calculated meaning that the upload cannot be stored in the URL storage."):(0,o.log)("Calculated fingerprint: ".concat(r)),e._fingerprint=r,e._source?e._source:e.options.fileReader.openFile(t,e.options.chunkSize)}).then(function(t){e._source=t,e.options.parallelUploads>1||null!=e._parallelUploadUrls?e._startParallelUpload():e._startSingleUpload()}).catch(function(t){e._emitError(t)})):this._emitError(new Error("tus: the `retryDelays` option must either be an array or null"))}else this._emitError(new Error("tus: neither an endpoint or an upload URL is provided"));else this._emitError(new Error("tus: no file or stream to upload provided"))}},{key:"_startParallelUpload",value:function(){var t=this,r=this._size=this._source.size,n=0;this._parallelUploads=[];var i=null!=this._parallelUploadUrls?this._parallelUploadUrls.length:this.options.parallelUploads,s=S(this._source.size,i,this._parallelUploadUrls);this._parallelUploadUrls=new Array(s.length);var a,u=s.map(function(o,i){var a=0;return t._source.slice(o.start,o.end).then(function(u){var p=u.value;return new Promise(function(u,d){var h=l({},t.options,{uploadUrl:o.uploadUrl||null,storeFingerprintForResuming:!1,removeFingerprintOnSuccess:!1,parallelUploads:1,metadata:{},headers:l({},t.options.headers,{"Upload-Concat":"partial"}),onSuccess:u,onError:d,onProgress:function(e){n=n-a+e,a=e,t._emitProgress(n,r)},_onUploadUrlAvailable:function(){t._parallelUploadUrls[i]=f.url,t._parallelUploadUrls.filter(function(e){return!!e}).length===s.length&&t._saveUploadInUrlStorage()}}),f=new e(p,h);f.start(),t._parallelUploads.push(f)})})});Promise.all(u).then(function(){(a=t._openRequest("POST",t.options.endpoint)).setHeader("Upload-Concat","final;".concat(t._parallelUploadUrls.join(" ")));var e=c(t.options.metadata);return""!==e&&a.setHeader("Upload-Metadata",e),t._sendRequest(a,null)}).then(function(e){if(_(e.getStatus(),200)){var r=e.getHeader("Location");null!=r?(t.url=y(t.options.endpoint,r),(0,o.log)("Created upload at ".concat(t.url)),t._emitSuccess()):t._emitHttpError(a,e,"tus: invalid or missing Location header")}else t._emitHttpError(a,e,"tus: unexpected response while creating upload")}).catch(function(e){t._emitError(e)})}},{key:"_startSingleUpload",value:function(){if(this.options.uploadLengthDeferred)this._size=null;else if(null!=this.options.uploadSize){if(this._size=+this.options.uploadSize,isNaN(this._size))return void this._emitError(new Error("tus: cannot convert `uploadSize` option into a number"))}else if(this._size=this._source.size,null==this._size)return void this._emitError(new Error("tus: cannot automatically derive upload's size from input and must be specified manually using the `uploadSize` option"));return this._aborted=!1,null!=this.url?((0,o.log)("Resuming upload from previous URL: ".concat(this.url)),void this._resumeUpload()):null!=this.options.uploadUrl?((0,o.log)("Resuming upload from provided URL: ".concat(this.options.url)),this.url=this.options.uploadUrl,void this._resumeUpload()):((0,o.log)("Creating a new upload"),void this._createUpload())}},{key:"abort",value:function(t,r){var o=this;if("function"==typeof r)throw new Error("tus: the abort function does not accept a callback since v2 anymore; please use the returned Promise instead");return null!=this._parallelUploads&&this._parallelUploads.forEach(function(e){e.abort(t)}),null!==this._req&&(this._req.abort(),this._source.close()),this._aborted=!0,null!=this._retryTimeout&&(clearTimeout(this._retryTimeout),this._retryTimeout=null),t&&null!=this.url?e.terminate(this.url,this.options).then(function(){return o._removeFromUrlStorage()}):Promise.resolve()}},{key:"_emitHttpError",value:function(e,t,o,n){this._emitError(new r.default(o,n,e,t))}},{key:"_emitError",value:function(e){var t=this;if(!this._aborted){if(null!=this.options.retryDelays)if(null!=this._offset&&this._offset>this._offsetBeforeRetry&&(this._retryAttempt=0),U(e,this._retryAttempt,this.options)){var r=this.options.retryDelays[this._retryAttempt++];return this._offsetBeforeRetry=this._offset,void(this._retryTimeout=setTimeout(function(){t.start()},r))}if("function"!=typeof this.options.onError)throw e;this.options.onError(e)}}},{key:"_emitSuccess",value:function(){this.options.removeFingerprintOnSuccess&&this._removeFromUrlStorage(),"function"==typeof this.options.onSuccess&&this.options.onSuccess()}},{key:"_emitProgress",value:function(e,t){"function"==typeof this.options.onProgress&&this.options.onProgress(e,t)}},{key:"_emitChunkComplete",value:function(e,t,r){"function"==typeof this.options.onChunkComplete&&this.options.onChunkComplete(e,t,r)}},{key:"_createUpload",value:function(){var e=this;if(this.options.endpoint){var t=this._openRequest("POST",this.options.endpoint);this.options.uploadLengthDeferred?t.setHeader("Upload-Defer-Length",1):t.setHeader("Upload-Length",this._size);var r,n=c(this.options.metadata);""!==n&&t.setHeader("Upload-Metadata",n),this.options.uploadDataDuringCreation&&!this.options.uploadLengthDeferred?(this._offset=0,r=this._addChunkToRequest(t)):r=this._sendRequest(t,null),r.then(function(r){if(_(r.getStatus(),200)){var n=r.getHeader("Location");if(null!=n){if(e.url=y(e.options.endpoint,n),(0,o.log)("Created upload at ".concat(e.url)),"function"==typeof e.options._onUploadUrlAvailable&&e.options._onUploadUrlAvailable(),0===e._size)return e._emitSuccess(),void e._source.close();e._saveUploadInUrlStorage(),e.options.uploadDataDuringCreation?e._handleUploadResponse(t,r):(e._offset=0,e._performUpload())}else e._emitHttpError(t,r,"tus: invalid or missing Location header")}else e._emitHttpError(t,r,"tus: unexpected response while creating upload")}).catch(function(r){e._emitHttpError(t,null,"tus: failed to create upload",r)})}else this._emitError(new Error("tus: unable to create upload because no endpoint is provided"))}},{key:"_resumeUpload",value:function(){var e=this,t=this._openRequest("HEAD",this.url);this._sendRequest(t,null).then(function(r){var o=r.getStatus();if(!_(o,200))return _(o,400)&&e._removeFromUrlStorage(),423===o?void e._emitHttpError(t,r,"tus: upload is currently locked; retry later"):e.options.endpoint?(e.url=null,void e._createUpload()):void e._emitHttpError(t,r,"tus: unable to resume upload (new upload cannot be created without an endpoint)");var n=parseInt(r.getHeader("Upload-Offset"),10);if(isNaN(n))e._emitHttpError(t,r,"tus: invalid or missing offset value");else{var i=parseInt(r.getHeader("Upload-Length"),10);if(!isNaN(i)||e.options.uploadLengthDeferred){if("function"==typeof e.options._onUploadUrlAvailable&&e.options._onUploadUrlAvailable(),n===i)return e._emitProgress(i,i),void e._emitSuccess();e._offset=n,e._performUpload()}else e._emitHttpError(t,r,"tus: invalid or missing length value")}}).catch(function(r){e._emitHttpError(t,null,"tus: failed to resume upload",r)})}},{key:"_performUpload",value:function(){var e,t=this;this._aborted||(this.options.overridePatchMethod?(e=this._openRequest("POST",this.url)).setHeader("X-HTTP-Method-Override","PATCH"):e=this._openRequest("PATCH",this.url),e.setHeader("Upload-Offset",this._offset),this._addChunkToRequest(e).then(function(r){_(r.getStatus(),200)?t._handleUploadResponse(e,r):t._emitHttpError(e,r,"tus: unexpected response while uploading chunk")}).catch(function(r){t._aborted||t._emitHttpError(e,null,"tus: failed to upload chunk at offset "+t._offset,r)}))}},{key:"_addChunkToRequest",value:function(e){var t=this,r=this._offset,o=this._offset+this.options.chunkSize;return e.setProgressHandler(function(e){t._emitProgress(r+e,t._size)}),e.setHeader("Content-Type","application/offset+octet-stream"),(o===1/0||o>this._size)&&!this.options.uploadLengthDeferred&&(o=this._size),this._source.slice(r,o).then(function(r){var o=r.value,n=r.done;return t.options.uploadLengthDeferred&&n&&(t._size=t._offset+(o&&o.size?o.size:0),e.setHeader("Upload-Length",t._size)),null===o?t._sendRequest(e):(t._emitProgress(t._offset,t._size),t._sendRequest(e,o))})}},{key:"_handleUploadResponse",value:function(e,t){var r=parseInt(t.getHeader("Upload-Offset"),10);if(isNaN(r))this._emitHttpError(e,t,"tus: invalid or missing offset value");else{if(this._emitProgress(r,this._size),this._emitChunkComplete(r-this._offset,r,this._size),this._offset=r,r==this._size)return this._emitSuccess(),void this._source.close();this._performUpload()}}},{key:"_openRequest",value:function(e,t){var r=v(e,t,this.options);return this._req=r,r}},{key:"_removeFromUrlStorage",value:function(){var e=this;this._urlStorageKey&&(this._urlStorage.removeUpload(this._urlStorageKey).catch(function(t){e._emitError(t)}),this._urlStorageKey=null)}},{key:"_saveUploadInUrlStorage",value:function(){var e=this;if(this.options.storeFingerprintForResuming&&this._fingerprint){var t={size:this._size,metadata:this.options.metadata,creationTime:(new Date).toString()};this._parallelUploads?t.parallelUploadUrls=this._parallelUploadUrls:t.uploadUrl=this.url,this._urlStorage.addUpload(this._fingerprint,t).then(function(t){return e._urlStorageKey=t}).catch(function(t){e._emitError(t)})}}},{key:"_sendRequest",value:function(e){return m(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,this.options)}}],[{key:"terminate",value:function(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;if("function"==typeof o||"function"==typeof n)throw new Error("tus: the terminate function does not accept a callback since v2 anymore; please use the returned Promise instead");var i=v("DELETE",t,o);return m(i,null,o).then(function(e){if(204!==e.getStatus())throw new r.default("tus: unexpected response while terminating upload",null,i,e)}).catch(function(n){if(n instanceof r.default||(n=new r.default("tus: failed to terminate upload",n,i,null)),!U(n,0,o))throw n;var s=o.retryDelays[0],a=o.retryDelays.slice(1),u=l({},o,{retryDelays:a});return new Promise(function(e){return setTimeout(e,s)}).then(function(){return e.terminate(t,u)})})}}]),e}();function c(t){var r=[];for(var o in t)r.push(o+" "+e.Base64.encode(t[o]));return r.join(",")}function _(e,t){return e>=t&&e<t+100}function v(e,t,r){var o=r.httpStack.createRequest(e,t);o.setHeader("Tus-Resumable","1.0.0");var i=r.headers||{};for(var s in i)o.setHeader(s,i[s]);if(r.addRequestId){var l=(0,n.default)();o.setHeader("X-Request-ID",l)}return o}function m(e,t,r){return("function"==typeof r.onBeforeRequest?Promise.resolve(r.onBeforeRequest(e)):Promise.resolve()).then(function(){return e.send(t).then(function(t){return("function"==typeof r.onAfterResponse?Promise.resolve(r.onAfterResponse(e,t)):Promise.resolve()).then(function(){return t})})})}function g(){var e=!0;return"undefined"!=typeof window&&"navigator"in window&&!1===window.navigator.onLine&&(e=!1),e}function U(e,t,r){if(null==r.retryDelays||t>=r.retryDelays.length||null==e.originalRequest)return!1;if(r&&"function"==typeof r.onShouldRetry)return r.onShouldRetry(e,t,r);var o=e.originalResponse?e.originalResponse.getStatus():0;return(!_(o,400)||409===o||423===o)&&g()}function y(e,r){return new t.default(r,e).toString()}function S(e,t,r){for(var o=Math.floor(e/t),n=[],i=0;i<t;i++)n.push({start:o*i,end:o*(i+1)});return n[t-1].end=e,r&&n.forEach(function(e,t){e.uploadUrl=r[t]||null}),n}f.defaultOptions=h;var b=f;exports.default=b;
},{"js-base64":"YBDf","url-parse":"t0IB","./error":"qbPO","./logger":"O25u","./uuid":"dpe9"}],"J9g0":[function(require,module,exports) {
"use strict";function e(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function r(e,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function n(e,n,o){return n&&r(e.prototype,n),o&&r(e,o),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var o=function(){function r(){e(this,r)}return n(r,[{key:"listAllUploads",value:function(){return Promise.resolve([])}},{key:"findUploadsByFingerprint",value:function(e){return Promise.resolve([])}},{key:"removeUpload",value:function(e){return Promise.resolve()}},{key:"addUpload",value:function(e,r){return Promise.resolve(null)}}]),r}();exports.default=o;
},{}],"UtQI":[function(require,module,exports) {
"use strict";function e(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function r(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function t(e,t,o){return t&&r(e.prototype,t),o&&r(e,o),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebStorageUrlStorage=exports.canStoreURLs=void 0;var o=!1;try{o="localStorage"in window;var a="tusSupport";localStorage.setItem(a,localStorage.getItem(a))}catch(i){if(i.code!==i.SECURITY_ERR&&i.code!==i.QUOTA_EXCEEDED_ERR)throw i;o=!1}var n=o;exports.canStoreURLs=n;var l=function(){function r(){e(this,r)}return t(r,[{key:"findAllUploads",value:function(){var e=this._findEntries("tus::");return Promise.resolve(e)}},{key:"findUploadsByFingerprint",value:function(e){var r=this._findEntries("tus::".concat(e,"::"));return Promise.resolve(r)}},{key:"removeUpload",value:function(e){return localStorage.removeItem(e),Promise.resolve()}},{key:"addUpload",value:function(e,r){var t=Math.round(1e12*Math.random()),o="tus::".concat(e,"::").concat(t);return localStorage.setItem(o,JSON.stringify(r)),Promise.resolve(o)}},{key:"_findEntries",value:function(e){for(var r=[],t=0;t<localStorage.length;t++){var o=localStorage.key(t);if(0===o.indexOf(e))try{var a=JSON.parse(localStorage.getItem(o));a.urlStorageKey=o,r.push(a)}catch(i){}}return r}}]),r}();exports.WebStorageUrlStorage=l;
},{}],"LAl4":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r=function(){function t(){e(this,t)}return n(t,[{key:"createRequest",value:function(e,t){return new u(e,t)}},{key:"getName",value:function(){return"XHRHttpStack"}}]),t}();exports.default=r;var u=function(){function t(n,r){e(this,t),this._xhr=new XMLHttpRequest,this._xhr.open(n,r,!0),this._method=n,this._url=r,this._headers={}}return n(t,[{key:"getMethod",value:function(){return this._method}},{key:"getURL",value:function(){return this._url}},{key:"setHeader",value:function(e,t){this._xhr.setRequestHeader(e,t),this._headers[e]=t}},{key:"getHeader",value:function(e){return this._headers[e]}},{key:"setProgressHandler",value:function(e){"upload"in this._xhr&&(this._xhr.upload.onprogress=function(t){t.lengthComputable&&e(t.loaded)})}},{key:"send",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new Promise(function(n,r){e._xhr.onload=function(){n(new o(e._xhr))},e._xhr.onerror=function(e){r(e)},e._xhr.send(t)})}},{key:"abort",value:function(){return this._xhr.abort(),Promise.resolve()}},{key:"getUnderlyingObject",value:function(){return this._xhr}}]),t}(),o=function(){function t(n){e(this,t),this._xhr=n}return n(t,[{key:"getStatus",value:function(){return this._xhr.status}},{key:"getHeader",value:function(e){return this._xhr.getResponseHeader(e)}},{key:"getBody",value:function(){return this._xhr.responseText}},{key:"getUnderlyingObject",value:function(){return this._xhr}}]),t}();
},{}],"BNF5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=function(){return"undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase()},t=e;exports.default=t;
},{}],"aNaa":[function(require,module,exports) {
"use strict";function e(e){return new Promise(function(n,o){var r=new XMLHttpRequest;r.responseType="blob",r.onload=function(){var e=r.response;n(e)},r.onerror=function(e){o(e)},r.open("GET",e),r.send()})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"QyUM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var o=function(){return"undefined"!=typeof window&&(void 0!==window.PhoneGap||void 0!==window.Cordova||void 0!==window.cordova)},e=o;exports.default=e;
},{}],"mYF8":[function(require,module,exports) {
"use strict";function e(e){return new Promise(function(r,n){var t=new FileReader;t.onload=function(){var e=new Uint8Array(t.result);r({value:e})},t.onerror=function(e){n(e)},t.readAsArrayBuffer(e)})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"ofGa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("./isReactNative")),r=i(require("./uriToBlob")),t=i(require("./isCordova")),n=i(require("./readAsByteArray"));function i(e){return e&&e.__esModule?e:{default:e}}function o(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function u(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,r,t){return r&&u(e.prototype,r),t&&u(e,t),e}var s=function(){function e(r){o(this,e),this._file=r,this.size=r.size}return f(e,[{key:"slice",value:function(e,r){if((0,t.default)())return(0,n.default)(this._file.slice(e,r));var i=this._file.slice(e,r);return Promise.resolve({value:i})}},{key:"close",value:function(){}}]),e}(),a=function(){function e(r,t){o(this,e),this._chunkSize=t,this._buffer=void 0,this._bufferOffset=0,this._reader=r,this._done=!1}return f(e,[{key:"slice",value:function(e,r){return e<this._bufferOffset?Promise.reject(new Error("Requested data is before the reader's current offset")):this._readUntilEnoughDataOrDone(e,r)}},{key:"_readUntilEnoughDataOrDone",value:function(e,r){var t=this,n=r<=this._bufferOffset+c(this._buffer);if(this._done||n){var i=this._getDataFromBuffer(e,r),o=null==i&&this._done;return Promise.resolve({value:i,done:o})}return this._reader.read().then(function(n){var i=n.value;return n.done?t._done=!0:void 0===t._buffer?t._buffer=i:t._buffer=l(t._buffer,i),t._readUntilEnoughDataOrDone(e,r)})}},{key:"_getDataFromBuffer",value:function(e,r){e>this._bufferOffset&&(this._buffer=this._buffer.slice(e-this._bufferOffset),this._bufferOffset=e);var t=0===c(this._buffer);return this._done&&t?null:this._buffer.slice(0,r-e)}},{key:"close",value:function(){this._reader.cancel&&this._reader.cancel()}}]),e}();function c(e){return void 0===e?0:void 0!==e.size?e.size:e.length}function l(e,r){if(e.concat)return e.concat(r);if(e instanceof Blob)return new Blob([e,r],{type:e.type});if(e.set){var t=new e.constructor(e.length+r.length);return t.set(e),t.set(r,e.length),t}throw new Error("Unknown data type")}var h=function(){function t(){o(this,t)}return f(t,[{key:"openFile",value:function(t,n){return(0,e.default)()&&t&&void 0!==t.uri?(0,r.default)(t.uri).then(function(e){return new s(e)}).catch(function(e){throw new Error("tus: cannot fetch `file.uri` as Blob, make sure the uri is correct and accessible. "+e)}):"function"==typeof t.slice&&void 0!==t.size?Promise.resolve(new s(t)):"function"==typeof t.read?(n=+n,isFinite(n)?Promise.resolve(new a(t,n)):Promise.reject(new Error("cannot create source for stream without a finite value for the `chunkSize` option"))):Promise.reject(new Error("source object may only be an instance of File, Blob, or Reader in this environment"))}}]),t}();exports.default=h;
},{"./isReactNative":"BNF5","./uriToBlob":"aNaa","./isCordova":"QyUM","./readAsByteArray":"mYF8"}],"rdQW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=n(require("./isReactNative"));function n(e){return e&&e.__esModule?e:{default:e}}function r(n,r){return(0,e.default)()?Promise.resolve(t(n,r)):Promise.resolve(["tus-br",n.name,n.type,n.size,n.lastModified,r.endpoint].join("-"))}function t(e,n){var r=e.exif?i(JSON.stringify(e.exif)):"noexif";return["tus-rn",e.name||"noname",e.size||"nosize",r,n.endpoint].join("/")}function i(e){var n=0;if(0===e.length)return n;for(var r=0;r<e.length;r++){n=(n<<5)-n+e.charCodeAt(r),n&=n}return n}
},{"./isReactNative":"BNF5"}],"d1OM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"enableDebugLog",{enumerable:!0,get:function(){return r.enableDebugLog}}),Object.defineProperty(exports,"canStoreURLs",{enumerable:!0,get:function(){return n.canStoreURLs}}),Object.defineProperty(exports,"HttpStack",{enumerable:!0,get:function(){return o.default}}),exports.isSupported=exports.defaultOptions=exports.Upload=void 0;var e=c(require("../upload")),t=c(require("../noopUrlStorage")),r=require("../logger"),n=require("./urlStorage"),o=c(require("./httpStack")),u=c(require("./fileReader")),i=c(require("./fingerprint"));function c(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t,r){return t&&l(e.prototype,t),r&&l(e,r),e}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){return function(){var t,r=h(e);if(g()){var n=h(this).constructor;t=Reflect.construct(r,arguments,n)}else t=r.apply(this,arguments);return d(this,t)}}function d(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?O(e):t}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach(function(t){S(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function S(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var w=v({},e.default.defaultOptions,{httpStack:new o.default,fileReader:new u.default,urlStorage:n.canStoreURLs?new n.WebStorageUrlStorage:new t.default,fingerprint:i.default});exports.defaultOptions=w;var m=function(t){s(n,e.default);var r=y(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a(this,n),t=v({},w,{},t),r.call(this,e,t)}return p(n,null,[{key:"terminate",value:function(t,r,n){return r=v({},w,{},r),e.default.terminate(t,r,n)}}]),n}();exports.Upload=m;var P=window,x=P.XMLHttpRequest,R=P.Blob,_=x&&R&&"function"==typeof R.prototype.slice;exports.isSupported=_;
},{"../upload":"iVnA","../noopUrlStorage":"J9g0","../logger":"O25u","./urlStorage":"UtQI","./httpStack":"LAl4","./fileReader":"ofGa","./fingerprint":"rdQW"}],"f9VK":[function(require,module,exports) {
var n=require("tus-js-client");function o(){return"undefined"!=typeof window&&(void 0!==window.PhoneGap||void 0!==window.Cordova||void 0!==window.cordova)}function r(){return"undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase()}module.exports=function(t){return function(e,i){if(o()||r())return n.defaultOptions.fingerprint(e,i);var d=["tus",t.id,i.endpoint].join("-");return Promise.resolve(d)}};
},{"tus-js-client":"d1OM"}],"jW88":[function(require,module,exports) {
var e,t;function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e}).apply(this,arguments)}function o(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function n(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,u(e,t)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var i=require("@uppy/core"),s=i.Plugin,l=require("tus-js-client"),a=require("@uppy/companion-client"),p=a.Provider,d=a.RequestClient,c=a.Socket,f=require("@uppy/utils/lib/emitSocketProgress"),h=require("@uppy/utils/lib/getSocketHost"),y=require("@uppy/utils/lib/settle"),m=require("@uppy/utils/lib/EventTracker"),v=require("@uppy/utils/lib/NetworkError"),g=require("@uppy/utils/lib/isNetworkError"),b=require("@uppy/utils/lib/RateLimitedQueue"),R=require("@uppy/utils/lib/hasProperty"),U=require("./getFingerprint"),S={endpoint:"",uploadUrl:null,metadata:{},uploadSize:null,onProgress:null,onChunkComplete:null,onSuccess:null,onError:null,overridePatchMethod:!1,headers:{},addRequestId:!1,chunkSize:1/0,retryDelays:[0,1e3,3e3,5e3],parallelUploads:1,storeFingerprintForResuming:!0,removeFingerprintOnSuccess:!1,uploadLengthDeferred:!1,uploadDataDuringCreation:!1};module.exports=(t=e=function(e){function t(t,n){var u;(u=e.call(this,t,n)||this).type="uploader",u.id=u.opts.id||"Tus",u.title="Tus";return u.opts=r({},{autoRetry:!0,resume:!0,useFastRemoteRetry:!0,limit:0,retryDelays:[0,1e3,3e3,5e3],withCredentials:!1},n),u.requests=new b(u.opts.limit),u.uploaders=Object.create(null),u.uploaderEvents=Object.create(null),u.uploaderSockets=Object.create(null),u.handleResetProgress=u.handleResetProgress.bind(o(u)),u.handleUpload=u.handleUpload.bind(o(u)),u}n(t,e);var u=t.prototype;return u.handleResetProgress=function(){var e=r({},this.uppy.getState().files);Object.keys(e).forEach(function(t){if(e[t].tus&&e[t].tus.uploadUrl){var o=r({},e[t].tus);delete o.uploadUrl,e[t]=r({},e[t],{tus:o})}}),this.uppy.setState({files:e})},u.resetUploaderReferences=function(e,t){if(void 0===t&&(t={}),this.uploaders[e]){var r=this.uploaders[e];r.abort(),t.abort&&setTimeout(function(){return r.abort(!0)},1e3),this.uploaders[e]=null}this.uploaderEvents[e]&&(this.uploaderEvents[e].remove(),this.uploaderEvents[e]=null),this.uploaderSockets[e]&&(this.uploaderSockets[e].close(),this.uploaderSockets[e]=null)},u.upload=function(e,t,o){var n=this;return this.resetUploaderReferences(e.id),new Promise(function(t,o){n.uppy.emit("upload-started",e);var u=r({},n.opts,e.tus||{}),i=r({},S,u);delete i.resume,u.resume&&(i.storeFingerprintForResuming=!0),i.fingerprint=U(e),i.onBeforeRequest=function(e){e.getUnderlyingObject().withCredentials=!!u.withCredentials,"function"==typeof u.onBeforeRequest&&u.onBeforeRequest(e)},i.onError=function(t){n.uppy.log(t);var r=t.originalRequest?t.originalRequest.getUnderlyingObject():null;g(r)&&(t=new v(t,r)),n.resetUploaderReferences(e.id),d.done(),n.uppy.emit("upload-error",e,t),o(t)},i.onProgress=function(t,r){n.onReceiveUploadUrl(e,p.url),n.uppy.emit("upload-progress",e,{uploader:n,bytesUploaded:t,bytesTotal:r})},i.onSuccess=function(){var r={uploadURL:p.url};n.resetUploaderReferences(e.id),d.done(),n.uppy.emit("upload-success",e,r),p.url&&n.uppy.log("Download "+p.file.name+" from "+p.url),t(p)};var s=function(e,t,r){R(e,t)&&!R(e,r)&&(e[r]=e[t])},a={};(Array.isArray(u.metaFields)?u.metaFields:Object.keys(e.meta)).forEach(function(t){a[t]=e.meta[t]}),s(a,"type","filetype"),s(a,"name","filename"),i.metadata=a;var p=new l.Upload(e.data,i);n.uploaders[e.id]=p,n.uploaderEvents[e.id]=new m(n.uppy),u.resume&&p.findPreviousUploads().then(function(t){var r=t[0];r&&(n.uppy.log("[Tus] Resuming upload of "+e.id+" started at "+r.creationTime),p.resumeFromPreviousUpload(r))});var d=n.requests.run(function(){return e.isPaused||Promise.resolve().then(function(){p.start()}),function(){}});n.onFileRemove(e.id,function(r){d.abort(),n.resetUploaderReferences(e.id,{abort:!!p.url}),t("upload "+r+" was removed")}),n.onPause(e.id,function(e){e?(d.abort(),p.abort()):(d.abort(),d=n.requests.run(function(){return p.start(),function(){}}))}),n.onPauseAll(e.id,function(){d.abort(),p.abort()}),n.onCancelAll(e.id,function(){d.abort(),n.resetUploaderReferences(e.id,{abort:!!p.url}),t("upload "+e.id+" was canceled")}),n.onResumeAll(e.id,function(){d.abort(),e.error&&p.abort(),d=n.requests.run(function(){return p.start(),function(){}})})}).catch(function(t){throw n.uppy.emit("upload-error",e,t),t})},u.uploadRemote=function(e,t,o){var n=this;this.resetUploaderReferences(e.id);var u=r({},this.opts);return e.tus&&r(u,e.tus),this.uppy.emit("upload-started",e),this.uppy.log(e.remote.url),e.serverToken?this.connectToServerSocket(e):new Promise(function(t,o){new(e.remote.providerOptions.provider?p:d)(n.uppy,e.remote.providerOptions).post(e.remote.url,r({},e.remote.body,{endpoint:u.endpoint,uploadUrl:u.uploadUrl,protocol:"tus",size:e.data.size,headers:u.headers,metadata:e.meta})).then(function(t){return n.uppy.setFileState(e.id,{serverToken:t.token}),e=n.uppy.getFile(e.id),n.connectToServerSocket(e)}).then(function(){t()}).catch(function(t){n.uppy.emit("upload-error",e,t),o(t)})})},u.connectToServerSocket=function(e){var t=this;return new Promise(function(o,n){var u=e.serverToken,i=h(e.remote.companionUrl),s=new c({target:i+"/api/"+u,autoOpen:!1});t.uploaderSockets[e.id]=s,t.uploaderEvents[e.id]=new m(t.uppy),t.onFileRemove(e.id,function(){l.abort(),s.send("pause",{}),s.send("cancel",{}),t.resetUploaderReferences(e.id),o("upload "+e.id+" was removed")}),t.onPause(e.id,function(e){e?(l.abort(),s.send("pause",{})):(l.abort(),l=t.requests.run(function(){return s.send("resume",{}),function(){}}))}),t.onPauseAll(e.id,function(){l.abort(),s.send("pause",{})}),t.onCancelAll(e.id,function(){l.abort(),s.send("pause",{}),s.send("cancel",{}),t.resetUploaderReferences(e.id),o("upload "+e.id+" was canceled")}),t.onResumeAll(e.id,function(){l.abort(),e.error&&s.send("pause",{}),l=t.requests.run(function(){return s.send("resume",{}),function(){}})}),t.onRetry(e.id,function(){s.isOpen&&(s.send("pause",{}),s.send("resume",{}))}),t.onRetryAll(e.id,function(){s.isOpen&&(s.send("pause",{}),s.send("resume",{}))}),s.on("progress",function(r){return f(t,r,e)}),s.on("error",function(o){var u=o.error.message,i=r(new Error(u),{cause:o.error});t.opts.useFastRemoteRetry?s.close():(t.resetUploaderReferences(e.id),t.uppy.setFileState(e.id,{serverToken:null})),t.uppy.emit("upload-error",e,i),l.done(),n(i)}),s.on("success",function(r){var n={uploadURL:r.url};t.uppy.emit("upload-success",e,n),t.resetUploaderReferences(e.id),l.done(),o()});var l=t.requests.run(function(){return s.open(),e.isPaused&&s.send("pause",{}),function(){}})})},u.onReceiveUploadUrl=function(e,t){var o=this.uppy.getFile(e.id);o&&(o.tus&&o.tus.uploadUrl===t||(this.uppy.log("[Tus] Storing upload url"),this.uppy.setFileState(o.id,{tus:r({},o.tus,{uploadUrl:t})})))},u.onFileRemove=function(e,t){this.uploaderEvents[e].on("file-removed",function(r){e===r.id&&t(r.id)})},u.onPause=function(e,t){this.uploaderEvents[e].on("upload-pause",function(r,o){e===r&&t(o)})},u.onRetry=function(e,t){this.uploaderEvents[e].on("upload-retry",function(r){e===r&&t()})},u.onRetryAll=function(e,t){var r=this;this.uploaderEvents[e].on("retry-all",function(o){r.uppy.getFile(e)&&t()})},u.onPauseAll=function(e,t){var r=this;this.uploaderEvents[e].on("pause-all",function(){r.uppy.getFile(e)&&t()})},u.onCancelAll=function(e,t){var r=this;this.uploaderEvents[e].on("cancel-all",function(){r.uppy.getFile(e)&&t()})},u.onResumeAll=function(e,t){var r=this;this.uploaderEvents[e].on("resume-all",function(){r.uppy.getFile(e)&&t()})},u.uploadFiles=function(e){var t=this,r=e.map(function(r,o){var n=o+1,u=e.length;return"error"in r&&r.error?Promise.reject(new Error(r.error)):r.isRemote?t.uploadRemote(r,n,u):t.upload(r,n,u)});return y(r)},u.handleUpload=function(e){var t=this;if(0===e.length)return this.uppy.log("[Tus] No files to upload"),Promise.resolve();0===this.opts.limit&&this.uppy.log("[Tus] When uploading multiple files at once, consider setting the `limit` option (to `10` for example), to limit the number of concurrent uploads, which helps prevent memory and network issues: https://uppy.io/docs/tus/#limit-0","warning"),this.uppy.log("[Tus] Uploading...");var r=e.map(function(e){return t.uppy.getFile(e)});return this.uploadFiles(r).then(function(){return null})},u.install=function(){this.uppy.setState({capabilities:r({},this.uppy.getState().capabilities,{resumableUploads:!0})}),this.uppy.addUploader(this.handleUpload),this.uppy.on("reset-progress",this.handleResetProgress),this.opts.autoRetry&&this.uppy.on("back-online",this.uppy.retryAll)},u.uninstall=function(){this.uppy.setState({capabilities:r({},this.uppy.getState().capabilities,{resumableUploads:!1})}),this.uppy.removeUploader(this.handleUpload),this.opts.autoRetry&&this.uppy.off("back-online",this.uppy.retryAll)},t}(s),e.VERSION="1.8.7",t);
},{"@uppy/core":"PDAA","tus-js-client":"d1OM","@uppy/companion-client":"MaVI","@uppy/utils/lib/emitSocketProgress":"uTqy","@uppy/utils/lib/getSocketHost":"FB9Q","@uppy/utils/lib/settle":"uLzd","@uppy/utils/lib/EventTracker":"E2Ah","@uppy/utils/lib/NetworkError":"jqwg","@uppy/utils/lib/isNetworkError":"K46j","@uppy/utils/lib/RateLimitedQueue":"R5gH","@uppy/utils/lib/hasProperty":"ss9M","./getFingerprint":"f9VK"}],"PndQ":[function(require,module,exports) {
function t(t){if(t)return e(t)}function e(e){for(var s in t.prototype)e[s]=t.prototype[s];return e}"undefined"!=typeof module&&(module.exports=t),t.prototype.on=t.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},t.prototype.once=function(t,e){function s(){this.off(t,s),e.apply(this,arguments)}return s.fn=e,this.on(t,s),this},t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var s,r=this._callbacks["$"+t];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var i=0;i<r.length;i++)if((s=r[i])===e||s.fn===e){r.splice(i,1);break}return 0===r.length&&delete this._callbacks["$"+t],this},t.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),s=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(s){r=0;for(var i=(s=s.slice(0)).length;r<i;++r)s[r].apply(this,e)}return this},t.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},t.prototype.hasListeners=function(t){return!!this.listeners(t).length};
},{}],"Z0fa":[function(require,module,exports) {
module.exports=function(e){var n=/^\w+:\/\//.exec(e),i=0;n&&(i=n[0].length+1);var r=e.indexOf("/",i);return-1===r?{origin:e,pathname:"/"}:{origin:e.slice(0,r),pathname:e.slice(r)}};
},{}],"qqZP":[function(require,module,exports) {
var r=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,e=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];module.exports=function(t){var s=t,o=t.indexOf("["),a=t.indexOf("]");-1!=o&&-1!=a&&(t=t.substring(0,o)+t.substring(o,a).replace(/:/g,";")+t.substring(a,t.length));for(var u=r.exec(t||""),i={},h=14;h--;)i[e[h]]=u[h]||"";return-1!=o&&-1!=a&&(i.source=s,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i};
},{}],"U8JX":[function(require,module,exports) {
var s=1e3,e=60*s,r=60*e,a=24*r,n=365.25*a;function c(c){if(!((c=String(c)).length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(c);if(t){var i=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return i*n;case"days":case"day":case"d":return i*a;case"hours":case"hour":case"hrs":case"hr":case"h":return i*r;case"minutes":case"minute":case"mins":case"min":case"m":return i*e;case"seconds":case"second":case"secs":case"sec":case"s":return i*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i;default:return}}}}function t(n){return n>=a?Math.round(n/a)+"d":n>=r?Math.round(n/r)+"h":n>=e?Math.round(n/e)+"m":n>=s?Math.round(n/s)+"s":n+"ms"}function i(n){return o(n,a,"day")||o(n,r,"hour")||o(n,e,"minute")||o(n,s,"second")||n+" ms"}function o(s,e,r){if(!(s<e))return s<1.5*e?Math.floor(s/e)+" "+r:Math.ceil(s/e)+" "+r+"s"}module.exports=function(s,e){e=e||{};var r=typeof s;if("string"===r&&s.length>0)return c(s);if("number"===r&&!1===isNaN(s))return e.long?i(s):t(s);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(s))};
},{}],"yIfd":[function(require,module,exports) {
function e(e){var r,s=0;for(r in e)s=(s<<5)-s+e.charCodeAt(r),s|=0;return exports.colors[Math.abs(s)%exports.colors.length]}function r(r){var t;function o(){if(o.enabled){var e=o,r=+new Date,s=r-(t||r);e.diff=s,e.prev=t,e.curr=r,t=r;for(var n=new Array(arguments.length),p=0;p<n.length;p++)n[p]=arguments[p];n[0]=exports.coerce(n[0]),"string"!=typeof n[0]&&n.unshift("%O");var a=0;n[0]=n[0].replace(/%([a-zA-Z%])/g,function(r,s){if("%%"===r)return r;a++;var t=exports.formatters[s];if("function"==typeof t){var o=n[a];r=t.call(e,o),n.splice(a,1),a--}return r}),exports.formatArgs.call(e,n),(o.log||exports.log||console.log.bind(console)).apply(e,n)}}return o.namespace=r,o.enabled=exports.enabled(r),o.useColors=exports.useColors(),o.color=e(r),o.destroy=s,"function"==typeof exports.init&&exports.init(o),exports.instances.push(o),o}function s(){var e=exports.instances.indexOf(this);return-1!==e&&(exports.instances.splice(e,1),!0)}function t(e){var r;exports.save(e),exports.names=[],exports.skips=[];var s=("string"==typeof e?e:"").split(/[\s,]+/),t=s.length;for(r=0;r<t;r++)s[r]&&("-"===(e=s[r].replace(/\*/g,".*?"))[0]?exports.skips.push(new RegExp("^"+e.substr(1)+"$")):exports.names.push(new RegExp("^"+e+"$")));for(r=0;r<exports.instances.length;r++){var o=exports.instances[r];o.enabled=exports.enabled(o.namespace)}}function o(){exports.enable("")}function n(e){if("*"===e[e.length-1])return!0;var r,s;for(r=0,s=exports.skips.length;r<s;r++)if(exports.skips[r].test(e))return!1;for(r=0,s=exports.names.length;r<s;r++)if(exports.names[r].test(e))return!0;return!1}function p(e){return e instanceof Error?e.stack||e.message:e}exports=module.exports=r.debug=r.default=r,exports.coerce=p,exports.disable=o,exports.enable=t,exports.enabled=n,exports.humanize=require("ms"),exports.instances=[],exports.names=[],exports.skips=[],exports.formatters={};
},{"ms":"U8JX"}],"Nk7M":[function(require,module,exports) {
var process = require("process");
var e=require("process");function o(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function C(e){var o=this.useColors;if(e[0]=(o?"%c":"")+this.namespace+(o?" %c":" ")+e[0]+(o?"%c ":" ")+"+"+exports.humanize(this.diff),o){var C="color: "+this.color;e.splice(1,0,C,"color: inherit");var t=0,r=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(t++,"%c"===e&&(r=t))}),e.splice(r,0,C)}}function t(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function r(e){try{null==e?exports.storage.removeItem("debug"):exports.storage.debug=e}catch(o){}}function n(){var o;try{o=exports.storage.debug}catch(C){}return!o&&void 0!==e&&"env"in e&&(o=void 0),o}function F(){try{return window.localStorage}catch(e){}}exports=module.exports=require("./debug"),exports.log=t,exports.formatArgs=C,exports.save=r,exports.load=n,exports.useColors=o,exports.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:F(),exports.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(o){return"[UnexpectedJSONParseError]: "+o.message}},exports.enable(n());
},{"./debug":"yIfd","process":"rH1J"}],"jh0r":[function(require,module,exports) {
var o=require("parseuri"),t=require("debug")("socket.io-client:url");function r(r,p){var s=r;p=p||"undefined"!=typeof location&&location,null==r&&(r=p.protocol+"//"+p.host),"string"==typeof r&&("/"===r.charAt(0)&&(r="/"===r.charAt(1)?p.protocol+r:p.host+r),/^(https?|wss?):\/\//.test(r)||(t("protocol-less url %s",r),r=void 0!==p?p.protocol+"//"+r:"https://"+r),t("parse %s",r),s=o(r)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";var e=-1!==s.host.indexOf(":")?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+e+":"+s.port,s.href=s.protocol+"://"+e+(p&&p.port===s.port?"":":"+s.port),s}module.exports=r;
},{"parseuri":"qqZP","debug":"Nk7M"}],"SZyT":[function(require,module,exports) {
var process = require("process");
var e=require("process");function o(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function C(e){var o=this.useColors;if(e[0]=(o?"%c":"")+this.namespace+(o?" %c":" ")+e[0]+(o?"%c ":" ")+"+"+exports.humanize(this.diff),o){var C="color: "+this.color;e.splice(1,0,C,"color: inherit");var t=0,r=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(t++,"%c"===e&&(r=t))}),e.splice(r,0,C)}}function t(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function r(e){try{null==e?exports.storage.removeItem("debug"):exports.storage.debug=e}catch(o){}}function n(){var o;try{o=exports.storage.debug}catch(C){}return!o&&void 0!==e&&"env"in e&&(o=void 0),o}function F(){try{return window.localStorage}catch(e){}}exports=module.exports=require("./debug"),exports.log=t,exports.formatArgs=C,exports.save=r,exports.load=n,exports.useColors=o,exports.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:F(),exports.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(o){return"[UnexpectedJSONParseError]: "+o.message}},exports.enable(n());
},{"./debug":"yIfd","process":"rH1J"}],"mnQY":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var f=require("buffer").Buffer;module.exports=n;var r="function"==typeof f&&"function"==typeof f.isBuffer,e="function"==typeof ArrayBuffer,u=function(f){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(f):f.buffer instanceof ArrayBuffer};function n(n){return r&&f.isBuffer(n)||e&&(n instanceof ArrayBuffer||u(n))}
},{"buffer":"fe91"}],"vLc4":[function(require,module,exports) {
var e=require("isarray"),t=require("./is-buffer"),r=Object.prototype.toString,n="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===r.call(Blob),o="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===r.call(File);function f(r,n){if(!r)return r;if(t(r)){var o={_placeholder:!0,num:n.length};return n.push(r),o}if(e(r)){for(var i=new Array(r.length),a=0;a<r.length;a++)i[a]=f(r[a],n);return i}if("object"==typeof r&&!(r instanceof Date)){i={};for(var u in r)i[u]=f(r[u],n);return i}return r}function i(t,r){if(!t)return t;if(t&&t._placeholder)return r[t.num];if(e(t))for(var n=0;n<t.length;n++)t[n]=i(t[n],r);else if("object"==typeof t)for(var o in t)t[o]=i(t[o],r);return t}exports.deconstructPacket=function(e){var t=[],r=e.data,n=e;return n.data=f(r,t),n.attachments=t.length,{packet:n,buffers:t}},exports.reconstructPacket=function(e,t){return e.data=i(e.data,t),e.attachments=void 0,e},exports.removeBlobs=function(r,f){var i=0,a=r;!function r(u,c,l){if(!u)return u;if(n&&u instanceof Blob||o&&u instanceof File){i++;var s=new FileReader;s.onload=function(){l?l[c]=this.result:a=this.result,--i||f(a)},s.readAsArrayBuffer(u)}else if(e(u))for(var p=0;p<u.length;p++)r(u[p],p,u);else if("object"==typeof u&&!t(u))for(var d in u)r(u[d],d,u)}(a),i||f(a)};
},{"isarray":"ZCp3","./is-buffer":"mnQY"}],"XYC6":[function(require,module,exports) {
var t=require("debug")("socket.io-parser"),r=require("component-emitter"),e=require("./binary"),n=require("isarray"),o=require("./is-buffer");function s(){}exports.protocol=4,exports.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],exports.CONNECT=0,exports.DISCONNECT=1,exports.EVENT=2,exports.ACK=3,exports.ERROR=4,exports.BINARY_EVENT=5,exports.BINARY_ACK=6,exports.Encoder=s,exports.Decoder=p;var i=exports.ERROR+'"encode error"';function c(r){var e=""+r.type;if(exports.BINARY_EVENT!==r.type&&exports.BINARY_ACK!==r.type||(e+=r.attachments+"-"),r.nsp&&"/"!==r.nsp&&(e+=r.nsp+","),null!=r.id&&(e+=r.id),null!=r.data){var n=a(r.data);if(!1===n)return i;e+=n}return t("encoded %j as %s",r,e),e}function a(t){try{return JSON.stringify(t)}catch(r){return!1}}function u(t,r){e.removeBlobs(t,function(t){var n=e.deconstructPacket(t),o=c(n.packet),s=n.buffers;s.unshift(o),r(s)})}function p(){this.reconstructor=null}function f(r){var e=0,o={type:Number(r.charAt(0))};if(null==exports.types[o.type])return N("unknown packet type "+o.type);if(exports.BINARY_EVENT===o.type||exports.BINARY_ACK===o.type){for(var s=e+1;"-"!==r.charAt(++e)&&e!=r.length;);var i=r.substring(s,e);if(i!=Number(i)||"-"!==r.charAt(e))throw new Error("Illegal attachments");o.attachments=Number(i)}if("/"===r.charAt(e+1)){for(s=e+1;++e;){if(","===(a=r.charAt(e)))break;if(e===r.length)break}o.nsp=r.substring(s,e)}else o.nsp="/";var c=r.charAt(e+1);if(""!==c&&Number(c)==c){for(s=e+1;++e;){var a;if(null==(a=r.charAt(e))||Number(a)!=a){--e;break}if(e===r.length)break}o.id=Number(r.substring(s,e+1))}if(r.charAt(++e)){var u=h(r.substr(e));if(!(!1!==u&&(o.type===exports.ERROR||n(u))))return N("invalid payload");o.data=u}return t("decoded %s as %j",r,o),o}function h(t){try{return JSON.parse(t)}catch(r){return!1}}function d(t){this.reconPack=t,this.buffers=[]}function N(t){return{type:exports.ERROR,data:"parser error: "+t}}s.prototype.encode=function(r,e){(t("encoding packet %j",r),exports.BINARY_EVENT===r.type||exports.BINARY_ACK===r.type)?u(r,e):e([c(r)])},r(p.prototype),p.prototype.add=function(t){var r;if("string"==typeof t)r=f(t),exports.BINARY_EVENT===r.type||exports.BINARY_ACK===r.type?(this.reconstructor=new d(r),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",r)):this.emit("decoded",r);else{if(!o(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(r=this.reconstructor.takeBinaryData(t))&&(this.reconstructor=null,this.emit("decoded",r))}},p.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},d.prototype.takeBinaryData=function(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){var r=e.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null},d.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]};
},{"debug":"SZyT","component-emitter":"PndQ","./binary":"vLc4","isarray":"ZCp3","./is-buffer":"mnQY"}],"a6lm":[function(require,module,exports) {
try{module.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){module.exports=!1}
},{}],"g2A5":[function(require,module,exports) {
var e=require("has-cors");module.exports=function(t){var n=t.xdomain,r=t.xscheme,c=t.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!n||e))return new XMLHttpRequest}catch(i){}try{if("undefined"!=typeof XDomainRequest&&!r&&c)return new XDomainRequest}catch(i){}if(!n)try{return new(self[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(i){}};
},{"has-cors":"a6lm"}],"xLha":[function(require,module,exports) {
module.exports=Object.keys||function(r){var e=[],t=Object.prototype.hasOwnProperty;for(var o in r)t.call(r,o)&&e.push(o);return e};
},{}],"FN35":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer,t=require("isarray"),r=Object.prototype.toString,o="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===r.call(Blob),f="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===r.call(File);function n(r){if(!r||"object"!=typeof r)return!1;if(t(r)){for(var i=0,u=r.length;i<u;i++)if(n(r[i]))return!0;return!1}if("function"==typeof e&&e.isBuffer&&e.isBuffer(r)||"function"==typeof ArrayBuffer&&r instanceof ArrayBuffer||o&&r instanceof Blob||f&&r instanceof File)return!0;if(r.toJSON&&"function"==typeof r.toJSON&&1===arguments.length)return n(r.toJSON(),!0);for(var c in r)if(Object.prototype.hasOwnProperty.call(r,c)&&n(r[c]))return!0;return!1}module.exports=n;
},{"isarray":"ZCp3","buffer":"fe91"}],"lFfd":[function(require,module,exports) {
module.exports=function(r,e,n){var t=r.byteLength;if(e=e||0,n=n||t,r.slice)return r.slice(e,n);if(e<0&&(e+=t),n<0&&(n+=t),n>t&&(n=t),e>=t||e>=n||0===t)return new ArrayBuffer(0);for(var f=new Uint8Array(r),i=new Uint8Array(n-e),u=e,a=0;u<n;u++,a++)i[a]=f[u];return i.buffer};
},{}],"cJA6":[function(require,module,exports) {
function n(n,t,u){var r=!1;return u=u||o,c.count=n,0===n?t():c;function c(n,o){if(c.count<=0)throw new Error("after called too many times");--c.count,n?(r=!0,t(n),t=u):0!==c.count||r||t(null,o)}}function o(){}module.exports=n;
},{}],"NAP5":[function(require,module,exports) {
var r,t,n,o=String.fromCharCode;function e(r){for(var t,n,o=[],e=0,i=r.length;e<i;)(t=r.charCodeAt(e++))>=55296&&t<=56319&&e<i?56320==(64512&(n=r.charCodeAt(e++)))?o.push(((1023&t)<<10)+(1023&n)+65536):(o.push(t),e--):o.push(t);return o}function i(r){for(var t,n=r.length,e=-1,i="";++e<n;)(t=r[e])>65535&&(i+=o((t-=65536)>>>10&1023|55296),t=56320|1023&t),i+=o(t);return i}function u(r,t){if(r>=55296&&r<=57343){if(t)throw Error("Lone surrogate U+"+r.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function a(r,t){return o(r>>t&63|128)}function f(r,t){if(0==(4294967168&r))return o(r);var n="";return 0==(4294965248&r)?n=o(r>>6&31|192):0==(4294901760&r)?(u(r,t)||(r=65533),n=o(r>>12&15|224),n+=a(r,6)):0==(4292870144&r)&&(n=o(r>>18&7|240),n+=a(r,12),n+=a(r,6)),n+=o(63&r|128)}function c(r,t){for(var n=!1!==(t=t||{}).strict,o=e(r),i=o.length,u=-1,a="";++u<i;)a+=f(o[u],n);return a}function h(){if(n>=t)throw Error("Invalid byte index");var o=255&r[n];if(n++,128==(192&o))return 63&o;throw Error("Invalid continuation byte")}function d(o){var e,i;if(n>t)throw Error("Invalid byte index");if(n==t)return!1;if(e=255&r[n],n++,0==(128&e))return e;if(192==(224&e)){if((i=(31&e)<<6|h())>=128)return i;throw Error("Invalid continuation byte")}if(224==(240&e)){if((i=(15&e)<<12|h()<<6|h())>=2048)return u(i,o)?i:65533;throw Error("Invalid continuation byte")}if(240==(248&e)&&(i=(7&e)<<18|h()<<12|h()<<6|h())>=65536&&i<=1114111)return i;throw Error("Invalid UTF-8 detected")}function v(o,u){var a=!1!==(u=u||{}).strict;r=e(o),t=r.length,n=0;for(var f,c=[];!1!==(f=d(a));)c.push(f);return i(c)}module.exports={version:"2.1.2",encode:c,decode:v};
},{}],"tTpz":[function(require,module,exports) {
!function(){"use strict";for(var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=new Uint8Array(256),t=0;t<r.length;t++)e[r.charCodeAt(t)]=t;exports.encode=function(e){var t,n=new Uint8Array(e),o=n.length,a="";for(t=0;t<o;t+=3)a+=r[n[t]>>2],a+=r[(3&n[t])<<4|n[t+1]>>4],a+=r[(15&n[t+1])<<2|n[t+2]>>6],a+=r[63&n[t+2]];return o%3==2?a=a.substring(0,a.length-1)+"=":o%3==1&&(a=a.substring(0,a.length-2)+"=="),a},exports.decode=function(r){var t,n,o,a,h,c=.75*r.length,g=r.length,i=0;"="===r[r.length-1]&&(c--,"="===r[r.length-2]&&c--);var u=new ArrayBuffer(c),A=new Uint8Array(u);for(t=0;t<g;t+=4)n=e[r.charCodeAt(t)],o=e[r.charCodeAt(t+1)],a=e[r.charCodeAt(t+2)],h=e[r.charCodeAt(t+3)],A[i++]=n<<2|o>>4,A[i++]=(15&o)<<4|a>>2,A[i++]=(3&a)<<6|63&h;return u}}();
},{}],"sKVW":[function(require,module,exports) {
var e=void 0!==e?e:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder&&MozBlobBuilder,t=function(){try{return 2===new Blob(["hi"]).size}catch(e){return!1}}(),r=t&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(e){return!1}}(),n=e&&e.prototype.append&&e.prototype.getBlob;function o(e){return e.map(function(e){if(e.buffer instanceof ArrayBuffer){var t=e.buffer;if(e.byteLength!==t.byteLength){var r=new Uint8Array(e.byteLength);r.set(new Uint8Array(t,e.byteOffset,e.byteLength)),t=r.buffer}return t}return e})}function u(t,r){r=r||{};var n=new e;return o(t).forEach(function(e){n.append(e)}),r.type?n.getBlob(r.type):n.getBlob()}function i(e,t){return new Blob(o(e),t||{})}"undefined"!=typeof Blob&&(u.prototype=Blob.prototype,i.prototype=Blob.prototype),module.exports=t?r?Blob:i:n?u:void 0;
},{}],"MXXg":[function(require,module,exports) {
var e,r=require("./keys"),t=require("has-binary2"),n=require("arraybuffer.slice"),a=require("after"),o=require("./utf8");"undefined"!=typeof ArrayBuffer&&(e=require("base64-arraybuffer"));var f="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),i="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),u=f||i;exports.protocol=3;var c=exports.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},d=r(c),s={type:"error",data:"parser error"},y=require("blob");function p(e,r){return r("b"+exports.packets[e.type]+e.data.data)}function l(e,r,t){if(!r)return exports.encodeBase64Packet(e,t);var n=e.data,a=new Uint8Array(n),o=new Uint8Array(1+n.byteLength);o[0]=c[e.type];for(var f=0;f<a.length;f++)o[f+1]=a[f];return t(o.buffer)}function g(e,r,t){if(!r)return exports.encodeBase64Packet(e,t);var n=new FileReader;return n.onload=function(){exports.encodePacket({type:e.type,data:n.result},r,!0,t)},n.readAsArrayBuffer(e.data)}function h(e,r,t){if(!r)return exports.encodeBase64Packet(e,t);if(u)return g(e,r,t);var n=new Uint8Array(1);return n[0]=c[e.type],t(new y([n.buffer,e.data]))}function v(e){try{e=o.decode(e,{strict:!1})}catch(r){return!1}return e}function A(e,r,t){for(var n=new Array(e.length),o=a(e.length,t),f=function(e,t,a){r(t,function(r,t){n[e]=t,a(r,n)})},i=0;i<e.length;i++)f(i,e[i],o)}exports.encodePacket=function(e,r,t,n){"function"==typeof r&&(n=r,r=!1),"function"==typeof t&&(n=t,t=null);var a=void 0===e.data?void 0:e.data.buffer||e.data;if("undefined"!=typeof ArrayBuffer&&a instanceof ArrayBuffer)return l(e,r,n);if(void 0!==y&&a instanceof y)return h(e,r,n);if(a&&a.base64)return p(e,n);var f=c[e.type];return void 0!==e.data&&(f+=t?o.encode(String(e.data),{strict:!1}):String(e.data)),n(""+f)},exports.encodeBase64Packet=function(e,r){var t,n="b"+exports.packets[e.type];if(void 0!==y&&e.data instanceof y){var a=new FileReader;return a.onload=function(){var e=a.result.split(",")[1];r(n+e)},a.readAsDataURL(e.data)}try{t=String.fromCharCode.apply(null,new Uint8Array(e.data))}catch(u){for(var o=new Uint8Array(e.data),f=new Array(o.length),i=0;i<o.length;i++)f[i]=o[i];t=String.fromCharCode.apply(null,f)}return n+=btoa(t),r(n)},exports.decodePacket=function(e,r,t){if(void 0===e)return s;if("string"==typeof e){if("b"===e.charAt(0))return exports.decodeBase64Packet(e.substr(1),r);if(t&&!1===(e=v(e)))return s;var a=e.charAt(0);return Number(a)==a&&d[a]?e.length>1?{type:d[a],data:e.substring(1)}:{type:d[a]}:s}a=new Uint8Array(e)[0];var o=n(e,1);return y&&"blob"===r&&(o=new y([o])),{type:d[a],data:o}},exports.decodeBase64Packet=function(r,t){var n=d[r.charAt(0)];if(!e)return{type:n,data:{base64:!0,data:r.substr(1)}};var a=e.decode(r.substr(1));return"blob"===t&&y&&(a=new y([a])),{type:n,data:a}},exports.encodePayload=function(e,r,n){"function"==typeof r&&(n=r,r=null);var a=t(e);if(r&&a)return y&&!u?exports.encodePayloadAsBlob(e,n):exports.encodePayloadAsArrayBuffer(e,n);if(!e.length)return n("0:");A(e,function(e,t){exports.encodePacket(e,!!a&&r,!1,function(e){t(null,function(e){return e.length+":"+e}(e))})},function(e,r){return n(r.join(""))})},exports.decodePayload=function(e,r,t){if("string"!=typeof e)return exports.decodePayloadAsBinary(e,r,t);var n;if("function"==typeof r&&(t=r,r=null),""===e)return t(s,0,1);for(var a,o,f="",i=0,u=e.length;i<u;i++){var c=e.charAt(i);if(":"===c){if(""===f||f!=(a=Number(f)))return t(s,0,1);if(f!=(o=e.substr(i+1,a)).length)return t(s,0,1);if(o.length){if(n=exports.decodePacket(o,r,!1),s.type===n.type&&s.data===n.data)return t(s,0,1);if(!1===t(n,i+a,u))return}i+=a,f=""}else f+=c}return""!==f?t(s,0,1):void 0},exports.encodePayloadAsArrayBuffer=function(e,r){if(!e.length)return r(new ArrayBuffer(0));A(e,function(e,r){exports.encodePacket(e,!0,!0,function(e){return r(null,e)})},function(e,t){var n=t.reduce(function(e,r){var t;return e+(t="string"==typeof r?r.length:r.byteLength).toString().length+t+2},0),a=new Uint8Array(n),o=0;return t.forEach(function(e){var r="string"==typeof e,t=e;if(r){for(var n=new Uint8Array(e.length),f=0;f<e.length;f++)n[f]=e.charCodeAt(f);t=n.buffer}a[o++]=r?0:1;var i=t.byteLength.toString();for(f=0;f<i.length;f++)a[o++]=parseInt(i[f]);a[o++]=255;for(n=new Uint8Array(t),f=0;f<n.length;f++)a[o++]=n[f]}),r(a.buffer)})},exports.encodePayloadAsBlob=function(e,r){A(e,function(e,r){exports.encodePacket(e,!0,!0,function(e){var t=new Uint8Array(1);if(t[0]=1,"string"==typeof e){for(var n=new Uint8Array(e.length),a=0;a<e.length;a++)n[a]=e.charCodeAt(a);e=n.buffer,t[0]=0}var o=(e instanceof ArrayBuffer?e.byteLength:e.size).toString(),f=new Uint8Array(o.length+1);for(a=0;a<o.length;a++)f[a]=parseInt(o[a]);if(f[o.length]=255,y){var i=new y([t.buffer,f.buffer,e]);r(null,i)}})},function(e,t){return r(new y(t))})},exports.decodePayloadAsBinary=function(e,r,t){"function"==typeof r&&(t=r,r=null);for(var a=e,o=[];a.byteLength>0;){for(var f=new Uint8Array(a),i=0===f[0],u="",c=1;255!==f[c];c++){if(u.length>310)return t(s,0,1);u+=f[c]}a=n(a,2+u.length),u=parseInt(u);var d=n(a,0,u);if(i)try{d=String.fromCharCode.apply(null,new Uint8Array(d))}catch(l){var y=new Uint8Array(d);d="";for(c=0;c<y.length;c++)d+=String.fromCharCode(y[c])}o.push(d),a=n(a,u)}var p=o.length;o.forEach(function(e,n){t(exports.decodePacket(e,r,!0),n,p)})};
},{"./keys":"xLha","has-binary2":"FN35","arraybuffer.slice":"lFfd","after":"cJA6","./utf8":"NAP5","base64-arraybuffer":"tTpz","blob":"sKVW"}],"BrKK":[function(require,module,exports) {
function t(t){if(t)return e(t)}function e(e){for(var s in t.prototype)e[s]=t.prototype[s];return e}"undefined"!=typeof module&&(module.exports=t),t.prototype.on=t.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},t.prototype.once=function(t,e){function s(){this.off(t,s),e.apply(this,arguments)}return s.fn=e,this.on(t,s),this},t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var s,i=this._callbacks["$"+t];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var r=0;r<i.length;r++)if((s=i[r])===e||s.fn===e){i.splice(r,1);break}return this},t.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),s=this._callbacks["$"+t];if(s)for(var i=0,r=(s=s.slice(0)).length;i<r;++i)s[i].apply(this,e);return this},t.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},t.prototype.hasListeners=function(t){return!!this.listeners(t).length};
},{}],"UZwH":[function(require,module,exports) {
var t=require("engine.io-parser"),e=require("component-emitter");function s(t){this.path=t.path,this.hostname=t.hostname,this.port=t.port,this.secure=t.secure,this.query=t.query,this.timestampParam=t.timestampParam,this.timestampRequests=t.timestampRequests,this.readyState="",this.agent=t.agent||!1,this.socket=t.socket,this.enablesXDR=t.enablesXDR,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.forceNode=t.forceNode,this.isReactNative=t.isReactNative,this.extraHeaders=t.extraHeaders,this.localAddress=t.localAddress}module.exports=s,e(s.prototype),s.prototype.onError=function(t,e){var s=new Error(t);return s.type="TransportError",s.description=e,this.emit("error",s),this},s.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},s.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},s.prototype.send=function(t){if("open"!==this.readyState)throw new Error("Transport not open");this.write(t)},s.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},s.prototype.onData=function(e){var s=t.decodePacket(e,this.socket.binaryType);this.onPacket(s)},s.prototype.onPacket=function(t){this.emit("packet",t)},s.prototype.onClose=function(){this.readyState="closed",this.emit("close")};
},{"engine.io-parser":"MXXg","component-emitter":"BrKK"}],"Afd5":[function(require,module,exports) {
exports.encode=function(e){var n="";for(var o in e)e.hasOwnProperty(o)&&(n.length&&(n+="&"),n+=encodeURIComponent(o)+"="+encodeURIComponent(e[o]));return n},exports.decode=function(e){for(var n={},o=e.split("&"),t=0,r=o.length;t<r;t++){var d=o[t].split("=");n[decodeURIComponent(d[0])]=decodeURIComponent(d[1])}return n};
},{}],"TkEX":[function(require,module,exports) {
module.exports=function(o,t){var p=function(){};p.prototype=t.prototype,o.prototype=new p,o.prototype.constructor=o};
},{}],"Ds1d":[function(require,module,exports) {
"use strict";var r,e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),t=64,n={},o=0,u=0;function a(r){var n="";do{n=e[r%t]+n,r=Math.floor(r/t)}while(r>0);return n}function c(r){var e=0;for(u=0;u<r.length;u++)e=e*t+n[r.charAt(u)];return e}function f(){var e=a(+new Date);return e!==r?(o=0,r=e):e+"."+a(o++)}for(;u<t;u++)n[e[u]]=u;f.encode=a,f.decode=c,module.exports=f;
},{}],"w9uH":[function(require,module,exports) {
var process = require("process");
var e=require("process");function o(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function C(e){var o=this.useColors;if(e[0]=(o?"%c":"")+this.namespace+(o?" %c":" ")+e[0]+(o?"%c ":" ")+"+"+exports.humanize(this.diff),o){var C="color: "+this.color;e.splice(1,0,C,"color: inherit");var t=0,r=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(t++,"%c"===e&&(r=t))}),e.splice(r,0,C)}}function t(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function r(e){try{null==e?exports.storage.removeItem("debug"):exports.storage.debug=e}catch(o){}}function n(){var o;try{o=exports.storage.debug}catch(C){}return!o&&void 0!==e&&"env"in e&&(o=void 0),o}function F(){try{return window.localStorage}catch(e){}}exports=module.exports=require("./debug"),exports.log=t,exports.formatArgs=C,exports.save=r,exports.load=n,exports.useColors=o,exports.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:F(),exports.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(o){return"[UnexpectedJSONParseError]: "+o.message}},exports.enable(n());
},{"./debug":"yIfd","process":"rH1J"}],"qTuY":[function(require,module,exports) {
var t=require("../transport"),e=require("parseqs"),i=require("engine.io-parser"),o=require("component-inherit"),n=require("yeast"),r=require("debug")("engine.io-client:polling");module.exports=p;var s=null!=new(require("xmlhttprequest-ssl"))({xdomain:!1}).responseType;function p(e){var i=e&&e.forceBase64;s&&!i||(this.supportsBinary=!1),t.call(this,e)}o(p,t),p.prototype.name="polling",p.prototype.doOpen=function(){this.poll()},p.prototype.pause=function(t){var e=this;function i(){r("paused"),e.readyState="paused",t()}if(this.readyState="pausing",this.polling||!this.writable){var o=0;this.polling&&(r("we are currently polling - waiting to pause"),o++,this.once("pollComplete",function(){r("pre-pause polling complete"),--o||i()})),this.writable||(r("we are currently writing - waiting to pause"),o++,this.once("drain",function(){r("pre-pause writing complete"),--o||i()}))}else i()},p.prototype.poll=function(){r("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},p.prototype.onData=function(t){var e=this;r("polling got data %s",t);i.decodePayload(t,this.socket.binaryType,function(t,i,o){if("opening"===e.readyState&&e.onOpen(),"close"===t.type)return e.onClose(),!1;e.onPacket(t)}),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():r('ignoring poll - transport state "%s"',this.readyState))},p.prototype.doClose=function(){var t=this;function e(){r("writing close packet"),t.write([{type:"close"}])}"open"===this.readyState?(r("transport open - closing"),e()):(r("transport not open - deferring close"),this.once("open",e))},p.prototype.write=function(t){var e=this;this.writable=!1;var o=function(){e.writable=!0,e.emit("drain")};i.encodePayload(t,this.supportsBinary,function(t){e.doWrite(t,o)})},p.prototype.uri=function(){var t=this.query||{},i=this.secure?"https":"http",o="";return!1!==this.timestampRequests&&(t[this.timestampParam]=n()),this.supportsBinary||t.sid||(t.b64=1),t=e.encode(t),this.port&&("https"===i&&443!==Number(this.port)||"http"===i&&80!==Number(this.port))&&(o=":"+this.port),t.length&&(t="?"+t),i+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+o+this.path+t};
},{"../transport":"UZwH","parseqs":"Afd5","engine.io-parser":"MXXg","component-inherit":"TkEX","yeast":"Ds1d","debug":"w9uH","xmlhttprequest-ssl":"g2A5"}],"nc50":[function(require,module,exports) {
var t=require("xmlhttprequest-ssl"),e=require("./polling"),s=require("component-emitter"),r=require("component-inherit"),i=require("debug")("engine.io-client:polling-xhr");function o(){}function n(t){if(e.call(this,t),this.requestTimeout=t.requestTimeout,this.extraHeaders=t.extraHeaders,"undefined"!=typeof location){var s="https:"===location.protocol,r=location.port;r||(r=s?443:80),this.xd="undefined"!=typeof location&&t.hostname!==location.hostname||r!==t.port,this.xs=t.secure!==s}}function a(t){this.method=t.method||"GET",this.uri=t.uri,this.xd=!!t.xd,this.xs=!!t.xs,this.async=!1!==t.async,this.data=void 0!==t.data?t.data:null,this.agent=t.agent,this.isBinary=t.isBinary,this.supportsBinary=t.supportsBinary,this.enablesXDR=t.enablesXDR,this.requestTimeout=t.requestTimeout,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.extraHeaders=t.extraHeaders,this.create()}if(module.exports=n,module.exports.Request=a,r(n,e),n.prototype.supportsBinary=!0,n.prototype.request=function(t){return(t=t||{}).uri=this.uri(),t.xd=this.xd,t.xs=this.xs,t.agent=this.agent||!1,t.supportsBinary=this.supportsBinary,t.enablesXDR=this.enablesXDR,t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,t.requestTimeout=this.requestTimeout,t.extraHeaders=this.extraHeaders,new a(t)},n.prototype.doWrite=function(t,e){var s="string"!=typeof t&&void 0!==t,r=this.request({method:"POST",data:t,isBinary:s}),i=this;r.on("success",e),r.on("error",function(t){i.onError("xhr post error",t)}),this.sendXhr=r},n.prototype.doPoll=function(){i("xhr poll");var t=this.request(),e=this;t.on("data",function(t){e.onData(t)}),t.on("error",function(t){e.onError("xhr poll error",t)}),this.pollXhr=t},s(a.prototype),a.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized;var s=this.xhr=new t(e),r=this;try{i("xhr open %s: %s",this.method,this.uri),s.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var o in s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(o)&&s.setRequestHeader(o,this.extraHeaders[o])}catch(n){}if("POST"===this.method)try{this.isBinary?s.setRequestHeader("Content-type","application/octet-stream"):s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(n){}try{s.setRequestHeader("Accept","*/*")}catch(n){}"withCredentials"in s&&(s.withCredentials=!0),this.requestTimeout&&(s.timeout=this.requestTimeout),this.hasXDR()?(s.onload=function(){r.onLoad()},s.onerror=function(){r.onError(s.responseText)}):s.onreadystatechange=function(){if(2===s.readyState)try{var t=s.getResponseHeader("Content-Type");r.supportsBinary&&"application/octet-stream"===t&&(s.responseType="arraybuffer")}catch(n){}4===s.readyState&&(200===s.status||1223===s.status?r.onLoad():setTimeout(function(){r.onError(s.status)},0))},i("xhr data %s",this.data),s.send(this.data)}catch(n){return void setTimeout(function(){r.onError(n)},0)}"undefined"!=typeof document&&(this.index=a.requestsCount++,a.requests[this.index]=this)},a.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},a.prototype.onData=function(t){this.emit("data",t),this.onSuccess()},a.prototype.onError=function(t){this.emit("error",t),this.cleanup(!0)},a.prototype.cleanup=function(t){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=o:this.xhr.onreadystatechange=o,t)try{this.xhr.abort()}catch(e){}"undefined"!=typeof document&&delete a.requests[this.index],this.xhr=null}},a.prototype.onLoad=function(){var t;try{var e;try{e=this.xhr.getResponseHeader("Content-Type")}catch(s){}t="application/octet-stream"===e&&this.xhr.response||this.xhr.responseText}catch(s){this.onError(s)}null!=t&&this.onData(t)},a.prototype.hasXDR=function(){return"undefined"!=typeof XDomainRequest&&!this.xs&&this.enablesXDR},a.prototype.abort=function(){this.cleanup()},a.requestsCount=0,a.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",u);else if("function"==typeof addEventListener){var h="onpagehide"in self?"pagehide":"unload";addEventListener(h,u,!1)}function u(){for(var t in a.requests)a.requests.hasOwnProperty(t)&&a.requests[t].abort()}
},{"xmlhttprequest-ssl":"g2A5","./polling":"qTuY","component-emitter":"BrKK","component-inherit":"TkEX","debug":"w9uH"}],"kmGa":[function(require,module,exports) {
var global = arguments[3];
var e=arguments[3],t=require("./polling"),r=require("component-inherit");module.exports=c;var i,o=/\n/g,n=/\\n/g;function a(){}function s(){return"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:{}}function c(e){if(t.call(this,e),this.query=this.query||{},!i){var r=s();i=r.___eio=r.___eio||[]}this.index=i.length;var o=this;i.push(function(e){o.onData(e)}),this.query.j=this.index,"function"==typeof addEventListener&&addEventListener("beforeunload",function(){o.script&&(o.script.onerror=a)},!1)}r(c,t),c.prototype.supportsBinary=!1,c.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),t.prototype.doClose.call(this)},c.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var r=document.getElementsByTagName("script")[0];r?r.parentNode.insertBefore(t,r):(document.head||document.body).appendChild(t),this.script=t,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},c.prototype.doWrite=function(e,t){var r=this;if(!this.form){var i,a=document.createElement("form"),s=document.createElement("textarea"),c=this.iframeId="eio_iframe_"+this.index;a.className="socketio",a.style.position="absolute",a.style.top="-1000px",a.style.left="-1000px",a.target=c,a.method="POST",a.setAttribute("accept-charset","utf-8"),s.name="d",a.appendChild(s),document.body.appendChild(a),this.form=a,this.area=s}function d(){m(),t()}function m(){if(r.iframe)try{r.form.removeChild(r.iframe)}catch(t){r.onError("jsonp polling iframe removal error",t)}try{var e='<iframe src="javascript:0" name="'+r.iframeId+'">';i=document.createElement(e)}catch(t){(i=document.createElement("iframe")).name=r.iframeId,i.src="javascript:0"}i.id=r.iframeId,r.form.appendChild(i),r.iframe=i}this.form.action=this.uri(),m(),e=e.replace(n,"\\\n"),this.area.value=e.replace(o,"\\n");try{this.form.submit()}catch(p){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===r.iframe.readyState&&d()}:this.iframe.onload=d};
},{"./polling":"qTuY","component-inherit":"TkEX"}],"Zcgp":[function(require,module,exports) {

},{}],"xVDi":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e,t,s=require("buffer").Buffer,r=require("../transport"),i=require("engine.io-parser"),o=require("parseqs"),n=require("component-inherit"),a=require("yeast"),h=require("debug")("engine.io-client:websocket");if("undefined"!=typeof WebSocket)e=WebSocket;else if("undefined"!=typeof self)e=self.WebSocket||self.MozWebSocket;else try{t=require("ws")}catch(u){}var p=e||t;function c(s){s&&s.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=s.perMessageDeflate,this.usingBrowserWebSocket=e&&!s.forceNode,this.protocols=s.protocols,this.usingBrowserWebSocket||(p=t),r.call(this,s)}module.exports=c,n(c,r),c.prototype.name="websocket",c.prototype.supportsBinary=!0,c.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t=this.protocols,s={agent:this.agent,perMessageDeflate:this.perMessageDeflate};s.pfx=this.pfx,s.key=this.key,s.passphrase=this.passphrase,s.cert=this.cert,s.ca=this.ca,s.ciphers=this.ciphers,s.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(s.headers=this.extraHeaders),this.localAddress&&(s.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket&&!this.isReactNative?t?new p(e,t):new p(e):new p(e,t,s)}catch(r){return this.emit("error",r)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},c.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},c.prototype.write=function(e){var t=this;this.writable=!1;for(var r=e.length,o=0,n=r;o<n;o++)!function(e){i.encodePacket(e,t.supportsBinary,function(i){if(!t.usingBrowserWebSocket){var o={};if(e.options&&(o.compress=e.options.compress),t.perMessageDeflate)("string"==typeof i?s.byteLength(i):i.length)<t.perMessageDeflate.threshold&&(o.compress=!1)}try{t.usingBrowserWebSocket?t.ws.send(i):t.ws.send(i,o)}catch(u){h("websocket closed before onclose event")}--r||a()})}(e[o]);function a(){t.emit("flush"),setTimeout(function(){t.writable=!0,t.emit("drain")},0)}},c.prototype.onClose=function(){r.prototype.onClose.call(this)},c.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},c.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",s="";return this.port&&("wss"===t&&443!==Number(this.port)||"ws"===t&&80!==Number(this.port))&&(s=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=a()),this.supportsBinary||(e.b64=1),(e=o.encode(e)).length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+s+this.path+e},c.prototype.check=function(){return!(!p||"__initialize"in p&&this.name===c.prototype.name)};
},{"../transport":"UZwH","engine.io-parser":"MXXg","parseqs":"Afd5","component-inherit":"TkEX","yeast":"Ds1d","debug":"w9uH","ws":"Zcgp","buffer":"fe91"}],"dPhH":[function(require,module,exports) {
var e=require("xmlhttprequest-ssl"),o=require("./polling-xhr"),r=require("./polling-jsonp"),n=require("./websocket");function t(n){var t=!1,i=!1,s=!1!==n.jsonp;if("undefined"!=typeof location){var l="https:"===location.protocol,p=location.port;p||(p=l?443:80),t=n.hostname!==location.hostname||p!==n.port,i=n.secure!==l}if(n.xdomain=t,n.xscheme=i,"open"in new e(n)&&!n.forceJSONP)return new o(n);if(!s)throw new Error("JSONP disabled");return new r(n)}exports.polling=t,exports.websocket=n;
},{"xmlhttprequest-ssl":"g2A5","./polling-xhr":"nc50","./polling-jsonp":"kmGa","./websocket":"xVDi"}],"ePxB":[function(require,module,exports) {
var r=[].indexOf;module.exports=function(e,n){if(r)return e.indexOf(n);for(var f=0;f<e.length;++f)if(e[f]===n)return f;return-1};
},{}],"iqSO":[function(require,module,exports) {
var e=require("./transports/index"),t=require("component-emitter"),r=require("debug")("engine.io-client:socket"),s=require("indexof"),i=require("engine.io-parser"),o=require("parseuri"),n=require("parseqs");function a(e,t){if(!(this instanceof a))return new a(e,t);t=t||{},e&&"object"==typeof e&&(t=e,e=null),e?(e=o(e),t.hostname=e.host,t.secure="https"===e.protocol||"wss"===e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=o(t.host).host),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.agent=t.agent||!1,this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"==typeof this.query&&(this.query=n.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.transportOptions=t.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades,this.perMessageDeflate=!1!==t.perMessageDeflate&&(t.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=t.pfx||null,this.key=t.key||null,this.passphrase=t.passphrase||null,this.cert=t.cert||null,this.ca=t.ca||null,this.ciphers=t.ciphers||null,this.rejectUnauthorized=void 0===t.rejectUnauthorized||t.rejectUnauthorized,this.forceNode=!!t.forceNode,this.isReactNative="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),("undefined"==typeof self||this.isReactNative)&&(t.extraHeaders&&Object.keys(t.extraHeaders).length>0&&(this.extraHeaders=t.extraHeaders),t.localAddress&&(this.localAddress=t.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}function p(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}module.exports=a,a.priorWebsocketSuccess=!1,t(a.prototype),a.protocol=i.protocol,a.Socket=a,a.Transport=require("./transport"),a.transports=require("./transports/index"),a.parser=require("engine.io-parser"),a.prototype.createTransport=function(t){r('creating transport "%s"',t);var s=p(this.query);s.EIO=i.protocol,s.transport=t;var o=this.transportOptions[t]||{};return this.id&&(s.sid=this.id),new e[t]({query:s,socket:this,agent:o.agent||this.agent,hostname:o.hostname||this.hostname,port:o.port||this.port,secure:o.secure||this.secure,path:o.path||this.path,forceJSONP:o.forceJSONP||this.forceJSONP,jsonp:o.jsonp||this.jsonp,forceBase64:o.forceBase64||this.forceBase64,enablesXDR:o.enablesXDR||this.enablesXDR,timestampRequests:o.timestampRequests||this.timestampRequests,timestampParam:o.timestampParam||this.timestampParam,policyPort:o.policyPort||this.policyPort,pfx:o.pfx||this.pfx,key:o.key||this.key,passphrase:o.passphrase||this.passphrase,cert:o.cert||this.cert,ca:o.ca||this.ca,ciphers:o.ciphers||this.ciphers,rejectUnauthorized:o.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:o.perMessageDeflate||this.perMessageDeflate,extraHeaders:o.extraHeaders||this.extraHeaders,forceNode:o.forceNode||this.forceNode,localAddress:o.localAddress||this.localAddress,requestTimeout:o.requestTimeout||this.requestTimeout,protocols:o.protocols||void 0,isReactNative:this.isReactNative})},a.prototype.open=function(){var e;if(this.rememberUpgrade&&a.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length){var t=this;return void setTimeout(function(){t.emit("error","No transports available")},0)}e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(r){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},a.prototype.setTransport=function(e){r("setting transport %s",e.name);var t=this;this.transport&&(r("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",function(){t.onDrain()}).on("packet",function(e){t.onPacket(e)}).on("error",function(e){t.onError(e)}).on("close",function(){t.onClose("transport close")})},a.prototype.probe=function(e){r('probing transport "%s"',e);var t=this.createTransport(e,{probe:1}),s=!1,i=this;function o(){if(i.onlyBinaryUpgrades){var o=!this.supportsBinary&&i.transport.supportsBinary;s=s||o}s||(r('probe transport "%s" opened',e),t.send([{type:"ping",data:"probe"}]),t.once("packet",function(o){if(!s)if("pong"===o.type&&"probe"===o.data){if(r('probe transport "%s" pong',e),i.upgrading=!0,i.emit("upgrading",t),!t)return;a.priorWebsocketSuccess="websocket"===t.name,r('pausing current transport "%s"',i.transport.name),i.transport.pause(function(){s||"closed"!==i.readyState&&(r("changing transport and sending upgrade packet"),l(),i.setTransport(t),t.send([{type:"upgrade"}]),i.emit("upgrade",t),t=null,i.upgrading=!1,i.flush())})}else{r('probe transport "%s" failed',e);var n=new Error("probe error");n.transport=t.name,i.emit("upgradeError",n)}}))}function n(){s||(s=!0,l(),t.close(),t=null)}function p(s){var o=new Error("probe error: "+s);o.transport=t.name,n(),r('probe transport "%s" failed because of error: %s',e,s),i.emit("upgradeError",o)}function h(){p("transport closed")}function c(){p("socket closed")}function u(e){t&&e.name!==t.name&&(r('"%s" works - aborting "%s"',e.name,t.name),n())}function l(){t.removeListener("open",o),t.removeListener("error",p),t.removeListener("close",h),i.removeListener("close",c),i.removeListener("upgrading",u)}a.priorWebsocketSuccess=!1,t.once("open",o),t.once("error",p),t.once("close",h),this.once("close",c),this.once("upgrading",u),t.open()},a.prototype.onOpen=function(){if(r("socket open"),this.readyState="open",a.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){r("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},a.prototype.onPacket=function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(r('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else r('packet received with socket readyState "%s"',this.readyState)},a.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},a.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){"closed"!==t.readyState&&t.onClose("ping timeout")},e||t.pingInterval+t.pingTimeout)},a.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout(function(){r("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)},e.pingInterval)},a.prototype.ping=function(){var e=this;this.sendPacket("ping",function(){e.emit("ping")})},a.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},a.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(r("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},a.prototype.write=a.prototype.send=function(e,t,r){return this.sendPacket("message",e,t,r),this},a.prototype.sendPacket=function(e,t,r,s){if("function"==typeof t&&(s=t,t=void 0),"function"==typeof r&&(s=r,r=null),"closing"!==this.readyState&&"closed"!==this.readyState){(r=r||{}).compress=!1!==r.compress;var i={type:e,data:t,options:r};this.emit("packetCreate",i),this.writeBuffer.push(i),s&&this.once("flush",s),this.flush()}},a.prototype.close=function(){if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var e=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?i():t()}):this.upgrading?i():t()}function t(){e.onClose("forced close"),r("socket closing - telling transport to close"),e.transport.close()}function s(){e.removeListener("upgrade",s),e.removeListener("upgradeError",s),t()}function i(){e.once("upgrade",s),e.once("upgradeError",s)}return this},a.prototype.onError=function(e){r("socket error %j",e),a.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},a.prototype.onClose=function(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){r('socket close with reason: "%s"',e);clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),this.writeBuffer=[],this.prevBufferLen=0}},a.prototype.filterUpgrades=function(e){for(var t=[],r=0,i=e.length;r<i;r++)~s(this.transports,e[r])&&t.push(e[r]);return t};
},{"./transports/index":"dPhH","component-emitter":"BrKK","debug":"w9uH","indexof":"ePxB","engine.io-parser":"MXXg","parseuri":"qqZP","parseqs":"Afd5","./transport":"UZwH"}],"gVwK":[function(require,module,exports) {
module.exports=require("./socket"),module.exports.parser=require("engine.io-parser");
},{"./socket":"iqSO","engine.io-parser":"MXXg"}],"T5Tz":[function(require,module,exports) {
function r(r,e){for(var n=[],o=(e=e||0)||0;o<r.length;o++)n[o-e]=r[o];return n}module.exports=r;
},{}],"HHYx":[function(require,module,exports) {
function e(e,n,o){return e.on(n,o),{destroy:function(){e.removeListener(n,o)}}}module.exports=e;
},{}],"BHku":[function(require,module,exports) {
var n=[].slice;module.exports=function(r,t){if("string"==typeof t&&(t=r[t]),"function"!=typeof t)throw new Error("bind() requires a function");var o=n.call(arguments,2);return function(){return t.apply(r,o.concat(n.call(arguments)))}};
},{}],"pK2c":[function(require,module,exports) {
var t=require("socket.io-parser"),e=require("component-emitter"),i=require("to-array"),s=require("./on"),n=require("component-bind"),o=require("debug")("socket.io-client:socket"),c=require("parseqs"),r=require("has-binary2");module.exports=exports=a;var h={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},p=e.prototype.emit;function a(t,e,i){this.io=t,this.nsp=e,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},i&&i.query&&(this.query=i.query),this.io.autoConnect&&this.open()}e(a.prototype),a.prototype.subEvents=function(){if(!this.subs){var t=this.io;this.subs=[s(t,"open",n(this,"onopen")),s(t,"packet",n(this,"onpacket")),s(t,"close",n(this,"onclose"))]}},a.prototype.open=a.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting"),this)},a.prototype.send=function(){var t=i(arguments);return t.unshift("message"),this.emit.apply(this,t),this},a.prototype.emit=function(e){if(h.hasOwnProperty(e))return p.apply(this,arguments),this;var s=i(arguments),n={type:(void 0!==this.flags.binary?this.flags.binary:r(s))?t.BINARY_EVENT:t.EVENT,data:s,options:{}};return n.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof s[s.length-1]&&(o("emitting packet with ack id %d",this.ids),this.acks[this.ids]=s.pop(),n.id=this.ids++),this.connected?this.packet(n):this.sendBuffer.push(n),this.flags={},this},a.prototype.packet=function(t){t.nsp=this.nsp,this.io.packet(t)},a.prototype.onopen=function(){if(o("transport is open - connecting"),"/"!==this.nsp)if(this.query){var e="object"==typeof this.query?c.encode(this.query):this.query;o("sending connect packet with query %s",e),this.packet({type:t.CONNECT,query:e})}else this.packet({type:t.CONNECT})},a.prototype.onclose=function(t){o("close (%s)",t),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",t)},a.prototype.onpacket=function(e){var i=e.nsp===this.nsp,s=e.type===t.ERROR&&"/"===e.nsp;if(i||s)switch(e.type){case t.CONNECT:this.onconnect();break;case t.EVENT:case t.BINARY_EVENT:this.onevent(e);break;case t.ACK:case t.BINARY_ACK:this.onack(e);break;case t.DISCONNECT:this.ondisconnect();break;case t.ERROR:this.emit("error",e.data)}},a.prototype.onevent=function(t){var e=t.data||[];o("emitting event %j",e),null!=t.id&&(o("attaching ack callback to event"),e.push(this.ack(t.id))),this.connected?p.apply(this,e):this.receiveBuffer.push(e)},a.prototype.ack=function(e){var s=this,n=!1;return function(){if(!n){n=!0;var c=i(arguments);o("sending ack %j",c),s.packet({type:r(c)?t.BINARY_ACK:t.ACK,id:e,data:c})}}},a.prototype.onack=function(t){var e=this.acks[t.id];"function"==typeof e?(o("calling ack %s with %j",t.id,t.data),e.apply(this,t.data),delete this.acks[t.id]):o("bad ack %s",t.id)},a.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},a.prototype.emitBuffered=function(){var t;for(t=0;t<this.receiveBuffer.length;t++)p.apply(this,this.receiveBuffer[t]);for(this.receiveBuffer=[],t=0;t<this.sendBuffer.length;t++)this.packet(this.sendBuffer[t]);this.sendBuffer=[]},a.prototype.ondisconnect=function(){o("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},a.prototype.destroy=function(){if(this.subs){for(var t=0;t<this.subs.length;t++)this.subs[t].destroy();this.subs=null}this.io.destroy(this)},a.prototype.close=a.prototype.disconnect=function(){return this.connected&&(o("performing disconnect (%s)",this.nsp),this.packet({type:t.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},a.prototype.compress=function(t){return this.flags.compress=t,this},a.prototype.binary=function(t){return this.flags.binary=t,this};
},{"socket.io-parser":"XYC6","component-emitter":"BrKK","to-array":"T5Tz","./on":"HHYx","component-bind":"BHku","debug":"Nk7M","parseqs":"Afd5","has-binary2":"FN35"}],"Jp1U":[function(require,module,exports) {
function t(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}module.exports=t,t.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var i=Math.random(),o=Math.floor(i*this.jitter*t);t=0==(1&Math.floor(10*i))?t-o:t+o}return 0|Math.min(t,this.max)},t.prototype.reset=function(){this.attempts=0},t.prototype.setMin=function(t){this.ms=t},t.prototype.setMax=function(t){this.max=t},t.prototype.setJitter=function(t){this.jitter=t};
},{}],"KtmH":[function(require,module,exports) {
var t=require("engine.io-client"),e=require("./socket"),n=require("component-emitter"),o=require("socket.io-parser"),i=require("./on"),s=require("component-bind"),c=require("debug")("socket.io-client:manager"),r=require("indexof"),h=require("backo2"),a=Object.prototype.hasOwnProperty;function p(t,e){if(!(this instanceof p))return new p(t,e);t&&"object"==typeof t&&(e=t,t=void 0),(e=e||{}).path=e.path||"/socket.io",this.nsps={},this.subs=[],this.opts=e,this.reconnection(!1!==e.reconnection),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(e.randomizationFactor||.5),this.backoff=new h({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this.readyState="closed",this.uri=t,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var n=e.parser||o;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this.autoConnect=!1!==e.autoConnect,this.autoConnect&&this.open()}module.exports=p,p.prototype.emitAll=function(){for(var t in this.emit.apply(this,arguments),this.nsps)a.call(this.nsps,t)&&this.nsps[t].emit.apply(this.nsps[t],arguments)},p.prototype.updateSocketIds=function(){for(var t in this.nsps)a.call(this.nsps,t)&&(this.nsps[t].id=this.generateId(t))},p.prototype.generateId=function(t){return("/"===t?"":t+"#")+this.engine.id},n(p.prototype),p.prototype.reconnection=function(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection},p.prototype.reconnectionAttempts=function(t){return arguments.length?(this._reconnectionAttempts=t,this):this._reconnectionAttempts},p.prototype.reconnectionDelay=function(t){return arguments.length?(this._reconnectionDelay=t,this.backoff&&this.backoff.setMin(t),this):this._reconnectionDelay},p.prototype.randomizationFactor=function(t){return arguments.length?(this._randomizationFactor=t,this.backoff&&this.backoff.setJitter(t),this):this._randomizationFactor},p.prototype.reconnectionDelayMax=function(t){return arguments.length?(this._reconnectionDelayMax=t,this.backoff&&this.backoff.setMax(t),this):this._reconnectionDelayMax},p.prototype.timeout=function(t){return arguments.length?(this._timeout=t,this):this._timeout},p.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},p.prototype.open=p.prototype.connect=function(e,n){if(c("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;c("opening %s",this.uri),this.engine=t(this.uri,this.opts);var o=this.engine,s=this;this.readyState="opening",this.skipReconnect=!1;var r=i(o,"open",function(){s.onopen(),e&&e()}),h=i(o,"error",function(t){if(c("connect_error"),s.cleanup(),s.readyState="closed",s.emitAll("connect_error",t),e){var n=new Error("Connection error");n.data=t,e(n)}else s.maybeReconnectOnOpen()});if(!1!==this._timeout){var a=this._timeout;c("connect attempt will timeout after %d",a);var p=setTimeout(function(){c("connect attempt timed out after %d",a),r.destroy(),o.close(),o.emit("error","timeout"),s.emitAll("connect_timeout",a)},a);this.subs.push({destroy:function(){clearTimeout(p)}})}return this.subs.push(r),this.subs.push(h),this},p.prototype.onopen=function(){c("open"),this.cleanup(),this.readyState="open",this.emit("open");var t=this.engine;this.subs.push(i(t,"data",s(this,"ondata"))),this.subs.push(i(t,"ping",s(this,"onping"))),this.subs.push(i(t,"pong",s(this,"onpong"))),this.subs.push(i(t,"error",s(this,"onerror"))),this.subs.push(i(t,"close",s(this,"onclose"))),this.subs.push(i(this.decoder,"decoded",s(this,"ondecoded")))},p.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},p.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},p.prototype.ondata=function(t){this.decoder.add(t)},p.prototype.ondecoded=function(t){this.emit("packet",t)},p.prototype.onerror=function(t){c("error",t),this.emitAll("error",t)},p.prototype.socket=function(t,n){var o=this.nsps[t];if(!o){o=new e(this,t,n),this.nsps[t]=o;var i=this;o.on("connecting",s),o.on("connect",function(){o.id=i.generateId(t)}),this.autoConnect&&s()}function s(){~r(i.connecting,o)||i.connecting.push(o)}return o},p.prototype.destroy=function(t){var e=r(this.connecting,t);~e&&this.connecting.splice(e,1),this.connecting.length||this.close()},p.prototype.packet=function(t){c("writing packet %j",t);var e=this;t.query&&0===t.type&&(t.nsp+="?"+t.query),e.encoding?e.packetBuffer.push(t):(e.encoding=!0,this.encoder.encode(t,function(n){for(var o=0;o<n.length;o++)e.engine.write(n[o],t.options);e.encoding=!1,e.processPacketQueue()}))},p.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var t=this.packetBuffer.shift();this.packet(t)}},p.prototype.cleanup=function(){c("cleanup");for(var t=this.subs.length,e=0;e<t;e++){this.subs.shift().destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},p.prototype.close=p.prototype.disconnect=function(){c("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},p.prototype.onclose=function(t){c("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()},p.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)c("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var e=this.backoff.duration();c("will wait %dms before reconnect attempt",e),this.reconnecting=!0;var n=setTimeout(function(){t.skipReconnect||(c("attempting reconnect"),t.emitAll("reconnect_attempt",t.backoff.attempts),t.emitAll("reconnecting",t.backoff.attempts),t.skipReconnect||t.open(function(e){e?(c("reconnect attempt error"),t.reconnecting=!1,t.reconnect(),t.emitAll("reconnect_error",e.data)):(c("reconnect success"),t.onreconnect())}))},e);this.subs.push({destroy:function(){clearTimeout(n)}})}},p.prototype.onreconnect=function(){var t=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",t)};
},{"engine.io-client":"gVwK","./socket":"pK2c","component-emitter":"BrKK","socket.io-parser":"XYC6","./on":"HHYx","component-bind":"BHku","debug":"Nk7M","indexof":"ePxB","backo2":"Jp1U"}],"zbLW":[function(require,module,exports) {
var e=require("./url"),r=require("socket.io-parser"),o=require("./manager"),t=require("debug")("socket.io-client");module.exports=exports=n;var c=exports.managers={};function n(r,n){"object"==typeof r&&(n=r,r=void 0),n=n||{};var s,i=e(r),u=i.source,a=i.id,p=i.path,q=c[a]&&p in c[a].nsps;return n.forceNew||n["force new connection"]||!1===n.multiplex||q?(t("ignoring socket cache for %s",u),s=o(u,n)):(c[a]||(t("new io instance for %s",u),c[a]=o(u,n)),s=c[a]),i.query&&!n.query&&(n.query=i.query),s.socket(i.path,n)}exports.protocol=r.protocol,exports.connect=n,exports.Manager=require("./manager"),exports.Socket=require("./socket");
},{"./url":"jh0r","socket.io-parser":"XYC6","./manager":"KtmH","debug":"Nk7M","./socket":"pK2c"}],"EaHq":[function(require,module,exports) {
function t(){return(t=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t}).apply(this,arguments)}function e(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,n(t,e)}function n(t,e){return(n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var o,r=l,s=require("component-emitter"),i=require("@uppy/utils/lib/hasProperty"),u=require("./parseUrl"),c=require("@uppy/utils/lib/NetworkError"),a=require("@uppy/utils/lib/fetchWithNetworkError");function l(){return o||(o=require("socket.io-client")),o}var f="ASSEMBLY_UPLOADING",h="ASSEMBLY_EXECUTING",d="ASSEMBLY_COMPLETED",p=[f,h,d];function _(t,e){return p.indexOf(t)>=p.indexOf(e)}var m=function(n){function o(t){var e;return(e=n.call(this)||this).status=t,e.socket=null,e.pollInterval=null,e.closed=!1,e}e(o,n);var s=o.prototype;return s.connect=function(){this._connectSocket(),this._beginPolling()},s._onFinished=function(){this.emit("finished"),this.close()},s._connectSocket=function(){var t=this,e=u(this.status.websocket_url),n=r().connect(e.origin,{transports:["websocket"],path:e.pathname});n.on("connect",function(){n.emit("assembly_connect",{id:t.status.assembly_id}),t.emit("connect")}),n.on("connect_failed",function(){t._onError(new c("Transloadit Socket.io connection error")),t.socket=null}),n.on("error",function(){n.disconnect(),t.socket=null}),n.on("assembly_finished",function(){t._onFinished()}),n.on("assembly_upload_finished",function(e){t.emit("upload",e),t.status.uploads.push(e)}),n.on("assembly_uploading_finished",function(){t.emit("executing")}),n.on("assembly_upload_meta_data_extracted",function(){t.emit("metadata"),t._fetchStatus({diff:!1})}),n.on("assembly_result_finished",function(e,n){t.emit("result",e,n),t.status.results[e]||(t.status.results[e]=[]),t.status.results[e].push(n)}),n.on("assembly_error",function(e){t._onError(e),t._fetchStatus({diff:!1})}),this.socket=n},s._onError=function(e){this.emit("error",t(new Error(e.message),e))},s._beginPolling=function(){var t=this;this.pollInterval=setInterval(function(){t.socket&&t.socket.connected||t._fetchStatus()},2e3)},s._fetchStatus=function(t){var e=this,n=(void 0===t?{}:t).diff,o=void 0===n||n;return a(this.status.assembly_ssl_url).then(function(t){return t.json()}).then(function(t){e.closed||(e.emit("status",t),o?e.updateStatus(t):e.status=t)}).catch(function(t){return e._onError(t)})},s.update=function(){return this._fetchStatus({diff:!0})},s.updateStatus=function(t){this._diffStatus(this.status,t),this.status=t},s._diffStatus=function(t,e){var n=this,o=t.ok,r=e.ok;if(e.error&&!t.error)return this._onError(e);var s=_(r,h)&&!_(o,h);s&&this.emit("executing"),Object.keys(e.uploads).filter(function(e){return!i(t.uploads,e)}).map(function(t){return e.uploads[t]}).forEach(function(t){n.emit("upload",t)}),s&&this.emit("metadata"),Object.keys(e.results).forEach(function(o){var r=e.results[o],s=t.results[o];r.filter(function(t){return!s||!s.some(function(e){return e.id===t.id})}).forEach(function(t){n.emit("result",o,t)})}),_(r,d)&&!_(o,d)&&this.emit("finished")},s.close=function(){this.closed=!0,this.socket&&(this.socket.disconnect(),this.socket=null),clearInterval(this.pollInterval)},o}(s);module.exports=m;
},{"component-emitter":"PndQ","@uppy/utils/lib/hasProperty":"ss9M","./parseUrl":"Z0fa","@uppy/utils/lib/NetworkError":"jqwg","@uppy/utils/lib/fetchWithNetworkError":"UEAI","socket.io-client":"zbLW"}],"nYQQ":[function(require,module,exports) {
var e=require("@uppy/utils/lib/fetchWithNetworkError"),r=require("url-parse");module.exports=function(){function t(e){void 0===e&&(e={}),this.opts=e,this._reportError=this._reportError.bind(this),this._headers={"Transloadit-Client":this.opts.client}}var n=t.prototype;return n.createAssembly=function(t){var n=this,s=t.params,o=t.fields,i=t.signature,a=t.expectedFiles,u=new FormData;u.append("params","string"==typeof s?s:JSON.stringify(s)),i&&u.append("signature",i),Object.keys(o).forEach(function(e){u.append(e,o[e])}),u.append("num_expected_upload_files",a);var l=new r("/assemblies",""+this.opts.service).href;return e(l,{method:"post",headers:this._headers,body:u}).then(function(e){return e.json()}).then(function(e){if(e.error){var r=new Error(e.error);throw r.details=e.message,r.assembly=e,e.assembly_id&&(r.details+=" Assembly ID: "+e.assembly_id),r}return e}).catch(function(e){return n._reportError(e,{url:l,type:"API_ERROR"})})},n.reserveFile=function(r,t){var n=this,s=encodeURIComponent(t.size),o=r.assembly_ssl_url+"/reserve_file?size="+s;return e(o,{method:"post",headers:this._headers}).then(function(e){return e.json()}).catch(function(e){return n._reportError(e,{assembly:r,file:t,url:o,type:"API_ERROR"})})},n.addFile=function(r,t){var n=this;if(!t.uploadURL)return Promise.reject(new Error("File does not have an `uploadURL`."));var s=encodeURIComponent(t.size),o=encodeURIComponent(t.uploadURL),i="size="+s+"&filename="+encodeURIComponent(t.name)+"&fieldname=file&s3Url="+o,a=r.assembly_ssl_url+"/add_file?"+i;return e(a,{method:"post",headers:this._headers}).then(function(e){return e.json()}).catch(function(e){return n._reportError(e,{assembly:r,file:t,url:a,type:"API_ERROR"})})},n.cancelAssembly=function(r){var t=this,n=r.assembly_ssl_url;return e(n,{method:"delete",headers:this._headers}).then(function(e){return e.json()}).catch(function(e){return t._reportError(e,{url:n,type:"API_ERROR"})})},n.getAssemblyStatus=function(r){var t=this;return e(r,{headers:this._headers}).then(function(e){return e.json()}).catch(function(e){return t._reportError(e,{url:r,type:"STATUS_ERROR"})})},n.submitError=function(r,t){var n=t.endpoint,s=t.instance,o=t.assembly,i=r.details?r.message+" ("+r.details+")":r.message;return e("https://transloaditstatus.com/client_error",{method:"post",body:JSON.stringify({endpoint:n,instance:s,assembly_id:o,agent:"undefined"!=typeof navigator?navigator.userAgent:"",client:this.opts.client,error:i})}).then(function(e){return e.json()})},n._reportError=function(e,r){if(!1===this.opts.errorReporting)throw e;var t={type:r.type};throw r.assembly&&(t.assembly=r.assembly.assembly_id,t.instance=r.assembly.instance),r.url&&(t.endpoint=r.url),this.submitError(e,t).catch(function(e){}),e},t}();
},{"@uppy/utils/lib/fetchWithNetworkError":"UEAI","url-parse":"t0IB"}],"ZdPE":[function(require,module,exports) {
function t(t){if(!t)throw new Error("Transloadit: The `params` option is required.");if("string"==typeof t)try{t=JSON.parse(t)}catch(e){throw e.message="Transloadit: The `params` option is a malformed JSON string: "+e.message,e}if(!t.auth||!t.auth.key)throw new Error("Transloadit: The `params.auth.key` option is required. You can find your Transloadit API key at https://transloadit.com/account/api-settings.")}var e=function(){function e(t,e){this.files=t,this.opts=e}var s=e.prototype;return s._normalizeAssemblyOptions=function(t,e){if(Array.isArray(e.fields)){var s=e.fields;e.fields={},s.forEach(function(s){e.fields[s]=t.meta[s]})}return e.fields||(e.fields={}),e},s._getAssemblyOptions=function(e){var s=this,n=this.opts;return Promise.resolve().then(function(){return n.getAssemblyOptions(e,n)}).then(function(t){return s._normalizeAssemblyOptions(e,t)}).then(function(s){return t(s.params),{fileIDs:[e.id],options:s}})},s._dedupe=function(t){var e=Object.create(null);return t.forEach(function(t){var s,n=t.fileIDs,i=t.options,r=JSON.stringify(i);e[r]?(s=e[r].fileIDs).push.apply(s,n):e[r]={options:i,fileIDs:[].concat(n)}}),Object.keys(e).map(function(t){return e[t]})},s.build=function(){var e=this,s=this.opts;return this.files.length>0?Promise.all(this.files.map(function(t){return e._getAssemblyOptions(t)})).then(function(t){return e._dedupe(t)}):s.alwaysRunAssembly?Promise.resolve(s.getAssemblyOptions(null,s)).then(function(s){return t(s.params),[{fileIDs:e.files.map(function(t){return t.id}),options:s}]}):Promise.resolve([])},e}();module.exports=e,module.exports.validateParams=t;
},{}],"hLU0":[function(require,module,exports) {
function e(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,s){e.prototype=Object.create(s.prototype),e.prototype.constructor=e,t(e,s)}function t(e,s){return(t=Object.setPrototypeOf||function(e,s){return e.__proto__=s,e})(e,s)}var o=require("component-emitter"),r=function(t){function o(s,o){var r;return(r=t.call(this)||this)._uppy=s,r._assemblyIDs=o,r._remaining=o.length,r.promise=new Promise(function(e,s){r._resolve=e,r._reject=s}),r._onAssemblyComplete=r._onAssemblyComplete.bind(e(r)),r._onAssemblyCancel=r._onAssemblyCancel.bind(e(r)),r._onAssemblyError=r._onAssemblyError.bind(e(r)),r._onImportError=r._onImportError.bind(e(r)),r._addListeners(),r}s(o,t);var r=o.prototype;return r._watching=function(e){return-1!==this._assemblyIDs.indexOf(e)},r._onAssemblyComplete=function(e){this._watching(e.assembly_id)&&(this._uppy.log("[Transloadit] AssemblyWatcher: Got Assembly finish "+e.assembly_id),this.emit("assembly-complete",e.assembly_id),this._checkAllComplete())},r._onAssemblyCancel=function(e){this._watching(e.assembly_id)&&this._checkAllComplete()},r._onAssemblyError=function(e,s){this._watching(e.assembly_id)&&(this._uppy.log("[Transloadit] AssemblyWatcher: Got Assembly error "+e.assembly_id),this._uppy.log(s),this.emit("assembly-error",e.assembly_id,s),this._checkAllComplete())},r._onImportError=function(e,s,t){this._watching(e.assembly_id)&&this._onAssemblyError(e,t)},r._checkAllComplete=function(){this._remaining-=1,0===this._remaining&&(this._removeListeners(),this._resolve())},r._removeListeners=function(){this._uppy.off("transloadit:complete",this._onAssemblyComplete),this._uppy.off("transloadit:assembly-cancel",this._onAssemblyCancel),this._uppy.off("transloadit:assembly-error",this._onAssemblyError),this._uppy.off("transloadit:import-error",this._onImportError)},r._addListeners=function(){this._uppy.on("transloadit:complete",this._onAssemblyComplete),this._uppy.on("transloadit:assembly-cancel",this._onAssemblyCancel),this._uppy.on("transloadit:assembly-error",this._onAssemblyError),this._uppy.on("transloadit:import-error",this._onImportError)},o}(o);module.exports=r;
},{"component-emitter":"PndQ"}],"uYR3":[function(require,module,exports) {
var e,t;function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e}).apply(this,arguments)}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function r(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,n(e,t)}function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var a=require("@uppy/utils/lib/Translator"),o=require("@uppy/utils/lib/hasProperty"),l=require("@uppy/core"),u=l.Plugin,p=require("@uppy/tus"),c=require("./Assembly"),m=require("./Client"),d=require("./AssemblyOptions"),h=require("./AssemblyWatcher");function y(e,t){return{params:t.params,signature:t.signature,fields:t.fields}}var f="https://api2.transloadit.com/companion",b=/\.transloadit\.com$/,g=/https?:\/\/api2(?:-\w+)?\.transloadit\.com\/companion/,v=/https?:\/\/api2(?:-\w+)?\.transloadit\.com\/uppy-server/;module.exports=(t=e=function(e){function t(t,r){var n;(n=e.call(this,t,r)||this).type="uploader",n.id=n.opts.id||"Transloadit",n.title="Transloadit",n.defaultLocale={strings:{creatingAssembly:"Preparing upload...",creatingAssemblyFailed:"Transloadit: Could not create Assembly",encoding:"Encoding..."}};var a={service:"https://api2.transloadit.com",errorReporting:!0,waitForEncoding:!1,waitForMetadata:!1,alwaysRunAssembly:!1,importFromUploadURLs:!1,signature:null,params:null,fields:{},getAssemblyOptions:y,limit:0};n.opts=s({},a,r),n.i18nInit(),n._prepareUpload=n._prepareUpload.bind(i(n)),n._afterUpload=n._afterUpload.bind(i(n)),n._onError=n._onError.bind(i(n)),n._onTusError=n._onTusError.bind(i(n)),n._onCancelAll=n._onCancelAll.bind(i(n)),n._onFileUploadURLAvailable=n._onFileUploadURLAvailable.bind(i(n)),n._onRestored=n._onRestored.bind(i(n)),n._getPersistentData=n._getPersistentData.bind(i(n));var o=n.opts.getAssemblyOptions!==a.getAssemblyOptions;return n.opts.params?d.validateParams(n.opts.params):o||d.validateParams(null),n.client=new m({service:n.opts.service,client:n._getClientVersion(),errorReporting:n.opts.errorReporting}),n.activeAssemblies={},n.assemblyWatchers={},n.completedFiles=Object.create(null),n}r(t,e);var n=t.prototype;return n.setOptions=function(t){e.prototype.setOptions.call(this,t),this.i18nInit()},n.i18nInit=function(){this.translator=new a([this.defaultLocale,this.uppy.locale,this.opts.locale]),this.i18n=this.translator.translate.bind(this.translator),this.i18nArray=this.translator.translateArray.bind(this.translator),this.setPluginState()},n._getClientVersion=function(){var e=this,t=["uppy-core:"+this.uppy.constructor.VERSION,"uppy-transloadit:"+this.constructor.VERSION,"uppy-tus:"+p.VERSION],s=function(s,i){var r=e.uppy.getPlugin(s);r&&t.push(i+":"+r.constructor.VERSION)};return this.opts.importFromUploadURLs&&(s("XHRUpload","uppy-xhr-upload"),s("AwsS3","uppy-aws-s3"),s("AwsS3Multipart","uppy-aws-s3-multipart")),s("Dropbox","uppy-dropbox"),s("Box","uppy-box"),s("Facebook","uppy-facebook"),s("GoogleDrive","uppy-google-drive"),s("Instagram","uppy-instagram"),s("OneDrive","uppy-onedrive"),s("Zoom","uppy-zoom"),s("Url","uppy-url"),t.join(",")},n._attachAssemblyMetadata=function(e,t){var i=s({},e.meta,{assembly_url:t.assembly_url,filename:e.name,fieldname:"file"}),r=s({},e.tus,{endpoint:t.tus_url,addRequestId:!0}),n=e.remote;if(e.remote&&v.test(e.remote.companionUrl)){var a=new Error("The https://api2.transloadit.com/uppy-server endpoint was renamed to https://api2.transloadit.com/companion, please update your `companionUrl` options accordingly.");throw this.uppy.log(a),a}if(e.remote&&g.test(e.remote.companionUrl)){var o=t.companion_url.replace(/\/$/,""),l=e.remote.url.replace(e.remote.companionUrl,"").replace(/^\//,"");n=s({},e.remote,{companionUrl:o,url:o+"/"+l})}var u=s({},e,{transloadit:{assembly:t.assembly_id}});return this.opts.importFromUploadURLs||s(u,{meta:i,tus:r,remote:n}),u},n._createAssembly=function(e,t,i){var r=this;return this.uppy.log("[Transloadit] Create Assembly"),this.client.createAssembly({params:i.params,fields:i.fields,expectedFiles:e.length,signature:i.signature}).then(function(i){var n,a,o=new c(i),l=o.status,u=l.assembly_id,p=r.getPluginState(),m=p.assemblies,d=p.uploadsAssemblies;r.setPluginState({assemblies:s({},m,(n={},n[u]=l,n)),uploadsAssemblies:s({},d,(a={},a[t]=[].concat(d[t],[u]),a))});var h=r.uppy.getState().files,y={};return e.forEach(function(e){y[e]=r._attachAssemblyMetadata(r.uppy.getFile(e),l)}),r.uppy.setState({files:s({},h,y)}),r.uppy.emit("transloadit:assembly-created",l,e),r.uppy.log("[Transloadit] Created Assembly "+u),o}).catch(function(e){throw e.message=r.i18n("creatingAssemblyFailed")+": "+e.message,e})},n._createAssemblyWatcher=function(e,t,s){var i=this,r=new h(this.uppy,e);r.on("assembly-complete",function(e){i.getAssemblyFiles(e).forEach(function(e){i.completedFiles[e.id]=!0,i.uppy.emit("postprocess-complete",e)})}),r.on("assembly-error",function(e,t){i.getAssemblyFiles(e).forEach(function(e){i.uppy.emit("upload-error",e,t),i.uppy.emit("postprocess-complete",e)})}),this.assemblyWatchers[s]=r},n._shouldWaitAfterUpload=function(){return this.opts.waitForEncoding||this.opts.waitForMetadata},n._reserveFiles=function(e,t){var s=this;return Promise.all(t.map(function(t){var i=s.uppy.getFile(t);return s.client.reserveFile(e.status,i)}))},n._onFileUploadURLAvailable=function(e){var t=this,s=this.uppy.getFile(e.id);if(s&&s.transloadit&&s.transloadit.assembly){var i=this.getPluginState().assemblies[s.transloadit.assembly];this.client.addFile(i,s).catch(function(e){t.uppy.log(e),t.uppy.emit("transloadit:import-error",i,s.id,e)})}},n._findFile=function(e){for(var t=this.uppy.getFiles(),s=0;s<t.length;s++){var i=t[s];if(i.uploadURL===e.tus_upload_url)return i;if(i.tus&&i.tus.uploadUrl===e.tus_upload_url)return i;if(!e.is_tus_file&&i.name===e.name&&i.size===e.size)return i}},n._onFileUploadComplete=function(e,t){var i,r=this.getPluginState(),n=this._findFile(t);n?(this.setPluginState({files:s({},r.files,(i={},i[t.id]={assembly:e,id:n.id,uploadedFile:t},i))}),this.uppy.emit("transloadit:upload",t,this.getAssembly(e))):this.uppy.log("[Transloadit] Couldn’t file the file, it was likely removed in the process")},n._onResult=function(e,t,s){var i=this.getPluginState(),r=i.files[s.original_id];s.localId=r?r.id:null;var n={result:s,stepName:t,id:s.id,assembly:e};this.setPluginState({results:[].concat(i.results,[n])}),this.uppy.emit("transloadit:result",t,s,this.getAssembly(e))},n._onAssemblyFinished=function(e){var t=this,i=e.assembly_ssl_url;this.client.getAssemblyStatus(i).then(function(e){var i,r=e.assembly_id,n=t.getPluginState();t.setPluginState({assemblies:s({},n.assemblies,(i={},i[r]=e,i))}),t.uppy.emit("transloadit:complete",e)})},n._cancelAssembly=function(e){var t=this;return this.client.cancelAssembly(e).then(function(){t.uppy.emit("transloadit:assembly-cancelled",e)})},n._onCancelAll=function(){var e=this,t=this.getPluginState().uploadsAssemblies,s=Object.keys(t).reduce(function(e,s){return e.push.apply(e,t[s]),e},[]).map(function(t){var s=e.getAssembly(t);return e._cancelAssembly(s)});Promise.all(s).catch(function(t){e.uppy.log(t)})},n._getPersistentData=function(e){var t,s=this.getPluginState(),i=s.assemblies,r=s.uploadsAssemblies;e(((t={})[this.id]={assemblies:i,uploadsAssemblies:r},t))},n._onRestored=function(e){var t=this,s=e&&e[this.id]?e[this.id]:{},i=s.assemblies||{},r=s.uploadsAssemblies||{};if(0!==Object.keys(r).length){this.restored=Promise.resolve().then(function(){var e,s,n;return e=i,s={},n=[],Object.keys(e).forEach(function(i){var r=e[i];r.uploads.forEach(function(e){var r=t._findFile(e);s[e.id]={id:r.id,assembly:i,uploadedFile:e}});var a=t.getPluginState();Object.keys(r.results).forEach(function(e){r.results[e].forEach(function(t){var s=a.files[t.original_id];t.localId=s?s.id:null,n.push({id:t.id,result:t,stepName:e,assembly:i})})})}),t.setPluginState({assemblies:e,files:s,results:n,uploadsAssemblies:r}),function(){var e=t.getPluginState(),s=e.assemblies,i=e.uploadsAssemblies;Object.keys(i).forEach(function(e){var s=i[e],r=s.reduce(function(e,s){var i=t.getAssemblyFiles(s).map(function(e){return e.id});return e.push.apply(e,i),e},[]);t._createAssemblyWatcher(s,r,e)}),Object.keys(s).forEach(function(e){var i=new c(s[e]);t._connectAssembly(i)})}(),function(){var e=t.getPluginState().assemblies;return Promise.all(Object.keys(e).map(function(e){return t.activeAssemblies[e].update()}))}()}),this.restored.then(function(){t.restored=null})}},n._connectAssembly=function(e){var t=this,i=e.status.assembly_id;if(this.activeAssemblies[i]=e,e.on("status",function(e){var r,n=t.getPluginState().assemblies;t.setPluginState({assemblies:s({},n,(r={},r[i]=e,r))})}),e.on("upload",function(e){t._onFileUploadComplete(i,e)}),e.on("error",function(s){s.assembly=e.status,t.uppy.emit("transloadit:assembly-error",e.status,s)}),e.on("executing",function(){t.uppy.emit("transloadit:assembly-executing",e.status)}),this.opts.waitForEncoding&&e.on("result",function(e,s){t._onResult(i,e,s)}),this.opts.waitForEncoding?e.on("finished",function(){t._onAssemblyFinished(e.status)}):this.opts.waitForMetadata&&e.on("metadata",function(){t._onAssemblyFinished(e.status)}),"ASSEMBLY_COMPLETE"===e.ok)return e;new Promise(function(t,s){e.once("connect",t),e.once("status",t),e.once("error",s)}).then(function(){t.uppy.log("[Transloadit] Socket is ready")});return e.connect(),e},n._prepareUpload=function(e,t){var i,r=this;(e=e.filter(function(e){return!e.error})).forEach(function(e){var t=r.uppy.getFile(e);r.uppy.emit("preprocess-progress",t,{mode:"indeterminate",message:r.i18n("creatingAssembly")})});var n=function(e){var s,i=e.fileIDs,n=e.options;return r._createAssembly(i,t,n).then(function(e){if(s=e,r.opts.importFromUploadURLs)return r._reserveFiles(e,i)}).then(function(){return i.forEach(function(e){var t=r.uppy.getFile(e);r.uppy.emit("preprocess-complete",t)}),s}).catch(function(e){throw i.forEach(function(t){var s=r.uppy.getFile(t);r.uppy.emit("preprocess-complete",s),r.uppy.emit("upload-error",s,e)}),e})},a=this.getPluginState().uploadsAssemblies;this.setPluginState({uploadsAssemblies:s({},a,(i={},i[t]=[],i))});var o=e.map(function(e){return r.uppy.getFile(e)});return new d(o,this.opts).build().then(function(s){return Promise.all(s.map(n)).then(function(s){var i=s.map(function(e){return e.status.assembly_id});r._createAssemblyWatcher(i,e,t),s.map(function(e){return r._connectAssembly(e)})})},function(t){throw e.forEach(function(e){var s=r.uppy.getFile(e);r.uppy.emit("preprocess-complete",s),r.uppy.emit("upload-error",s,t)}),t})},n._afterUpload=function(e,t){var i=this,r=e.map(function(e){return i.uppy.getFile(e)});e=r.filter(function(e){return!e.error}).map(function(e){return e.id});var n=this.getPluginState();if(this.restored)return this.restored.then(function(){return i._afterUpload(e,t)});var a=n.uploadsAssemblies[t],l=function(){a.forEach(function(e){i.activeAssemblies[e].close(),delete i.activeAssemblies[e]})};if(!this._shouldWaitAfterUpload()){l();var u=a.map(function(e){return i.getAssembly(e)});return this.uppy.addResultData(t,{transloadit:u}),Promise.resolve()}return 0===a.length?(this.uppy.addResultData(t,{transloadit:[]}),Promise.resolve()):(r.filter(function(e){return!o(i.completedFiles,e.id)}).forEach(function(e){i.uppy.emit("postprocess-progress",e,{mode:"indeterminate",message:i.i18n("encoding")})}),this.assemblyWatchers[t].promise.then(function(){l();var e=a.map(function(e){return i.getAssembly(e)}),r=s({},i.getPluginState().uploadsAssemblies);delete r[t],i.setPluginState({uploadsAssemblies:r}),i.uppy.addResultData(t,{transloadit:e})}))},n._onError=function(e,t){var s=this;void 0===e&&(e=null),this.getPluginState().uploadsAssemblies[t].forEach(function(e){s.activeAssemblies[e]&&s.activeAssemblies[e].close()})},n._onTusError=function(e){if(e&&/^tus: /.test(e.message)){var t=e.originalRequest?e.originalRequest.getUnderlyingObject():null,s=t&&t.responseURL?t.responseURL:null;this.client.submitError(e,{url:s,type:"TUS_ERROR"}).then(function(e){})}},n.install=function(){this.uppy.addPreProcessor(this._prepareUpload),this.uppy.addPostProcessor(this._afterUpload),this.uppy.on("error",this._onError),this.uppy.on("cancel-all",this._onCancelAll),this.uppy.on("upload-error",this._onTusError),this.opts.importFromUploadURLs?this.uppy.on("upload-success",this._onFileUploadURLAvailable):this.uppy.use(p,{storeFingerprintForResuming:!1,resume:!1,useFastRemoteRetry:!1,metaFields:["assembly_url","filename","fieldname"],limit:this.opts.limit}),this.uppy.on("restore:get-data",this._getPersistentData),this.uppy.on("restored",this._onRestored),this.setPluginState({assemblies:{},uploadsAssemblies:{},files:{},results:[]});var e=this.uppy.getState().capabilities;this.uppy.setState({capabilities:s({},e,{individualCancellation:!1})})},n.uninstall=function(){this.uppy.removePreProcessor(this._prepareUpload),this.uppy.removePostProcessor(this._afterUpload),this.uppy.off("error",this._onError),this.opts.importFromUploadURLs&&this.uppy.off("upload-success",this._onFileUploadURLAvailable);var e=this.uppy.getState().capabilities;this.uppy.setState({capabilities:s({},e,{individualCancellation:!0})})},n.getAssembly=function(e){return this.getPluginState().assemblies[e]},n.getAssemblyFiles=function(e){return this.uppy.getFiles().filter(function(t){return t&&t.transloadit&&t.transloadit.assembly===e})},t}(u),e.VERSION="1.6.23",t),module.exports.COMPANION=f,module.exports.UPPY_SERVER=f,module.exports.COMPANION_PATTERN=b;
},{"@uppy/utils/lib/Translator":"hG0x","@uppy/utils/lib/hasProperty":"ss9M","@uppy/core":"PDAA","@uppy/tus":"jW88","./Assembly":"EaHq","./Client":"nYQQ","./AssemblyOptions":"ZdPE","./AssemblyWatcher":"hLU0"}],"Hq46":[function(require,module,exports) {
var e,t;function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,n(e,t)}function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e}).apply(this,arguments)}var s=require("@uppy/core"),i=s.Plugin,p=require("cuid"),u=require("@uppy/utils/lib/Translator"),d=require("@uppy/companion-client"),l=d.Provider,c=d.RequestClient,h=d.Socket,f=require("@uppy/utils/lib/emitSocketProgress"),m=require("@uppy/utils/lib/getSocketHost"),y=require("@uppy/utils/lib/settle"),v=require("@uppy/utils/lib/EventTracker"),g=require("@uppy/utils/lib/ProgressTimeout"),E=require("@uppy/utils/lib/RateLimitedQueue"),b=require("@uppy/utils/lib/NetworkError"),w=require("@uppy/utils/lib/isNetworkError");function U(e,t){return t||(t=new Error("Upload error")),"string"==typeof t&&(t=new Error(t)),t instanceof Error||(t=a(new Error("Upload error"),{data:t})),w(e)?t=new b(t,e):(t.request=e,t)}function R(e){return e.data.slice(0,e.data.size,e.meta.type)}module.exports=(t=e=function(e){function t(t,o){var n;(n=e.call(this,t,o)||this).type="uploader",n.id=n.opts.id||"XHRUpload",n.title="XHRUpload",n.defaultLocale={strings:{timedOut:"Upload stalled for %{seconds} seconds, aborting."}};var s={formData:!0,fieldName:"files[]",method:"post",metaFields:null,responseUrlFieldName:"url",bundle:!1,headers:{},timeout:3e4,limit:0,withCredentials:!1,responseType:"",getResponseData:function(e,t){var r={};try{r=JSON.parse(e)}catch(o){console.log(o)}return r},getResponseError:function(e,t){var r=new Error("Upload error");return w(t)&&(r=new b(r,t)),r},validateStatus:function(e,t,r){return e>=200&&e<300}};if(n.opts=a({},s,o),n.i18nInit(),n.handleUpload=n.handleUpload.bind(r(n)),n.opts.__queue instanceof E?n.requests=n.opts.__queue:n.requests=new E(n.opts.limit),n.opts.bundle&&!n.opts.formData)throw new Error("`opts.formData` must be true when `opts.bundle` is enabled.");return n.uploaderEvents=Object.create(null),n}o(t,e);var n=t.prototype;return n.setOptions=function(t){e.prototype.setOptions.call(this,t),this.i18nInit()},n.i18nInit=function(){this.translator=new u([this.defaultLocale,this.uppy.locale,this.opts.locale]),this.i18n=this.translator.translate.bind(this.translator),this.setPluginState()},n.getOptions=function(e){var t=this.uppy.getState().xhrUpload,r=this.opts.headers,o=a({},this.opts,t||{},e.xhrUpload||{},{headers:{}});return"function"==typeof r?o.headers=r(e):a(o.headers,this.opts.headers),t&&a(o.headers,t.headers),e.xhrUpload&&a(o.headers,e.xhrUpload.headers),o},n.addMetadata=function(e,t,r){(Array.isArray(r.metaFields)?r.metaFields:Object.keys(t)).forEach(function(r){e.append(r,t[r])})},n.createFormDataUpload=function(e,t){var r=new FormData;this.addMetadata(r,e.meta,t);var o=R(e);return e.name?r.append(t.fieldName,o,e.meta.name):r.append(t.fieldName,o),r},n.createBundledUpload=function(e,t){var r=this,o=new FormData,n=this.uppy.getState().meta;return this.addMetadata(o,n,t),e.forEach(function(e){var t=r.getOptions(e),n=R(e);e.name?o.append(t.fieldName,n,e.name):o.append(t.fieldName,n)}),o},n.createBareUpload=function(e,t){return e.data},n.upload=function(e,t,r){var o=this,n=this.getOptions(e);return this.uppy.log("uploading "+t+" of "+r),new Promise(function(t,r){o.uppy.emit("upload-started",e);var a=n.formData?o.createFormDataUpload(e,n):o.createBareUpload(e,n),s=new XMLHttpRequest;o.uploaderEvents[e.id]=new v(o.uppy);var i=new g(n.timeout,function(){s.abort(),d.done();var t=new Error(o.i18n("timedOut",{seconds:Math.ceil(n.timeout/1e3)}));o.uppy.emit("upload-error",e,t),r(t)}),u=p();s.upload.addEventListener("loadstart",function(e){o.uppy.log("[XHRUpload] "+u+" started")}),s.upload.addEventListener("progress",function(t){o.uppy.log("[XHRUpload] "+u+" progress: "+t.loaded+" / "+t.total),i.progress(),t.lengthComputable&&o.uppy.emit("upload-progress",e,{uploader:o,bytesUploaded:t.loaded,bytesTotal:t.total})}),s.addEventListener("load",function(a){if(o.uppy.log("[XHRUpload] "+u+" finished"),i.done(),d.done(),o.uploaderEvents[e.id]&&(o.uploaderEvents[e.id].remove(),o.uploaderEvents[e.id]=null),n.validateStatus(a.target.status,s.responseText,s)){var p=n.getResponseData(s.responseText,s),l=p[n.responseUrlFieldName],c={status:a.target.status,body:p,uploadURL:l};return o.uppy.emit("upload-success",e,c),l&&o.uppy.log("Download "+e.name+" from "+l),t(e)}var h=n.getResponseData(s.responseText,s),f=U(s,n.getResponseError(s.responseText,s)),m={status:a.target.status,body:h};return o.uppy.emit("upload-error",e,f,m),r(f)}),s.addEventListener("error",function(t){o.uppy.log("[XHRUpload] "+u+" errored"),i.done(),d.done(),o.uploaderEvents[e.id]&&(o.uploaderEvents[e.id].remove(),o.uploaderEvents[e.id]=null);var a=U(s,n.getResponseError(s.responseText,s));return o.uppy.emit("upload-error",e,a),r(a)}),s.open(n.method.toUpperCase(),n.endpoint,!0),s.withCredentials=n.withCredentials,""!==n.responseType&&(s.responseType=n.responseType);var d=o.requests.run(function(){var t=o.getOptions(e);return Object.keys(t.headers).forEach(function(e){s.setRequestHeader(e,t.headers[e])}),s.send(a),function(){i.done(),s.abort()}});o.onFileRemove(e.id,function(){d.abort(),r(new Error("File removed"))}),o.onCancelAll(e.id,function(){d.abort(),r(new Error("Upload cancelled"))})})},n.uploadRemote=function(e,t,r){var o=this,n=this.getOptions(e);return new Promise(function(t,r){o.uppy.emit("upload-started",e);var s={};(Array.isArray(n.metaFields)?n.metaFields:Object.keys(e.meta)).forEach(function(t){s[t]=e.meta[t]}),new(e.remote.providerOptions.provider?l:c)(o.uppy,e.remote.providerOptions).post(e.remote.url,a({},e.remote.body,{endpoint:n.endpoint,size:e.data.size,fieldname:n.fieldName,metadata:s,httpMethod:n.method,useFormData:n.formData,headers:n.headers})).then(function(s){var i=s.token,p=m(e.remote.companionUrl),u=new h({target:p+"/api/"+i,autoOpen:!1});o.uploaderEvents[e.id]=new v(o.uppy),o.onFileRemove(e.id,function(){u.send("pause",{}),d.abort(),t("upload "+e.id+" was removed")}),o.onCancelAll(e.id,function(){u.send("pause",{}),d.abort(),t("upload "+e.id+" was canceled")}),o.onRetry(e.id,function(){u.send("pause",{}),u.send("resume",{})}),o.onRetryAll(e.id,function(){u.send("pause",{}),u.send("resume",{})}),u.on("progress",function(t){return f(o,t,e)}),u.on("success",function(r){var a=n.getResponseData(r.response.responseText,r.response),s=a[n.responseUrlFieldName],i={status:r.response.status,body:a,uploadURL:s};return o.uppy.emit("upload-success",e,i),d.done(),o.uploaderEvents[e.id]&&(o.uploaderEvents[e.id].remove(),o.uploaderEvents[e.id]=null),t()}),u.on("error",function(t){var s=t.response,i=s?n.getResponseError(s.responseText,s):a(new Error(t.error.message),{cause:t.error});o.uppy.emit("upload-error",e,i),d.done(),o.uploaderEvents[e.id]&&(o.uploaderEvents[e.id].remove(),o.uploaderEvents[e.id]=null),r(i)});var d=o.requests.run(function(){return u.open(),e.isPaused&&u.send("pause",{}),function(){return u.close()}})}).catch(function(t){o.uppy.emit("upload-error",e,t),r(t)})})},n.uploadBundle=function(e){var t=this;return new Promise(function(r,o){var n=t.opts.endpoint,s=t.opts.method,i=t.uppy.getState().xhrUpload,p=t.createBundledUpload(e,a({},t.opts,i||{})),u=new XMLHttpRequest,d=new g(t.opts.timeout,function(){u.abort();var e=new Error(t.i18n("timedOut",{seconds:Math.ceil(t.opts.timeout/1e3)}));l(e),o(e)}),l=function(r){e.forEach(function(e){t.uppy.emit("upload-error",e,r)})};u.upload.addEventListener("loadstart",function(e){t.uppy.log("[XHRUpload] started uploading bundle"),d.progress()}),u.upload.addEventListener("progress",function(r){d.progress(),r.lengthComputable&&e.forEach(function(e){t.uppy.emit("upload-progress",e,{uploader:t,bytesUploaded:r.loaded/r.total*e.size,bytesTotal:e.size})})}),u.addEventListener("load",function(n){if(d.done(),t.opts.validateStatus(n.target.status,u.responseText,u)){var a=t.opts.getResponseData(u.responseText,u),s={status:n.target.status,body:a};return e.forEach(function(e){t.uppy.emit("upload-success",e,s)}),r()}var i=t.opts.getResponseError(u.responseText,u)||new Error("Upload error");return i.request=u,l(i),o(i)}),u.addEventListener("error",function(e){d.done();var r=t.opts.getResponseError(u.responseText,u)||new Error("Upload error");return l(r),o(r)}),t.uppy.on("cancel-all",function(){d.done(),u.abort()}),u.open(s.toUpperCase(),n,!0),u.withCredentials=t.opts.withCredentials,""!==t.opts.responseType&&(u.responseType=t.opts.responseType),Object.keys(t.opts.headers).forEach(function(e){u.setRequestHeader(e,t.opts.headers[e])}),u.send(p),e.forEach(function(e){t.uppy.emit("upload-started",e)})})},n.uploadFiles=function(e){var t=this,r=e.map(function(r,o){var n=parseInt(o,10)+1,a=e.length;return r.error?Promise.reject(new Error(r.error)):r.isRemote?t.uploadRemote(r,n,a):t.upload(r,n,a)});return y(r)},n.onFileRemove=function(e,t){this.uploaderEvents[e].on("file-removed",function(r){e===r.id&&t(r.id)})},n.onRetry=function(e,t){this.uploaderEvents[e].on("upload-retry",function(r){e===r&&t()})},n.onRetryAll=function(e,t){var r=this;this.uploaderEvents[e].on("retry-all",function(o){r.uppy.getFile(e)&&t()})},n.onCancelAll=function(e,t){var r=this;this.uploaderEvents[e].on("cancel-all",function(){r.uppy.getFile(e)&&t()})},n.handleUpload=function(e){var t=this;if(0===e.length)return this.uppy.log("[XHRUpload] No files to upload!"),Promise.resolve();0!==this.opts.limit||this.opts.__queue||this.uppy.log("[XHRUpload] When uploading multiple files at once, consider setting the `limit` option (to `10` for example), to limit the number of concurrent uploads, which helps prevent memory and network issues: https://uppy.io/docs/xhr-upload/#limit-0","warning"),this.uppy.log("[XHRUpload] Uploading...");var r=e.map(function(e){return t.uppy.getFile(e)});if(this.opts.bundle){if(r.some(function(e){return e.isRemote}))throw new Error("Can’t upload remote files when the `bundle: true` option is set");if("function"==typeof this.opts.headers)throw new TypeError("`headers` may not be a function when the `bundle: true` option is set");return this.uploadBundle(r)}return this.uploadFiles(r).then(function(){return null})},n.install=function(){if(this.opts.bundle){var e=this.uppy.getState().capabilities;this.uppy.setState({capabilities:a({},e,{individualCancellation:!1})})}this.uppy.addUploader(this.handleUpload)},n.uninstall=function(){if(this.opts.bundle){var e=this.uppy.getState().capabilities;this.uppy.setState({capabilities:a({},e,{individualCancellation:!0})})}this.uppy.removeUploader(this.handleUpload)},t}(i),e.VERSION="1.7.2",t);
},{"@uppy/core":"PDAA","cuid":"EdMi","@uppy/utils/lib/Translator":"hG0x","@uppy/companion-client":"MaVI","@uppy/utils/lib/emitSocketProgress":"uTqy","@uppy/utils/lib/getSocketHost":"FB9Q","@uppy/utils/lib/settle":"uLzd","@uppy/utils/lib/EventTracker":"E2Ah","@uppy/utils/lib/ProgressTimeout":"adHa","@uppy/utils/lib/RateLimitedQueue":"R5gH","@uppy/utils/lib/NetworkError":"jqwg","@uppy/utils/lib/isNetworkError":"K46j"}],"kjmz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o,exports.getFieldData=a;var e={"[object HTMLCollection]":!0,"[object NodeList]":!0,"[object RadioNodeList]":!0},t={button:!0,fieldset:!0,reset:!0,submit:!0},r={checkbox:!0,radio:!0},l=/^\s+|\s+$/g,i=Array.prototype.slice,n=Object.prototype.toString;function o(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{trim:!1};if(!e)throw new Error("A form is required by getFormData, was given form="+e);for(var l={},i=void 0,n=[],o={},s=0,u=e.elements.length;s<u;s++){var d=e.elements[s];t[d.type]||d.disabled||(i=d.name||d.id)&&!o[i]&&(n.push(i),o[i]=!0)}for(var f=0,c=n.length;f<c;f++){var v=a(e,i=n[f],r);null!=v&&(l[i]=v)}return l}function a(t,r){var l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{trim:!1};if(!t)throw new Error("A form is required by getFieldData, was given form="+t);if(!r&&"[object String]"!==n.call(r))throw new Error("A field name is required by getFieldData, was given fieldName="+r);var i=t.elements[r];if(!i||i.disabled)return null;if(!e[n.call(i)])return s(i,l.trim);for(var o=[],a=!0,u=0,d=i.length;u<d;u++)if(!i[u].disabled){a&&"radio"!==i[u].type&&(a=!1);var f=s(i[u],l.trim);null!=f&&(o=o.concat(f))}return a&&1===o.length?o[0]:o.length>0?o:null}function s(e,t){var n=null,o=e.type;if("select-one"===o)return e.options.length&&(n=e.options[e.selectedIndex].value),n;if("select-multiple"===o){n=[];for(var a=0,s=e.options.length;a<s;a++)e.options[a].selected&&n.push(e.options[a].value);return 0===n.length&&(n=null),n}return"file"===o&&"files"in e?(e.multiple?0===(n=i.call(e.files)).length&&(n=null):n=e.files[0],n):(r[o]?e.checked&&(n=e.value):n=t?e.value.replace(l,""):e.value,n)}o.getFieldData=a;
},{}],"V2dl":[function(require,module,exports) {
var t,e;function r(){return(r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t}).apply(this,arguments)}function o(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,s(t,e)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var n=require("@uppy/core"),a=n.Plugin,u=require("@uppy/utils/lib/findDOMElement"),l=require("@uppy/utils/lib/toArray"),p=require("get-form-data").default||require("get-form-data");module.exports=(e=t=function(t){function e(e,i){var s;(s=t.call(this,e,i)||this).type="acquirer",s.id=s.opts.id||"Form",s.title="Form";return s.opts=r({},{target:null,resultName:"uppyResult",getMetaFromForm:!0,addResultToForm:!0,multipleResults:!1,submitOnSuccess:!1,triggerUploadOnSubmit:!1},i),s.handleFormSubmit=s.handleFormSubmit.bind(o(s)),s.handleUploadStart=s.handleUploadStart.bind(o(s)),s.handleSuccess=s.handleSuccess.bind(o(s)),s.addResultToForm=s.addResultToForm.bind(o(s)),s.getMetaFromForm=s.getMetaFromForm.bind(o(s)),s}i(e,t);var s=e.prototype;return s.handleUploadStart=function(){this.opts.getMetaFromForm&&this.getMetaFromForm()},s.handleSuccess=function(t){this.opts.addResultToForm&&this.addResultToForm(t),this.opts.submitOnSuccess&&this.form.submit()},s.handleFormSubmit=function(t){var e=this;if(this.opts.triggerUploadOnSubmit){t.preventDefault();var r=l(t.target.elements),o=[];r.forEach(function(t){("BUTTON"===t.tagName||"INPUT"===t.tagName&&"submit"===t.type)&&!t.disabled&&(t.disabled=!0,o.push(t))}),this.uppy.upload().then(function(){o.forEach(function(t){t.disabled=!1})},function(t){return o.forEach(function(t){t.disabled=!1}),Promise.reject(t)}).catch(function(t){e.uppy.log(t.stack||t.message||t)})}},s.addResultToForm=function(t){this.uppy.log("[Form] Adding result to the original form:"),this.uppy.log(t);var e=this.form.querySelector('[name="'+this.opts.resultName+'"]');if(e)if(this.opts.multipleResults){var r;try{r=JSON.parse(e.value)}catch(o){}Array.isArray(r)||(r=[]),r.push(t),e.value=JSON.stringify(r)}else e.value=JSON.stringify(t);else(e=document.createElement("input")).name=this.opts.resultName,e.type="hidden",this.opts.multipleResults?e.value=JSON.stringify([t]):e.value=JSON.stringify(t),this.form.appendChild(e)},s.getMetaFromForm=function(){var t=p(this.form);delete t[this.opts.resultName],this.uppy.setMeta(t)},s.install=function(){this.form=u(this.opts.target),this.form&&"FORM"===this.form.nodeName?(this.form.addEventListener("submit",this.handleFormSubmit),this.uppy.on("upload",this.handleUploadStart),this.uppy.on("complete",this.handleSuccess)):this.uppy.log("Form plugin requires a <form> target element passed in options to operate, none was found","error")},s.uninstall=function(){this.form.removeEventListener("submit",this.handleFormSubmit),this.uppy.off("upload",this.handleUploadStart),this.uppy.off("complete",this.handleSuccess)},e}(a),t.VERSION="1.3.28",e);
},{"@uppy/core":"PDAA","@uppy/utils/lib/findDOMElement":"m6sE","@uppy/utils/lib/toArray":"d6Wp","get-form-data":"kjmz"}],"qtPa":[function(require,module,exports) {
var e="undefined"!=typeof navigator&&"serviceWorker"in navigator;function r(){return new Promise(function(r,t){e?navigator.serviceWorker.controller?r():navigator.serviceWorker.addEventListener("controllerchange",function(){r()}):t(new Error("Unsupported"))})}var t=function(){function e(e){this.ready=r(),this.name=e.storeName}var t=e.prototype;return t.list=function(){var e=this,r={},t=new Promise(function(e,t){r.resolve=e,r.reject=t});console.log("Loading stored blobs from Service Worker");var n=function t(n){if(n.data.store===e.name)switch(n.data.type){case"uppy/ALL_FILES":r.resolve(n.data.files),navigator.serviceWorker.removeEventListener("message",t)}};return this.ready.then(function(){navigator.serviceWorker.addEventListener("message",n),navigator.serviceWorker.controller.postMessage({type:"uppy/GET_FILES",store:e.name})}),t},t.put=function(e){var r=this;return this.ready.then(function(){navigator.serviceWorker.controller.postMessage({type:"uppy/ADD_FILE",store:r.name,file:e})})},t.delete=function(e){var r=this;return this.ready.then(function(){navigator.serviceWorker.controller.postMessage({type:"uppy/REMOVE_FILE",store:r.name,fileID:e})})},e}();t.isSupported=e,module.exports=t;
},{}],"mHTb":[function(require,module,exports) {
function e(){return(e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var t=require("@transloadit/prettier-bytes"),n="undefined"!=typeof window&&(window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.OIndexedDB||window.msIndexedDB),r=!!n,o="uppy-blobs",i="files",a=864e5,s=3;function u(e){e.openCursor().onsuccess=function(e){var t=e.target.result;if(t){var n=t.value;n.expires=Date.now()+a,t.update(n)}}}function c(e){var t=n.open(e,s);return new Promise(function(e,n){t.onupgradeneeded=function(t){var n=t.target.result,r=t.currentTarget.transaction;t.oldVersion<2&&n.createObjectStore(i,{keyPath:"id"}).createIndex("store","store",{unique:!1});if(t.oldVersion<3){var o=r.objectStore(i);o.createIndex("expires","expires",{unique:!1}),u(o)}r.oncomplete=function(){e(n)}},t.onsuccess=function(t){e(t.target.result)},t.onerror=n})}function d(e){return new Promise(function(t,n){e.onsuccess=function(e){t(e.target.result)},e.onerror=n})}var f=!1,l=function(){function n(t){var r=this;this.opts=e({dbName:o,storeName:"default",expires:a,maxFileSize:10485760,maxTotalSize:314572800},t),this.name=this.opts.storeName;var i=function(){return c(r.opts.dbName)};f?this.ready=i():(f=!0,this.ready=n.cleanup().then(i,i))}var r=n.prototype;return r.key=function(e){return this.name+"!"+e},r.list=function(){var e=this;return this.ready.then(function(t){return d(t.transaction([i],"readonly").objectStore(i).index("store").getAll(IDBKeyRange.only(e.name)))}).then(function(e){var t={};return e.forEach(function(e){t[e.fileID]=e.data}),t})},r.get=function(e){var t=this;return this.ready.then(function(n){return d(n.transaction([i],"readonly").objectStore(i).get(t.key(e)))}).then(function(e){return{id:e.data.fileID,data:e.data.data}})},r.getSize=function(){var e=this;return this.ready.then(function(t){var n=t.transaction([i],"readonly").objectStore(i).index("store").openCursor(IDBKeyRange.only(e.name));return new Promise(function(e,t){var r=0;n.onsuccess=function(t){var n=t.target.result;n?(r+=n.value.data.size,n.continue()):e(r)},n.onerror=function(){t(new Error("Could not retrieve stored blobs size"))}})})},r.put=function(e){var t=this;return e.data.size>this.opts.maxFileSize?Promise.reject(new Error("File is too big to store.")):this.getSize().then(function(e){return e>t.opts.maxTotalSize?Promise.reject(new Error("No space left")):t.ready}).then(function(n){return d(n.transaction([i],"readwrite").objectStore(i).add({id:t.key(e.id),fileID:e.id,store:t.name,expires:Date.now()+t.opts.expires,data:e.data}))})},r.delete=function(e){var t=this;return this.ready.then(function(n){return d(n.transaction([i],"readwrite").objectStore(i).delete(t.key(e)))})},n.cleanup=function(){return c(o).then(function(e){var n=e.transaction([i],"readwrite").objectStore(i).index("expires").openCursor(IDBKeyRange.upperBound(Date.now()));return new Promise(function(r,o){n.onsuccess=function(n){var o=n.target.result;if(o){var i=o.value;console.log("[IndexedDBStore] Deleting record",i.fileID,"of size",t(i.data.size),"- expired on",new Date(i.expires)),o.delete(),o.continue()}else r(e)},n.onerror=o})}).then(function(e){e.close()})},n}();l.isSupported=r,module.exports=l;
},{"@transloadit/prettier-bytes":"n6LF"}],"CEhQ":[function(require,module,exports) {
function t(){return(t=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t}).apply(this,arguments)}function e(){for(var t=[],e=0;e<localStorage.length;e++){var r=localStorage.key(e);/^uppyState:/.test(r)&&t.push(r.slice("uppyState:".length))}return t}function r(t){try{return JSON.parse(t)}catch(e){return null}}var a=!1;module.exports=function(){function n(e){this.opts=t({expires:864e5},e),this.name="uppyState:"+e.storeName,a||(a=!0,n.cleanup())}var o=n.prototype;return o.load=function(){var t=localStorage.getItem(this.name);if(!t)return null;var e=r(t);return e?e.metadata?e.metadata:(this.save(e),e):null},o.save=function(t){var e=Date.now()+this.opts.expires,r=JSON.stringify({metadata:t,expires:e});localStorage.setItem(this.name,r)},n.cleanup=function(){var t=e(),a=Date.now();t.forEach(function(t){var e=localStorage.getItem("uppyState:"+t);if(!e)return null;var n=r(e);if(!n)return null;n.expires&&n.expires<a&&localStorage.removeItem("uppyState:"+t)})},n}();
},{}],"jyxJ":[function(require,module,exports) {
var e,t;function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e}).apply(this,arguments)}function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,n(e,t)}function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l=require("@uppy/core"),s=l.Plugin,a=require("./ServiceWorkerStore"),d=require("./IndexedDBStore"),p=require("./MetaDataStore");module.exports=(t=e=function(e){function t(t,i){var n;(n=e.call(this,t,i)||this).type="debugger",n.id=n.opts.id||"GoldenRetriever",n.title="Golden Retriever";return n.opts=o({},{expires:864e5,serviceWorker:!1},i),n.MetaDataStore=new p({expires:n.opts.expires,storeName:t.getID()}),n.ServiceWorkerStore=null,n.opts.serviceWorker&&(n.ServiceWorkerStore=new a({storeName:t.getID()})),n.IndexedDBStore=new d(o({expires:n.opts.expires},n.opts.indexedDB||{},{storeName:t.getID()})),n.saveFilesStateToLocalStorage=n.saveFilesStateToLocalStorage.bind(r(n)),n.loadFilesStateFromLocalStorage=n.loadFilesStateFromLocalStorage.bind(r(n)),n.loadFileBlobsFromServiceWorker=n.loadFileBlobsFromServiceWorker.bind(r(n)),n.loadFileBlobsFromIndexedDB=n.loadFileBlobsFromIndexedDB.bind(r(n)),n.onBlobsLoaded=n.onBlobsLoaded.bind(r(n)),n}i(t,e);var n=t.prototype;return n.loadFilesStateFromLocalStorage=function(){var e=this.MetaDataStore.load();e&&(this.uppy.log("[GoldenRetriever] Recovered some state from Local Storage"),this.uppy.setState({currentUploads:e.currentUploads||{},files:e.files||{}}),this.savedPluginData=e.pluginData)},n.getWaitingFiles=function(){var e={};return this.uppy.getFiles().forEach(function(t){t.progress&&t.progress.uploadStarted||(e[t.id]=t)}),e},n.getUploadingFiles=function(){var e=this,t={},o=this.uppy.getState().currentUploads;o&&Object.keys(o).forEach(function(r){o[r].fileIDs.forEach(function(o){t[o]=e.uppy.getFile(o)})});return t},n.saveFilesStateToLocalStorage=function(){var e=o(this.getWaitingFiles(),this.getUploadingFiles()),t={};this.uppy.emit("restore:get-data",function(e){o(t,e)});var r=this.uppy.getState().currentUploads;this.MetaDataStore.save({currentUploads:r,files:e,pluginData:t})},n.loadFileBlobsFromServiceWorker=function(){var e=this;this.ServiceWorkerStore.list().then(function(t){var o=Object.keys(t).length;return o===e.uppy.getFiles().length?(e.uppy.log("[GoldenRetriever] Successfully recovered "+o+" blobs from Service Worker!"),e.uppy.info("Successfully recovered "+o+" files","success",3e3),e.onBlobsLoaded(t)):(e.uppy.log("[GoldenRetriever] No blobs found in Service Worker, trying IndexedDB now..."),e.loadFileBlobsFromIndexedDB())}).catch(function(t){e.uppy.log("[GoldenRetriever] Failed to recover blobs from Service Worker","warning"),e.uppy.log(t)})},n.loadFileBlobsFromIndexedDB=function(){var e=this;this.IndexedDBStore.list().then(function(t){var o=Object.keys(t).length;if(o>0)return e.uppy.log("[GoldenRetriever] Successfully recovered "+o+" blobs from IndexedDB!"),e.uppy.info("Successfully recovered "+o+" files","success",3e3),e.onBlobsLoaded(t);e.uppy.log("[GoldenRetriever] No blobs found in IndexedDB")}).catch(function(t){e.uppy.log("[GoldenRetriever] Failed to recover blobs from IndexedDB","warning"),e.uppy.log(t)})},n.onBlobsLoaded=function(e){var t=this,r=[],i=o({},this.uppy.getState().files);Object.keys(e).forEach(function(n){var l=t.uppy.getFile(n);if(l){var s=o({},l,{data:e[n],isRestored:!0});i[n]=s}else r.push(n)}),this.uppy.setState({files:i}),this.uppy.emit("restored",this.savedPluginData),r.length&&this.deleteBlobs(r).then(function(){t.uppy.log("[GoldenRetriever] Cleaned up "+r.length+" old files")}).catch(function(e){t.uppy.log("[GoldenRetriever] Could not clean up "+r.length+" old files","warning"),t.uppy.log(e)})},n.deleteBlobs=function(e){var t=this,o=[];return e.forEach(function(e){t.ServiceWorkerStore&&o.push(t.ServiceWorkerStore.delete(e)),t.IndexedDBStore&&o.push(t.IndexedDBStore.delete(e))}),Promise.all(o)},n.install=function(){var e=this;this.loadFilesStateFromLocalStorage(),this.uppy.getFiles().length>0?this.ServiceWorkerStore?(this.uppy.log("[GoldenRetriever] Attempting to load files from Service Worker..."),this.loadFileBlobsFromServiceWorker()):(this.uppy.log("[GoldenRetriever] Attempting to load files from Indexed DB..."),this.loadFileBlobsFromIndexedDB()):(this.uppy.log("[GoldenRetriever] No files need to be loaded, only restoring processing state..."),this.onBlobsLoaded([])),this.uppy.on("file-added",function(t){t.isRemote||(e.ServiceWorkerStore&&e.ServiceWorkerStore.put(t).catch(function(t){e.uppy.log("[GoldenRetriever] Could not store file","warning"),e.uppy.log(t)}),e.IndexedDBStore.put(t).catch(function(t){e.uppy.log("[GoldenRetriever] Could not store file","warning"),e.uppy.log(t)}))}),this.uppy.on("file-removed",function(t){e.ServiceWorkerStore&&e.ServiceWorkerStore.delete(t.id).catch(function(t){e.uppy.log("[GoldenRetriever] Failed to remove file","warning"),e.uppy.log(t)}),e.IndexedDBStore.delete(t.id).catch(function(t){e.uppy.log("[GoldenRetriever] Failed to remove file","warning"),e.uppy.log(t)})}),this.uppy.on("complete",function(t){var o=t.successful,r=o.map(function(e){return e.id});e.deleteBlobs(r).then(function(){e.uppy.log("[GoldenRetriever] Removed "+o.length+" files that finished uploading")}).catch(function(t){e.uppy.log("[GoldenRetriever] Could not remove "+o.length+" files that finished uploading","warning"),e.uppy.log(t)})}),this.uppy.on("state-update",this.saveFilesStateToLocalStorage),this.uppy.on("restored",function(){var t=e.uppy.getState().currentUploads;t&&Object.keys(t).forEach(function(o){e.uppy.restore(o,t[o])})})},t}(s),e.VERSION="1.3.27",t);
},{"@uppy/core":"PDAA","./ServiceWorkerStore":"qtPa","./IndexedDBStore":"mHTb","./MetaDataStore":"CEhQ"}],"q9by":[function(require,module,exports) {
var t,e;function o(){return(o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t}).apply(this,arguments)}function n(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,s(t,e)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var a=require("@uppy/core"),r=a.Plugin;module.exports=(e=t=function(t){function e(e,i){var s;(s=t.call(this,e,i)||this).type="debugger",s.id=s.opts.id||"ReduxDevTools",s.title="Redux DevTools";return s.opts=o({},{},i),s.handleStateChange=s.handleStateChange.bind(n(s)),s.initDevTools=s.initDevTools.bind(n(s)),s}i(e,t);var s=e.prototype;return s.handleStateChange=function(t,e,o){this.devTools.send("UPPY_STATE_UPDATE",e)},s.initDevTools=function(){var t=this;this.devTools=window.devToolsExtension.connect(),this.devToolsUnsubscribe=this.devTools.subscribe(function(e){if("DISPATCH"===e.type)switch(e.payload.type){case"RESET":return void t.uppy.reset();case"IMPORT_STATE":var n=e.payload.nextLiftedState.computedStates;return t.uppy.store.state=o({},t.uppy.getState(),n[n.length-1].state),void t.uppy.updateAll(t.uppy.getState());case"JUMP_TO_STATE":case"JUMP_TO_ACTION":t.uppy.store.state=o({},t.uppy.getState(),JSON.parse(e.state)),t.uppy.updateAll(t.uppy.getState())}})},s.install=function(){this.withDevTools="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__,this.withDevTools&&(this.initDevTools(),this.uppy.on("state-update",this.handleStateChange))},s.uninstall=function(){this.withDevTools&&(this.devToolsUnsubscribe(),this.uppy.off("state-update",this.handleStateUpdate))},e}(r),t.VERSION="1.3.8",e);
},{"@uppy/core":"PDAA"}],"sGJ4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Core",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"server",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"DefaultStore",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"ReduxStore",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"Dashboard",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"DragDrop",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(exports,"DropTarget",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"FileInput",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(exports,"Informer",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(exports,"ProgressBar",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(exports,"StatusBar",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"ImageEditor",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(exports,"Dropbox",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(exports,"GoogleDrive",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(exports,"Instagram",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(exports,"OneDrive",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(exports,"Box",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(exports,"Facebook",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(exports,"Unsplash",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(exports,"Url",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(exports,"Webcam",{enumerable:!0,get:function(){return j.default}}),Object.defineProperty(exports,"ScreenCapture",{enumerable:!0,get:function(){return q.default}}),Object.defineProperty(exports,"AwsS3",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(exports,"AwsS3Multipart",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(exports,"Transloadit",{enumerable:!0,get:function(){return D.default}}),Object.defineProperty(exports,"Tus",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(exports,"XHRUpload",{enumerable:!0,get:function(){return S.default}}),Object.defineProperty(exports,"Form",{enumerable:!0,get:function(){return T.default}}),Object.defineProperty(exports,"GoldenRetriever",{enumerable:!0,get:function(){return I.default}}),Object.defineProperty(exports,"ReduxDevTools",{enumerable:!0,get:function(){return R.default}}),Object.defineProperty(exports,"ThumbnailGenerator",{enumerable:!0,get:function(){return _.default}}),exports.views=void 0;var e=B(require("@uppy/core")),r=B(require("@uppy/companion-client")),t=B(require("@uppy/provider-views")),u=B(require("@uppy/store-default")),n=B(require("@uppy/store-redux")),o=B(require("@uppy/dashboard")),p=B(require("@uppy/drag-drop")),i=B(require("@uppy/drop-target")),a=B(require("@uppy/file-input")),f=B(require("@uppy/informer")),d=B(require("@uppy/progress-bar")),l=B(require("@uppy/status-bar")),b=B(require("@uppy/image-editor")),c=B(require("@uppy/dropbox")),s=B(require("@uppy/google-drive")),y=B(require("@uppy/instagram")),g=B(require("@uppy/onedrive")),m=B(require("@uppy/box")),x=B(require("@uppy/facebook")),P=B(require("@uppy/unsplash")),O=B(require("@uppy/url")),j=B(require("@uppy/webcam")),q=B(require("@uppy/screen-capture")),v=B(require("@uppy/aws-s3")),w=B(require("@uppy/aws-s3-multipart")),D=B(require("@uppy/transloadit")),h=B(require("@uppy/tus")),S=B(require("@uppy/xhr-upload")),T=B(require("@uppy/form")),I=B(require("@uppy/golden-retriever")),R=B(require("@uppy/redux-dev-tools")),_=B(require("@uppy/thumbnail-generator"));function B(e){return e&&e.__esModule?e:{default:e}}var F={ProviderView:t.default};exports.views=F;
},{"@uppy/core":"PDAA","@uppy/companion-client":"MaVI","@uppy/provider-views":"kLTu","@uppy/store-default":"S67I","@uppy/store-redux":"uV4j","@uppy/dashboard":"Fk0s","@uppy/drag-drop":"BRNE","@uppy/drop-target":"juFi","@uppy/file-input":"QfKQ","@uppy/informer":"KHlI","@uppy/progress-bar":"e8Zs","@uppy/status-bar":"VW3H","@uppy/image-editor":"vDQd","@uppy/dropbox":"GHYE","@uppy/google-drive":"hbRV","@uppy/instagram":"a3AZ","@uppy/onedrive":"DGkN","@uppy/box":"TVq1","@uppy/facebook":"gTt0","@uppy/unsplash":"KR0e","@uppy/url":"FH5p","@uppy/webcam":"Q7Cm","@uppy/screen-capture":"PjlK","@uppy/aws-s3":"zBrh","@uppy/aws-s3-multipart":"ILtH","@uppy/transloadit":"uYR3","@uppy/tus":"jW88","@uppy/xhr-upload":"Hq46","@uppy/form":"V2dl","@uppy/golden-retriever":"jyxJ","@uppy/redux-dev-tools":"q9by","@uppy/thumbnail-generator":"Y1mF"}],"B4ZH":[function(require,module,exports) {
"use strict";function e(){var e=document.createElement("div");return e.className="rm-topbar__spacer-sm",e}function t(t,o,c){var n=document.createElement("div");n.id="mode-button-".concat(t),n.className="bp3-button bp3-minimal bp3-small bp3-icon-".concat(o," mode-button"),n.setAttribute("style","position:relative;left:2px"),n.onclick=c,document.querySelector(".rm-topbar").appendChild(n);var r=e();document.querySelector(".rm-topbar").appendChild(r)}function o(e){console.log("🎨 switch styled-roam to ".concat(e," mode."));var t=document.querySelector("html").classList,o=localStorage.getItem("INIT_MODE")||"document";t.toggle(o),t.toggle(e),localStorage.setItem("INIT_MODE",e)}function c(e){var t=document.createElement("style");return t.innerHTML=e,t}function n(e,t){a(Object.assign(document.createElement("link"),{href:t,rel:"stylesheet"}),e,"text/css")}function r(e,t){console.log("window.URLScriptServer",window.URLScriptServer),window.URLScriptServer.includes("localhost")?n(e,"http://localhost:8080/".concat(t)):n(e,"".concat(window.URLScriptServer).concat(t))}function a(e,t,o){try{document.getElementById(t).remove()}catch(c){}Object.assign(e,{type:o,async:!1,tagId:t}),document.getElementsByTagName("head")[0].appendChild(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.createSpacer=e,exports.appendIcon=t,exports.switchTo=o,exports.generateStyleScript=c,exports.appendCSSToPage=n,exports.appendCSSToPageByEnv=r;
},{}],"itQ5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.companionOptions=exports.config=void 0;var o=require("uppy"),e={companion_auth_key:window.roamFiles.TRANSLOADIT_API_KEY||"",dropbox_app_key:window.roamFiles.DROPBOX_APP_KEY||"",token:window.roamFiles.GITHUB_ACCESS_TOKEN||"",repo:window.roamFiles.repo||"JimmyLv/images",branch:window.roamFiles.branch||"master",savePath:window.roamFiles.savePath||(new Date).getFullYear().toString(),embedType:window.roamFiles.embedType||"preview"};exports.config=e;var a={target:o.Dashboard,companionUrl:o.Transloadit.COMPANION,companionAllowedHosts:o.Transloadit.COMPANION_PATTERN};exports.companionOptions=a;
},{"uppy":"sGJ4"}],"yRIV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getFirstChildUidByBlockUid=exports.getNthChildUidByBlockUid=exports.getBlockUidsByPageTitle=exports.getPageTitlesAndBlockUidsReferencingPage=exports.getPageTitlesReferencingBlockUid=exports.getBlockUidsReferencingPage=exports.getBlockUidByTextOnPage=exports.getPageUidByPageTitle=exports.getPageViewType=exports.getAllBlockUidsAndTexts=exports.getAllBlockUids=exports.getAllPageNames=exports.getEditTimeByBlockUid=exports.getCreateTimeByBlockUid=exports.getDisplayNameByEmail=exports.getSettingsByEmail=exports.getParentTextByBlockUidAndTag=exports.getParentTextByBlockUid=exports.getPageTitleByPageUid=exports.getPageTitleByBlockUid=exports.getTextByBlockUid=exports.getEditedUserEmailByBlockUid=exports.fixViewType=exports.getTreeByPageName=exports.getTreeByBlockUid=exports.getParentUidByBlockUid=exports.getOrderByBlockUid=exports.getPageTitleReferencesByPageTitle=exports.getLinkedPageReferences=void 0;const e=e=>e.replace(/\\/,"\\\\").replace(/"/g,'\\"'),o=o=>{const i=e=>e.title?e:i(window.roamAlphaAPI.q(`[:find (pull ?e [*]) :where [?e :block/children ${e.id}]]`)[0][0]);return window.roamAlphaAPI.q(`[:find (pull ?parentPage [*]) :where [?parentPage :block/children ?referencingBlock] [?referencingBlock :block/refs ?referencedPage] [?referencedPage :node/title "${e(o)}"]]`).filter(e=>e.length).map(e=>i(e[0]))};exports.getLinkedPageReferences=o;const i=o=>window.roamAlphaAPI.q(`[:find ?t :where [?b :node/title ?t] [?b :block/children ?c] [?c :block/refs ?r] [?r :node/title "${e(o)}"]]`).map(e=>e[0]);exports.getPageTitleReferencesByPageTitle=i;const t=e=>{var o,i;return null===(i=null===(o=window.roamAlphaAPI.q(`[:find ?o :where [?r :block/order ?o] [?r :block/uid "${e}"]]`))||void 0===o?void 0:o[0])||void 0===i?void 0:i[0]};exports.getOrderByBlockUid=t;const r=e=>{var o,i;return null===(i=null===(o=window.roamAlphaAPI.q(`[:find ?u :where [?p :block/uid ?u] [?p :block/children ?e] [?e :block/uid "${e}"]]`))||void 0===o?void 0:o[0])||void 0===i?void 0:i[0]};exports.getParentUidByBlockUid=r;const l=e=>{var o;const i=window.roamAlphaAPI.pull("[:block/children, :block/string, :block/order, :block/uid, :block/heading, :block/open, :children/view-type, :block/props, :edit/time]",e),t=i[":block/children"]||[],r=i[":block/props"]||{};return{text:i[":block/string"]||"",order:i[":block/order"]||0,uid:i[":block/uid"]||"",children:t.map(e=>l(e[":db/id"])).sort((e,o)=>e.order-o.order),heading:i[":block/heading"]||0,open:i[":block/open"]||!0,viewType:null===(o=i[":children/view-type"])||void 0===o?void 0:o.substring(1),editTime:new Date(i[":edit/time"]||0),props:{imageResize:Object.fromEntries(Object.keys(r[":image-size"]||{}).map(e=>[e,{height:r[":image-size"][e][":height"],width:r[":image-size"][e][":width"]}])),iframe:Object.fromEntries(Object.keys(r[":iframe"]||{}).map(e=>[e,{height:r[":iframe"][e][":size"][":height"],width:r[":iframe"][e][":size"][":width"]}]))}}},d=e=>{var o,i;const t=null===(i=null===(o=window.roamAlphaAPI.q(`[:find ?e :where [?e :block/uid "${e}"]]`))||void 0===o?void 0:o[0])||void 0===i?void 0:i[0];return l(t)};exports.getTreeByBlockUid=d;const n=o=>{const i=window.roamAlphaAPI.q(`[:find (pull ?e [:block/children :children/view-type]) :where [?e :node/title "${e(o)}"]]`);if(!i.length)return[];const t=i[0][0],r=(null==t?void 0:t.children)||[],d=(null==t?void 0:t["view-type"])||"bullet";return r.map(e=>l(e.id)).sort((e,o)=>e.order-o.order).map(e=>exports.fixViewType({c:e,v:d}))};exports.getTreeByPageName=n;const c=({c:e,v:o})=>(e.viewType||(e.viewType=o),e.children.forEach(o=>exports.fixViewType({c:o,v:e.viewType})),e);exports.fixViewType=c;const a=e=>{var o,i;return(null===(i=null===(o=window.roamAlphaAPI.q(`[:find ?e :where [?u :user/email ?e] [?b :edit/user ?u] [?b :block/uid "${e}"]]`))||void 0===o?void 0:o[0])||void 0===i?void 0:i[0])||""};exports.getEditedUserEmailByBlockUid=a;const s=e=>{var o,i;return(null===(i=null===(o=window.roamAlphaAPI.q(`[:find ?s :where [?e :block/string ?s] [?e :block/uid "${e}"]]`))||void 0===o?void 0:o[0])||void 0===i?void 0:i[0])||""};exports.getTextByBlockUid=s;const p=e=>{var o,i;return(null===(i=null===(o=window.roamAlphaAPI.q(`[:find ?t :where [?p :node/title ?t] [?e :block/page ?p] [?e :block/uid "${e}"]]`))||void 0===o?void 0:o[0])||void 0===i?void 0:i[0])||""};exports.getPageTitleByBlockUid=p;const g=e=>{var o,i;return(null===(i=null===(o=window.roamAlphaAPI.q(`[:find ?t :where [?p :node/title ?t] [?p :block/uid "${e}"]]`))||void 0===o?void 0:o[0])||void 0===i?void 0:i[0])||""};exports.getPageTitleByPageUid=g;const u=e=>{var o,i;return(null===(i=null===(o=window.roamAlphaAPI.q(`[:find ?s :where [?p :block/string ?s] [?p :block/children ?e] [?e :block/uid "${e}"]]`))||void 0===o?void 0:o[0])||void 0===i?void 0:i[0])||""};exports.getParentTextByBlockUid=u;const k=({blockUid:e,tag:o})=>{var i,t;return(null===(t=null===(i=window.roamAlphaAPI.q(`[:find ?s :where [?p :block/string ?s] [?p :block/refs ?t] [?t :node/title "${o}"] [?b :block/parents ?p] [?b :block/uid "${e}"]]`))||void 0===i?void 0:i[0])||void 0===t?void 0:t[0])||""};exports.getParentTextByBlockUidAndTag=k;const v=e=>{var o,i;return(null===(i=null===(o=window.roamAlphaAPI.q(`[:find ?settings :where[?e :user/settings ?settings] [?e :user/email "${e}"]]`))||void 0===o?void 0:o[0])||void 0===i?void 0:i[0])||{}};exports.getSettingsByEmail=v;const w=e=>{var o,i;return(null===(i=null===(o=window.roamAlphaAPI.q(`[:find ?name :where[?e :user/display-name ?name] [?e :user/email "${e}"]]`))||void 0===o?void 0:o[0])||void 0===i?void 0:i[0])||""};exports.getDisplayNameByEmail=w;const h=e=>{var o,i;return null===(i=null===(o=window.roamAlphaAPI.q(`[:find ?t :where [?e :create/time ?t] [?e :block/uid "${e}"]]`))||void 0===o?void 0:o[0])||void 0===i?void 0:i[0]};exports.getCreateTimeByBlockUid=h;const b=e=>{var o,i;return null===(i=null===(o=window.roamAlphaAPI.q(`[:find ?t :where [?e :edit/time ?t] [?e :block/uid "${e}"]]`))||void 0===o?void 0:o[0])||void 0===i?void 0:i[0]};exports.getEditTimeByBlockUid=b;const B=()=>window.roamAlphaAPI.q("[:find ?s :where [?e :node/title ?s]]").map(e=>e[0]);exports.getAllPageNames=B;const m=()=>window.roamAlphaAPI.q("[:find ?u :where [?e :block/uid ?u] [?e :block/string]]").map(e=>e[0]);exports.getAllBlockUids=m;const x=()=>window.roamAlphaAPI.q("[:find ?u ?s :where [?e :block/uid ?u] [?e :block/string ?s]]").map(e=>({uid:e[0],text:e[1]}));exports.getAllBlockUidsAndTexts=x;const P=o=>{var i,t;return(null===(t=null===(i=window.roamAlphaAPI.q(`[:find ?v :where [?e :children/view-type ?v] [?e :node/title "${e(o)}"]]`))||void 0===i?void 0:i[0])||void 0===t?void 0:t[0])||"bullet"};exports.getPageViewType=P;const A=o=>{var i,t;return(null===(t=null===(i=window.roamAlphaAPI.q(`[:find ?u :where [?e :block/uid ?u] [?e :node/title "${e(o)}"]]`))||void 0===i?void 0:i[0])||void 0===t?void 0:t[0])||""};exports.getPageUidByPageTitle=A;const f=({text:e,title:o})=>{var i,t;return(null===(t=null===(i=window.roamAlphaAPI.q(`[:find ?u :where [?b :block/page ?p] [?b :block/uid ?u] [?b :block/string "${e}"] [?p :node/title "${o}"]]`))||void 0===i?void 0:i[0])||void 0===t?void 0:t[0])||""};exports.getBlockUidByTextOnPage=f;const y=o=>window.roamAlphaAPI.q(`[:find ?u :where [?r :block/uid ?u] [?r :block/refs ?p] [?p :node/title "${e(o)}"]]`).map(e=>e[0]);exports.getBlockUidsReferencingPage=y;const U=e=>window.roamAlphaAPI.q(`[:find ?t :where [?r :block/uid "${e}"] [?b :block/refs ?r] [?b :block/page ?p] [?p :node/title ?t]]`).map(e=>e[0]);exports.getPageTitlesReferencingBlockUid=U;const T=o=>window.roamAlphaAPI.q(`[:find ?rt ?r :where [?pr :node/title ?rt] [?r :block/page ?pr] [?r :block/refs ?p] [?p :node/title "${e(o)}"]]`).map(([e,o])=>({title:e,uid:o}));exports.getPageTitlesAndBlockUidsReferencingPage=T;const I=o=>window.roamAlphaAPI.q(`[:find ?u :where  [?b :block/uid ?u] [?b :block/page ?e] [?e :node/title "${e(o)}"]]`).map(e=>e[0]);exports.getBlockUidsByPageTitle=I;const q=({blockUid:e,order:o})=>{var i,t;return null===(t=null===(i=window.roamAlphaAPI.q(`[:find ?u :where [?c :block/uid ?u] [?c :block/order ${o}] [?p :block/children ?c] [?p :block/uid "${e}"]]`))||void 0===i?void 0:i[0])||void 0===t?void 0:t[0]};exports.getNthChildUidByBlockUid=q;const $=e=>exports.getNthChildUidByBlockUid({blockUid:e,order:0});exports.getFirstChildUidByBlockUid=$;
},{}],"j8u4":[function(require,module,exports) {
"use strict";var e=this&&this.__awaiter||function(e,t,r,s){return new(r||(r=Promise))(function(o,a){function n(e){try{i(s.next(e))}catch(t){a(t)}}function c(e){try{i(s.throw(e))}catch(t){a(t)}}function i(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(n,c)}i((s=s.apply(e,t||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0}),exports.createPageObserver=exports.createBlockObserver=exports.createHashtagObserver=exports.createButtonObserver=exports.createHTMLObserver=exports.createOverlayObserver=exports.createObserver=exports.genericError=exports.getUidsFromButton=exports.getActiveUids=exports.getUids=exports.getUidsFromId=exports.createIconButton=exports.addButtonListener=void 0;const t=require("./queries"),r=require("./writes"),s=(e,t)=>{const r=e.innerText.substring(t.length+1).split(" ");let s="";const o=[];for(const c of r)s?c.endsWith('"')?(o.push(`${s} ${c.substring(0,c.length-1)}`),s=""):s=`${s} ${c}`:c.startsWith('"')?s=c.substring(1):o.push(c);const a=Math.floor(o.length/2),n={};for(let c=0;c<a;c++)n[o[2*c]]=o[2*c+1];return n},o=(t,r)=>o=>e(void 0,void 0,void 0,function*(){const e=o.target;if(e&&"BUTTON"===e.tagName&&e.innerText.toUpperCase().trim().startsWith(t.toUpperCase())){const o=e,a=s(o,t),{blockUid:n}=exports.getUidsFromButton(o);window.roamAlphaAPI.updateBlock({block:{uid:n,string:""}}),r(a,n)}}),a=(e,t)=>document.addEventListener("click",o(e,t));exports.addButtonListener=a;const n=e=>{const t=document.createElement("span");t.className="bp3-button bp3-minimal bp3-small",t.tabIndex=0;const r=document.createElement("span");return r.className=`bp3-icon bp3-icon-${e}`,t.appendChild(r),t};exports.createIconButton=n;const c=e=>{const t=e.substring(e.length-9,e.length),r=e.substring(0,e.length-9),s=r.substring(r.length-11,r.length-1);return{blockUid:t,parentUid:isNaN(new Date(s).valueOf())?s.substring(1):s}};exports.getUidsFromId=c;const i=e=>e?exports.getUidsFromId(e.id):{blockUid:"",parentUid:""};exports.getUids=i;const d=()=>exports.getUids(document.activeElement);exports.getActiveUids=d;const l=e=>{const t=e.closest(".roam-block");return t?exports.getUids(t):{blockUid:"",parentUid:""}};exports.getUidsFromButton=l;const p=e=>{const t=(e.response?"string"==typeof e.response.data?e.response.data:JSON.stringify(e.response.data):e.message)||e.raw||"Unknown Error Occurred",s=`Error: ${t.length>50?`${t.substring(0,50)}...`:t}`;return r.updateActiveBlock(s),s};exports.genericError=p;const b=({ms:e,tag:t,className:r,nodeList:s})=>{return[...e.flatMap(e=>Array.from(e[s]).filter(e=>e.nodeName===t&&Array.from(e.classList).includes(r))),...e.flatMap(e=>Array.from(e[s]).filter(e=>e.hasChildNodes()).flatMap(e=>Array.from(e.getElementsByClassName(r))))]},m=e=>g(e,document.getElementsByClassName("roam-body")[0]);exports.createObserver=m;const u=e=>g(e,document.body);exports.createOverlayObserver=u;const g=(e,t)=>{new MutationObserver(e).observe(t,{childList:!0,subtree:!0})},x=({callback:e,tag:t,className:r,removeCallback:s})=>{const o=document.getElementsByClassName(r);Array.from(o).forEach(e),exports.createObserver(o=>{if(b({ms:o,nodeList:"addedNodes",tag:t,className:r}).map(e=>e).forEach(e),s){b({ms:o,nodeList:"removedNodes",tag:t,className:r}).map(e=>e).forEach(s)}})};exports.createHTMLObserver=x;const v=({shortcut:e,attribute:t,render:r})=>exports.createHTMLObserver({callback:s=>{if(s.innerText.toUpperCase()===t.toUpperCase().replace("-"," ")||s.innerText.toUpperCase()===e.toUpperCase()){const e=`data-roamjs-${t}`;s.getAttribute(e)||(s.setAttribute(e,"true"),r(s))}},tag:"BUTTON",className:"bp3-button"});exports.createButtonObserver=v;const f=({callback:e,attribute:t})=>exports.createHTMLObserver({tag:"SPAN",className:"rm-page-ref--tag",callback:r=>{r.getAttribute(t)||(r.setAttribute(t,"true"),e(r))}});exports.createHashtagObserver=f;const U=(e,t)=>{exports.createHTMLObserver({callback:t=>e(t),tag:"DIV",className:"roam-block"}),t&&exports.createHTMLObserver({callback:t,tag:"SPAN",className:"rm-block-ref"})};exports.createBlockObserver=U;const h=(e,r)=>exports.createObserver(s=>{const o=b({ms:s,nodeList:"addedNodes",tag:"DIV",className:"roam-block"}).map(e=>({blockUid:exports.getUids(e).blockUid,added:!0})),a=b({ms:s,nodeList:"removedNodes",tag:"DIV",className:"roam-block"}).map(e=>({blockUid:exports.getUids(e).blockUid,added:!1}));if(o.length||a.length){const s=new Set(t.getBlockUidsByPageTitle(e));[...a,...o].filter(({blockUid:e})=>s.has(e)).forEach(({blockUid:e,added:t})=>r(e,t))}});exports.createPageObserver=h;
},{"./queries":"yRIV","./writes":"qddY"}],"qddY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.deleteBlock=exports.updateBlock=exports.createPage=exports.createBlock=exports.clearBlockByUid=exports.clearBlockById=exports.updateActiveBlock=void 0;const e=require("./dom"),o=o=>window.roamAlphaAPI.updateBlock({block:{uid:e.getActiveUids().blockUid,string:o}});exports.updateActiveBlock=o;const t=o=>window.roamAlphaAPI.updateBlock({block:{uid:e.getUidsFromId(o).blockUid,string:""}});exports.clearBlockById=t;const r=e=>window.roamAlphaAPI.updateBlock({block:{uid:e,string:""}});exports.clearBlockByUid=r;const c=({node:e,parentUid:o,order:t=0})=>{const r=window.roamAlphaAPI.util.generateUID();return window.roamAlphaAPI.createBlock({location:{"parent-uid":o,order:t},block:{uid:r,string:e.text}}),(e.children||[]).forEach((e,o)=>exports.createBlock({node:e,parentUid:r,order:o})),r};exports.createBlock=c;const d=({title:e,tree:o})=>{const t=window.roamAlphaAPI.util.generateUID();return window.roamAlphaAPI.createPage({page:{title:e,uid:t}}),o.forEach((e,o)=>exports.createBlock({node:e,parentUid:t,order:o})),t};exports.createPage=d;const a=({text:e,uid:o})=>(window.roamAlphaAPI.updateBlock({block:{string:e,uid:o}}),o);exports.updateBlock=a;const l=e=>(window.roamAlphaAPI.deleteBlock({block:{uid:e}}),e);exports.deleteBlock=l;
},{"./dom":"j8u4"}],"nb4k":[function(require,module,exports) {
"use strict";module.exports=function(r,n){return function(){for(var t=new Array(arguments.length),e=0;e<t.length;e++)t[e]=arguments[e];return r.apply(n,t)}};
},{}],"zIVT":[function(require,module,exports) {
"use strict";var r=require("./helpers/bind"),t=Object.prototype.toString;function n(r){return"[object Array]"===t.call(r)}function e(r){return void 0===r}function o(r){return null!==r&&!e(r)&&null!==r.constructor&&!e(r.constructor)&&"function"==typeof r.constructor.isBuffer&&r.constructor.isBuffer(r)}function i(r){return"[object ArrayBuffer]"===t.call(r)}function u(r){return"undefined"!=typeof FormData&&r instanceof FormData}function c(r){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(r):r&&r.buffer&&r.buffer instanceof ArrayBuffer}function f(r){return"string"==typeof r}function a(r){return"number"==typeof r}function l(r){return null!==r&&"object"==typeof r}function s(r){if("[object Object]"!==t.call(r))return!1;var n=Object.getPrototypeOf(r);return null===n||n===Object.prototype}function p(r){return"[object Date]"===t.call(r)}function d(r){return"[object File]"===t.call(r)}function y(r){return"[object Blob]"===t.call(r)}function b(r){return"[object Function]"===t.call(r)}function j(r){return l(r)&&b(r.pipe)}function v(r){return"undefined"!=typeof URLSearchParams&&r instanceof URLSearchParams}function B(r){return r.replace(/^\s*/,"").replace(/\s*$/,"")}function m(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)}function g(r,t){if(null!=r)if("object"!=typeof r&&(r=[r]),n(r))for(var e=0,o=r.length;e<o;e++)t.call(null,r[e],e,r);else for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&t.call(null,r[i],i,r)}function A(){var r={};function t(t,e){s(r[e])&&s(t)?r[e]=A(r[e],t):s(t)?r[e]=A({},t):n(t)?r[e]=t.slice():r[e]=t}for(var e=0,o=arguments.length;e<o;e++)g(arguments[e],t);return r}function O(t,n,e){return g(n,function(n,o){t[o]=e&&"function"==typeof n?r(n,e):n}),t}function h(r){return 65279===r.charCodeAt(0)&&(r=r.slice(1)),r}module.exports={isArray:n,isArrayBuffer:i,isBuffer:o,isFormData:u,isArrayBufferView:c,isString:f,isNumber:a,isObject:l,isPlainObject:s,isUndefined:e,isDate:p,isFile:d,isBlob:y,isFunction:b,isStream:j,isURLSearchParams:v,isStandardBrowserEnv:m,forEach:g,merge:A,extend:O,trim:B,stripBOM:h};
},{"./helpers/bind":"nb4k"}],"RS1v":[function(require,module,exports) {
"use strict";var e=require("./../utils");function r(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}module.exports=function(i,n,t){if(!n)return i;var a;if(t)a=t(n);else if(e.isURLSearchParams(n))a=n.toString();else{var c=[];e.forEach(n,function(i,n){null!=i&&(e.isArray(i)?n+="[]":i=[i],e.forEach(i,function(i){e.isDate(i)?i=i.toISOString():e.isObject(i)&&(i=JSON.stringify(i)),c.push(r(n)+"="+r(i))}))}),a=c.join("&")}if(a){var o=i.indexOf("#");-1!==o&&(i=i.slice(0,o)),i+=(-1===i.indexOf("?")?"?":"&")+a}return i};
},{"./../utils":"zIVT"}],"GGkJ":[function(require,module,exports) {
"use strict";var t=require("./../utils");function e(){this.handlers=[]}e.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},e.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},e.prototype.forEach=function(e){t.forEach(this.handlers,function(t){null!==t&&e(t)})},module.exports=e;
},{"./../utils":"zIVT"}],"i7gz":[function(require,module,exports) {
"use strict";var r=require("./../utils");module.exports=function(t,u,e){return r.forEach(e,function(r){t=r(t,u)}),t};
},{"./../utils":"zIVT"}],"C9l1":[function(require,module,exports) {
"use strict";module.exports=function(t){return!(!t||!t.__CANCEL__)};
},{}],"TOXd":[function(require,module,exports) {
"use strict";var e=require("../utils");module.exports=function(t,r){e.forEach(t,function(e,o){o!==r&&o.toUpperCase()===r.toUpperCase()&&(t[r]=e,delete t[o])})};
},{"../utils":"zIVT"}],"obgR":[function(require,module,exports) {
"use strict";module.exports=function(e,i,s,t,n){return e.config=i,s&&(e.code=s),e.request=t,e.response=n,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e};
},{}],"lGrg":[function(require,module,exports) {
"use strict";var r=require("./enhanceError");module.exports=function(e,n,o,t,u){var a=new Error(e);return r(a,n,o,t,u)};
},{"./enhanceError":"obgR"}],"wZW9":[function(require,module,exports) {
"use strict";var t=require("./createError");module.exports=function(e,s,u){var a=u.config.validateStatus;u.status&&a&&!a(u.status)?s(t("Request failed with status code "+u.status,u.config,null,u.request,u)):e(u)};
},{"./createError":"lGrg"}],"OhlP":[function(require,module,exports) {
"use strict";var e=require("./../utils");module.exports=e.isStandardBrowserEnv()?{write:function(n,t,o,r,i,u){var s=[];s.push(n+"="+encodeURIComponent(t)),e.isNumber(o)&&s.push("expires="+new Date(o).toGMTString()),e.isString(r)&&s.push("path="+r),e.isString(i)&&s.push("domain="+i),!0===u&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var n=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};
},{"./../utils":"zIVT"}],"ExB0":[function(require,module,exports) {
"use strict";module.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)};
},{}],"BTlr":[function(require,module,exports) {
"use strict";module.exports=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e};
},{}],"d0lp":[function(require,module,exports) {
"use strict";var e=require("../helpers/isAbsoluteURL"),r=require("../helpers/combineURLs");module.exports=function(s,u){return s&&!e(u)?r(s,u):u};
},{"../helpers/isAbsoluteURL":"ExB0","../helpers/combineURLs":"BTlr"}],"T8HP":[function(require,module,exports) {
"use strict";var e=require("./../utils"),t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];module.exports=function(r){var i,o,n,s={};return r?(e.forEach(r.split("\n"),function(r){if(n=r.indexOf(":"),i=e.trim(r.substr(0,n)).toLowerCase(),o=e.trim(r.substr(n+1)),i){if(s[i]&&t.indexOf(i)>=0)return;s[i]="set-cookie"===i?(s[i]?s[i]:[]).concat([o]):s[i]?s[i]+", "+o:o}}),s):s};
},{"./../utils":"zIVT"}],"DmB6":[function(require,module,exports) {
"use strict";var t=require("./../utils");module.exports=t.isStandardBrowserEnv()?function(){var r,e=/(msie|trident)/i.test(navigator.userAgent),o=document.createElement("a");function a(t){var r=t;return e&&(o.setAttribute("href",r),r=o.href),o.setAttribute("href",r),{href:o.href,protocol:o.protocol?o.protocol.replace(/:$/,""):"",host:o.host,search:o.search?o.search.replace(/^\?/,""):"",hash:o.hash?o.hash.replace(/^#/,""):"",hostname:o.hostname,port:o.port,pathname:"/"===o.pathname.charAt(0)?o.pathname:"/"+o.pathname}}return r=a(window.location.href),function(e){var o=t.isString(e)?a(e):e;return o.protocol===r.protocol&&o.host===r.host}}():function(){return!0};
},{"./../utils":"zIVT"}],"LYEs":[function(require,module,exports) {
"use strict";var e=require("./../utils"),r=require("./../core/settle"),t=require("./../helpers/cookies"),s=require("./../helpers/buildURL"),o=require("../core/buildFullPath"),n=require("./../helpers/parseHeaders"),a=require("./../helpers/isURLSameOrigin"),i=require("../core/createError");module.exports=function(u){return new Promise(function(l,d){var p=u.data,c=u.headers;e.isFormData(p)&&delete c["Content-Type"];var f=new XMLHttpRequest;if(u.auth){var h=u.auth.username||"",m=u.auth.password?unescape(encodeURIComponent(u.auth.password)):"";c.Authorization="Basic "+btoa(h+":"+m)}var w=o(u.baseURL,u.url);if(f.open(u.method.toUpperCase(),s(w,u.params,u.paramsSerializer),!0),f.timeout=u.timeout,f.onreadystatechange=function(){if(f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))){var e="getAllResponseHeaders"in f?n(f.getAllResponseHeaders()):null,t={data:u.responseType&&"text"!==u.responseType?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:e,config:u,request:f};r(l,d,t),f=null}},f.onabort=function(){f&&(d(i("Request aborted",u,"ECONNABORTED",f)),f=null)},f.onerror=function(){d(i("Network Error",u,null,f)),f=null},f.ontimeout=function(){var e="timeout of "+u.timeout+"ms exceeded";u.timeoutErrorMessage&&(e=u.timeoutErrorMessage),d(i(e,u,"ECONNABORTED",f)),f=null},e.isStandardBrowserEnv()){var R=(u.withCredentials||a(w))&&u.xsrfCookieName?t.read(u.xsrfCookieName):void 0;R&&(c[u.xsrfHeaderName]=R)}if("setRequestHeader"in f&&e.forEach(c,function(e,r){void 0===p&&"content-type"===r.toLowerCase()?delete c[r]:f.setRequestHeader(r,e)}),e.isUndefined(u.withCredentials)||(f.withCredentials=!!u.withCredentials),u.responseType)try{f.responseType=u.responseType}catch(T){if("json"!==u.responseType)throw T}"function"==typeof u.onDownloadProgress&&f.addEventListener("progress",u.onDownloadProgress),"function"==typeof u.onUploadProgress&&f.upload&&f.upload.addEventListener("progress",u.onUploadProgress),u.cancelToken&&u.cancelToken.promise.then(function(e){f&&(f.abort(),d(e),f=null)}),p||(p=null),f.send(p)})};
},{"./../utils":"zIVT","./../core/settle":"wZW9","./../helpers/cookies":"OhlP","./../helpers/buildURL":"RS1v","../core/buildFullPath":"d0lp","./../helpers/parseHeaders":"T8HP","./../helpers/isURLSameOrigin":"DmB6","../core/createError":"lGrg"}],"T2kP":[function(require,module,exports) {
var process = require("process");
var e=require("process"),t=require("./utils"),r=require("./helpers/normalizeHeaderName"),n={"Content-Type":"application/x-www-form-urlencoded"};function a(e,r){!t.isUndefined(e)&&t.isUndefined(e["Content-Type"])&&(e["Content-Type"]=r)}function i(){var t;return"undefined"!=typeof XMLHttpRequest?t=require("./adapters/xhr"):void 0!==e&&"[object process]"===Object.prototype.toString.call(e)&&(t=require("./adapters/http")),t}var o={adapter:i(),transformRequest:[function(e,n){return r(n,"Accept"),r(n,"Content-Type"),t.isFormData(e)||t.isArrayBuffer(e)||t.isBuffer(e)||t.isStream(e)||t.isFile(e)||t.isBlob(e)?e:t.isArrayBufferView(e)?e.buffer:t.isURLSearchParams(e)?(a(n,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):t.isObject(e)?(a(n,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(t){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};t.forEach(["delete","get","head"],function(e){o.headers[e]={}}),t.forEach(["post","put","patch"],function(e){o.headers[e]=t.merge(n)}),module.exports=o;
},{"./utils":"zIVT","./helpers/normalizeHeaderName":"TOXd","./adapters/xhr":"LYEs","./adapters/http":"LYEs","process":"rH1J"}],"U2VI":[function(require,module,exports) {
"use strict";var e=require("./../utils"),r=require("./transformData"),a=require("../cancel/isCancel"),t=require("../defaults");function s(e){e.cancelToken&&e.cancelToken.throwIfRequested()}module.exports=function(n){return s(n),n.headers=n.headers||{},n.data=r(n.data,n.headers,n.transformRequest),n.headers=e.merge(n.headers.common||{},n.headers[n.method]||{},n.headers),e.forEach(["delete","get","head","post","put","patch","common"],function(e){delete n.headers[e]}),(n.adapter||t.adapter)(n).then(function(e){return s(n),e.data=r(e.data,e.headers,n.transformResponse),e},function(e){return a(e)||(s(n),e&&e.response&&(e.response.data=r(e.response.data,e.response.headers,n.transformResponse))),Promise.reject(e)})};
},{"./../utils":"zIVT","./transformData":"i7gz","../cancel/isCancel":"C9l1","../defaults":"T2kP"}],"Qj6T":[function(require,module,exports) {
"use strict";var e=require("../utils");module.exports=function(n,t){t=t||{};var r={},o=["url","method","data"],i=["headers","auth","proxy","params"],a=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],s=["validateStatus"];function c(n,t){return e.isPlainObject(n)&&e.isPlainObject(t)?e.merge(n,t):e.isPlainObject(t)?e.merge({},t):e.isArray(t)?t.slice():t}function d(o){e.isUndefined(t[o])?e.isUndefined(n[o])||(r[o]=c(void 0,n[o])):r[o]=c(n[o],t[o])}e.forEach(o,function(n){e.isUndefined(t[n])||(r[n]=c(void 0,t[n]))}),e.forEach(i,d),e.forEach(a,function(o){e.isUndefined(t[o])?e.isUndefined(n[o])||(r[o]=c(void 0,n[o])):r[o]=c(void 0,t[o])}),e.forEach(s,function(e){e in t?r[e]=c(n[e],t[e]):e in n&&(r[e]=c(void 0,n[e]))});var f=o.concat(i).concat(a).concat(s),u=Object.keys(n).concat(Object.keys(t)).filter(function(e){return-1===f.indexOf(e)});return e.forEach(u,d),r};
},{"../utils":"zIVT"}],"RB6n":[function(require,module,exports) {
"use strict";var e=require("./../utils"),t=require("../helpers/buildURL"),r=require("./InterceptorManager"),o=require("./dispatchRequest"),s=require("./mergeConfig");function i(e){this.defaults=e,this.interceptors={request:new r,response:new r}}i.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=s(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[o,void 0],r=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)r=r.then(t.shift(),t.shift());return r},i.prototype.getUri=function(e){return e=s(this.defaults,e),t(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},e.forEach(["delete","get","head","options"],function(e){i.prototype[e]=function(t,r){return this.request(s(r||{},{method:e,url:t,data:(r||{}).data}))}}),e.forEach(["post","put","patch"],function(e){i.prototype[e]=function(t,r,o){return this.request(s(o||{},{method:e,url:t,data:r}))}}),module.exports=i;
},{"./../utils":"zIVT","../helpers/buildURL":"RS1v","./InterceptorManager":"GGkJ","./dispatchRequest":"U2VI","./mergeConfig":"Qj6T"}],"RlDD":[function(require,module,exports) {
"use strict";function t(t){this.message=t}t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,module.exports=t;
},{}],"VWBb":[function(require,module,exports) {
"use strict";var e=require("./Cancel");function n(n){if("function"!=typeof n)throw new TypeError("executor must be a function.");var o;this.promise=new Promise(function(e){o=e});var r=this;n(function(n){r.reason||(r.reason=new e(n),o(r.reason))})}n.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},n.source=function(){var e;return{token:new n(function(n){e=n}),cancel:e}},module.exports=n;
},{"./Cancel":"RlDD"}],"Kbjq":[function(require,module,exports) {
"use strict";module.exports=function(n){return function(t){return n.apply(null,t)}};
},{}],"NLsH":[function(require,module,exports) {
"use strict";module.exports=function(o){return"object"==typeof o&&!0===o.isAxiosError};
},{}],"HXpE":[function(require,module,exports) {
"use strict";var e=require("./utils"),r=require("./helpers/bind"),i=require("./core/Axios"),n=require("./core/mergeConfig"),u=require("./defaults");function o(n){var u=new i(n),o=r(i.prototype.request,u);return e.extend(o,i.prototype,u),e.extend(o,u),o}var l=o(u);l.Axios=i,l.create=function(e){return o(n(l.defaults,e))},l.Cancel=require("./cancel/Cancel"),l.CancelToken=require("./cancel/CancelToken"),l.isCancel=require("./cancel/isCancel"),l.all=function(e){return Promise.all(e)},l.spread=require("./helpers/spread"),l.isAxiosError=require("./helpers/isAxiosError"),module.exports=l,module.exports.default=l;
},{"./utils":"zIVT","./helpers/bind":"nb4k","./core/Axios":"RB6n","./core/mergeConfig":"Qj6T","./defaults":"T2kP","./cancel/Cancel":"RlDD","./cancel/CancelToken":"VWBb","./cancel/isCancel":"C9l1","./helpers/spread":"Kbjq","./helpers/isAxiosError":"NLsH"}],"uj17":[function(require,module,exports) {
module.exports=require("./lib/axios");
},{"./lib/axios":"HXpE"}],"xPJX":[function(require,module,exports) {
"use strict";var t=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(r,o){function d(t){try{l(n.next(t))}catch(e){o(e)}}function u(t){try{l(n.throw(t))}catch(e){o(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(d,u)}l((n=n.apply(t,e||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0}),exports.RoamClient=void 0;class e{post(t){throw new Error("Not Implemented")}createBlock({parentUid:t,order:e,text:i,uid:n}){return this.post({location:{"parent-uid":t,order:e},block:{string:i,uid:n},action:"create-block"}).then(t=>t[0])}createAttribute({key:t,value:e,parentUid:i}){return this.appendBlock({text:`${t}:: ${e}`,parentUid:i})}createPage(t){return this.post({page:t,action:"create-page"}).then(t=>t[0])}deleteBlock(t){return this.post({block:t,action:"delete-block"}).then(t=>t)}deletePage(t){return this.post({page:t,action:"delete-page"}).then(t=>t)}moveBlock({parentUid:t,order:e,uid:i}){return this.post({location:{"parent-uid":t,order:e},block:{uid:i},action:"move-block"}).then(t=>t)}pull(t){return this.post({selector:t.selector||"[*]",uid:t.uid,action:"pull"}).then(t=>t)}q({query:t,inputs:e}){return this.post({action:"q",query:t,inputs:e}).then(t=>t.map(t=>t[0]))}updateBlock({uid:t,text:e,open:i}){return this.post({block:{string:e||"",uid:t,open:i},action:"update-block"}).then(t=>t)}updatePage(t){return this.post({page:t,action:"update-page"}).then(t=>t)}findOrCreatePage(e,i){return t(this,void 0,void 0,function*(){const t=yield this.q({query:`[:find (pull ?e [:block/uid]) :where [?e :node/title "${e}"]]`});if(0===t.length){return(yield this.createPage({title:e,uid:i})).uid}return t[0]["block/uid"]})}findOrCreateBlock({text:e,parentUid:i}){return t(this,void 0,void 0,function*(){const t=yield this.q({query:`[:find (pull ?c [:block/uid]) :where [?c :block/string "${e}"] [?p :block/children ?c] [?p :block/uid "${i}"]]`});return 0===t.length?yield this.appendBlock({text:e,parentUid:i}):t[0]["block/uid"]})}upsertBlock({uid:e,text:i,parentUid:n}){return t(this,void 0,void 0,function*(){return 0===(yield this.q({query:`[:find (pull ?b [:block/uid]) :where [?b :block/uid "${e}"]]`})).length?this.appendBlock({text:i,parentUid:n,uid:e}).then(()=>!0):this.updateBlock({uid:e,text:i})})}appendBlock({text:e,parentUid:i,uid:n}){return t(this,void 0,void 0,function*(){const t=yield this.q({query:`[:find (pull ?p [:block/children, :block/uid]) :where [?p :block/uid "${i}"]]`});if(0===t.length||!t[0])throw new Error(`No existing parent of uid ${i}`);const r=t[0]["block/children"];return(yield this.createBlock({text:e,parentUid:i,order:(null==r?void 0:r.length)||0,uid:n})).uid})}}exports.RoamClient=e;
},{}],"bRpY":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});const t=e(require("axios")),s=require("./client");class i extends s.RoamClient{constructor(e){if(super(),this.apiKey=e.apiKey||"",this.apiToken=e.apiToken||"",this.graphName=e.graphName,this.contentType=e.contentType||"application/json",!this.apiKey)throw new Error("Rest Client is missing an API Key");if(!this.apiToken)throw new Error("Rest Client is missing an API Token")}post(e){return t.default.post("https://4c67k7zc26.execute-api.us-west-2.amazonaws.com/v1/alphaAPI",Object.assign(Object.assign({},e),{"graph-name":this.graphName}),{headers:{"x-api-key":this.apiKey,"x-api-token":this.apiToken,"Content-Type":this.contentType}}).then(e=>e.data.success)}}exports.default=i;
},{"axios":"uj17","./client":"xPJX"}],"BBXk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("./client");class o extends e.RoamClient{constructor(){if(super(),!window)throw new Error("Client could only be used in a Window")}post(e){if(!window.roamDatomicAlphaAPI)throw new Error("Client could only be used with new Roam backend");return window.roamDatomicAlphaAPI(e).then(e=>void 0!==e.success?e.success:e)}}exports.default=o;
},{"./client":"xPJX"}],"gLBM":[function(require,module,exports) {
"use strict";function e(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"DfhC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=t(require("../_lib/requiredArgs/index.js"));function t(e){return e&&e.__esModule?e:{default:e}}function r(t){(0,e.default)(1,arguments);var r=Object.prototype.toString.call(t);return t instanceof Date||"object"==typeof t&&"[object Date]"===r?new Date(t.getTime()):"number"==typeof t||"[object Number]"===r?new Date(t):("string"!=typeof t&&"[object String]"!==r||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}
},{"../_lib/requiredArgs/index.js":"gLBM"}],"hf6q":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=t(require("../toDate/index.js")),r=t(require("../_lib/requiredArgs/index.js"));function t(e){return e&&e.__esModule?e:{default:e}}function u(t){(0,r.default)(1,arguments);var u=(0,e.default)(t);return!isNaN(u)}
},{"../toDate/index.js":"DfhC","../_lib/requiredArgs/index.js":"gLBM"}],"gnDw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o;var e={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function o(o,t,n){var s;return n=n||{},s="string"==typeof e[o]?e[o]:1===t?e[o].one:e[o].other.replace("{{count}}",t),n.addSuffix?n.comparison>0?"in "+s:s+" ago":s}
},{}],"WQbd":[function(require,module,exports) {
"use strict";function t(t){return function(e){var r=e||{},u=r.width?String(r.width):t.defaultWidth;return t.formats[u]||t.formats[t.defaultWidth]}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;
},{}]